Index,Message,Description
1,Update MSAL libraries and use new MSALRuntime-based broker implementation (#1191),"Use the new Windows broker which is based on the MSALRuntime; an export wrapper around a native, cross-platform MSAL library. In this new set up, we drop the .Desktop package in favour of the .Broker package that also means we drop the WebView2Loader.dll, which we didn't make use of anyway. There are a few new binaries to be distributed in the new model, including a P/Invoke layer, IdentityModel abstractions library, and the native msalruntime_x86.dll. Note that GCM still only support x86 on Windows, and only supports broker use on Windows. For this reason we don't bother adding the broker package on non-.NET Framework builds to keep the sizes on Mac/Linux to a minimum. Also update the MSAL extensions library whilst we are here to pick up various bug fixes, and drop workarounds that are no longer required for this new broker implementation!"
2,readme: add link to project roadmap (#1204),Add link to the new GCM roadmap to the README to increase discoverability.
3,readme: add link to project roadmap,Add link to the new GCM roadmap to the README to increase discoverability.
4,msauth: update MSAuth flow comment to reflect today,Update the large block comment on how we select which types of flows to use for Microsoft authentication.
5,msauth: use dummy window for WAM if no parent,"If we are unable to get a parent window handle; because for example, we don't have a console, then create a small 'dummy' window using WinForms that we can use to pass a handle to MSAL."
6,Catch OAuth refresh token errors for generic provider (#1196),"In case we have an existing refresh token, but it has expired or been revoked, we should gracefully fall back to performing an interactive OAuth flow."
7,generic: catch OAuth refresh token errors,"In case we have an existing refresh token, but it has expired or been revoked, we should gracefully fall back to performing an interactive OAuth flow."
8,msauth: always set the parent window for MSAL,"Always set the parent window handle for MSAL on Windows. Previously we only set this if provided a handle by the user/config. Now however we must always try and provide a handle because using the new MSALRuntime-based Windows broker means we must do so - MSAL no longer provides us with a 'dummy' handle to use. Use the parent console window handle, as recommended by the MSAL docs: https://github.com/AzureAD/microsoft-authentication-library-for-dotnet/wiki/wam#parent-window-handles"
9,msauth: use new Windows broker based on MSALRuntime,"Use the new Windows broker which is based on the MSALRuntime; an export wrapper around a native, cross-platform MSAL library. In this new set up, we drop the .Desktop package in favour of the .Broker package that also means we drop the WebView2Loader.dll, which we didn't make use of anyway. There are a few new binaries to be distrubuted in the new model, including a P/Invoke layer, IdentityModel abstractions library, and the native msalruntime_x86.dll. Note that GCM still only support x86 on Windows, and only supports broker use on Windows. For this reason we don't bother adding the broker package on non-.NET Framework builds to keep the sizes on Mac/Linux to a minimium."
10,msauth: update MSAL library packages to latest,
11,Fix app path name of Windows dropping file extension (#1181),"During some refactoring we accidentially introduced an error in the 'app path' on the CommandContext`; rather than trimming the file extension off (for detection of the old executable name on Windows) on a local copy, we are now updating the app wide copy! Only mutate a local copy."
12,main: fix app path name of Windows dropping exe,"During some refactoring we accidentially introduced an error in the 'app path' on the CommandContext; rather than trimming the file extension off (for detection of the old executable name on Windows) on a local copy, we are now updating the app wide copy! Only mutate a local copy."
13,issue templates: remove core suffix (#1180),"The Authentication Issue template currently directs users to run git-credential-manager-core rather than git-credential-manager, which results in a warning regarding the removal of the core suffix. This change corrects the applicable commands so that users will not see this warning."
14,Ensure we start child processes created with ProcessManager (#1177),Ensure that we actually start processes (and check they have started correctly) using the new ProcessManager/ChildProcess abstractions. Fixes #1170 Replaces #1171
15,issue templates: remove core suffix,"The Authentication issue template currently directs users to run git-credential-manager-core rather than git-credential-manager, which results in a warning regarding the removal of the core suffix. This change corrects the applicable commands so that users will not see this warning."
16,procmgr: ensure we start processes,Ensure that we actually start processes (and check they have started correctly) using the new ProcessManager/ChildProcess abstractions.
17,Target *-latest runner images in CI workflow (#1178),"We are using the *-latest runner images for release builds (win, linux), but for CI we're instead using ubuntu-18.04, ubuntu-20.04, and windows-2019 (alongside macos-latest). Let's run CI against the latest of all three OS images to match what we're using to build release bits. Ubuntu 18.04 is also deprecated as a GitHub hosted runner."
18,workflows: target *-latest runner images,"We are using the *-latest runner images for release builds, but for CI we're instead using ubuntu-18.04, ubuntu-20.04, and windows-2019 (alongside macos-latest). Let's run CI against the latest of all three OS images to match what we're using to build release bits."
19,Cache Git configuration used in Settings for the lifetime of the process (#1172),"When enumerating all Git configuration values in Settings, we currently cache a copy of all values for the lifetime of the GetSettingValues() method. This saves us some calls to Git, but we can do better. Pull-up the cache of Git configuration entries to the lifetime of the Settings object, meaning all calls to GetSettingValues() over the lifetime of the process can benefit from the cache! The savings here can be significant as each ISettings property typically results in a call to GetSettingValues(). Whilst in this space we can fix a couple of bugs:   We were not calling git config --type=path for isPath = true variables when resolving settings, and instead consulting the cache first. We always want to go to Git for these types of values.   We were not using the existing cache for unscoped entries!   In my limited testing this results in a 2-3x speedup in calls to get && store!"
20,settings: replace isPath with true when we know,"We have already checked isPath is true before calling TryGet, so let's just pass isPath: true in these calls."
21,settings: cache Git config values across process,"When enumerating all Git configuration values in Settings, we currently cache a copy of all values for the lifetime of the GetSettingValues() method. This saves us some calls to Git, but we can do better. Pull-up the cache of Git configuration entries to the lifetime of the Settings object, meaning all calls to GetSettingValues() over the lifetime of the process can benefit from the cache! The savings here can be significant as each ISettings property typically results in a call to GetSettingValues()."
22,settings: use cached Git config entries for unscoped vars,"Use the cached copy of Git configuration entries not only for URL-scoped keys, but unscoped keys too!"
23,settings: fix bug in path-type setting reading,"If we are asked for a path-type setting then we should always consult Git directly for the value, and not used cached copies of values that were acquired using git config list without a --type parameter."
24,trace2: add regions (#1162),"Add TRACE2 region tracing capability. The first six commits contain minor refactors, bug fixes, and cleanups. The first moves Trace2 messages into their own file. The second removes the unnecessary AddDots() method. The third fixes certain conflated timing information in child_start and child_exit events. The fourth ensures we're writing exit message times in UTC. The fifth adds descriptive comments to Trace2-related classes that did not yet have them. The sixth adds best-effort logic to capture thread names. The next three commits are dedicated to preparing for and adding region-related logic. The seventh commit updates custom performance format span handling to account for the repo and category fields, which are used in region tracing. The eighth adds region-related events, encapsulated in a class that inherits from DisposableObject (which in turn inherits from IDisposable). The ninth adds region tracing to methods of interest pertaining to OAuth authentication. The final commit updates GCM's documentation to inform users of how to enable and utilize Trace2 tracing. A final note: This implementation does not support nested regions, as it is not required for the current regions of interest."
25,trace2: documentation,Document how users can set up and utilize the Trace2 API.
26,trace2: add regions to OAuth,Add region tracing to key methods in OAuth2Client. This was deemed a good starting point for regions due to the server interaction required to obtain tokens. Additional regions can and should be added to additional sections of the code that are deemed performance-critical in the future.
27,trace2: add region infrastructure,"Add supporting infrastructure for regions. This includes the normal Write methods in Trace2 and corresponding Trace2 messages with a few notable distinctions:  There is an abstract parent RegionMessage that inherits from Trace2Message. The RegionEnterMessage and RegionLeave messages inherit from this parent (rather than Trace2Message) to maximize reuse of shared fields. We create a new Region class that implements DisposableObject and call it using a CreateRegion method in Trace2. This ensures that we call WriteRegionLeave before a Region object is disposed - a key requirement of Git's Trace2 API for regions.  Additionally, it allows us to manage getting the executing thread name and region timings within the class, thus removing this burden from consumers.  An additional note is that the region_enter and region_leave events will always have the same line number with this model. This was deemed to be acceptable, however, given that knowing where a region begins executing provides enough information for inspection of the region if it is needed."
28,trace2: update span handling,"Previously, we only set up custom performance format span handling for time-related information (see [1]). However, with the upcoming introduction of regions, we will need custom spans for the category and repo strings. This change refactors and adds to the current logic to correctly handle all 3 span types (i.e. time, repo, and category). [1] 59a2692"
29,trace2: capture thread name,"With the upcoming introduction of regions, we will need to capture thread names. This change adds a new static BuildThreadName() method that defines a thread name by:  Determining if it is the entry thread and, if so, calling it ""main"", per Trace2 convention. If it's not the main thread, determining whether it is a thread pool thread and naming it with a static prefix and the thread pool thread id. If it is not the entry thread or a thread pool thread, use the thread name, if it has one. Return an empty string if none of the above are true."
30,trace2: add comments,Add descriptive comments to Trace2-related classes that currently do not have any.
31,trace2: exit message time in utc,We are currently writing exit message times in local rather than UTC time. This change updates to UTC time to align with the expectations of the Trace2 API.
32,trace2: fix child process time recording,"Currently, we are recording child process times incorrectly for the performance format target. This change fixes that by:  Ensuring we're recording the absolute time in child_start messages for the performance format target, which we previously were not doing. Ensures we do not conflate the absolute and relative times in child_exit, which we were previously doing."
33,trace2: remove adddots method,"In Git, dots are only used on nested region messages, which are currently not supported in GCM. Remove the AddDots() method that is used incorrectly for formatting child process messages."
34,trace2: messages in new file,"Move Trace2 messages into a new file. The Trace2 file was getting a bit long and unwieldy, so this change is intended to separate it in a logical way into two smaller files that are (hopefully) easier to parse and reason about."
35,docs: call out different GCM install paths in WSL docs (#1168),"Add a callout to the fact the exact location of GCM may differ depending on the Git for Windows version/installation options, in our WSL docs."
36,Ensure we init IEnvironment before SessionManager (#1167),Ensure we have an instance of IEnvironment before we pass it to the SessionManager contructor. Also add some null guards to catch this problem earlier in the future.
37,docs: call out different GCM install paths in WSL docs,
38,commandcontext: ensure we init IEnvironment before SessionManager,Ensure we have an instance of IEnvironment before we pass it to the SessionManager contructor. Also add some null guards to catch this problem earlier in the future.
39,trace2: add error event (#1156),"This series adds the TRACE2 error event. The first two commits are opportunistic fixes that remove unnecessary components of Trace2 messages. The next four commits add Trace2 as a dependency to certain classes where exceptions are thrown in order to capture those exceptions with the new error event. The seventh commit adds the error event, and eighth adds special exceptions that write to Trace2. Finally, the ninth commit adds error tracing exceptions and messages throughout the GCM codebase."
40,trace2: add error tracing statements,"Add TRACE2 error tracing statements throughout GCM codebase. Note that this is a best effort - there are certain places (most notably certain static and unsafe methods) where statements were purposefully not added because it is either not safe or was deemed to much lift/churn to do so. Note that there are some instances in which a ""parameterized"" message is passed to TRACE2. This is used only when PII information could be passed into the message (e.g. through a path or remote URI) and should be redacted for collection purposes. Finally, there are certain instances in which we write an error with no exception thrown. These align with the places where we are currently writing to GCM Trace without throwing an error for the purposes of parity."
41,trace2: add exceptions,"Add exceptions for which TRACE2 tracing can optionally be used. We choose to add these exceptions to ease the experience of writing TRACE2 error information - instead of having to add a call to Trace2's WriteError() message before every exception of interest, one can instead just use the appropriate Trace2 exception."
42,trace2: add error event,"Add error event, which will capture exceptions, to Trace2 tracing system."
43,trace2: pass to GPG,"Pass instance of Trace2 to Gpg in preparation for capturing exceptions, which will be added in a future commit."
44,trace2: pass to terminal classes,"Pass instance of Trace2 to terminal classes in preparation for capturing exceptions, which will be added in a future commit."
45,trace2: pass to Git,"Pass instance of Trace2 to Git in preparation for capturing exceptions, which will be added in a future commit."
46,trace2: pass to OAuth2Client,"Pass instance of Trace2 to OAuth2Client in preparation for capturing exceptions, which will be added in a future commit. Note that this also removes the unused instance of Trace in GCM's OAuth2 infrastructure."
47,trace2: remove order from json properties,"Order was originally included for each TRACE2 json property to ensure alignment with Git's TRACE2 json property ordering. However, given that the json output is meant for consumption only by tooling (e.g. the OTel Collector) andi that the order requirement adds overhead with each new message, this change removes it."
48,trace2: remove ToLower() from message file names,"TRACE2 convention does not require file names to be lowercase. Remove the ToLower() call when setting messages' FileName properties, as it it unnecessary."
49,trace2: add performance format target (#1151),"This series adds the performance format target for TRACE2 tracing. The first two patches are small fixes for bugs I noticed as I was testing the performance format target. The first moves the FormatTargetTypes enum from the specific Trace2StreamWriter class to the shared Trace2Writer class. The second ensures the normal format event names are written in snake case (rather than lowercase). The third patch adds the ability to get the ""depth"" of the process. Because Sids and depth are process-related concepts, it removes the SidManager class and moved depth/sid-related properties and methods into the ProcessManager class. The fourth patch adds the performance format target. It includes a few notable components:  A new GetMessage method to ensure message strings written to normal and performance targets are not duplicated. A new PerformanceFormatComponent class to track sizing of optional properties of performance format messages. A BuildSpan method that Trace2Message children use to create correctly-sized ""spans"" for optional properties of performance format messages. A span is a piece of the message beginning with a pipe (|) and ending just before the next pipe or the end of the message. A BuildTimeSpan method that adjusts spans for long/short times. In future, when we have events that include performance format string span components, we will need to add an additional method to handle them."
50,Assume GitHub Enterprise instances with a null version number support OAuth (#1154),"Enterprise instances that return a null version are considered to support OAuth. Only disable OAuth as an option if we can verify we are talking to an old Enterprise Server. This is a less fragile option as we never block the user from using an auth method they could use, and don't need to special case GHAE."
51,github: enterprise instances w/ null ver support OAuth,Enterprise instances that return a null version are considered to support OAuth.
52,Better browser/interactive session detection inside of WSL (#1148),"Today we're gating browser-based authentication mechanisms behind a GUI-possible session, which isn't 100% correct. When inside of a WSL session, without WSLg enabled, it is still possible to launch a web browser in the hosting Windows session. Split the determination between ""GUI session"" and ""browser possible"", and add the special case for WSL inside an interactive Windows session. Things are complicated here because it is possible to SSH in to the WSL instance from outside of the Windows host, meaning the Windows session also doesn't have UI. This case we still need to prevent browser-based options. In order to detect these cases we need to 'punch out' to the Windows host and run a script/cmdlet to determine the session type. Fixes #878"
53,http: add support for client certificates (#1152),"Add support for automatically sending client TLS certificates using the Git configuration setting 'http.sslAutoClientCert'. This setting is currently only present in Git for Windows, and there is only respected when the SSL backend is ""schannel"". Fixes #369"
54,trace2: add performance format target,"Add the performance format target for TRACE2 tracing. This change includes a few notable components:  A new GetMessage method to ensure message strings written to normal and performance targets are not duplicated. A new PerformanceFormatComponent class to track sizing of optional properties of performance format messages. A BuildSpan method that Trace2Message children use to create correctly-sized ""spans"" for optional properties of performance format messages. A span is a piece of the message beginning with a pipe (|) and ending just before the next pipe or the end of the message. A BuildTimeSpan method that adjusts spans for long/short times. In future, when we have events that include performance format string span components, we will need to add an additional method to handle them."
55,trace2: add process depth calculation,"The performance format target requires recording of process depth. We use the number of forward slashes in the process's sid as a convenient way to determine this. Because the sid and the depth are process-related concepts, this change also moves sid/depth related properties into ProcessManager.cs and removes the SidManager.cs class."
56,http: add support for client certificates,"Add support for automatically sending client TLS certificates using the Git configuration setting 'http.sslAutoClientCert'. This setting is currently only present in Git for Windows, and there is only respected when the SSL backend is ""schannel""."
57,trace2: write normal format events in snake case,"A previous patch 1 added the ability to write strings in snake case. However, this was not applied to writing events in the normal format - events that should be written as child_start or child_exit are currently written as childstart and childexit. This patch corrects this issue."
58,trace2: move formattargettypes,"Move the FormatTargetTypes enum from the specific Trace2StreamWriter class to the shared Trace2Writer class, since the Trace2FileWriter class also uses values from this enum."
59,wsl: detect host Windows session 0 and disable browser,"In order to detect if we have an interactive Windows desktop session from inside WSL we need to 'punch out' from WSL to determine the session ID and window station. Strictly speaking, except for session 0 (from Vista onwards), any Windows session can have exactly one interactive window station (always called WinSta0). However, because we cannot easily determine the window station name from a simple cmd/powershell script, we take a simplified approach which isn't 100% accurate. Instead, we only permit browser auth methods if we are NOT in Windows session 0; any other Windows session we assume we are in WinSta0. The default OpenSSH Server configuration (Windows 10+) has sshd running as the built-in NT user NETWORK_SERVICE, which means it runs in session 0 (the services session). This is most common scenario, other than using WSL from a 'real', interactive Windows session that we're likely to face."
60,wsl: add ability to run CMD/PowerShell scripts from WSL,Add ability to launch cmd.exe or PowerShell.exe scripts from inside a WSL distribution. In order to discover the location of cmd.exe/powershell.exe we need search the Windows file system that's mounted by default /mnt/c. We inspect the /etc/wsl.conf file to respect users who have changed the default mount location for Windows drives.
61,ini: add basic INI file deserialiser,Add a basic INI file deserialiser
62,wsl: add ability to detect WSL distro and version,"Add methods to the WslUtils class to enable detection of a WSL distribution, and also determine which WSL version is being used. Version 1 uses the Windows NT kernel and runs the distribution in the same user-mode space as Windows programs. Version 2 uses a light-weight VM to host a real Linux kernel, and runs the distribution also inside the VM; interop with Windows is achieved using other mechanisms."
63,browser: split browser-check from desktop session check,Split the web browser check from the desktop session checks. In future commits we will enhance the browser-check to take in to account the WSL special case.
64,fs: add abstractions for reading all text and enum dir,Add abstractions to the IFileSystem interface for enumerating directories and reading the entire contents of a file to a string.
65,posix-session: check for Wayland display envars,Also check for the WAYLAND_DISPLAY environment variable when determining if a graphical session/display exists for POSIX systems.
66,env: avoid virtual member call in ctor; all refresh,"We had a virtual member call in the constructor of the various IEnvironment implementations, which is a code smell. Instead, lazily populate the _variables cache dictionary, and add an explict Refresh method to refresh the cache. We call Refresh in the SetEnvironmentVariable method for convenience. For testing we simply pipe through the pre-computed variables in the internal constructor."
67,settings: support scoped enterprise settings (#1149),Add support for remote URL-scoped enterprise default settings. Fixes #983
68,settings: support scoped enterprise settings,Add support for remote URL-scopes enterprise default settings.
69,Ensure we create a WindowsProcessManager on Windows (#1146),"We are creating a WindowsProcessManager implementation on macOS and a non-Windows/WSL aware, plain ProcessManager on Windows - this is the reverse of what we should do. Fix this."
70,procmgr: ensure we create a WindowsProcessManager on Windows,"We are creating a WindowsProcessManager implementation on macOS and a non-Windows/WSL aware, plain ProcessManager on Windows - this is the reverse of what we should do. Fix this."
71,trace2: add child start and exit events (#1131),"This change adds the child_start and child_exit events to GCM's TRACE2 tracing system. The first patches are either bug fixes or prep for the bigger refactors involved in making child start and exit work. The first patch puts sid-related logic into its own class, which allows us to immediately set up GCM's sid in Program.cs to ensure Git processes that are executed before TRACE2 tracing is set up have the correct parent sid. The next patch adds a FileWriter class and uses it (rather than Trace2StreamWriter) to write to files, which ensures processes aren't overwriting one another's data. The third patch adds a snake casing string extension to ensure we write multi-word enum values according to the TRACE2 convention. The fourth patch ensures we do not redirect stderr for Git-related processes, as it was discovered to cause deadlocks when TRACE2 was enabled. The fifth patch refactors GCM's diagnostics to depend on an instance of CommandContext rather than individual dependencies within CommandContext. The sixth patch re-configures TRACE2 to depend on an instance of CommandContext rather than individual dependencies within CommandContext, to start up earlier, and for operations to no-op if Trace2 has not yet been initialized (i.e. when child git config processes run before we're able to set up tracing). The seventh patch wraps Process.cs to give us the needed level of control to write TRACE2 child process start and exit events. The eighth patch (finally) adds the new child start and exit events."
72,trace2: add child_start and child_exit events,Write the TRACE2 child_start and child_exit events for each child process invoked by GCM.
73,trace2: add process wrapper,"Wrap the Process class to allow finer-grained control for writing future process-related TRACE2 events. Pull process-relevant information out of IEnvironment/Environment and into its own process-oriented ProcessManager class, interface, and child classes. This allows us to  maintain a functional, non-circular order of dependencies with our process wrapper. Add a ChildProcess class to wrap certain functionality of Process.cs. This gives us the level of control required to write child process information to TRACE2 in the final patch in this series. Update all current invocations of Process to instead use this wrapper."
74,trace2: refactor to prepare for child process-related events,"The TRACE2 child start and child exit events will require some refactoring around the way GCM handles processes to provide finer-grained control and the ability to capture process-related information. In preparation for this, we need to do some re-organization of the Trace2 code. With this change we:  Move TRACE2 tracing startup into Program.cs for GCM and the helper exes. This allows us to start tracing earlier and capture more events. Add an Initialize() method to Trace2.cs to detect whether Trace2 tracing is enabled and set long-lived variables. This also sets a new _initialized property that allows us to determine whether Trace2 tracing has been initialized. Trace2 tracing is disabled until _initialized is set to true by the Initialize() method. Change the name of TryParseSettings() to InitializeWriters() for improved clarity. Pass the CommandContext to Trace2 to use its Streams and Environment."
75,trace2: refactor diagnostics,"Diagnostics classes are dependent on multiple pieces of the CommandContext. Adding child start and child exit events will mean yet another dependency (Trace2). To simplify in anticipation of this, update Diagnostic classes to take in the CommandContext and access applicable dependencies from it."
76,trace2: redirect standard error,"When a new process is created, standard error can optionally be redirected. This is useful in situations where the output is verbose and should be suppressed rather than output to the console, for example. However, this can cause an issue with TRACE2 deadlocks, as Git writes to standard error and GCM does nothing. This change corrects this by not redirecting standard error for Git-related processes (which also extends to places such as Environment.cs, given Git's reliance on envars). Finally, there are some places where we should still redirect standard error for the reason mentioned above. For these scenarios, comments have been added to help readers understand the purposeful nature of these redirects."
77,trace2: add string extension for snake casing,"The TRACE2 convention is for multi-word event names to be written in snake case (all lower case with words separated by underscores). While up until this point we've had single-word event names, this series will add the multi-word child start and child exit events. In anticipation of that, this change adds a string extension that will be used in later patches to write multi-word enum values in snake case."
78,trace2: add file writer,"Our current strategy of using a Stream to write to files for Trace2 tracing is not working - Git processes are overwriting GCM's data and vice versa. To resolve this, switch from using the Trace2StreamWriter to write to files to a dedicated Trace2FileWriter class. This also includes a refactor to add a parent base class for Trace2Writers for shared functaionality between the Trace2StreamWriter and Trace2FileWriter."
79,trace2: create sid manager class,"Create static class to manage session ids (sids). This allows us to immediately set up GCM's sid in Program.cs to ensure Git processes that are executed before Trace2 tracing is set up have the correct parent sid. We also use it to give helper exes unique child sids. Although this will also execute when TRACE2 tracing is not enabled, it should not be an issue - it will simply set the (unused) GIT_TRACE2_PARENT_SID varible for the process to a GUID."
80,org-rename: update references to GitCredentialManager (#1141),"The GitCredentialManager org is being re-named to git-ecosystem. In light of this, update references to GitCredentialManager to instead reference git-ecosystem."
81,build(deps): bump mjcheetham/update-homebrew from 1.2 to 1.3 (#1142),Bumps mjcheetham/update-homebrew from 1.2 to 1.3.
82,build(deps): bump mjcheetham/update-homebrew from 1.2 to 1.3,Bumps mjcheetham/update-homebrew from 1.2 to 1.3. - Release notes - Commits  updated-dependencies: - dependency-name: mjcheetham/update-homebrew   dependency-type: direct:production   update-type: version-update:semver-minor ... Signed-off-by: dependabot[bot] support@github.com
83,org-rename: update references to GitCredentialManager,"The GitCredentialManager org is being re-named to git-ecosystem. In light of this, update references to GitCredentialManager to instead reference git-ecosystem."
84,Add login hint support for GitHub browser-based OAuth authentication (#1137),"If a username is specified in the remote URL then include this as a login hint when performing OAuth authentication for GitHub. This can help users of multiple accounts select the correct account before the OAuth flow completes and returns a token for the wrong account. GitHub shows this nice prompt when a login hint is provided that does not match the currently logged-in user:  At the same time, if there is no logged-in user, then the login page's username box is already filled in:  The login hint is specified to GitHub via the extra login query parameter to the authorization endpoint."
85,uri: support ports and split queries/fragments from path (#825),"GCM currently ignores ports in URIs. This means attempting to authenticate to a URI with a port can lead to some unexpected behavior (e.g. shortcutting the provider auto-detect process won't work, even if the provider is set in config). This change adds support for ports by updating GetGitConfigurationScopes() to recognize them. This change also updates GetRemoteUri() to recognize paths with queries and fragments, as that issue was uncovered during the implementation of the GetGitConfigurationScopes() fix. Without it, input paths containing queries and/or fragments get saved as part of Uri.Path, which converts the query '?' and the fragment '#' to url encoding. I validated these changes with unit tests for applicable scenarios and by running a locally-compiled version of GCM with tracing enabled and the  following config set: credential.http://localhost:7990/bitbucket.provider bitbucket Trace logs showed that the override was recognized and auto-detection was skipped."
86,uri: support ports,"GCM currently ignores ports in URIs. This means attempting to authenticate to a URI with a port can lead to some unexpected behavior (e.g. shortcutting the provider auto-detect process won't work, even if the provider is set in config). This change adds support for ports by updating GetGitConfigurationScopes() to recognize them. This change also updates GetRemoteUri() to recognize paths with queries and fragments, as that issue was uncovered during the implementation of the GetGitConfigurationScopes() fix. Without it, input paths containing queries and/or fragments get saved as part of Uri.Path, which converts the query '?' and the fragment '#' to url encoding."
87,oauth: add test to validate extra params don't override std params,Add a unit test to ensure that we do not allow overriding or replacing standard OAuth2 query parameters.
88,github: add login hint support for web browser login,If a username is specified in the remote URL then include this as a login hint when performing OAuth authentication for GitHub.
89,oauth: add ability to pass extra query params in authcode call,Add the ability to include extra query parameters in the authorization code grant request. This allows consumers of the OAuth2Client to customise the login experience that may include vendor specific args.
90,oauth: drop unused protected properties from client,
91,git: consistently read from stdout before exit wait (#1136),"We should always try and drain standard output before waiting for the Git process to exit. We do this for all other calls that expect output, but missed the TryGet method. This is important if Git ever writes out so much data to stdout that we buffer the output, and then Git will not exit until it can finish writing (and we'd be waiting for Git to exit)."
92,trace2: guard against null pipe client in dispose (#1135),Ensure that we don't try to dispose of the pipe client in the Trace2CollectorWriter when it hasn't been created yet.
93,git: consistently read from stdout before exit wait,"We should always try and drain standard output before waiting for the Git process to exit. We do this for all other calls that expect output, but missed the TryGet method."
94,trace2: guard against null pipe client in dispose,Ensure that we don't try to dispose of the pipe client in the Trace2CollectorWriter when it hasn't been created yet.
95,.net tool: clarify install instructions (#1126),"Because we use dotnet publish (which requires a specific framework) to create the payload of our .NET tool package, the package is tied to the framework specified. This means that it will only work with the corresponding .NET SDK for that framework. In light of this, update the .NET tool install instructions to specify that users must download the latest .NET 6.0 SDK as a prerequisite for installing the package, since that is the framework for which we currently publish. This will also need to be updated whenever we upgrade to a new Target Framework. Additionally, remove Windows as a supported .NET tool platform. Since we currently target .NET Framework rather than .NET, the package cannot actually be installed on Windows."
96,.net tool: clarify install instructions,"Because we use dotnet publish (which requires a specific framework) to create the payload of our .NET tool package, the package is tied to the framework specified. This means that it will only work with the corresponding .NET SDK for that framework. In light of this, update the .NET tool install instructions to specify that users must download the latest .NET 6.0 SDK as a prerequisite for installing the package, since that is the framework for which we currently publish. This will also need to be updated whenever we upgrade to a new Target Framework. Additionally, remove Windows as a supported .NET tool platform. Since we currently target .NET Framework rather than .NET, the package cannot actually be installed on Windows."
97,build(deps): bump lycheeverse/lychee-action from 1.5.4 to 1.6.1 (#1125),Bumps lycheeverse/lychee-action from 1.5.4 to 1.6.1.
98,build(deps): bump lycheeverse/lychee-action from 1.5.4 to 1.6.1,Bumps lycheeverse/lychee-action from 1.5.4 to 1.6.1. - Release notes - Commits  updated-dependencies: - dependency-name: lycheeverse/lychee-action   dependency-type: direct:production   update-type: version-update:semver-minor ... Signed-off-by: dependabot[bot] support@github.com
99,trace2: remove inaccurate warning and add UI helper exit calls (#1114),"Remove warning about being unable to set up tracing from Trace2 TryParseSettings method. This method should just check to see whether TRACE2 is enabled - if it is not, it does not need to warn the user, as we only collect traces from those who actively choose to opt in. Additionally, GCM's UI helpers are connected to the TRACE2 system via the Start() call in ApplicationBase.cs. Since this call records Version and Start events, ensure a corresponding Exit event is called before the helper process completes."
100,"trace2: add default thread name value of ""main""","The TRACE2 convention for thread naming is for each child process's main thread of execution to be named ""main."" In GCM, however, we encountered an issue with our UI Helper exes - their main threads of execution are named AppMain. To temporarily work around this issue, we default the thread name for all TRACE2 events to ""main"" (rather than changing GCM's process names). This will do for our current events, which are all called from the main thread of execution. However, it is important to note that future events (i.e. regions) will require deeper thought around the GCM/TRACE2 process model, as they will be called on threads from .NET's ThreadPool rather than the main thread of execution."
101,trace2: add exit event to UI helpers,"GCM's UI helpers are connected to the TRACE2 system via the Start() call in ApplicationBase.cs. Since this call records Version and Start events, ensure a corresponding Exit event is called before the helper process completes."
102,docs: fix path in docs/rename.md (#1115),Fix an incorrectly-formatted Windows environment variable in rename.md.
103,fix path,
104,trace2: remove warning from tryparsesettings,"Remove warning about being unable to set up tracing from Trace2 TryParseSettings method. This method should just check to see whether TRACE2 is enabled - if it is not, it does not need to warn the user, as we only collect traces from those who actively choose to opt in."
105,trace2: add infrastructure and initial events (#1045),"Add initial TRACE2 functionality, including:  Small refactorings to make TryGetAssemblyVersion accessible outside of the DiagnosticCommand class and shared trace logic accessible from a TraceUtils class. Addition of a Trace2CollectorWriter class, which handles writing to the Telemetry Tool/OTel collector and a Trace2StreamWriter class, which handles writing to stderr/files. Basic TRACE2 functionality, including the ability to add writers to different format targets, logic to send messages to these writers, and the ability to release these writers before application exit. Support for session IDs. Ability for users to enable normal/event format targets. Writing Version, Start, and Exit events."
106,trace2: write exit event,"Add TRACE2 exit event, following the pattern established with the version and start events."
107,trace2: write version and start events,"Write the TRACE2 version event, which identifies the event format version (currently hardcoded as 3 as it is in Git) and the version of GCM. Additionally, write the TRACE2 start event, which reflects the elapsed time and application arguments (including the application name). These are paired because the telemetry tool/OTel collector require both these events to be sent for a given session."
108,trace2: detect event/normal formats,"Add the infrastructure to detect whether a user has enabled the TRACE2 event format or normal format targets. This implementation has been designed to be extended to include the perf format target in a future series. Additionally it involved some refactoring/cleanup to set the Application Path and InstallationDirectory in the CommandContext, rather than in GCM/UI helper Program.cs files."
109,trace2: add sid,"A key component of Git's TRACE2 tracing system is the session id (sid). This identifies the process instance to allow all events emitted by it to be identified. We check to see if a parent sid (i.e. from a Git process) exists. If so, we separate this sid from the GCM sid (a GUID) using a ""/"". If there is no parent sid, we simply generate a GUID for the GCM sid and use that. The above also requires addition of a new SetEnvironmentVariable() method in EnvironmentBase.cs to set the GCM-specific SID variable."
110,trace2: add streamwriter,"Add Trace2StreamWriter class which will be used to write to stderr or a file, based on the TextWriter that is passed to it. It will also adapt the output format based on the format target that is passed to it."
111,trace2: add collectorwriter,Add the Trace2CollectorWriter class to accept Trace2 messages in the event target format and write them to the OTel Collector/Telemetry Service.
112,trace2: add initial functionality,"Add initial TRACE2 functionality, including:  The ability to add writers (which will eventually write to Normal, Perf, and Event format targets). An abstract Trace2Message class. Logic to send Trace2Messages to writers. Ability to release writers prior to application exit."
113,traceutils: add traceutils,"The implementation of TRACE2 tracing will require truncation of long file names just as TRACE does. To prepare for this, move this logic out of the TRACE class and into its own method in a new static TraceUtils class. Additionally, add a unit test to validate this logic."
114,assembly: add assemblyutils,"The implementation of TRACE2 tracing will require use of the TryGetAssemblyVersion method. To prepare for this, move this method out of the DiagnoseCommand class and into its own static class."
115,Add OAuth support to generic host provider (#1062),"Add ability to provide OAuth-based authentication for generic hosts by way of simple Git configuration. When a remote URL does not match any known host provider plugin, the generic provider will now first check for OAuth configuration in the Git config or environment variables. If such config is available then we try and perform OAuth authentication. Support for device code flow is optional, and refresh tokens will be used if the service supports and returns them. Users can make use of existing Git config include to easily organise and share custom OAuth configurations."
116,generic: add OAuth test for generic provider,
117,docs: add generic OAuth documentation,
118,oauth: provide UI prompts for generic OAuth auth,Add detection and use of GUI prompts for OAuth authentication.
119,generic-ui: add WPF impl of OAuth and device code,Add the WPF based GUI implementation of the OAuth and device code generic prompts.
120,generic-ui: add Avalonia impl of OAuth and Device Code,Add AvaloniaUI based implementations of the OAuth and Device Code generic UI prompts.
121,oauth-ui: Add shared VMs and commands for OAuth,"Add shared view models and commands for the OAuth GUI prompts. Two new commands and VMs are added, one for the initial 'mode' selection, and another to display the device code."
122,generic: add OAuth refresh token support,"Add support for storing and using OAuth refresh tokens. Prepend ""refresh_token"" as a subdomain to give better chances of avoiding a name clash compared with appending ""/refresh_token"" to the path component."
123,generic: add OAuth support for browser & devicecode,Add OAuth support for the generic provider offering browser (authcode grant) and device code (device auth grant) support. Device code and mode selection is initially only offered for TTY users.
124,generic: add ability to read generic OAuth config,"Teach the Generic host provider to read configuration for OAuth-based authentication. These are largely parameters required for the OAuth2Client to be constructed including Client ID/Secret, Redirect URI and Scopes."
125,linux: ensure symbols tarball contains symbols (#1061),A user pointed out in a recent GCM issue that our symbols tarball does not actually contain symbols (see 1 for additional details). Fix the pack.sh script to package the correct files into the symbols tarball.
126,linux: ensure symbols tarball contains symbols,A user pointed out in a recent GCM issue that our symbols tarball does not actually contain symbols (see 1 for additional details). Fix the pack.sh script to package the correct files into the symbols tarball.
127,basic-ui: fix bug in VM property,Fix a bug in a view model property for the basic credentials prompt; we should be updating the backing field and also raising the PropertyChanged event.
128,docs: update git credential cache platforms (#1049),"GCM's documentation states that git's credential cache is supported on Windows. Unfortunately, due to lack of Unix socket support on Windows versions prior to Windows 10, this feature is not currently supported on Windows, so this change removes it from the list of platforms on which this credstore can be used. See this issue for more details."
129,docs: update git credential cache platforms,"GCM's documentation states that git's credential cache is supported on Windows. Unfortunately, due to lack of Unix socket support on Windows versions prior to Windows 10, this feature is not currently supported on Windows, so this change removes it from the list of platforms on which this credstore can be used. See 1 for more details."
130,docs: standardize gitlab documentation (#1023), Swap scopes order to match GitLab UI Update casing to match https://github.com/GitCredentialManager/git-credential-manager/blob/main/docs/configuration.md
131,Update gitlab.md,
132,docs: fix typo in rename.md,Convert incorrect use of it's to its.
133,Fix typo,
134,Update gitlab.md,
135,Update gitlab.md,
136,Update gitlab.md,
137,Update gitlab.md,
138,Update gitlab.md,
139,Update gitlab.md,
140,Swap order to match GitLab UI,
141,build(deps): bump DavidAnson/markdownlint-cli2-action from 8.0.0 to 9.0.0 (#1015),Bumps DavidAnson/markdownlint-cli2-action from 8.0.0 to 9.0.0.
142,build(deps): bump DavidAnson/markdownlint-cli2-action,Bumps DavidAnson/markdownlint-cli2-action from 8.0.0 to 9.0.0. - Release notes - Commits  updated-dependencies: - dependency-name: DavidAnson/markdownlint-cli2-action   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
143,release: fix tarball signing and Debian compression (#1009),"While we added PGP signatures for tarballs in 7baac73, we did not notice that, while ESRP returns a file with the tar.gz extension, it is actually the signature file, not the tarball itself. Correct with this change and validate tarball moving forward so it doesn't happen again! Additionally, a user reported in #997 that the latest GCM Debian package didn't work on Debian distributions. It appears that the version of dpkg that ships with Debian does not support zstd compression. Enforcing xz compression resolves the issue. Finally, this provided an opportunity to clean up some unused variables in pack.sh for Linux and to ensure we check the architecture is found before attemping to use the ARCH variable. These changes were validated with this successful test run in my fork."
144,release: force xz compression for Debian package,"The GCM Debian package currently fails to install on Debian with the following error: error: archive 'gcm-linux_amd64.2.0.886.deb' uses unknown compression for member 'control.tar.zst', giving up It appears that the version of dpkg that ships with Debian does not support zstd compression 1. Enforcing xz compression resolves the issue. This also provides an opportunity to clean up some unused variables in pack.sh and ensure we check the architecture is found before attempting to use the ARCH variable."
145,release: fix tarball signing,"While we added PGP signatures for tarballs in 7baac73, we did not notice that, while ESRP returns a file with the tar.gz extension, it is actually the signature file, not the tarball itself. Correct with this change and validate tarball moving forward so it doesn't happen again!"
146,"docs(install): fix link to the "".NET tool"" section (#1007)","Something I noticed today, while looking for a way to install Git Credential Manager for Windows/ARM64."
147,"docs(install): fix link to the "".NET tool"" section","At least in GitHub-flavored Markdown, that section title gets transformed into the anchor net-tool, not .NET-tool. Signed-off-by: Johannes Schindelin johannes.schindelin@gmx.de"
148,secret service: fix error creating credential (#996),"Multiple Linux users have reported that they are unable to use Secret Service as their credential store, as GCM throws the following error: sec_free: Assertion `cell->requested > 0' failed. The root cause is that we're using the libsecret secret_value_get function to obtain secret data, then attempting to free the string with secret_password_free. It appears that secret_password_free is only meant to be used to free nonpageable memory [1], however. Removing this call fixes the issue, as verified with a successful git-credential-manager diagnose (which was previously failing with the above error). [1] secret_password_free manpage https://www.manpagez.com/html/libsecret-1/libsecret-1-0.18.6/libsecret-Password-storage.php#secret-password-free Fixes #793"
149,secret service: fix error creating credential,"Multiple Linux users have reported that they are unable to use Secret Service as their credential store, as GCM throws the following error: sec_free: Assertion `cell->requested > 0' failed. The root cause is that we're using the libsecret secret_value_get() function to obtain secret data, then attempting to free the string with secret_password_free(). It appears that secret_password_free() is only meant to be used to free nonpageable memory [1], however. Removing this call fixes the issue, as verified with a successful git-credential-manager diagnose (which was previously failing with the above error). [1] secret_password_free manpage https://www.manpagez.com/html/libsecret-1/libsecret-1-0.18.6/libsecret-Password-storage.php#secret-password-free"
150,release: correct nupkg path for publishing (#995),"When we began signing the .NET tool in 80cc677, we did not update the path used for publishing to nuget.org. Fixing with this change."
151,release: correct nupkg path for publishing,"When we began signing the .NET tool in 80cc677, we did not update the path used for publishing to nuget.org. Fixing with this change."
152,install from source: publish before attempting install (#987),The changes from 3978b0e introduced a bug in the install from source workflow - we were attempting to copy binaries before publishing them! Fixing with this change. Validated with this passing workflow in my fork.
153,install from source: publish before attempting install,The changes from 3978b0e introduced a bug in the install from source workflow - we were attempting to copy binaries before publishing them! Fixing with this change.
154,release: sign Linux tarball and .NET tool (#985),Update release workflow to:  Split the Linux build.sh script and the .NET tool pack-tool.sh script to more closely align with our compilation and packaging for macOS. Sign Linux tarball in addition to the Debian package.and sign/validate/publish .NET tool .nupkg. Sign/validate/publish the .NET tool .nupkg with every release.  I validated these changes with this successful workflow run in my fork.
155,release: sign and publish .NET tool nupkg,Update release workflow to sign the .NET tool payload and package and upload the nupkg with each release (in addition to publishing to nuget.org).
156,.NET tool: split packaging script,Split pack-tool.sh into two scripts (layout.sh and pack.sh) to allow for payload and package signing.
157,release: sign Linux tarball,Sign Linux tarball in addition to Debian package.
158,build: split linux build.sh script,"Split the current build.sh script into 3 scripts: build.sh, layout.sh, and pack.sh. This has the advantages of decoupling building and packaging and more-closely reflects the process we use for building/packaging macOS binaries."
159,Fix various problems with install path and app path variables (#968),
160,docs: fix debian uninstall instructions (#975),Update Debian package uninstall instructions to reflect re-name of GCM Core to GCM. Fixes #973
161,build(deps): bump DavidAnson/markdownlint-cli2-action from 7.0.0 to 8.0.0 (#976),Bumps DavidAnson/markdownlint-cli2-action from 7.0.0 to 8.0.0.
162,build(deps): bump DavidAnson/markdownlint-cli2-action,Bumps DavidAnson/markdownlint-cli2-action from 7.0.0 to 8.0.0. - Release notes - Commits  updated-dependencies: - dependency-name: DavidAnson/markdownlint-cli2-action   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
163,docs: fix debian uninstall instructions,Update Debian package uninstall instructions to reflect re-name of GCM Core to GCM.
164,app: fix Windows app-path resolution,"Fix another bug in how we compute the Application Executable path on Windows. It some cases we can still get a relative/non-absolute path to the entry executable. If we get a filename/non-path from the native API calls then return null and fallback to using process/module image resolution instead. For .NET Framework on Windows, this is OK. We will want to revisit this on .NET (Core) on Windows, if and when we get around to that..."
165,app: fix bug in oldname warning on Windows,"Fix a bug in the old-name warning detection that only presents on Windows when bundled with Git for Windows, and when configured using the shorthand config credential.helper=manager-core. In this scenario, our argv[0] is missing the "".exe"" extension (that's actually present in the file name of course) because ... mingw reasons. Instead of matching ""git-credential-manager-core.exe"" on Windows, just strip "".exe"" if present on Windows, and always match ""git-credential-manager-core"" on all platforms."
166,app: fix installation dir calculation,"On Windows, when invoked as a partial name (e.g., manager) our command line argv[0] is just a file name, not a full file path! We incorrectly assumed that Environment.GetCommandLineArgs()[0] was always absolute! We should instead use AppContext.BaseDirectory that, in all circumstances tested, all on TFMs and OSs, all publish options, and as a .NET tool... returns the expected full, absolute path to the installation directory."
167,env: ensure we don't return empty PATH vars on Windows,"Ensure that we don't return empty PATH values on Windows when splitting. It's common that on Windows the PATH can be inadvertently modified such that an empty value is included, and this can lead to weird resolution of executables using the current directory. As it stands, no existing codepaths would trigger this today when invoked by Git for Windows, but let's make sure this never happens in the future by mistake!"
168,authbase: gracefully handle no-default UI helper case,"If there is no hard-coded UI helper, we should gracefully handle the lookup by returning false, rather than crashing due to a argument exception when passing null or an empty string to a Path API."
169,build(deps): bump lycheeverse/lychee-action from 1.5.2 to 1.5.4 (#955),"Bumps lycheeverse/lychee-action from 1.5.2 to 1.5.4.  Release notes Sourced from lycheeverse/lychee-action's releases.  Version 1.5.4 What's Changed  Cleanup old lychee bin after install by @​mre in lycheeverse/lychee-action#172  Full Changelog: https://github.com/lycheeverse/lychee-action/compare/v1...v1.5.4 Version 1.5.3 What's Changed  Bump lychee version to fix issues with email checking by @​mre in lycheeverse/lychee-action#171  Full Changelog: https://github.com/lycheeverse/lychee-action/compare/v1...v1.5.3    Commits  4dcb8be bump version 0682ed6 Cleanup old lychee bin after install (#172) 02de231 Update lychee-actionn release in docs 0fcec0b Bump lychee version (#171) See full diff in compare view     Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.   Dependabot commands and options   You can trigger Dependabot actions by commenting on this PR: - `@dependabot rebase` will rebase this PR - `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it - `@dependabot merge` will merge this PR after your CI passes on it - `@dependabot squash and merge` will squash and merge this PR after your CI passes on it - `@dependabot cancel merge` will cancel a previously requested merge and block automerging - `@dependabot reopen` will reopen this PR if it is closed - `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually - `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself) - `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself) - `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)  "
170,Ensure certificate validation works on Mac/Linux (#954),"In 65cead2b5caa we removed the .NET Standard target in favour of a direct .NET 6 target, however we missed this conditional compilation symbol referrering to NETSTANDARD."
171,build(deps): bump lycheeverse/lychee-action from 1.5.2 to 1.5.4,Bumps lycheeverse/lychee-action from 1.5.2 to 1.5.4. - Release notes - Commits  updated-dependencies: - dependency-name: lycheeverse/lychee-action   dependency-type: direct:production   update-type: version-update:semver-patch ... Signed-off-by: dependabot[bot] support@github.com
172,http: ensure cert validation works on Mac/Linux,"In 65cead2b5caa we removed the .NET Standard target in favour of a direct .NET 6 target, however we missed this conditional compilation symbol referrering to NETSTANDARD."
173,Fix problems with application path and installation directory resolution (#951),"When we introduced the rename warning in #551, there was broken logic for resolving the actual invoked program name on Mac and Linux. Windows We continue to use CommandLineToArgvW(GetCommandLine(), ..) to return the absolute, full path to the entry executable. macOS Switch from _NSGetArgv() to _NSGetExecutablePath(..) which, like the Windows APIs above, returns the full path to the entry executable (or symlink). Linux As there is no equivalent to CommandLineToArgvW or _NSGetExecutablePath here, we instead do some path computation based on the form of argv[0] that we get from /proc/self/cmdline. - If the value is an absolute path, just use that. - If the value is relative to the current directory (./name) then combine this with the current directory. - If the value contains a directory separator (dir/name) then also resolve this from the current directory. - Otherwise, this argv[0] value must have been a file name (name) resolved from the $PATH. If we still don't manage to resolve from the $PATH, try and resolve the symlink /proc/self/exe that points to the executable image that was loaded from disk. Note that we may miss any intermediate link names here, but it's better than nothing.  In addition, we also never tested the .NET Tool scenario after updating the ICommandContext.ApplicationPath to use the entry executable name, whereas previously this was computed from the .NET assembly path. Introduce a separate concept, the InstallationDirectory that always points to the home of the core assemblies. This is used for resolving things like in-box UI helpers."
174,libsecret: fix warning with move to net6.0 TFM,"Moving to target .NET 6 directly with the core library has unearthed a bug/warning in the secret service implementation. IntPtr is a value type, so it can never be null.. we should have been comparing this pointer to IntPtr.Zero."
175,argv0: fix implementation of getting native argv[0],"Our previous implementation of getting the native argv[0] was flawed on Linux and Mac. The Mac _NSArgv and Linux /proc/self/cmdline function/proc-file return the raw argv[0] which may not be an absolute or rooted path, but we expected this to be the same. Additionally, the logic of appending the CWD to the argv[0] value when the latter wasn't rooted was also just wrong! Update to now use _NSExecutablePath on macOS, which always returns the full absolute path, and add correct handling of unrooted argv[0] on Linux. Furthermore, on Linux, if we are unable to handle the value from /proc/self/cmdline, we fall back to resolving the /proc/self/exe symlink instead."
176,apppath: introduce ICommandContext.InstallationDirectory,"Introduce a new property on the ICommandContext that represents the GCM installation directory, separate from the application executable path. The app executable is not always found in the installation directory if the app exe path is a symlink (or we're a .NET tool where the AppHost is outside of the tool store)."
177,fs: resolve symlinks and fix bugs in *FileSystem impls,"There is a systematic bug in all the IFileSystem implementations in that we were incorrectly calling Path.GetFileName rather than Path.GetFullPath, meaning we're only comparing the file names of two paths for equality! Fix this. For Mac and Linux we also handle symlinks (or firmlinks) by now using the .NET APIs to resolve links. On .NET Framework we don't do anything."
178,linux: align with dotnet distros (#953),Update install-from-source.sh and validate-install-from-source.yml to align with dotnet-supported Linux distributions. Clarify in README.md that the dotnet-supported distributions are the only ones for which GCM guarantees support. Link to successful validation workflow: https://github.com/ldennington/git-credential-manager/actions/runs/3415831593
179,docs: udpate comment on supported distros,Update comment around GCM-supported distributions in README.md to reflect decision to align with dotnet-supported distributions.
180,install-from-source: align with dotnet-supported distros,Update install-from-source script to align with dotnet's supported Linux distributions: https://learn.microsoft.com/en-us/dotnet/core/install/linux
181,build(deps): bump lycheeverse/lychee-action from 1.5.1 to 1.5.2 (#952),Bumps lycheeverse/lychee-action from 1.5.1 to 1.5.2.
182,Convert issue templates to YAML,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
183,build(deps): bump lycheeverse/lychee-action from 1.5.1 to 1.5.2,Bumps lycheeverse/lychee-action from 1.5.1 to 1.5.2. - Release notes - Commits  updated-dependencies: - dependency-name: lycheeverse/lychee-action   dependency-type: direct:production   update-type: version-update:semver-patch ... Signed-off-by: dependabot[bot] support@github.com
184,build: replace netstandard2.0 TFM with net6.0,"Replace netstandard2.0 where possible with net6.0, or dual target net6.0 and net472 for projects that are included on Windows."
185,docs: Update README docs links (#946),"Update README docs links to point at release branch. The goal of this change is to avoid confusing users when we merge major changes (e.g. the executable rename, the dotnet tool install option, etc.) to main but have not yet released them. With this update, the documentation should align with the latest release."
186,docs: Update README docs links,"Update README docs links to point at release branch. The goal of this change is to avoid confusing users when we merge major changes (e.g. the executable rename, the dotnet tool install option, etc.) to main but have not yet released them. With this update, the documentation should align with the latest release."
187,release: remove automatic workflow trigger (#943),Remove the trigger to automatically run the release workflow when changes are merged to the release branch. This will give us better control over our release process and allow us to make changes to the branch if needed without running the workflow.
188,Update README.md,
189,diagnose: always use IHttpClientFactory for diagnose (#942),"The Network diagnostic currently makes two passes of the tests, one using a 'raw' HttpClient and another using one created by the product HttpClientFactory. However, we've not actually been using the factory-built client in the tests! Furthermore, the raw HTTP client will not exercise test correctly if the machine is behind a corporate proxy, so let's just drop that option. Fixes #927"
190,release: remove automatic workflow trigger,Remove the trigger to automatically run the release workflow when changes are merged to the release branch. This will give us better control over our release process and allow us to make changes to the branch if needed without running the workflow.
191,diagnose: always use IHttpClientFactory for diagnose,"The Network diagnostic currently makes two passes of the tests, one using a 'raw' HttpClient and another using one created by the product HttpClientFactory. However, we've not actually been using the factory-built client in the tests! Furthermore, the raw HTTP client will not exercise test correctly if the machine is behind a corporate proxy, so let's just drop that option."
192,docs: absolute --> relative paths,Change absolute paths to relative paths in install.md to remain consistent with the style used in other files.
193,Fix docs/x.md relative links (#938),"Some link references were broken, e.g. [gcm-wsl]: docs/wsl.md led to .../docs/docs/wsl.md (note 2 docs in path) This PR fixes those links to properly point to .../docs/x.md (1 docs in path)"
194,Fix docs/x.md relative links,"Some link references were broken, e.g. [gcm-wsl]: docs/wsl.md led to .../docs/docs/wsl.md (note 2 docs in path) This PR fixes those links to properly point to .../docs/x.md (1 docs in path)"
195,docs: migrate install/resource README sections to new files (#937),"In an effort to make the README more concise, move install instructions/additional resources into new install.md and docs/README.md files."
196,docs: separate additional resources from README,"In an effort to make our README more concise, move additional resources into a new docs/README.md file."
197,docs: separate install information from README,"In an effort to make our README more concise, move GCM install instructions into a new install.md file. Additionally, add a section detailing how to install GCM as a dotnet tool."
198,build: fix/speed-up build graph dependencies (#924),"When building the entire solution, we need to ensure the various ""Installer."" and ""Packaging."" projects are not built at the same time as other projects, especially on Windows, where we may hit file locking problems. The installer projects call a build script internally that calls a dotnet publish on various projects. By making the installer projects reference (but not consume) the dependent projects we ensure MSBuild won't build them until the end, and prevent file access errors. At the same time, we can probably remove the ""-m:1"" flags that tell MSBuild to only build one project at a time."
199,build(deps): bump actions/setup-dotnet from 3.0.2 to 3.0.3 (#932),build(deps): bump actions/setup-dotnet from 3.0.2 to 3.0.3
200,build(deps): bump actions/setup-dotnet from 3.0.2 to 3.0.3,Bumps actions/setup-dotnet from 3.0.2 to 3.0.3. - Release notes - Commits  updated-dependencies: - dependency-name: actions/setup-dotnet   dependency-type: direct:production   update-type: version-update:semver-patch ... Signed-off-by: dependabot[bot] support@github.com
201,Add KDE Gitlab (invent.kde.org) instance to the list of supported services (#920),This adds support for another popular OSS project (KDE) to Git Credential Manager.
202,windows: add missing DllImport attribute to LocalFree (#923),Accidentally left off the [DllImport] attribute when adding this extern.. now it'll actually point to the correct function in the DLL.
203,build: fix/speed-up build graph dependencies,"When building the entire solution, we need to ensure the various ""Installer."" and ""Packaging."" projects are not built at the same time as other projects, especially on Windows, where we may hit file locking problems. The installer projects call a build script internally that calls a dotnet publish on various projects. By making the installer projects reference (but not consume) the dependent projects we ensure MSBuild won't build them until the end, and prevent file access errors. At the same time, we can probably remove the ""-m:1"" flags that tell MSBuild to only build one project at a time."
204,windows: add missing DllImport attribute to LocalFree,
205,Update markdownlint-cli2-action to 7.0.0 (#910),"This required fixing some newly found lint issues. Additionally some issues are in files (workflow templates) that are structured in such a way that do not easily allow correction, so I have adjusted the linter configuration to ignore these files for now. They could instead be corrected in a later commit."
206,"Rename entry executable to drop ""-core"" suffix (#551)","Rename the main entry executable from git-credential-manager-core(.exe) to simply git-credential-manager(.exe), now that the older GCM4W has been removed from the Git for Windows project as an option (and the GCMC project has been renamed). We do not rename the Debian package ID, nor the Homebrew Cask name yet as this will require more thought forr migration. To help with migration somewhat, create symlinks and shim/copy-executables for the original executable name ""git-credential-manager-core(.exe)"" for consumers who have not updated to the new version. We detect if the consumer is launching us via the ""-core"" symlink or executable shim by consulting the platform-native APIs to get the original ""argv[0]"". All of the .NET APIs sadly don't give us the real ""argv[0]"", so we need to use native APIs... If we detect use of the old name, print a warning that the user should update their configuration, and a help link for more information."
207,docs: add documentation about the GCM.exe rename,"Add documentation with information about the GCM.exe rename, and how to fix-up any configuration after the change. The aka.ms/gcm/rename shortlink points to this document."
208,gcm: create symlinks and warn message for gcmcore exec,"Create symlinks and shim/copy-executables for the original exec ""git-credential-manager-core(.exe)"" name for consumers who have not updated to the new name. We detect if the consumer is launching us via the ""-core"" symlink or executable shim by consulting the platform-native APIs to get the original ""argv[0]"". All of the .NET APIs sadly don't give us the real ""argv[0]"", so we need to use native APIs... If we detect use of the old name, print a warning that the user should update their configuration, and a help link for more information."
209,Add KDE Gitlab (invent.kde.org) instance to the list of supported services.,
210,Update markdownlint-cli2-action to 7.0.0,"This required fixing some newly found lint issues. Additionally some issues are in files (workflow templates) that are structured in such a way that do not easily allow correction, so I have adjusted the linter configuration to ignore these files for now. They could instead be corrected in a later commit."
211,Merge pull request #905 from mjcheetham/pkgicon,Add icon to dotnet tool NuGet package
212,dotnet-tool: include core UI helper in package,We missed the core UI helper from the dotnet tool package - include it!
213,winui: fix up a bug that was introduced in an earlier PR,Fix a bug that was introduced in an earlier PR to build the Core UI helper (WPF) for Windows. We don't need to specify the TFM or RID for these projects.
214,dotnet-tool: add GCM icon to tool nuget package,Add the GCM icon to the NuGet package used for the dotnet tool. The image is copied to the root of the package under a new images directory (/images). The tool payload continues to be copied under the required /tool/net6.0/any directory. Modify the pack-tool.sh script to keep all build output under the /out directory of the repository (which is in .gitignore). Output from running pack-tool.sh now looks like this: . └── out     └── shared         └── DotnetTool             └── nupkg                 └── Debug                     ├── git-credential-manager.$VERSION.nupkg                     ├── images       # icon                     ├── payload      # dotnet publish output                     └── payload.sym  # pdbs The contents of the NuGet package looks like this: . ├── [Content_Types].xml ├── _rels ├── git-credential-manager.nuspec ├── images │   └── icon.png          # copied from the output images/ dir ├── package │   └── services │       └── metadata/... └── tools     └── net6.0         └── any/...       # copied from the output payload/ dir
215,build: explicitly pass version and conf args to pack-tool.sh,"Explicitly pass the version and build configuration to the dotnet tool packaging script. Also revert to a default Debug config for local builds; this is consistent with all other artifacts in the build for dev (macOS pkg, Windows installers, deb, etc)"
216,Merge pull request #902 from GitCredentialManager/dependabot/github_actions/actions/setup-dotnet-3.0.2,build(deps): bump actions/setup-dotnet from 3.0.1 to 3.0.2
217,Merge pull request #903 from mjcheetham/fix-winstall,Include git-credential-manager-ui.exe in installer
218,gcm: rename entry executable to drop -core suffix,"Rename the main entry executable from git-credential-manager-core(.exe) to simply git-credential-manager(.exe), now that the older GCM4W has been removed from the Git for Windows project as an option (and the GCMC project has been renamed). We do not rename the Debian package ID, nor the Homebrew Cask name yet as this will require more thought for migration."
219,windows: include git-credential-manager-ui.exe in installer,We forget to include the core UI helper (WPF) in the Windows installer manifest.. add it!
220,build(deps): bump actions/setup-dotnet from 3.0.1 to 3.0.2,Bumps actions/setup-dotnet from 3.0.1 to 3.0.2. - Release notes - Commits  updated-dependencies: - dependency-name: actions/setup-dotnet   dependency-type: direct:production   update-type: version-update:semver-patch ... Signed-off-by: dependabot[bot] support@github.com
221,Merge pull request #901 from ldennington/rename-dotnet-tool-package,dotnet tool: rename package
222,dotnet tool: rename package,"Change the name and author of the dotnet tool package from GitCredentialManager.Cli to git-credential-manager. The reason for this change is that we were able to transfer ownership of this package (which was previously owned by JetBrains) to the git-credential-manager organization on NuGet.org.  There should not be any customer impact related to this change, as the GitCredentialManager.Cli package had yet to be published."
223,Merge pull request #886 from ldennington/dotnet-tool,release: package gcm as dotnet tool
224,release: publish gcm as dotnet tool,"Add a new DotnetTool project containing the needed files to publish GCM as a cross-platform dotnet tool. Additionally, update GCM to use helper dlls if exes are not found in the Application directory. At present, dlls are only used in the dotnet tool scenario to minimize the package size and to make it cross-platform compatible."
225,Merge pull request #890 from GitCredentialManager/dependabot/github_actions/actions/checkout-3.1.0,build(deps): bump actions/checkout from 3 to 3.1.0
226,Merge pull request #607 from mminns/issue/573-OAuth2-support-for-Bitbucket-DC,Issue/573 OAuth2 support for Bitbucket DC
227,Merge pull request #895 from wolf99/document-doc-linting,Document how to lint documentation
228,Merge pull request #894 from wolf99/github-usercontent-images,Replace githubusercontent images
229,Merge pull request #893 from wolf99/update-rfc-links,Updates RFC links to authoritative URL
230,Merge pull request #892 from GitCredentialManager/mjcheetham/linux-install-link,docs: use short link for Linux install src
231,Merge pull request #887 from GitCredentialManager/dependabot/github_actions/actions/setup-dotnet-3.0.1,build(deps): bump actions/setup-dotnet from 3.0.0 to 3.0.1
232,Document how to lint documentation,Adds a brief section to the docs/document.md on how linting of documents is done.
233,Replace githubusercontent images,Fixes #863
234,Updates RFC links to authoritative URL,"The current URLs use an outdated source. The rfc-editor.org site is stated to be the authoritative source, see aaragraph 3 on https://www.ietf.org/standards/rfcs/. The redirection used at the existing URL cause the later versions of the link checker to fail for the instances in the documentation. However, instances in the source code comments have also been updated."
235,docs: use short link for Linux install src,Use a short link for the Linux install from source script. Signed-off-by: Matthew John Cheetham mjcheetham@outlook.com
236,build(deps): bump actions/checkout from 3 to 3.1.0,Bumps actions/checkout from 3 to 3.1.0. - Release notes - Changelog - Commits  updated-dependencies: - dependency-name: actions/checkout   dependency-type: direct:production   update-type: version-update:semver-minor ... Signed-off-by: dependabot[bot] support@github.com
237,Issue 573 docs: Document the use and development of OAuth2 for Bitbucket DC,Update docs/environment.md and docs/configuration.md to document the new configuration options for managing Bitbucket DC OAuth2 Client ID and Client Secrets Update docs//bitbucket-development.md to document how to create a test Bitbucket DC environment and OAuth2 setup
238,Issue 573 Add support for OAuth2 for Bitbucket DC,New implementations of the interface IBitbucketRestApi and abstract class BitbucketOAuth2Client provide client code for interacting with the Bitbucket DC REST API and OAuth2 implementation. Extending the BitbucketRestApiRegistry and OAuth2ClientRegistry to provide these Bitbucket DC implementations when a DC host is detected means BitbucketAuthentication and BitbucketHostProvider remain agnostic about which form of Bitbcuket host they are interacting with Prior to this feature users were limited to using Basic Auth or HTTP Access Tokens to interact securely with a Bitbucket DC instance. OAuth2 provides a better solution for SSO environments
239,Issue 573 Refactor Bitbucket implementation to allow for the support of Bitbucket DC's OAuth2 implementation,The BitbucketAuthentication and BitbucketHostProvider remain the single points of entry to processing authentication for all Bitbucket hosts. Bitbucket DC and Bitbucket Cloud do not share common REST APIs or common OAuth2 implementations. The interface IBitbucketRestApi and abstract class BitbucketOAuth2Client effectively hide the differences in implementation from BitbucketAuthentication and BitbucketHostProvider The interface IBitbucketRestApi and abstract class BitbucketOAuth2Client provide clear extension points to implement OAuth2 support for Bitbucket DC
240,Issue 573 Write the results of GET command calls to the log,"Use the WriteDictionarySecrets() method to safely log the dictionary of data that will be written back to the calling Git process When it is necessary to follow the processing in GCM during a call from Git the GCM_TRACE environment variable can be used to print trace information to standard error, however the ultimate output of GET commands would not be included in this trace information This lack of visibility is especially problematic during multi-stage authentication such as OAuth, adding safe logging of the final output makes it possible to follow the GCM process in realtime from inputs to outputs during Git GET requests"
241,build(deps): bump actions/setup-dotnet from 3.0.0 to 3.0.1,Bumps actions/setup-dotnet from 3.0.0 to 3.0.1. - Release notes - Commits  updated-dependencies: - dependency-name: actions/setup-dotnet   dependency-type: direct:production   update-type: version-update:semver-patch ... Signed-off-by: dependabot[bot] support@github.com
242,Merge pull request #883 from GitCredentialManager/dependabot/github_actions/actions/setup-dotnet-3.0.0,build(deps): bump actions/setup-dotnet from 2 to 3.0.0
243,Merge pull request #884 from ldennington/fix-windows-zip,release: fix Windows archives
244,release: fix Windows archives,"When we transitioned our release workflow to GitHub actions, we started using Powershell's Compress-Archive cmdlet to zip our Windows binaries. However, this unfortunately does not play nicely with unzip in WSL. Since we're publishing the archives from an Ubuntu machine, switch to creating the archives with the zip command in the default bash shell to correct the issue."
245,build(deps): bump actions/setup-dotnet from 2 to 3.0.0,Bumps actions/setup-dotnet from 2 to 3.0.0. - Release notes - Commits  updated-dependencies: - dependency-name: actions/setup-dotnet   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
246,Merge pull request #871 from mjcheetham/generic-ui,Add generic username/password UI to all platforms
247,install: include core UI app in all installers,
248,basic: replace system UI with new UI helper,Replace calls to the native system UI prompts with shelling out to the generic helper UI.
249,wpfui: add a WPF-based UI for generic cred prompt,Add a WPF/Windows UI prompt for the generic/basic username and password prompt.
250,ui: add Avalonia-based UI for generic cred prompt,Add an Avalonia-based UI prompt for the generic/basic credential prompt.
251,ui: add generic 'basic' credentials UI VM and command,Add a generic credentials prompt view model and command for collecting username/passwords.
252,Merge pull request #867 from hickford/gitlab-config,Add config for several popular GitLab instances to docs
253,Convenience config for several popular GitLab instances,
254,avnui: include images in app app views in Avaloina UIs,Include the images resource across all the Avalonia UI applications.
255,avn: workaround a macOS window focus bug,"For some reason on macOS windows that are activated are not appearing on top, and get lost behind other application windows. The platform implementation on macOS is seemingly correctly calling the makeKeyAndOrderFront native windowing API, but it's not being made ""key and front"". Setting the ""topmost"" flag true (and then false again) brings our windows to the front, which is what we want."
256,avn: update to latest Avalonia UI,
257,Merge pull request #862 from wolf99/doc-line-length,Unify line length across docs
258,Update docs/gitlab.md,Co-authored-by: Lessley Dennington ldennington@github.com
259,Convenience config for several popular GitLab instances,
260,Break inline code line,
261,Unify line length across docs,
262,Merge pull request #680 from wolf99/ref-style-links,Switch to reference style links
263,Add review suggestions,
264,Switch to ref style links,
265,Fix azrepos link,
266,Convert prose ref links to snake-case,
267,Remove Host Provider doc front matter,
268,Switch to reference style links,
269,Merge pull request #851 from ldennington/remove-azure-storage-key,release: access Azure Storage Account with login credentials
270,release: access Azure Storage Account with login credentials,Use --auth-mode login command to access ESRP Azure Storage Account instead of AZURE_STORAGE_KEY. This allows us to reuse the git-fundamentals-esrp service principal login credentials we're already using for other resources and is a more secure mode of access than using the storage key.
271,Merge pull request #839 from ldennington/ubuntu-jammy,install from source: use native feeds for Ubuntu 22.04
272,Merge pull request #842 from ldennington/ooo-template,workflows: auto-generate maintainer away issue
273,workflows: auto-generate maintainer away issue,Add a new workflow to create issues that will notify GCM users and contributors of when maintainers are away and the repo is not being actively monitored. This workflow is controlled by a workflow_dispatch trigger that requires both a start date and end date for maintainer absence before running.
274,install from source: clean up comments,Update comments in the install from source script so that:  Sentences begin with capital letters. Sentences end with punctuation. Comments are within 80 characters per line.
275,install from source: add support for Jammy Jellyfish,"The dotnet team recently added support for installing natively from Jammy feeds on Ubuntu 22.04: https://github.com/dotnet/core/issues/7699 This unfortunately created problems with our current install from source script, as it caused conflicts with the packages.microsoft.com feed we use for Debian/Ubuntu. This change modifies the Debian/Ubuntu dotnet install process to install from Jammy feeds for users on Ubuntu 22.04 and greater while continuing to use the packages.microsoft.com feed for Debian and older Ubuntu versions."
276,Merge pull request #813 from ldennington/validate-installers,release: add installer validation
277,release: add installer validation,"Add basic installer validation to release pipeline for Windows, macOS (x64 only), and Linux (Debian package only). Validation runs the installers/any necessary setup and checks that the installed version matches the expected version."
278,Merge pull request #798 from ldennington/homebrew-publish-m1-package,macos arm64: Homebrew updates
279,homebrew release: update regex and remove PR,"Update release asset regex to specify runtime and version groups so that update-homebrew task can correctly detect version. Additionally, remove alwaysUsePullRequest parameter so that Homebrew releases become automatic."
280,Merge pull request #826 from GitCredentialManager/dependabot/github_actions/mjcheetham/update-homebrew-1.2,build(deps): bump mjcheetham/update-homebrew from 1.1 to 1.2
281,build(deps): bump mjcheetham/update-homebrew from 1.1 to 1.2,Bumps mjcheetham/update-homebrew from 1.1 to 1.2. - Release notes - Commits  updated-dependencies: - dependency-name: mjcheetham/update-homebrew   dependency-type: direct:production   update-type: version-update:semver-minor ... Signed-off-by: dependabot[bot] support@github.com
282,Merge pull request #819 from ldennington/update-azure-resource-names,release: update Azure storage resource names
283,release: update Azure storage resource names,"The previous Azure resource architecture separated GCM and Microsoft Git resources into different Resource Groups. This led to redundancy - we were storing all our secrets, certificates, etc. in two places. These updates reflect the consolidation of these resources into the new esrp Resource Group."
284,Merge pull request #810 from GitCredentialManager/dependabot/github_actions/lycheeverse/lychee-action-1.5.1,build(deps): bump lycheeverse/lychee-action from 1.5.0 to 1.5.1
285,build(deps): bump lycheeverse/lychee-action from 1.5.0 to 1.5.1,Bumps lycheeverse/lychee-action from 1.5.0 to 1.5.1. - Release notes - Commits  updated-dependencies: - dependency-name: lycheeverse/lychee-action   dependency-type: direct:production   update-type: version-update:semver-patch ... Signed-off-by: dependabot[bot] support@github.com
286,Merge pull request #806 from GitCredentialManager/dependabot/github_actions/DavidAnson/markdownlint-cli2-action-6,build(deps): bump DavidAnson/markdownlint-cli2-action from 5.1.0 to 6
287,Merge pull request #800 from GitCredentialManager/dependabot/nuget/src/shared/Core/Newtonsoft.Json-13.0.1,build(deps): bump Newtonsoft.Json from 12.0.3 to 13.0.1 in /src/shared/Core
288,build(deps): bump DavidAnson/markdownlint-cli2-action from 5.1.0 to 6,Bumps DavidAnson/markdownlint-cli2-action from 5.1.0 to 6. - Release notes - Commits  updated-dependencies: - dependency-name: DavidAnson/markdownlint-cli2-action   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
289,Merge pull request #804 from mjcheetham/diagnose-hang,Reorder Git config list process exit wait in diagnose command
290,diagnose: don't await Git exit on config list,"Do not wait for the Git process to exit until we start reading from the stdout stream, to prevent a deadlock. This is what we do in the product code too."
291,Merge pull request #803 from mjcheetham/macos-latest,
292,ci: use macos-latest image for CI builds,"The macos-10.15 image for CI builds is deprecated on GitHub Actions. We should update this to a supported image. Given we are actually running our release builds on macos-latest, we should probably be running CI on the same image too!"
293,Merge pull request #700 from wolf99/link-checker,Add broken link checking Action
294,Ignore GitLab FAQ link,
295,Add broken link checking Action,Also adjusts the entire workflow to only run if a PR or push contains changes to a markdown file
296,build(deps): bump Newtonsoft.Json in /src/shared/Core,Bumps Newtonsoft.Json from 12.0.3 to 13.0.1. - Release notes - Commits  updated-dependencies: - dependency-name: Newtonsoft.Json   dependency-type: direct:production ... Signed-off-by: dependabot[bot] support@github.com
297,Merge pull request #797 from ldennington/ssl-cert-updates,release: consume auto-rotated SSL certificate
298,release: consume auto-rotated SSL certificate,"Update release workflows to consume new autorotated SSL certificate. There are two main parts:   Add the ""SendX5c"" : ""true"" key value pair to the contents of our ESRP Auth Json file. This allows us to use the new auto-rotating certificate without having to upload/manage it from our App Registration.i   Remove the AZURE_AAD_ID_SSL secret/environment variable. The new certificate was generated with our main AZURE_AAD_ID app registration, so this extra ID is no longer needed. "
299,Merge pull request #790 from cornejom/gitlab-support-docs,Delete outdated instruction for GitLab Support
300,Deleted outdated instruction for GitLab Support,Deleted instruction concerning 'Expire access tokens' option when setting up OAuth app.
301,Merge pull request #788 from ldennington/arm-fix,macos build: use runtime instead of osx-x64
302,macos build: use runtime instead of osx-x64,Update DISTOUT variable in build.sh to use RUNTIME variable instead of hard-coding osx-x64.
303,Merge pull request #778 from GyroJoe/main,Fix Mac x64 pkg
304,Fixes typo in Mac dist script,
305,Merge pull request #764 from timsu92/patch-1,docs(WSL): Correct the path to the executable
306,docs(WSL): Correct the path to the executable,
307,Merge pull request #759 from GitCredentialManager/readme-update,docs: update readme to show osx-arm64 support
308,docs: update readme to show osx-arm64 support,
309,Merge pull request #754 from mjcheetham/bb-newui,New Bitbucket UI with separate OAuth and User/Pass options
310,Merge pull request #756 from mjcheetham/win-manifest,Generate Windows application manifests for all executable projects
311,bb-winui: update WPF based Bitbucket prompt,Update the WPF-based Bitbucket authentication prompt in a similar fashion to the Avalonia ones.
312,bb-avnui: update Avalonia-based Bitbucket UI,"Update the Avalonia-based UI for Bitbucket authentication to use a tabbed interface, showing each authentication mode in a separate tab. The new ""credentials"" prompt can offer and serve all authentication modes in a simpler way that pushes users who can to authenticate using a more secure method (where we don't capture the user/pass)."
313,bitbucket: update shared UI helper code for new UI model,"Update shared UI helper code for Bitbucket to remove the separate OAuth prompt/command, and allow basic authentication (username/password) options to be hidden based on a command-line option."
314,windows: generate app manifests for all exe projects,"Automatically generate the correct application manifest for Windows executable projects that we produce. The manifests are required on Windows systems newer than Windows 8 to correctly access versioning APIs that will otherwise always report ""Windows 8"", even on later versions. The manifest we generate states we are compatible with all versions of Windows from 7 to 11 (inclusive)."
315,bitbucket: remove separate OAuth prompt/dialog,"Remove the separate ""OAuth Required"" UI prompt in favour of just always showing the ""Credentials"" prompt, where users can select the OAuth auth mode directly anyway."
316,bb-test: rename test/mock helper methods,Rename some of the test/mock helper methods to be a little easier to grok/be shorter.
317,bb-test: remove unused test helpers,
318,bb-test: inline 2FA mocking test helpers,Inline some 2FA mock setup helper methods that differ only by a single boolean argument.
319,bb-test: update tests to await ICredential results,
320,Merge pull request #743 from mminns/issue/722,bitbucket: remove 2FA test
321,Merge pull request #748 from mjcheetham/wincred-fix,Fix bug in Windows credential manager credential matching on port numbers
322,wincred: fix bug in credential matching on port nums,"Fix a bug whereby we would not correctly match existing credentials when port numbers were used in the search. Additionally, actually now store the non-default port number in the target URI if there is one given. We also now always trim any trailing '/' from the end of the path of a service/target URI. Previously we erronously only trimmed the '/' from a 'pathless' URI, i.e.: https://example.com/      => https://example.com   https://example.com/path/ => https://example.com/path/ This is a safe change since the Enumerate method that is used by both Get and Remove already matches both trailing and non-trailing slashes by virtue of creating and comparing components of a System.Uri which does normalisation of the path. Both Get and Remove would act (eventually) to remove any bad credentials stored with a trailing slash, even if new credentials are only written out without the slash."
323,Merge pull request #745 from GitCredentialManager/ubuntu-uninstall-docfix,
324,docs: fix incorrect Ubuntu uninstall command,Fix the Ubuntu uninstall command which used the wrong package name.
325,issue #722,"BitbucketHostProvider: fix runtime exceptions  when authentication requests for Bitbucket DC would incorrectly call a Bitbucket Cloud REST API A bug was introduced in commit: 5a2cfd7. Prior to this only authentication requests for Bitbucket Cloud would try and automatically determine if 2FA was required by the current user by calling a Bitbucket Cloud REST API using user provided Basic Auth credentials Commit: 5a2cfd7 removed checking of the current host was Bitbucket Cloud vs DC. This meant the check would be run for Bitbucket Cloud and DC regardless. It would fail for Bitbucket DC The fix is more radical than simply re-instating the check on the type of Bitbucket host. From 1st March 2022 support for using a Bitbucket Cloud user's account password to access REST or Git HTTPS operations has been removed, https://atlassian.community/t5/x/x/ba-p/1948231. As such this automatic test to see if 2FA is required no longer works. Therefore the check against the Bitbucket Cloud REST API has been removed in its entirety"
326,Merge pull request #739 from mjcheetham/cred-noop,Avoid writing credentials when account & password have not changed
327,libsecret: don't write out identical creds,Avoid writing out credentials that are the same as an already existing cred.
328,osx: only update keychain entries when needed,Only update keychain entries when the password/secret is different to what is already stored.
329,Merge pull request #731 from ldennington/ignore-homebrew-git,Ignore Homebrew Git shim
330,wincred: do not write creds if nothing has changed,"Do no bother writing out credentials if there is already an existing credential for the same account, with the same secret/password value."
331,plaintextstore: do not write creds if nothing has changed,Do not needlessly serialise the credential file again if nothing has changed from an existing credential found. This change also updates derived implementations (DPAPI and GPG).
332,plaintextstore: extract credential enumeration,Extract common credential file enumeration from both the Get and Remove methods for the plaintext credential store.
333,Merge pull request #732 from GitCredentialManager/feature/m1,Revise and consolidate osx-arm64 commits
334,macos: build arm-64,Add support for building osx-arm64 in addition to osx-x64 to produce native M1 binaries.
335,macos environment: unit test for ignoring paths,Add a unit test to verify ignoring paths when searching the PATH for executables works as expected.
336,macos environment: ignore homebrew shim,"Ignore Homebrew shim to ensure the user's installed version of Git is called during brew uninstall (instead of the shim). Note that this involves explicitly passing the HOMEBREW_PREFIX environment variable, since the sudo -u/usr/bin/logname""$GCMBIN"" unconfigure command does not inherit it."
337,macos environment: add option to ignore paths,Add ability to ignore specified paths when searching the PATH for an executable.
338,Merge pull request #729 from miya789/main,Remove windows from credential-cache in credstores.md
339,docs: fix rotten links,
340,dependencies: update Microsoft.NET.Test.Sdk and Avalonia,"The upcoming specification of a macOS runtime led to the need to update the Microsoft.NET.Test.Sdk package. The old version, when combined with this specification, caused dependent packages to be downgraded, which resulted in NuGet errors. Upgrading to the latest version resolved this issue. Additionally, Avalonia has been upgraded to the latest version, which was necessitated by the upcoming changes to support osx-arm64."
341,credentialstore: add error about cache windows,Co-authored-by: Lessley Dennington lessleydennington@gmail.com
342,credentialstore: remove windows,Co-authored-by: Johannes Schindelin johannes.schindelin@gmx.de Co-authored-by: Lessley Dennington lessleydennington@gmail.com
343,Merge pull request #721 from ldennington/fix-github-action-script,Fix failing GitHub Actions Release Script
344,fixup! release: publish draft release to GitHub,
345,Merge pull request #717 from mjcheetham/which-location,Manually scan $PATH on POSIX systems
346,Merge pull request #719 from ldennington/gitlab-add-read-repo-scope,Add read_repository GitLab OAuth Scope
347,docs: FAQ on revoking GitLab OAuth Application,"Add FAQ entry detailing how to revoke/re-authorize a GitLab OAuth Application's access. This is needed when the application is updated, e.g. when new scopes are added to it."
348,environment: add test for PosixEnv.TryLocateExec,
349,Merge pull request #718 from samuel-lee-msft/patch-1,Update architecture.md
350,fixup! Web browser and PAT support for GitLab.,
351,Update architecture.md,Fix various typos
352,environment: manually scan $PATH on POSIX systems,"Because the which command is not always located in /usr/bin on all POSIX systems, we cannot directly call /usr/bin/which to do program location for us. Oh the irony.. We might be able to use env to locate which, but again the env utility isn't always found in the same place, so we're stuck. Instead we now manually scan the $PATH variable directories looking for the program we need to find, in the same way we do on Windows (for different reasons). This should also be slightly faster as you'd hope .NET's String.Split method and lstat calls are faster than fork/exec-ing another executable?"
353,Merge pull request #713 from mjcheetham/bb-links,Show Bitbucket Server/Data Center URL in UI and use better help links
354,bitbucket: add tests for IsBitbucketOrg method,Add test for Bitbucket Cloud hostname detection method.
355,bitbucket: add unit test for GetCredAsync helper cmdline,Add unit tests for the BitbucketAuthentication command line for UI helpers.
356,Merge pull request #716 from ldennington/fix-incorrect-emoji,
357,Merge pull request #715 from GitCredentialManager/dependabot/github_actions/actions/github-script-6,build(deps): bump actions/github-script from 4 to 6
358,fixup! fixup! Add install from source instructions,
359,build(deps): bump actions/github-script from 4 to 6,Bumps actions/github-script from 4 to 6. - Release notes - Commits  updated-dependencies: - dependency-name: actions/github-script   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
360,Merge pull request #707 from ldennington/release-process-migration,Migrate release processes to GitHub Actions
361,release: remove .azurepipelines directory,Remove the no-longer-needed Azure Pipelines release workflows.
362,release: publish draft release to GitHub,"Add final job to publish artifacts as a draft release on GitHub. This uses a custom github-script because the official action for adding assets to releases has been deprecated and archived. For more information, see: https://github.com/actions/create-release"
363,linux release: sign and publish,"Add step two of Linux release process to sign and upload final installer. Additionally, remove the no-longer-needed build-signed-deb workflow."
364,linux release: build and lay out,"Add step one of Linux (Debian) release process to build and lay out Debian package. Additionally, drop 'core' suffix from package name and remove no-longer-needed build-installers workflow."
365,"windows release: build, sign, and publish","Add the Windows release process to:  Build and sign the payload Use the signed payload to build and sign the user and system installers Publish the signed installers, payload, and symbols  This change also removes the no-longer-needed Payload.Windows project and removes the 'core' suffix from the Windows installers."
366,Merge pull request #711 from ldennington/add-uninstall-from-source-instructions,install-from-source: add instructions to uninstall
367,homebrew: update release asset name and uninstall script,Update release-homebrew.yaml to reflect removal of core from pkg name.
368,macOS release: sign and notarize package,Add step four of the macOS release process to sign and notarize the pkg and upload it as the final installer.
369,macOS release: package payload,Add step three of the macOS release process to package the payload and upload the pkg artifact.
370,fixup! Add install from source instructions,
371,install-from-source: add instructions to uninstall,Add instructions for Linux users on supported distros to remove GCM and its dependencies after installing from source.
372,macOS release: sign payload,"Add step two of the macOS release process to download the unsigned payload, use ESRP to sign it, and upload the signed payload as an artifact. Additionally, genericize the existing run_esrp_signing.py script to allow for signing of macOS payload/pkg and Windows exes in addition to Debian packages."
373,"macOS release: build, lay out, and codesign payload","Add step one of the macOS release process to build, run applicable unit tests, lay out the symbols/payload, codesign the payload, and upload the payload and symbols as artifacts."
374,bitbucket: show on-prem URL in UI and use better help links,"Update the Bitbucket credential UI to show the URL of the Bitbucket Server or Data Center instance, if we're talking to them. Also fix up the help links to point to a host-relative location; not always to Bitbucket Cloud pages. Note that the OAuth prompt will never been shown for Server/DC since 2FA is not supported there."
375,Merge pull request #712 from mjcheetham/all-protos,Update generic provider to support all protocols
376,generic: update generic provider to support all protocols,"Update the generic host provider to support all protocols, not just HTTP/HTTPS. Since Git can also call upon credential helpers for credentials for send-mail and friends, we should try and provide basic storage and recall for all protocols."
377,Merge pull request #709 from GitCredentialManager/dependabot/github_actions/github/codeql-action-2,build(deps): bump github/codeql-action from 1 to 2
378,Merge pull request #699 from Bene81/gitlab-hostname-only,Gitlab hostname only support.
379,build(deps): bump github/codeql-action from 1 to 2,Bumps github/codeql-action from 1 to 2. - Release notes - Changelog - Commits  updated-dependencies: - dependency-name: github/codeql-action   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
380,Apply suggestions from code review.,Co-authored-by: Lessley Dennington ldennington@github.com
381,Merge pull request #708 from ldennington/fix-install-from-source-validation,Fix install from source validation
382,Merge pull request #702 from GitCredentialManager/dependabot/github_actions/actions/download-artifact-3,build(deps): bump actions/download-artifact from 2 to 3
383,fixup! Add validation workflow,
384,build(deps): bump actions/download-artifact from 2 to 3,Bumps actions/download-artifact from 2 to 3. - Release notes - Commits  updated-dependencies: - dependency-name: actions/download-artifact   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
385,Merge pull request #703 from GitCredentialManager/dependabot/github_actions/actions/upload-artifact-3,build(deps): bump actions/upload-artifact from 2 to 3
386,Merge pull request #704 from GitCredentialManager/dependabot/github_actions/actions/setup-python-3,build(deps): bump actions/setup-python from 2 to 3
387,Merge pull request #705 from GitCredentialManager/dependabot/github_actions/actions/checkout-3,build(deps): bump actions/checkout from 2 to 3
388,Merge pull request #706 from GitCredentialManager/dependabot/github_actions/actions/setup-dotnet-2,build(deps): bump actions/setup-dotnet from 1 to 2
389,build(deps): bump actions/setup-dotnet from 1 to 2,Bumps actions/setup-dotnet from 1 to 2. - Release notes - Commits  updated-dependencies: - dependency-name: actions/setup-dotnet   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
390,build(deps): bump actions/checkout from 2 to 3,Bumps actions/checkout from 2 to 3. - Release notes - Changelog - Commits  updated-dependencies: - dependency-name: actions/checkout   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
391,build(deps): bump actions/setup-python from 2 to 3,Bumps actions/setup-python from 2 to 3. - Release notes - Commits  updated-dependencies: - dependency-name: actions/setup-python   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
392,build(deps): bump actions/upload-artifact from 2 to 3,Bumps actions/upload-artifact from 2 to 3. - Release notes - Commits  updated-dependencies: - dependency-name: actions/upload-artifact   dependency-type: direct:production   update-type: version-update:semver-major ... Signed-off-by: dependabot[bot] support@github.com
393,Merge pull request #674 from wolf99/dependabot,Add dependabot
394,Merge pull request #701 from ldennington/update-contributing-guidelines,Update contributing guidelines
395,docs: update commit requirements for contributors,"Update CONTRIBUTING.md with a link to Victoria Dye's recent talk on crafting logical, well-ordered commit messages. Move this link into the 'Submitting a pull request' section so that new contributors are more likely to see it while following the prescribed steps."
396,docs: update contributor guidelines,Customize CONTRIBUTING.md intro for GCM and update issue link to point to the 'New Issue' page rather than the pre-existing issues page.
397,Add dependabot,I am not familiar enough with nuget and dot net projects to know if it is worth adding nuget package-ecosystem (or others). If someone in the know could comment here I will be happy to adjust as needed. Info on dependabot usage can be seen here: https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/about-dependabot-version-updates
398,Adapted test expectation to changed behaviour.,    modified:       src/shared/Core.Tests/UriExtensionsTests.cs
399,Allowing host names only now.,
400,Merge pull request #685 from easwarh/eahariha/linux-src-build-script,Pass through $PATH to find dotnet
401,Merge pull request #693 from GitCredentialManager/update-wsl-docs,docs: update WSL guide with new Git For Windows path
402,docs: update WSL guide with new Git For Windows path,Update WSL guide to reflect GCM's move from the libexec/git-core directory in Git for Windows to the bin directory.
403,Pass through $PATH to find dotnet,Signed-off-by: Easwar Hariharan easwar.hariharan@microsoft.com
404,Merge pull request #679 from mjcheetham/oauth-doc,Add GitHub.com OAuth app revoke instructions to FAQs
405,docs: add GitHub.com app revoke info to FAQ,Add an entry to the FAQ doc explaining how to revoke access to the GCM OAuth app for GitHub.com
406,Add link to GitHub application settings,
407,Merge pull request #668 from wolf99/lint-markdown,Lint markdown
408,Fix new list lint issue,
409,Improve link reference IDs,
410,Adjust list numbering format,
411,Ignore lint for anchor for Linux install instructions,
412,Fix spellings,
413,Add markdown linting to workflows,
414,Fix console commands without output,
415,Fix multiple top-level headings,
416,Remove spaces inside code-span elements,
417,Fix inline HTML,
418,Fix bare URLs,
419,Fix md lint errors that do not alter content,
420,Merge pull request #673 from ldennington/add-gitlab-to-readme,docs: highlight GitLab support in README.md
421,Merge pull request #672 from hickford/gitlab-docs,Link to GitLab support docs
422,docs: highlight GitLab support in README.md,Add GitLab to list of supported host providers.
423,Link to GitLab support docs,
424,Merge pull request #670 from ldennington/supported-distros,docs: add supported Linux distributions to README.md
425,docs: add supported Linux distributions to README.md,Update README.md to call out explicitly supported Linux distributions.
426,Merge pull request #654 from GitCredentialManager/bring-oauth-into-the-light,Make Azure Repos OAuth non-experimental
427,"when falling back, be explicit about what to use",
428,"remove ""experimental"" moniker from Azure DevOps OAuth in docs",
429,Merge pull request #650 from ldennington/fix-symlink-linux,fixup! fixup! Add install from source script
430,fixup! fixup! Add install from source script,
431,Merge pull request #648 from ldennington/fix-linux-compile,
432,fixup! Add install from source script,
433,Merge pull request #640 from ldennington/update-nuget-version-macos-release,.azure-pipelines: install .NET 6.0 sdk for macOS signing
434,.azure-pipelines: install .NET 6.0 sdk for macOS signing,Install the .NET 6.0 SDK and enforce a minimum NuGet version for macOS signing workflow. This duplicates what we currently do in the Windows workflow and fixes the .NET error observed in this attempted release build: https://dev.azure.com/mseng/AzureDevOps/_build/results?buildId=17051675&view=results Clean test build with this change: https://dev.azure.com/mseng/AzureDevOps/_build/results?buildId=17052160&view=results
435,Merge pull request #635 from buchwasa/dotnet6,Update to .NET 6
436,Merge pull request #638 from felipecrs/remove-build-number,Remove build number from the release artifacts
437,Use the self-contained option,
438,Fix syntax error about build number in the Inno Setup file,
439,Remove build number from the Inno Setup file,
440,Remove build number from Azure pipeline files,
441,Remove build number from csproj files,
442,Didn't mean to update the comment,
443,Updated to .NET 6,
444,Merge pull request #630 from ldennington/install-from-source,Add install-from-source.sh and surrounding infrastructure
445,Merge pull request #599 from ejball/ghe-raw-url,Fix GitHub Enterprise API URL for raw source code links.
446,Add install from source instructions,Update README.md with instructions for downloading and running the install from source script.
447,Add validation workflow,Add new GitHub actions workflow to validate install from source on supported distributions.
448,Add install from source script,Add script to help users automatically install from source on supported distributions.
449,Add install from source option to build.sh,Update build.sh to support install from source scenario.
450,Merge pull request #621 from mjcheetham/gitlab-ui,Add GUI prompts for GitLab authentication
451,gitlab: pass --url arg to GitLab UI helpers,Pass the instance URL argument to the GitLab UI helper.
452,gitlab: don't show logo for 3rd party instances,"On custom GitLab instances, don't show the GitLab ""fox"" logo, only the logotype. We also replace the old PNG logo with SVG/vector versions for better display on high-resolution displays. Ensure we only show the ""sign up"" link for GitLab.com fix wpf"
453,gitlab: fix comment about Dispatcher method name,
454,Merge pull request #629 from mjcheetham/wam-server2016,Exclude Windows Server 2016 from WAM support
455,Merge pull request #626 from hickford/patch-2,Clarify that plaintext store is distinct from git-credential-store
456,windows-broker: exclude WinServer2016 from WAM support,"Windows Server 2016 does not support WAM, so we should not try to enable the broker unless we're on Server 2019 and later. Also update the Windows (client; non-server) version checks to be tighter. Previously any major version of 10 or greater was considered ""supported"", but this is wrong. Windows 10 build 15063 was the first to support WAM."
457,linux: scrub signing logs,
458,Clarify that plaintext store is independent from git-credential-store,
459,gitlab: invoke GitLab UI helper if available,"Invoke the GitLab UI helper if the current session is GUI interactive, the user has not disabled GUI prompts, and the helper is found."
460,gitlab: add WPF-based UI helper on Windows,Implement a WPF-based UI helper for GitLab and include this in the Windows installers.
461,gitlab: add Avalonia-based UI helper on Mac/Linux,Implement an Avalonia-based UI helper for GitLab and include this in Mac and Linux packages/installers.
462,gitlab: add shared UI project,Add shared UI project for GitLab. Project contains the shared view models and commands for the main auth prompt.
463,Merge pull request #614 from mjcheetham/gitlab-fixes,Sign and ship GitLab binaries (and some minor fixes)
464,docs: include example cmd to set cred stores,Update the credential stores document to include an example command.
465,gitlab: ensure GitLab.dll is signed and packaged,"Add GitLab.dll to the set of files that need to be signed for Mac and Windows builds, and ensure the binary is included in the Windows installer."
466,gitlab: use auth mode constant and detect oauth cfg,Use the constant to define the AuthenticationModes available for gitlab.com. Also dynamically allow browser as a supported auth mode for non-dotcom instances that have an OAuth client ID configured.
467,Merge pull request #612 from mjcheetham/wsl-localhost,Update IsWslPath to detect \\wsl.localhost-style paths
468,wsl: update IsWslPath to detect wsl.localhost,"Starting in Windows build 21354, the preferred WSL UNC file path is ""\wsl.localhost\\"" and not the older administrative-share style ""\wsl$\<distro\"". The older ""wsl$"" style will continue to be supported, but won't be the default type of path we'll see from the system going forwards. We now support detecting both styles as WSL paths."
469,gitlab: remove unused using statements,
470,gitlab: ensure correct sln config on Win/Mac/Linux,"Ensure the correct project configuration is selected when the solution configuration is set for one of the platforms in ""release""; i.e, WindowsRelease, MacRelease, and LinuxRelease."
471,Merge pull request #591 from hickford/gitlab,"Add GitLab host provider, with web browser, PAT, and username/password support. This provider currently only supports text-based prompts."
472,Apply suggestions from code review,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
473,tidy,
474,tinker,
475,refresh token,
476,Apply suggestions from code review,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
477,Web browser and PAT support for GitLab.,
478,Merge pull request #610 from jessehouwing/patch-1,Default installation path for GCM core has changed
479,Merge pull request #600 from mjcheetham/tty-pref,Add option to disable GUI prompts/prefer terminal prompts instead
480,docs: clarify custom ui helpers for appdevs only,
481,auth: add helper 'throw' method for GUI prompt setting,
482,basic: respect new GUI prompt enabled setting,
483,bitbucket: respect new GUI prompt enabled setting,
484,github: respect new GUI prompt enabled setting,
485,settings: add setting to disable GUI prompts,Add a new setting and environment variable that allows a user to disable the use of GUI prompts (in favour of terminal/text-based ones where available).
486,docs: add FAQ for UI helper settings,
487,Default installation path for GCM core has changed,"Default installation path now has ""Core"" in the name."
488,Add explanatory comment.,
489,Merge pull request #587 from hickford/usability,Skip helper when no choice necessary
490,Apply suggestions from code review,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
491,more unit tests,
492,Skip helper when unnecessary to make choice from one option.,
493,fix possible NullReferenceException,
494,Unit test for #453,Remove overzealous interactivity checks.
495,Remove overzealous ThrowIfTerminalPromptsDisabled check,
496,first unit test for GitHubAuthentication,
497,Merge pull request #604 from mjcheetham/fix-wsl-doc,Fix WSL instructions by adding missing quotes
498,docs: fix WSL instruction quotes,"Add missing double quotes ("") to the WSL documentation about using GCM without Git for Windows."
499,Merge pull request #584 from hickford/omnisharp-fix,Update package Nerdbank.GitVersioning
500,Merge pull request #601 from mjcheetham/title-fix,Use correct window title for device code in GitHub UI
501,github: use correct window title for device code,Use the correct window title for the GitHub device code dialog window. Previously this was re-using the same title as the 2FA code window.
502,Fix GitHub Enterprise API URL for raw source code links.,
503,Merge pull request #579 from mjcheetham/bb-oauth-shortcut,Allow shortcut to perform OAuth from first prompt with Bitbucket
504,bitbucket: update UI helpers for new OAuth option,"Add a new ""Sign in with OAuth"" button to the initial credentials prompt for Bitbucket. This allows users to avoid typing in a username/password at all."
505,bitbucket: add OAuth option to first prompt,"Add support for the user to select OAuth authentication in the first credential prompt. Previously the user must either update their config to remove the 'basic' auth mode, OR otherwise pass the initial username/password prompt (for example with an app password). Users can now signify they want to use OAuth immediately."
506,Update package Nerdbank.GitVersioning. Fixes #583,
507,docs: update WSL instructions for standalone GCM paths,"Update the WSL documentation to point to the correct standalone system-wide GCM install, and also add a section about using the standalone\ user-only installer. The installation path is under %LocalAppData% in this case."
508,Merge pull request #575 from mjcheetham/azrepos-list-fix,Fix bug in Azure Repos binding list command
509,azrepos: fix bug in binding list command,"There has been a behaviour change in the System.CommandLine library. Previously string arguments that were missing would be null, but now they are the empty string. Update downlevel use of the organization parameter in BindCmd to also expect an empty/whitespace string, as well as null."
510,Merge pull request #518 from mminns/issue/218,Issue/218
511,Issue #218 Address PR comments with minor updates to XUnit usage and removed unused code and out of date comments,
512,Issue #218 Address PR comments with minot updates to XUnit usage and log message formats,
513,Issue #218 Address PR comments with minor updates,
514,Issue #218 Return any stored credentials before attempting to refresh anything.,"Stored credentials for Bitbucket.org are validated before returning. Assume DC/Server credentials are good and rely on Git to try them and, if necessary, ask GCM to ERASE invalid ones. Add GCM_BITBUCKET_ALWAYS_REFRESH_CREDENTIALS/bitbucketAlwaysRefreshCredentials configuration option to revert to old behaviour Added additional tests to hit > 66% test coverage for Atlassian.Bitbucket"
515,Merge pull request #563 from mjcheetham/wsl-trace-template,Update issue template for WSL tracing
516,docs: update issue template for WSL tracing,Update the new issue templates with the extra required WSLENV environment variable that is required for passing trace envars to the Windows host.
517,Merge pull request #559 from parapsychic/main,Update README.md
518,Merge pull request #560 from cjsimon/patch-2,Fix setx command
519,Fix setx command,
520,Update README.md,small formatting issues in uninstall section for linux.
521,Merge pull request #499 from mminns/issue/498-add-code-coverage,Add basic support for generating code coverage reports
522,docs: fix a typo in multi-users doc,
523,docs: fix FAQs markdown table syntax,Fix a MD table that was not rendering correctly.
524,Merge pull request #547 from GitCredentialManager/vtbassmatt-fixes,Batch of documentation fixes
525,Merge GitHub-side fixes into vtbassmatt-fixes,
526,feedback,
527,Update docs/multiple-users.md,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
528,Update docs/multiple-users.md,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
529,Update docs/multiple-users.md,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
530,Basic support for generating code coverage reports,"TODO include in GitHub actions etc setup, e.g. https://josh-ops.com/posts/github-code-coverage/, once https://github.com/microsoft/vstest/issues/1811 is fixed"
531,draft multi-user doc,fixes #189
532,breadcrumbs to wsl doc,fixes #394
533,document TLS 1.2 on Win7,fixes #412
534,uninstall instructions on linux,fixes #413
535,FAQ about probing,fixes #424
536,Merge pull request #541 from ldennington/remove-core-from-docs,Remove 'core' from docs
537,Merge pull request #544 from GitCredentialManager/add-codeql,workflows: add CodeQL
538,workflows: add CodeQL,Re-adding CodeQL to ensure all checks work as expected in new org/repo.
539,Merge pull request #543 from ldennington/remove-codeql,workflows: remove CodeQL
540,workflows: remove CodeQL,The CodeQL Results task has been hanging in Pull Requests in our new repo. Planning to remove and re-add via the GitHub UI in the hopes that will make the task work as expected.
541,docs: remove gcmcore from test data,Update gcm-test@example.com to gcm@example.com.
542,Merge pull request #539 from mjcheetham/deb-fix,Fix Debian package build script copy command
543,Merge pull request #542 from mjcheetham/asset-update,"Drop ""Core"" from the social banner image"
544,"assets: drop ""Core"" from the social banner image",
545,docs: update aka.ms links,Update references to aka.ms/gcmcore- to aka.ms/gcm/.
546,docs: update org and repo name,Replacing references to microsoft/Git-Credential-Manager-Core with references to GitCredentialManager/git-credential-manager.
547,Merge pull request #538 from mjcheetham/github-tty,Show GitHub terminal prompts when no GUI session
548,docs: replace references to GCM Core/GCM-Core with GCM,"With the ongoing work to migrate GCM to its new org, we're taking the opportunity to update our references to GCM Core/GCM-Core in documentation to GCM. Note that this change is limited to documentation only - executables and assemblies will be updated at a later time."
549,deb: remove unnecessary symlinks from deb package,Remove the symlinks to the GitHub and Bitbucket UI helpers in /usr/local/bin. These are not required to have the core GCM application locate the helpers and just create more noise in the user's $PATH.
550,deb: fix Debian package build script,"The Debian package build script incorrectly copies the containing directory to the destination tree rather than just the contents recursively. This means we end up with: usr └── local     ├── bin     │   ├── Atlassian.Bitbucket.UI -> ../share/gcm-core/Atlassian.Bitbucket.UI     │   ├── git-credential-manager-core -> ../share/gcm-core/git-credential-manager-core     │   └── GitHub.UI -> ../share/gcm-core/GitHub.UI     └── share         └── gcm-core  ** --->    └── Release                 ├── Atlassian.Bitbucket.UI                 ├── git-credential-manager-core                 ├── GitHub.UI                 ├── libHarfBuzzSharp.so                 ├── libSkiaSharp.so                 └── NOTICE ..rather than: usr └── local     ├── bin     │   ├── Atlassian.Bitbucket.UI -> ../share/gcm-core/Atlassian.Bitbucket.UI     │   ├── git-credential-manager-core -> ../share/gcm-core/git-credential-manager-core     │   └── GitHub.UI -> ../share/gcm-core/GitHub.UI     └── share         └── gcm-core             ├── Atlassian.Bitbucket.UI             ├── git-credential-manager-core             ├── GitHub.UI             ├── libHarfBuzzSharp.so             ├── libSkiaSharp.so             └── NOTICE Since the symlinks are wrong, the installation is broken."
551,github: show terminal prompts when no GUI,"Show the terminal/TTY based prompts when there is no desktop/GUI sessions present for GitHub. Currently the Bitbucket and Microsoft auth stacks correctly detect the lack of a desktop session and use terminal prompts - GitHub does not. Without this change, SSH-ing in to a machine we'd still try and show a UI prompt where there is no way to interact with it!"
552,Merge pull request #535 from mjcheetham/dynamic-provider-setting-only,Only set credential.provider for dynamic matches
553,registry: only set credential.provider for dynamic matches,"Only set the credential.provider setting after auto-detection of the provider that used dynamic (network calls) matches. Currently we set the provider config setting after a successful auto-detection, even if we matched ""simply"" based on the host name (and didn't need a network call). The original idea of this ""set after detect"" was really to avoid having to do auto-detection that involved a network call, and not the cheap static matches. Change the logic in the host provider registry to only persist the provider setting if the network call was made."
554,Merge pull request #529 from mjcheetham/wslview,Use wslview to launch browser in Windows from WSL
555,Merge pull request #531 from mjcheetham/cmdline,Update System.CommandLine to 2.0.0-beta1.21216.1
556,Merge pull request #533 from microsoft/release-fix,Fix release builds
557,build: authenticate to MicroBuild feeds,
558,build: use new Microbuild signing tasks,
559,build: use new Microbuild package,
560,build: use new Microbuild 1ES pool,Use the new Microbuild pool from 1ES.
561,Merge pull request #532 from ldennington/add-linux-packages-note-to-readme,README: add information on removal from  MSFT Ubuntu feeds
562,README: add information on removal from  MSFT Ubuntu feeds,"As part of the migration of GCM  out of the microsoft org, we removed packages from the Microsoft Hirsute/Bionic feeds. Adding a note to the README informing users that these packages are no longer available and that installing the debian package from the releases page is the preferred mode at this time."
563,cmdline: update System.CommandLine to 2.0.0-beta1.21216.1,Update the System.CommandLine package to 2.0.0-beta1.21216.1 to hopefully fix some problems with dotnet-suggest registration caused by Process::UseShellExecute differences between .NET Framework and .NET (Core). https://github.com/jonsequitur/command-line-api/commit/ad22b69ac8944fe29fd3433c4072828f3398d5af https://github.com/dotnet/command-line-api/issues/1254 https://github.com/microsoft/Git-Credential-Manager-Core/issues/505
564,wsl: use wslview to launch browser in Windows from WSL,"When installed inside of a Linux environment we typically look for a set of utilities to open the user's preferred browser (xdg-open, gnome-open, kfmclient). However, if we are actually in a WSL (Windows Subsystem for Linux) distribution, these utilties may not be/are not present. Instead we can try and use the wslview utility that will launch the user's browser on the Windows host. Appending wslview to the list of utilities to open the browser means no behaviour change for existing Linux users, but for WSL distros we now have a chance to still open the browser."
565,docs: update version cmd in issue template,
566,Merge pull request #520 from ldennington/remove-winget,Remove winget workflow
567,Remove winget workflow,"We have decided to remove GCM Core's winget publishing workflow for the following reasons:  We want to encourage Windows users to install the bundled GCM Core that comes with Git for Windows GCM Core has 2 installers with the same arch and type (user and machine), which wingetcreate doesn't support Removing this option will decrease the complexity of our GCM Core's release matrix If users need to install GCM Core separately from Git for Windows, they can download the appropriate installer from the releases page  Thus we are removing the workflow with this change. Note: We are unable to deprecate the packages we have already released due to lack of winget support for this scenario. Tracking here: https://github.com/github/git-fundamentals/issues/756"
568,Merge pull request #517 from mjcheetham/discovery-setconfig,Set credential.provider after successful auto detection probe
569,docs: use new Git for Windows installer screenshot,
570,autodetect: set credential.provider after autodetect,"After we've detected the host provider from an auto-detection network probe, set the credential.provider setting so we can avoid the expensive operation in the future. If we fail to set this then warn the user and ask them to set the configuration manually."
571,Merge pull request #514 from mjcheetham/fix-deb,Include all shared libraries in Debian package
572,Merge pull request #516 from ldennington/remove-release-apt-get,Remove release-apt-get workflow
573,Remove apt-get install instructions from README.md,"We are no longer deploying debian packages to Microsoft feeds. Further, all previous deployments have been removed from the applicable feeds. Removing the instructions for installation via apt-get in light of these changes."
574,Remove release-apt-get workflow,"With the move to the Git Credential Manager org (and the general direction we're heading in for our release processes) we no longer want to deploy debian packages to Microsoft feeds. We may re-visit a different feed in the future, but removing the workflow for now - users can install the debian package from the releases page or install from source."
575,deb: include all shared libraries in Debian package,"Include missing Avalonia native shared libraries in the Debian package. They are already being included in the tarball, but omited from the Debian package. Change the build script to do a recursive copy cp -R so that as dependencies change over time, we don't miss any!"
576,Merge pull request #513 from microsoft/docs-g4w,Update readme to call out G4W bundling
577,Merge pull request #512 from mjcheetham/msal-4.37,Update to MSAL.NET 4.37
578,docs: update readme to call out G4W bundling,Call out that installing GCM as part of G4W is preferred.
579,Merge pull request #503 from mjcheetham/curl-envars,Match libcurl lowercase proxy environment variable behaviour
580,Merge pull request #508 from julescubtree/update-contributing-guide,Fix CONTRIBUTING.md link to LICENSE
581,settings: match curl lowercase proxy envar behaviour,"libcurl supports multiple different environment variables [1] to configure proxy behaviour: http_proxy, https_proxy, all_proxy, and no_proxy. Unlike most other environment variables these proxy envars are normally lowercase, not uppercase. This convention was set by libwww back in the early 1990s. When libcurl was first released however, it was not aware of this schism and only implemented checks for uppercase variants of these envars: HTTP_PROXY, HTTPS_PROXY, ALL_PROXY, and NO_PROXY. In time, libcurl learned to also read the lowercase variants, and gives them precedence over the uppercase forms (since the former are quasi- standards). However, to further complicate the matter, libcurl no longer reads the uppercase HTTP_PROXY variable specifically. This change was made to address a security concern with some CGI webservers [2]. The problem is that today GCM only reads the uppercase variants of the environment variables! This is inconsistent with libcurl, and therefore Git's behaviour (that we aim to be consistent/co-operative with). We change GCM's behaviour to match that of libcurl/Git in that the lowercase proxy envars are preferred to the uppercase ones, and the uppercase HTTP_PROXY variable is ignored. Dropping support for the HTTP_PROXY uppercase envar is technically a breaking change, but if the user had only set this uppercase envar then Git would not be proxying the actual remote calls, only GCM, which is most likely not what the user wanted. [1] https://everything.curl.dev/usingcurl/proxies#proxy-environment-variables [2] https://everything.curl.dev/usingcurl/proxies#http_proxy-in-lower-case-only"
582,Merge pull request #501 from mjcheetham/noproxy-globs,Match NO_PROXY formats to libcurl behaviour
583,Merge pull request #510 from ldennington/add-ui-testing-instructions,Clean up README.md and CONTRIBUTING.md
584,proxy: match NO_PROXY formats to libcurl behaviour,"We aim to be compatible with the behaviour of Git as much as possible when it comes to network settings. This enables users to setup Git proxy settings and get the same setup ""for free"" with GCM. Git uses libcurl to provide it's HTTP interactions. The NO_PROXY setting is used by libcurl to disable proxy settings for specific hosts. We previously attempted to plumb the value of NO_PROXY through to the .NET WebProxy class' list of ""bypassed addresses"" (the set of hosts that should not be proxied). However, the .NET class expects a set of regular expressions which is unlike libcurl! As a result, libcurl permitted values for NO_PROXY were throwing errors inside of GCM since they are not valid regexs. In this commit we perform a transformation of the NO_PROXY list and construct a set of regular expressions that match addresses in the same way as libcurl does. The transformation is as follows:  strip any leading periods '.' or wildcards '*.' escape the remaining input to match literally (e.g.: '.' becomes '.') prepend a group that matches either a period '.' or a URI scheme    delimiter '://' - this prevents partial domain matching append a end-of-string symbol '$' to ensure we only match to the    specified TLD and port  See the libcurl documentation on NO_PROXY behaviour: https://curl.se/libcurl/c/CURLOPT_NOPROXY.html"
585,msauth: update to MSAL.NET 4.37,Update our MSAL.NET dependency to 4.37 from 4.31. This should come with the following updates/fixes that we care about:  Can set embedded web view (legacy) window title to custom message Fixes some problems with WAM dialogs appearing behind parent windows Moves WAM to no longer being experimental Better MSA-PT support when used with WAM Numerous performance improvements with authority discovery Various WAM bug fixes  Fixes #239
586,Clean up README,Remove line from README stating we don't deploy our debian packages to official Microsoft feeds.
587,Add UI testing instructions to CONTRIBUTING,Recommend testing of impacted projects with UI changes.
588,Merge pull request #500 from ldennington/remove-microsoft-from-namespace,Replace Microsoft in GCM namespaces/file names
589,fix the signing! woop yolo,
590,Rename projects and directories,This change updates the following project/directory names according to the below: Microsoft.Git.CredentialManager --> Core Microsoft.Git.CredentialManager.Tests --> Core.Tests Microsoft.Git.CredentialManager.UI --> Core.UI Microsoft.Git.CredentialManager.UI.Avalonia --> Core.UI.Avalonia Shared.UI.Windows --> Core.UI.Windows
591,Remove Microsoft from/generally update namespaces,Updated the following namespaces: TestInfrastructure --> GitCredentialManager.Tests Microsoft.Git.CredentialManager --> GitCredentialManager Microsoft.Git.CredentialManager.Tests --> GitCredentialManager.Tests Microsoft.Git.CredentialManager.UI --> GitCredentialManager.UI Microsoft.Git.CredentialManager.UI.Avalonia --> GitCredentialManager.UI Shared.UI.Windows --> GitCredentialManager.UI Git-Credential-Manager --> GitCredentialManager
592,Remove Microsoft from assembly names,This change updates the following assembly names: Microsoft.Git.CredentialManager --> gcmcore Microsoft.Git.CredentialManager.UI --> gcmcoreui Microsoft.Git.CredentialManager.UI.Avalonia --> gcmcoreuiavn Shared.UI.Windows --> gcmcoreuiwpf It also updates the corresponding xaml/iss files with the new names.
593,Fix CONTRIBUTING.md link to LICENSE,
594,Add PAT as possible option to credential.gitHubAuthModes (#496), add pat as possible option to credential.gitHubAuthModes add pat as possible option to GCM_GITHUB_AUTHMODES fix formatting
595,Merge pull request #494 from mjcheetham/no-auto-noise,Remove auto-detection progress/info message
596,registry: remove autodetection progress/info message,"Remove the ""info: detecting host provider for 'URL'..."" message that is only causing noise for users. Fixes #492"
597,Merge pull request #488 from mjcheetham/badgitver-docs,Update README to list versions of Git that we are/not compatible with
598,docs: add missing DPAPI option to summary,
599,docs: update README to list bad Git versions,"Add a section to the README document that lists versions of Git that GCM is known to have problems with, such as 2.26.2 that broke credential configuration parsing."
600,Merge pull request #483 from ldennington/update-metadata,Set up infrastructure for wingetcreate
601,Update inno installer metadata,Updating inno installer metadata to align with the specification outlined in https://github.com/github/git-fundamentals/issues/700. Also adding appropriate quotations to Installer.Windows.csproj to handle paths with spaces.
602,Run release-winget on Windows Server,wingetcreate is a Windows exe and thus must be run on Windows. Updating our release-winget workflow accordingly.
603,Merge pull request #481 from mjcheetham/autov2,Speed up host provider auto-detection and make more robust
604,registry: speed up auto-detect and make more robust,"Speed up the auto-detection mechanism in the HostProviderRegistry by setting a short(er) timeout on the probing network call (2 seconds). The default value from the framework is otherwise 100 seconds(!). We introduce a setting for the user to be able to configure this timeout value with the granularity of 1 millisecond. Another problem that occured with this network call was crashes due to TLS configuration issues. The network call was not wrapped in a try-catch block which meant that the entire process would crash if there was a problem. This isn't ideal for what is supposed to be a ""best effort"" feature. Here we wrap the HEAD call in a try-catch and display an appropriate warning message to the user. For completeness, add documentation that explains the auto-detection feature, how to configure the timeout, and how to disable this network call."
605,http: only wait for headers in HEAD calls,"Speed up HTTP HEAD calls made via the HeadAsync extension method by only waiting until the headers have been received, rather than the entire message content."
606,Merge pull request #480 from mjcheetham/fix-winstall,Add missing assemblies/files to Windows installer
607,Merge pull request #479 from nimatt/patch-1,Added missing quotes in WSL instructions
608,windows: add missing assemblies/files to Windows installer,"Add missing assemblies and files to the Windows installer setup script. Since the introduction of the shared UI view models between WPF and Avalonia, we neglected to include the new assemblies in the Windows installer package! Also include the NOTICE file that was left out."
609,Merge pull request #478 from mjcheetham/gh-device-ui,Add explicit GitHub device code authentication option
610,docs: update docs for new GitHub auth modes,"Update documentation to include the new browser and device authentication modes for GitHub. The old oauth value expands to both browser, device for compatibility."
611,github: add explicit device code auth mode to UIs,"Add the device code option to the Avalonia and WPF helper UI applications for GitHub. This includes adding a new explicit ""device code"" button to the primary authentication prompt view, and a new device code display prompt."
612,github: implement explicit device code flow option,"Implement an explicit OAuth device code authentication mode for the GitHub host provider. Previously the 'web browser' option combined both the interactive/browser based flow (when a UI was present), and a TTY-based device code flow. This change allows users to select the device code flow even when they have a desktop/UI session present. This is useful to workaround possible problems with the browser loopback/redirect mechanism."
613,Added missing quotes in WSL instructions,One of the commands for WSL configuration was missing quotes which resulted in invalid configuration.
614,github: consolidate helper options; add --all option,"Consolidate all the UI helper options for the GitHub prompt view in to an Options class (rather than bloat the execution handler with more arguments). Also fix a bug whereby the GitHub host provider would attempt to invoke the UI helper with an --all option when all authentication modes are available, but no such option is available! This option was only available on the old WPF UI helper, and was never carried forward to the Avalonia UI."
615,github: rename OAuth authmode to Browser,Rename the OAuth GitHub authentication mode to Browser to better match what interaction will happen when selecting this mode. Also prepare for the introduction of an explicit device code OAuth flow mode.
616,Merge pull request #472 from mjcheetham/combined-ui,Combine WPF and Avalonia UI view models and commands
617,avalonia: update to Avalonia 0.10.7,"Update to the latest version of Avalonia to fix various rendering problems including, shadow issues on macOS, and DPI issues on macOS. Fixes #408."
618,bitbucket: reimplement credential and OAuth views,"Reimplement WPF views for the Bitbucket credential and OAuth prompts. The layout is largely unchanged, but now more closely matches the Avalonia layout/implementation of these views."
619,bitbucket: add stub WPF-based UI helper for Bitbucket,
620,github: reimplement credential and 2FA WPF views,"Reimplement WPF views for the credential and 2FA GitHub prompts. The layout is now much simpler, and matches the Avalonia-based UI."
621,github: readd WPF GitHub divider and 2FA controls,Reimplement/readd the WPF-based GitHub horizontal divider and six digit (2FA code) controls.
622,github: add stub WPF-based UI helper for GitHub,
623,wpf: readd WPF UI/threading helpers,
624,wpf: readd shared WPF controls and styles,"Readd various WPF shared controls and styles including:  DialogWindow control PromptTextBox control WPF converters Password Prompt control   Reintroduce a password text box control, that supports watermarked text   when empty. This is the same control as before, except now it uses a   plain System.String, rather than a SecureString (which is pointless in   practice).  wpf: readd shared WPF styles and colours"
625,wpf: delete old WPF UI helpers for BB and GH,"Delete the old WPF-based UI helpers for both Bitbucket and GitHub. These will be rebuilt using the view models, commands, and architecture extracted from the Avalonia-based UI helpers."
626,xui: target netstandard2.0 for shared UI projects,Change the target for the shared projects to .NET Standard 2.0 so they can be referenced from .NET Framework 4.7.2 and .NET 5 projects.
627,bitbucket: split Avalonia UI from agnostic VM/cmds,"Extract Avalonia specific components from the Bitbucket UI helper in to their own project. The remaining agnostic components (view models, commands) can be shared with the WPF implementation."
628,github: split Avalonia UI from agnostic VM/cmds,"Extract Avalonia specific components from the GitHub UI helper in to their own project. The remaining agnostic components (view models, commands) can be shared with the WPF implementation."
629,xui: extract Avalonia specific pieces from shared UI project,"Pull out all Avalonia specific components from the shared UI project. This will later allow us to share the agnostic shared UI project components with the WPF implementation of the UI helpers, reducing duplicated code."
630,xui: remove Avalonia deps in WindowViewModel,"Remove the direct dependency on Avalonia types in the base WindowViewModel. This will allow us later to extract UI framework agnostic components, to be shared between WPF and Avalonia implementations of the UI helpers."
631,xui: return -1 on exception in UI helpers,Return a non-zero exit code when encountering an exception in a UI helper.
632,helper: trace helper UI process starts,"Trace each UI helper invocation, along with any arguments."
633,Merge pull request #475: Update README.md,Typo.
634,Update README.md,typo
635,docs: update FAQ with comment on credential.useHttp,Update the FAQ document with an explanation on why the credential.useHttpPath setting is required for Azure DevOps.
636,Merge pull request #468 from microsoft/support-matrix,supported platforms
637,Update README.md,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
638,Merge pull request #464 from mjcheetham/dpapi,Add DPAPI based credential store on Windows
639,dpapi: add unit tests of DPAPI cred store,
640,supported platforms,
641,Merge pull request #463 from mjcheetham/diagnose,Add diagnostic command for debugging issues
642,Merge pull request #461 from mjcheetham/wsl,Add support for using WSL Git for configuration
643,Merge pull request #465 from mjcheetham/win11,Correctly detect Windows 11 version numbers
644,fixup! docs: update docs for new credstore options,
645,win11: expand Win10 check to Win10+,"Expand existing checks for ""is Windows 10"" to ""is at least Windows 10"" to also capture Windows 11."
646,diagnose: add GitHub API diagnostic tests,
647,diagnose: add MS auth diagnostic tests,
648,diagnose: add credential storage diagnostic tests,
649,diagnose: add Git diagnostic tests,
650,diagnose: add networking diagnostic tests,
651,diagnose: add file system diagnostic tests,
652,diagnose: add environment diagnostic tests,
653,diagnose: add diagnose command,Add a diagnostic command diagnose that can run various tests to verify the operation of various components of GCM. Log files can be written to an output directory.
654,platformutils: add ability to read OS version,Add the ability to read the current OS version string.
655,docs: update docs for new credstore options,
656,wincred: add explicit test for cred persistence,"Add an explicit test for credential persistence. If Windows indicates that either we don't have a credential set for the logon session, or the maximum allowed persistence for generic credentials is less than ""local machine"" then fail."
657,dpapi: add new credstore on Windows using DPAPI,"Add a new credential store on Windows that uses DPAPI to encrypt the password field in a file. The file format is otherwise identical to the Plaintext credential store. The default location for the DPAPI store is ~/.gcm/dpapi_store and this can be configured with the GCM_DPAPI_STORE_PATH or credential.dpapiStorePath. The addition of the DPAPI credential store allows for secure credential storage on Windows in cases where the Windows Credential Manager cannot work/has limitations. Specifically, DPAPI works over network sessions (like SSH) and is not subject to size limits."
658,credentialstore: allow users to select more credstores,"Implement a unified proxy pattern for the available credential stores. This allows users to select from multiple stores on all platforms, as we currently support for Linux."
659,sln: remove unused external file nodes from solution,
660,fixup! wsl: support calling Git inside of WSL,
661,fixup! docs: add WSL documentation,
662,docs: add WSL documentation,
663,wsl: support calling Git inside of WSL,Add support for calling back to the Git executable in a Windows Subsystem for Linux (WSL).
664,git: use IEnvironment::CreateProcess,Use the new CreateProcess method on the IEnvironment component in the GitProcess class.
665,env: introduce CreateProcess method in IEnvironment,Introduce a CreateProcess method on the IEnvironment component. This will serve as a place to consolidate Process object creation that currently exists in multiple places.
666,Merge pull request #456 from ldennington/upgrade-winget,Upgrade update-winget action to v1.4
667,Upgrade update-winget action to v1.4,This version allows us to update existing winget manifests by specifying a manifest's SHA if it already exists in microsoft/winget-pkgs. Pull Requests  #178: Allow updates to existing winget manifests
668,Merge pull request #450 from mjcheetham/dropubuntu16,Drop ubuntu 16.04 from CI before GitHub drops the runner
669,Merge pull request #449 from mjcheetham/proxy-noproxy,Treat empty proxy settings as a signal to not use a proxy
670,ci: drop ubuntu 16.04 from CI before GitHub drop,Drop the Ubuntu 16.04 CI build and test before GitHub drop the Ubuntu 16.04 hosted runner. https://github.blog/changelog/2021-04-29-github-actions-ubuntu-16-04-lts-virtual-environment-will-be-removed-on-september-20-2021/
671,Merge pull request #446 from microsoft/codeql,Add CodeQL scanning
672,Merge pull request #439 from vdye/git-config-prefix-expansion,Use built-in git path interpolation for config settings
673,proxy: treat empty proxy settings as reset value,"When proxy settings are set in Git, an empty value is treated as ""do not use a proxy"". We update GCM to do the same thing; when an empty value is set, we do not use a proxy. This allows for the scenario where a proxy has been set globally (unscoped) but a specific (scoped) remote does NOT have a proxy set."
674,Update codeql-analysis.yml,
675,Update codeql-analysis.yml,
676,remove autobuild,
677,Create codeql-analysis.yml,
678,git: add GitVersion type and Version property to IGit,"The Version property (calculated only once, on first access) has type GitVersion, made up of the pre-custom components of a Git version (i.e., before a .windows or .vfs). This version is currently only used in GitConfiguration in order to determine whether to use the now-deprecated canonical type constraint flags (for backwards-compatibility purposes) when accessing a config value. Signed-off-by: Victoria Dye vdye@github.com"
679,Merge pull request #441 from mjcheetham/exiterror,Return non-zero exit code on exception
680,fixup! config: update GitConfiguration to use --type,Switch to deprecated settings for config type (for better compatibility).
681,settings: add path expansion to settings,Path interpolation enabled (using Settings.TryGetPathSetting) for the credential helper path and custom cert bundle (httpCAInfo) path. Signed-off-by: Victoria Dye vdye@github.com
682,settings: add path config handling in TryGetPathSetting,"The GetSettingValues function is updated to include an isPath flag which, when true, will pass the flag to GitConfiguration.TryGet(...) when applicable. In order to have this work when a RemoteUri is specified, GitConfiguration.TryGet(...) is called directly if isPath is true after enumerating all settings (since Enumerate does not allow specifying a canonical type). Additionally, TryGetPathSetting is added as a convenience function for getting the first found path setting from GetSettingValues(...). This commit does not change the value of any existing settings  - it only introduces the ability to read settings as canonical paths (if sourced from the git config). Signed-off-by: Victoria Dye vdye@github.com"
683,config: update GitConfiguration to use --type,"This change adds a GitConfigurationType enum to GitConfiguration and includes it as an argument to TryGet, GetAll, and GetRegex. This argument (if not None) includes the appropriate --type flag in the git config. In the TryGet extension function, an isPath boolean maps to usage of GitConfigurationType.Path for true and GitConfigurationType.None for false. Existing usage of the updated functions has not changed (that is, all usages specify GitConfigurationType.None). Signed-off-by: Victoria Dye vdye@github.com"
684,app: return non-zero exit code on exception,Return a non-zero program exit code when an unhandled exception is encountered at the top-level command line handling.
685,Merge pull request #438 from microsoft/hubbify,Changes to comply with GitHub OSS
686,remove metadata,
687,Merge branch 'main' into hubbify,
688,Merge pull request #436 from mjcheetham/termios,Split macOS and Linux implementations and fix password echo bug
689,bring readme in line with GitHub requirements,
690,introduce SECURITY,
691,introduce CoC,
692,introduce CONTRIBUTING,
693,Merge pull request #437 from mjcheetham/bb-async-fix,Drop unnecessary async keyword from method in tests
694,PosixTerminal: split macOS and Linux impl and fix,"Previously the PosixTerminal class used the POSIX termios structure and tcgetattr/tcsetattr functions for both macOS and Linux systems. However, it transpires that the definition of the termios flags fields differs between Mac and Linux. On Linux the fields are unsigned int (4 bytes), but on macOS the fields are unsigned long (8 bytes). This change splits the termios structure into Mac and Linux flavours and sets the correct field offsets."
695,docs: update readme with new features,Update readme doc to reflect current state of Linux support and features.
696,Merge pull request #431 from karlhorky/patch-1,"Remove planned features section, completed feature"
697,Merge pull request #426 from microsoft/copyright,Update copyright information
698,"Remove planned features section, completed feature",The native UI feature from issue https://github.com/microsoft/Git-Credential-Manager-Core/issues/136 was completed in https://github.com/microsoft/Git-Credential-Manager-Core/pull/336 by https://github.com/mjcheetham .
699,bitbucket: drop unnecessary async keyword from method,"Remove the unnecessary async keyword from the GetSupportedAuthModes method's test, and drop the Async suffix from the method name. This removes a warning from the build of the test assemblies that there is an async method."
700,Merge pull request #401 from mminns/ISSUE-329-force-bitbucket-oauth,Allow a user to force the GCMC to use Basic Auth and/or OAuth for interactions with bitbucket.org. Issue #329
701,ISSUE 329 address PR comments by simplifying the use of ThrowIfUserInteractionDisabled(),
702,update copyright holder,
703,remove copyright headers from .cs files,
704,Merge pull request #420 from microsoft/wam-doc-improvements,address feedback from Azure Identity team
705,note that dialogs can change,
706,address feedback from Azure Identity team,
707,Merge pull request #417 from mjcheetham/azr-binding-fix,Only enumerate local Azure Repos user bindings when inside a repository
708,Merge pull request #411 from vdye/242-respect-sslCAInfo,242-respect-ssl-ca-info
709,http: respect http.sslCAInfo setting(s) in Git,"Replicate the behavior of http.sslCAInfo (internally, cURL's cainfo/ OpenSSL's cafile arguments). Implemented by manually comparing the server certificate with the config-specified CA file."
710,Merge pull request #405 from vdye/387-add-ui-and-symlink-deb,Add UI helpers to .deb package & change install location w/ symlinking
711,app: show exception stack trace if tracing enabled,"If application tracing is enabled, also print any exception stack traces to standard error."
712,azrepos: only enumerate local bindings inside repo,"Only attempt to enumerate Azure Repos user bindings in the local Git configuration, when inside a Git repository."
713,ISSUE 329 address PR comments with minor updates,
714,docs: nest Ubuntu install options and add configure,
715,"deb: move binary install location, add symlinks in /usr/bin",
716,fixup! linux: add option for GCM_GPG_PATH environment variable,Whitespace cleanup
717,docs: clarify GCM_GPG_PATH has no config equiv.,
718,Merge pull request #406 from vdye/356-manually-specify-gpg-path,Add option for GCM_GPG_PATH environment variable (Linux-only)
719,deb: add UI helpers to debian package,
720,linux: add option for GCM_GPG_PATH environment variable,"If GCM_GPG_PATH is specified, it is assumed to be the path to the GPG executable used by pass and will throw an exception if it is not found. If GCM_GPG_PATH is not specified, GCM Core will attempt to find the correct GPG executable by mimicking the behavior (currently) used by pass (that is, first searching for gpg2, then falling back on gpg if gpg2 is not found)."
721,Merge pull request #397 from mjcheetham/chmod,Create plaintext credential store directory with safer permissions
722,Merge pull request #404 from mjcheetham/os-config,Add ability to specify default settings values from the registry on Windows
723,osx: dynamically skip keychain test if invalid,"Dynamically skip the macOS Keychain read/write/delete test if the Keychain is in a ""strange"" state. There is an unknown issue that the keychain can sometimes get itself in where all API calls result in an errSecAuthFailed error. The only solution seems to be a machine restart; not possible in CI! The problem has plagued others who are calling the same Keychain APIs from C# such as the MSAL.NET team - they don't know either. It might have something to do with the code signing signature of the binary (our collective best theory). It's probably only diagnosable at this point by Apple, but we don't have a reliable way to reproduce the problem."
724,docs: clarify registry settings for sysadmins and ordering,"Clarify that the new registry settings are aimed at enterprises and system administrators, and that the settings are at the lowest precedence; they can always be overridden by the user."
725,Merge pull request #402 from garvit-joshi/main,Updated ISSUE_TEMPLATE from version to --version
726,Merge pull request #398 from hickford/patch-1,Clarify that is necessary to run git-credential-manager-core configure.
727,docs: update docs for new enterprise default cfg,Add documentation about the new enterprise/registry settings.
728,settings: add extra settings layer from WinRegistry,"Introduce the concept of another layer of settings (lowest precedence; default values only) below the existing environment variable and Git configuration file mechanisms. Implement on Windows using the Registry, under key: HKLM\SOFTWARE\GitCredentialManager\Configuration"
729,docs: add instructions how to enable WAM,
730,ISSUE 329 Ignore auth overrides when calling Bitbucket DC,
731,Updated ISSUE_TEMPLATE from version to --version,
732,ISSUE-329 Document the addition of Bitbucket AuthModes,
733,Update linuxcredstores.md,Clarify that is necessary to run git-credential-manager-core configure.
734,plaintextcredstore: create plaintext store with 700,"When creating the plaintext credential store root directory, create it with permissions such that only the owner/user can read/write/execute, and not the group or other users. This only impacts newly created store directories; existing directories do not have their permissions modified. Only applies to POSIX platforms."
735,ISSUE-329 Add configuration option to force Basic Auth or OAuth for Bitbucket,
736,ISSUE-329 Add tests before refactoring and extending provider code.,
737,Merge pull request #388 from microsoft/vtbassmatt-patch-1,Add a stable anchor for linking to Linux instructions
738,Update README.md,
739,Merge pull request #386 from ldennington/update-linux,Add instructions for apt-get install to README
740,Clarify workflow_dispatch input description,"We are currently using 'Release tag' to describe the required input to our workflow_dispatch trigger. This is inaccurate - this field actually requires a 'Release id', which I discovered when testing GCM Core apt-get deployments yesterday. Updating so that the description doesn't confuse folks running the workflow for a release that is not 'latest'."
741,Add instructions for apt-get install to README,Updating README.md with instructions for apt-get setup and install for Ubuntu Bionic and Hirsute.
742,Merge pull request #377 from ldennington/update-linux-deployments,Update apt-get workflow to publish to official bionic/hirsute repos
743,Consolidate apt-get release flow,This change replaces Python scripts we were calling from the release-apt-get pipeline with inline scripts. It also adds support for releasing to Ubuntu repositories hosted at http://packages.microsoft.com/ (hosting location for Microsoft's official apt/yum repos). This allows users to install via apt-get on Hirsute/Bionic. Details to configure appropriate repos can be found here: https://docs.microsoft.com/en-us/windows-server/administration/Linux-Package-Repository-for-Microsoft-Software).
744,Merge pull request #383 from microsoft/vtbassmatt-patch-1,"a small ""how to use"" tweak"
745,Merge pull request #373 from mminns/issue-267-auto-detect-bitbucket-dc,"Issue-267 Add fingerprint header, to autodetect Bitbucket DC instances."
746,"a small ""how to use"" tweak",
747,"Issue-267 Add fingerprint header, to autodetect Bitbucket DC instances.",Copied and refreshed the Bitbucket development doc from the Git Credential Manager for Windows project.
748,Merge pull request #379 from mjcheetham/fix-macos-hang,Avoid extra restore in macOS installer creation (fix CI hangs)
749,osx: only publish using one MSBuild node,
750,osx: avoid extra restore in macOS installer creation,"Avoid an extra dotnet restore during the dotnet publish commands in layout.sh when building the macOS installer. For some reason, the CI machines (and sometimes locally) hang during this step with: ``` Building Installer.Mac Copying uninstall script... Microsoft (R) Build Engine version 16.10.0-preview-21181-07+073022eb4 for .NET Copyright (C) Microsoft Corporation. All rights reserved. Determining projects to restore... ``` Avoiding the restore during publish should be OK since the hosting Installer.Mac.csproj project will have already built (and restored) packages for the dependent projects."
751,Merge pull request #378 from ldennington/fix-tag-formatting,Fix winget tag specification
752,!fixup winget tag specification,
753,Merge pull request #374 from mjcheetham/fix-win-apppath,Fix app entry path computation on Windows
754,app: fix app entry path computation on Windows,The way we located the application (GCM) path was broken on .NET Framework (it worked OK for .NET Core/5.0+).
755,Merge pull request #360 from mjcheetham/github-xui-fix,Fix bug in GitHub x-platform UI command line parsing/binding
756,github: fix bug in x-UI cmdline parsing,"The System.CommandLine command line binding requires the parameter names match the option names. During the rebasing of the x-platform UI work, the argument name for the --oauth option was left as browser which means the OAuth browser flow is never shown, even though the base GCM program is passing the right argument/options."
757,Merge pull request #358 from mjcheetham/fixed-dotnet-sdk,Fix the .NET SDK used in release builds
758,dotnet: fix the .NET SDK used in release builds,"Fix the .NET SDK version used on Mac and Linux to build release builds in Azure Pipelines. The release build started to hang since .NET SDK 5.0.300 was available. Others have reported issues with new SDK patches: https://github.com/dotnet/sdk/issues/16204 The last successful release build used .NET SDK 5.0.203, so let's fix to that version. Last success: https://mseng.visualstudio.com/AzureDevOps/_build/results?buildId=15246465 Current failure: https://mseng.visualstudio.com/AzureDevOps/_build/results?buildId=15390460"
759,Merge pull request #336 from mjcheetham/xui2,Add cross-platform UI based on Avalonia
760,"main: drop the useless ""Run!"" comments from prog.cs",
761,Merge pull request #354 from mjcheetham/ghes-oauth,Mark GHES 3.2 as supporting GCM Core OAuth
762,Merge pull request #353 from ldennington/bump-winget-version,Bumping version of update-winget action
763,github: mark GHES 3.2 as supporting GCM Core OAuth,Mark GitHub Enterprise Server (GHES; on-prem server) version 3.2 as supporting the OAuth authentication mechanism.
764,Merge branch 'main' into bump-winget-version,
765,Bumping version of update-winget action,
766,"xui: add ""About GCM"" dialog window",
767,linux: add new Avalonia UI helpers on Linux,
768,osx: include new Avalonia helpers on macOS,
769,bitbucket: add Avalonia-based UI helper for BB,Add a new UI helper for Bitbucket using Avalonia.
770,github: fix bug in 2FA UI helper invocation,Pass the --sms option to the UI helper when prompting for a 2FA code sent via SMS for GitHub.
771,"github: add ""2FA"" prompt dialog","Add new Avalonia-based ""two-factor"" auth code prompt dialog for GitHub."
772,"github: add main ""credential"" prompt","Add the main ""credentials"" prompt for the Avalonia-based GitHub helper UI."
773,github: add new Avalonia-based UI helper for GitHub,Add a new Avalonia UI project for a GitHub UI helper.
774,xui: introduce a component for showing Avalonia UI,"Add a component that uses our Dispatcher, and the Avalonia Dispatcher types to correctly initialise, show, and close windows and views in the Avalonia UI framework, ad-hoc."
775,xui: add a dispatcher class,"Add a dispatcher type for use with Avalonia. This dispatcher is different from the built-in Avalonia Dispatcher type. On macOS the underlying platform requires that the main NSRunLoop be run on the entry thread of the process (that is, thread 0). This is unlike on Windows where all that is required is an ""STA"" thread. Because of this we need to ""reserve"" thread 0 (the main entry thread) for running the Avalonia infrastructure, and kick off a new thread to run the rest of the ""normal"" .NET application logic (such as command-line handling). The dispatcher allows queuing of work to be run on the initialised thread, until the loop is terminated. We can use this dispatcher and model to start the Avalonia app/runloops at a defered time, after main app startup. The Avalonia Dispatcher type is then used to push more work on to that inner message pump/runloop after the Avalonia application has started."
776,xui: add new HelperApplication base type,Add a new application class for helper applications to surface commands and respond over standard output.
777,xui: add base dialog window control,Add a styled dialog window control for use by UI helper applications built on Avalonia.
778,xui: add shared Avalonia UI class library,Add a new project to host all the shared components for Avalonia-based UI helpers.
779,helper: allow helper processes to be terminated,Allow UI helper processes to be terminated by cancelling a CancelationToken that has been passes to InvokeHelperAsync.
780,oauth: extract OpenDefaultBrowser to reusable component,Extract the OpenDefaultBrowser method to a helper/util class so it can be used by other components.
781,app: move GetApplicationPath to ApplicationBase class,Push the GetApplicationPath method down to the ApplicationBase type so its logic can be shared across other applications.
782,Merge pull request #349 from mjcheetham/main-rename,"Update CI for rename of default branch to main (and drop the ""beta"" moniker)"
783,"main: rename master branch to main, and drop beta","Rename the master branch to main, and drop the ""beta"" moniker for the project now that the other Git credential ""manager"" helpers have all been fully deprecated."
784,Merge pull request #347 from mjcheetham/msal-title,
785,Merge pull request #346 from mjcheetham/msal-vers,
786,docs: fix more broken links in configuration.md,
787,docs: fix more broken links in environment.md,
788,Merge pull request #348 from microsoft/docs-fix,Fix documentation links for Windows Broker settings
789,docs: update environment docs to fix links,
790,docs: update configuration docs to fix links,
791,Merge pull request #345 from microsoft/wam-docs,Add some new WAM docs
792,msauth: set MSAL embedded webview window title,"Set the MSAL embedded webview window to ""Git Credential Manager"" to give some context to the user where this dialog came from."
793,"link, spacing",
794,shrink images,
795,msauth: bump MSAL library versions,"Upgrade our MSAL libraries to the latest versions:  MS.ID.Client 4.29.0 -> 4.31.0 MS.ID.Client.Desktop 4.29.0 -> 4.31.0 MS.ID.Client.Extensions.Msal 2.18.3 -> 2.18.4  This brings a number of fixes that help us, including:  Fix WAM account picker parenting Fix WAM exceptions in console apps Fix encoding of params sent to WAM WebView2 fallback to WebView1 Stop writing junk to standard out on Linux syswebview flows"
796,move wam.md contents into broker doc,
797,introduce new windows-broker doc,
798,Merge pull request #344 from mjcheetham/wam-elevate,Add WAM workaround for elevated processes
799,msauth: address some linting issues with braces,
800,Merge pull request #343 from mjcheetham/ghae,Add support for OAuth with GitHub AE
801,msauth: add WAM workaround for elevated procs,"Add a workaround to a broker bug whereby the account control does not appear when running from an elevated process. https://github.com/AzureAD/microsoft-authentication-library-for-dotnet/issues/2560 The underlying issue is to do with COM and the OS account control not being able to call-back in to the elevated process. The workaround is to set the process COM security to ""none"" iif we are on Windows 10, the process is elevated, and the user hasn't disabled the broker. It is possible the call to CoInitializeSecurity may fail, as this can only be called once in the lifetime of a process, and must be called before any COM interactions occur. The CLR may perform some COM interop before we even get to the Main method(!) We try our best here and call the CoInitializeSecurity function as soon as we reasonably can in the lifetime of our process."
802,github: add support for OAuth with GHAE,Add support for detecting GitHub AE (GHAE) and enabling the OAuth authentication mode with the GitHub provider. https://docs.github.com/en/github-ae@latest/admin/overview/about-github-ae
803,Merge pull request #338 from ldennington/bump-update-winget,Bumping mjcheetham/update-winget to v1.2.1
804,Bumping mjcheetham/update-winget to v1.2.1,
805,Merge pull request #335 from mjcheetham/winstall-fix2,Fix post install configure bug
806,Merge pull request #337 from derrickstolee/fix-warnings,AzureReposHostProviderTests: fix warnings around orgName
807,AzureReposHostProviderTests: fix warnings around orgName,"We keep getting warnings from the actions bot saying: The variable 'orgName' is assigned but its value is never used However, these variables are used, just as parameters to lambdas within LINQ methods. By extracting this org string into a static readonly, we should be able to avoid these warnings."
808,windows: fix post install configure bug,"Fix a bug where an ""invalid"" argument was being passed to the GCM executable post-install of the user-only installer to configure the Git credential helper."
809,"Merge pull request #333: Add an ""s"" to the word ""work""",This commit corrects a small grammatical error.
810,"Add an ""s"" to the word ""work"". ",This commit corrects a small grammatical error.
811,Merge pull request #332 from ldennington/ldennington/update-winget-deployments,Updating release-winget according to manifest schema changes
812,Removing repo,
813,Cleaning up,
814,Fixing manifest,
815,Removing hard-coded values,
816,Removing branch,
817,Attempting with hard-coded values,
818,Main,
819,Putting branch in the right spot,
820,Specifying master branch,
821,Fixing id,
822,Test task version correction,
823,Updating workflow for testing,
824,Updates for testing,
825,Updating gcm winget-release to use latest task version and manifest fields,
826,docs: update aztokens doc to add PAT REST API link,
827,Merge pull request #323 from mjcheetham/wam,Add support for Windows broker (WAM)
828,msauth: default to NOT use WAM/broker,
829,msauth: drop deprecated TokenCache storage props ctor,Remove the usage of a now deprecated constructor for the shared token cache storage properties. This constructor took the client ID which was only used to eventing; GCM doesn't use this.
830,msauth: fix typo,
831,docs: improve GCM_MSAUTH_FLOW wording,Improve the wording around which settings and values cause the auth-flow setting to be ignored. Grammer iz hard.
832,msauth: reorder CanUseBroker logic,Reorder the CanUseBroker logic to be easier to grok.
833,msauth: add support for Windows broker (WAM),"Add support for broker-assisted authentication on Windows using ""WAM"" (Web Authentication Manager) as provided by the MSAL.Desktop library. The GCM_MSAUTH_USEBROKER environment variable or the credential.msauthUseBroker configuration option will control if WAM is enabled or not. By default WAM is enabled."
834,Update Windows build instructions,
835,Add .NET SDK download link to dev docs,
836,Use correct label on auth-problem issue template,
837,Create experimental issue template,
838,Merge pull request #318 from mjcheetham/downlevel-git-parse,Drop the git config --show-scope option usage
839,git: drop config --show-scope option usage,"The Git config --show-scope option was only introduced in Git from version 2.26 onwards. The latest version of Git available in some distributions of Linux (or macOS) is often older. We only needed to know the scope of configuration values in one particular call site: reading all Azure Repos user bindinds. Replace the single IGitConfiguration::Enumerate call with two calls to Enumerate, one for the global scope, and one for the local one. Drop the --show-scope option parsing."
840,Merge pull request #308 from mjcheetham/osx-noroot-postinstall,Run postinstall and uninstall configure commands as current user
841,osx: run postinstall configure cmd as current user,"In the macOS installer postinstall script we run the configure command to get GCM to configure the current user's credential helper as GCM. However, the postinstall script is often run as root (because that's how installer works out of the box), meaning although GCM will be writing to the ~/.gitconfig file, it will be doing so from a process running as root. To avoid having root take ownership of ~/.gitconfig we run sudo -u to run the configure command as the real user (not root)."
842,docs: add link to git config/envars to switch cred types,Add a link to the Azure Repos Users and Tokens document to the relevant config docs.
843,Merge pull request #306 from mjcheetham/msal-window-parent,Tell MSAL about any parent window handles GCM knows about
844,Merge pull request #310 from mjcheetham/fix-singlefile,Ensure we locate UI helpers correctly on Linux/published as a single file
845,app: ensure we locate helpers correctly with single file,"Ensure that we are using the correct entry executable directory when published as a single file application. When looking for UI helpers we were still using the Assembly::Location property, which is null for single file applications. Move to pass the (correctly computed) application path to the ICommandContext, which is available everywhere."
846,Merge pull request #305 from mjcheetham/osx-msal-restartmsg,Include better warning message on MSAL Keychain errors
847,msauth: tell MSAL about any parent window handles,MSAL supports parenting windows it creates to another window. GCM also supports being told about a parent window by the caller. Pass through this parent window to MSAL if we have it!
848,msauth: include better warning message on Keychain errors,"Sometimes the login Keychain is not accessible and the MSAL.Extensions library cannot read/write the token cache. The specific error encountered internally is errSecAuthFailed - neither we nor the MSAL team know why this happens sometimes. Locking and then unlocking the login Keychain manually, or simply restarting the computer appears to fix the problem. Include the lock+unlock/restart remedy in the warning message on macOS."
849,Merge pull request #294 from mjcheetham/users-in-config,Stop using PATs for Azure Repos (Attempt 2: Electric Boogaloo)
850,git: add guards against malformed Git config data,Add some checks/guards against malformed data output from Git configuration when enumerating all entries. If we hit the unexpected end of the data stream we trace and stop parsing.
851,azrepos: add commands to manager user bindings,Add commands to manually manager the user/org bindings for the Azure Repos host provider.
852,azrepos: add a binding manager to store org-user maps,"Add a new binding manager component that can be used to 'bind' user accounts to Azure DevOps organisations. This enables the Azure Repos host provider to attempt silent authentication requests via MSAL - to attempt to use an existing access token from the cache. We only allow binding at the organisation level (and not any other level) as this is the most common scenario: one user for an entire Azure DevOps organisation. If the user wishes to override the chosen user for a particular clone they can do so by binding the user to the local repository configuration, rather than the default global configuration. Furthermore, if the user wishes to use a different user account for a particular remote within a repository, they can set the username in the remote URL."
853,azrepos: add cmd to clear the authority cache,Add a command to enable clearing of the Azure authority cache manually.
854,azrepos: add Azure authority cache,"Add a cache of the Azure backing authority for Azure DevOps orgs. This cache is only consulted when the credential type is ""oauth"" and not ""pat"". We use Git's configuration as the persistence mechanism."
855,azrepos: add non-PAT based auth method to AzRepos,"Add a new settings to the Azure Repos provider that instructs GCM to return the Azure access token directly, rather than use that token to generate a new Azure DevOps Personal Access Token (PAT). At the moment the only indication as to what user account a user wants to use is via the userinfo parts of the remote URL. This must be set manually. The default configuration is to continue to use PATs, for now."
856,azrepos: add utility to extract AzDevOps org name,Add a utility to extract the Azure DevOps organisation name from a remote URL.
857,git: add ability to list remotes and get current repo dir,"Add the ability to list the Git remotes for the current repository, as well as resolve the current repository path."
858,git: change git config API to push level filter to methods,"Change the way we interact with Git configuration so that we specify the level filter in each method call, instead of requesting the GitConfiguration object perform the filtering."
859,git: expose TrySplit git cfg key splitting helper,Expose the Split method from the GitConfigurationKeyComparer as a TrySplit method and use this implementation for splitting keys in all existing instances. Also introduce a GitConfiguration::Enumerate extension method that filters based on section and property name parts of Git config entries.
860,git: include gitcfg scope/level in enumeration results,Teach GitConfiguration::Enumerate to parse results that include the 'level' of the Git config entry (--show-scope).
861,git: introduce GitCfgEntry wrapper type for enumeration,"Introduce a wrapper type representing a single entry in Git's configuration, which is used in the Enumerate callback."
862,git: drop unused git config extension methods,Remove some unused Git configuration extension methods for querying for entries based on 'split' keys (section.scope.property). These are only used in tests!
863,git: replace progdata/xdg config levels with unknown,"Replace the unused ProgramData and Xdg Git configuration level enumeration members with an Unknown member. We never directly used any of those, and don't really care(!)"
864,input: better input arg checking/handling,"Improve the handling of input arguments with missing required fields (e.g., protocol and host)."
865,inputargs: fix a bug in remote URI generation,"Fix a bug in contruction of the remote URI when no username is provided, but the caller wishes to include the username."
866,app: fix exception handling/printing,"When we moved to use the System.CommandLine library for command line parsing, we neglected to update the exception handling to match the new model."
867,Merge pull request #299 from mjcheetham/noproxy2,Add support for the NO_PROXY bypass environment variable
868,http: allow NO_PROXY split with space,
869,docs: fix a typo in the HTTP proxy docs,Co-authored-by: Johannes Schindelin dscho@github.com
870,http: add support for the NO_PROXY bypass envar,"Add support for the cURL environment variable (also respected by Git) to list a set of host names that should connect directly (bypass), and not connect via the configured proxy."
871,Merge pull request #298 from mjcheetham/fix-singlefile-path,"Fix computation of app path when published as a ""single file"""
872,program: fix computation of app path with single file,"When publishing GCM as a 'single file' application, the computed path to the entry executable is no longer correct. On .NET Core 3.1, using Assembly.Location resolves to the temporary extracted DLL file path. On .NET 5 Assembly.Location always returns the empty string. Since .NET 5, published single-file apps no longer use the self- extraction model, and are real single file with all assemblies and native libraries statically linked/bundled. We now use the Environment.GetCommandLineArgs() method to get the raw underlying ""argv"" arguments, which argv[0] is the absolute file path to the entry executable. We also change how we get the application version number to look for the assembly attribute, rather than extract if from the file on disk. At app startup, also change the way we trace system information to be more readable."
873,Merge pull request #288 from NN---/net5.0,.NET 5.0
874,Merge branch 'master' into net5.0,
875,Merge pull request #293: Update link to .NET documentation,
876,docs: fix config reference typo,
877,Merge pull request #287 from microsoft/git-credential-cache,Add Git credential cache as backing store on Linux
878,Update link to .NET documentation,
879,Update link to .NET,
880,a less misleading comment,
881,use cache as the option name,"env var for config is still the long form, but the git option is already namespaced to credential so it was also shortened."
882,update all docs,
883,don't put CreateProcess on the interface,
884,document new option,
885,pass through options,
886,fail loudly if a test depends on TestGit's process/helper,
887,credential-cache requires EOF on stdin,
888,.NET 5.0,
889,put the Git helper code on the Git object,
890,elevate Git process creation to the interface,
891,whitespace,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
892,username is the account,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
893,implement credential-cache as,backing store
894,rough in changes to talk to credential cache,
895,expose the copy of Git we're using,
896,move InvokeAsync to the new HelperProcess,
897,created a place for the Helper helper,
898,Merge pull request #285 from microsoft/docs/useHttpPath,documented behavior under credential.useHttpPath
899,Update docs/configuration.md,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
900,Update docs/configuration.md,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
901,Update docs/configuration.md,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
902,documented behavior under credential.useHttpPath,fixes https://github.com/microsoft/Git-Credential-Manager-Core/issues/253
903,Merge pull request #283 from mjcheetham/net472,Target .NET Framework 4.7.2 and fix missing binaries in Windows installers
904,win: fix installer - include missing binaries,
905,win: target .NET Framework 4.7.2,
906,Merge pull request #282 from mjcheetham/docupdate,Update various docs in response to new features and fix some typos
907,docs: update various docs with new code,"Update various documentation and technical specifications to mirror changes to the product, such as the removal of the macOS authentication helper, and the introduction of new custom commands for host providers."
908,Merge pull request #273 from mjcheetham/cmdline,Use System.CommandLine to parse cmdline args and allow provider to offer cmds
909,cmd: add ability for providers to expose custom cmds,"Add the ability for host providers to register themselves as offering custom commands, under the provider ID name. For example a provider with the ID 'foo' would be able to expose commands under the git-credential-manager-core foo <..> command."
910,cmd: use System.CommandLine to parse cmdline args,Replace our basic custom command-line handling code with the System.CommandLine library which provides simpler and easier handling.
911,Merge pull request #279 from mjcheetham/azr-msal-override,Add ability to override Microsoft Authentication parameters for Azure Repos
912,azrepos: add ability to override MSAuth params,"Add the ability to override the Microsoft authentication parameters in the Azure DevOps API and MSAuth components - can change client ID, redirect URI, and the base authority."
913,Merge pull request #275 from mjcheetham/msalcache-osx,Integrate with the shared Microsoft developer tools AAD token cache on macOS
914,msauth: integrate with shared MS dev tool cache on macOS,Integrate with the shared Microsoft developer tools cache on macOS platforms. This allows us to share refresh tokens with VSMac and Azure CLI.
915,msauth: update MSAL library version to latest,
916,fs: pull GCM data directory property up to IFileSystem,Full the ~/.gcm data directory path calculation to a property of the IFileSystem component.
917,Merge pull request #277 from mjcheetham/msal-api-harmony,"Harmonise Microsoft Authentication APIs with AAD ""v2"" and MSAL concepts"
918,Fix incorrect value separator in docs for github auth modes,
919,Fix issue in environment doc regarding GitHub auth mode values,"We need to separate values for GitHub auth modes with a comma, not a space."
920,Merge pull request #278 from AlexanderLanin/patch-1,Fix multiple gitHubAuthModes
921,Fix multiple gitHubAuthModes,"List must be comma separated. Before: $ GCM_TRACE=1 git fetch 22:22:08.037216 ...\Application.cs:69   trace: [RunInternalAsync] Git Credential Manager version 2.0.318-beta+44acfafa98 (Windows, .NET Framework 4.0.30319.42000) 'get' 22:22:08.040208 ...\Command.cs:63       trace: [ExecuteAsync] Start 'get' command... 22:22:08.046193 ...\Command.cs:74       trace: [ExecuteAsync] Detecting host provider for input: 22:22:08.047214 ...\Command.cs:75       trace: [ExecuteAsync]   protocol=https 22:22:08.047214 ...\Command.cs:75       trace: [ExecuteAsync]   host=*** 22:22:08.206763 ...viderRegistry.cs:129 trace: [GetProvider] Performing auto-detection of host provider. 22:22:08.208757 ...\Command.cs:77       trace: [ExecuteAsync] Host provider 'GitHub' was selected. 22:22:08.211749 ...\HostProvider.cs:115 trace: [GetCredentialAsync] Looking for existing credential in store with service=https://*** account=... 22:22:08.214770 ...\HostProvider.cs:120 trace: [GetCredentialAsync] No existing credentials found. 22:22:08.214770 ...\HostProvider.cs:123 trace: [GetCredentialAsync] Creating new credential... 22:22:08.266604 ...bHostProvider.cs:227 trace: [GetSupportedAuthenticationModesAsync] Invalid value for supported authentication modes override setting: 'OAuth Basic' After: $ GCM_TRACE=1 git fetch 22:22:32.792872 ...\Application.cs:69   trace: [RunInternalAsync] Git Credential Manager version 2.0.318-beta+44acfafa98 (Windows, .NET Framework 4.0.30319.42000) 'get' 22:22:32.796891 ...\Command.cs:63       trace: [ExecuteAsync] Start 'get' command... 22:22:32.801849 ...\Command.cs:74       trace: [ExecuteAsync] Detecting host provider for input: 22:22:32.802847 ...\Command.cs:75       trace: [ExecuteAsync]   protocol=https 22:22:32.802847 ...\Command.cs:75       trace: [ExecuteAsync]   host=*** 22:22:32.945493 ...viderRegistry.cs:129 trace: [GetProvider] Performing auto-detection of host provider. 22:22:32.947488 ...\Command.cs:77       trace: [ExecuteAsync] Host provider 'GitHub' was selected. 22:22:32.949455 ...\HostProvider.cs:115 trace: [GetCredentialAsync] Looking for existing credential in store with service=https://*** account=... 22:22:32.951449 ...\HostProvider.cs:120 trace: [GetCredentialAsync] No existing credentials found. 22:22:32.951449 ...\HostProvider.cs:123 trace: [GetCredentialAsync] Creating new credential... 22:22:32.991343 ...bHostProvider.cs:222 trace: [GetSupportedAuthenticationModesAsync] Supported authentication modes override present: Basic, OAuth"
922,msauth: rename resource to scopes and drop remote URI,"Rename the resource parameter to the MSAuth component to scopes, which is the AAD ""v2"" concept. Also drop the remote URI parameter which is no longer needed."
923,msauth: return MSAL wrapped result rather than JWT AT,Change the MSAuth GetToken method signature to return a wrapper result object rather than just the JWT access token. The result wrapper object includes the account UPN and the wrap AT as returned by MSAL. We do not need to inspect the claims of the AT (which might not even by a JWT in some cases anyway) since we have the account info elsewhere.
924,Merge pull request #274 from mjcheetham/drop-osx-helper,Drop the native macOS ADAL-based Microsoft Authentication component
925,Merge pull request #272 from mjcheetham/dispose-fix,Fix bug to ensure correct provider disposal
926,osx: remove native MS auth component on macOS,Remove the ADAL Objective-C based native authentication component for MSA/AAD. We now rely on the system brower of MSAL.NET.
927,msauth: remove ability to use external helper,Remove the ability to use an external authentication helper for Microsoft authentication (AAD/MSA). We now always rely on the in-process MSAL library calls.
928,hostregistry: fix bug to ensure correct provider disposal,We are not correctly disposing of the host providers registered with the host provider registry. Fix this by actually calling Dispose() on the correct objects(!)
929,Merge pull request #262 from mjcheetham/auto-gh,Auto-detect more (on-prem) providers using a simple HTTP query
930,Merge pull request #265: [Docs] Add configuration example,Update docs/configuration.md to include an example of how to configure git-credential-manager-core.exe as git's credential store.
931,Docs: Add explanation to git configuration command,Co-authored-by: Derrick Stolee derrickstolee@github.com
932,Add example of how to configure git-credential-core.exe as git's credential store,
933,Merge pull request #263: Fix readme brew uninstall instructions,This change is necessary because of a homebrew change around casks.
934,Fix readme brew uninstall instructions,
935,registry: add auto-detection via HTTP query,"Add the ability to let host providers additionally inspect a HTTP response message to determine and identify a supported service/endpoint. If the simple enumeration of providers matching against the static InputArguments does not produce a match (at each priority level), then check against the lazily evaluated HEAD call to the remote URL."
936,registry: enable registration of providers with priorities,"Enable host providers to be registered and enumerated for auto-detection in a simple priority order: high, normal, low."
937,registry: make GetProvider method async,Make the GetProvider method on the IHostProviderRegistry interface async in preparation for introducing some network I/O to the auto-detection of providers.
938,docs: update readme explaining win install split,Update the readme file to explain the difference between the two Windows installers.
939,Merge pull request #259 from mjcheetham/fix-ghes-modes,Ensure the PAT option is always offered for GHES instances
940,github: ensure PAT is offered for GHES instances,Ensure the Personal Access Token authentication mode is always offered for GitHub Enterprise Server instances.
941,Merge pull request #257 from mjcheetham/fixosxinstall,Ensure the /usr/local/bin directory exists on install
942,nuget: use nuget.config to force only NuGet.org source,Add a local nuget.config file to force the package source used for NuGet packages to be only the nuget.org public feed. There have been problems with some CI agents that don't have a global/default nuget.org package source.
943,osx: ensure /usr/local/bin dir exists on install,Ensure the /usr/local/bin directory exists on macOS installations before we create the symlink for GCM Core. The directory does not exist on freshly installed Macs.
944,Update Homebrew install instructions,Fixes #248
945,Merge pull request #241 from AlexanderLanin/subdomain,Detect github.my-company-server.com as GitHub
946,Make tests actually test mixed case input,Uri converts to lowercase.
947,Make comparisons case insensitive,Co-authored-by: Matthew John Cheetham mjcheetham@outlook.com
948,Merge branch 'release' into master,
949,Update FAQ with some SSH questions,"Some users had questions about SSH, and if it HTTPS-based remotes with GCM Core was preferred to SSH. SSH is here to stay and is a perfectly fine and valid mechanism. GCM Core is only useful for HTTP(S) remotes. Fixes #191"
950,Merge pull request #244 from mjcheetham/libsecretfix,Use down-level libsecret functions to get secret values
951,libsecret: use downlevel functions to get secrets,"Replace our use of secret_value_unref_to_password which was only introduced in libsecret 0.19.0, with secret_value_get and a separate secret_value_unref call which is available in all versions. This will allow us to work on older distributions that may only include older versions of libsecret, specifically Ubuntu 18.04 LTS which includes libsecret 0.18. Version 0.20 of libsecret was only introduced from Ubuntu 19.04."
952,Merge pull request #243 from mjcheetham/noboxchars,Remove use of box drawing characters in warning output
953,http: remove use of box drawing chars in warning output,"Remove the use of box drawing characters in the warning output messages for TLS verification being disabled. Some systems (looking at you Windows) struggle with such characters. Replace them with simpler characters. Whilst we're at it, also remove box drawing characters from code comments. Even though these aren't a problem, let's just do it for consistency."
954,Detect github.my-company-server.com as GitHub,
955,Merge pull request #236 from mjcheetham/githubpatmode,Add explicit PAT authentication mode for the GitHub Provider
956,authbase: quote cmdargs passed to helpers,Correctly quote and escape arguments passed to authentication helpers via the process arguments.
957,github: update Windows GitHub UI to add PAT support,"Update the WPF-based Windows GUI for GitHub authentication prompts to support the third authentication mode ""PAT"". Also make some changes to how the dialog window is sized to scale with the size of the content (mins and maxes included), which may now vary in the extreme from all three auth options, to just one."
958,github: add PAT authentication mode,"Add an authentication mode to the GitHub provider whereby a Personal Access Token can be returned directly, as generated by a user manually. Update the terminal-based UI menu to support the new PAT mode."
959,Merge pull request #234 from mjcheetham/fixconfigmatching,Match Git config in a mixed-sensitively way
960,stringcmp: add more tests to GitConfigKeyComparer,"Add more tests to the GitConfigurationKeyComparer tests, specifically around cases that contain no period/dots '.'. In these cases we behave as StringComparer.Ordinal."
961,config: match Git config mixed-sensitively,"Git configuration entry keys are neither case sensitive, nor in-sensitive. They are mixed sensitive. The section and property names are NOT sensitive, but the 'scope' or inner component of the full name IS sensitive. For example, credential.example.com.provider is the same as CREDENTIAL.example.com.PROVIDER, but credential.EXAMPLE.COM.provider is NOT. We introduce a new StringComparer type that performs insensitive comparison on the section and property components, and sensitive comparison on the scope component."
962,Merge pull request #233 from mjcheetham/credsuppress,Add suppressions for credscan false positives
963,credscan: add suppressions for credscan false positives,"Add the required source suppressions for false positive identification of credentials, raised by the internal CredScan tool. Most of the identified matches are fake credentials for unit tests. One match was the GitHub OAuth2 application client secret, which per issue #228 valid and an accepted & required 'secret' to be public."
964,Merge pull request #227 from AlexanderLanin/master,Refactor in order to simplify adding more tests
965,Remove dependency of GHES to gitub.com constant,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
966,Refactor in order to simplify adding more tests: GetSupportedAuthenticationModes_WithMetadata,
967,Refactor in order to simplify adding more tests: GetSupportedAuthenticationModes,
968,Refactor in order to simplify adding more tests: GetCredentialServiceUrl,
969,Refactor in order to simplify adding more tests: IsSupported,
970,Create apt-get release pipeline (#221),Create a new Github workflow for deploying the .deb installer from a release to packages.microsoft.com
971,Merge pull request #224 from mjcheetham/fix-nbgv,Update GitVersioning package
972,build: update GitVersioning package,"Update the Nerdbank.GitVersioning package to the latest version (3.3.37) to consume a fix for the removal of the set-env command in GitHub Actions. Previous versions of GitVersioning use the set-env command to set the cloud build number. The new version uses ""environment files"" which is the replacement for set-env."
973,Merged PR 585338: Cut new release including security fix,Changes:  Fix NTLM proxy authentication Fix reading empty Git configuration entry values Allow users to select the type of interactive authentication flow for the Microsoft auth stack
974,Merged PR 585167: [Security] Enumerate the PATH environment variable to locate programs on Windows,"Enumerate the PATH environment variable to manually locate executables/programs rather than shell out to where.exe on Windows locate these for us. The where.exe utility first checks the current working directory before the PATH for the executable, which we do not want for various security reasons. The which utility on UNIX/POSIX systems does NOT include the current working directory in the search; only the PATH, which is exactly what we want - leave this in place on those platforms. Additionally for locating git(.exe) we first check in the GIT_EXEC_PATH directory for the executable, if that environment variable was set."
975,env: enumerate the PATH envar to locate programs on Windows,"Enumerate the PATH environment variable to manually locate executables/programs rather than shell out to where.exe on Windows locate these for us. The where.exe utility first checks the current working directory before the PATH for the executable, which we do not want for various security reasons. The which utility on UNIX/POSIX systems does NOT include the current working directory in the search; only the PATH, which is exactly what we want - leave this in place on those platforms. Additionally for locating git(.exe) we first check in the GIT_EXEC_PATH directory for the executable, if that environment variable was set."
976,Merge pull request #217 from mjcheetham/ntlm-proxy-auth,Treat empty credential proxy configuration as use system default credentials
977,http: treat empty cred proxy as system default creds,"To enable using the default system credentials for authenticated proxies we must set the WebProxy.UseDefaultCredentials property to true. (For example, with Windows Integrated Authentication-based proxies - NTLM or Kerberos.) Currently we set this if no username and password information is specified at all in the proxy configuration. However, Git itself when presented with this configuration will prompt the user for a username/password (which isn't required). Specifying an empty string username/password in the proxy configuration will stop Git from prompting for them, and allow cURL to auto-negotiate proxy auth. However, GCM reads that same configuration as having a username/password based proxy with the empty string for both values. We change GCM to use the system default credentials when configuring a proxy if there is no userinfo OR if BOTH the username and password values are the empty string. Example proxy config value: http://:@proxy.example.com"
978,Merge pull request #215 from mjcheetham/config-empty-fix,Fix reading of empty string Git configuration values
979,config: fix reading of empty string Git config values,"Previously trying to read a single Git configuration setting that had the value of """" empty string resulted in returning false in our TryGet method. Move to using the null-terminating output from Git for easier parsing, just like we use for the other read-commands. The GetAll method didn't have this issue as it was already using --null."
980,Merge pull request #212 from mjcheetham/msauth-choice,Allow user to override which interactive authentication flow used for MS auth
981,azdev: use the localhost redirect URI for VS's client ID,"Use the localhost redirect URI specified in the VS AAD application configuration. The localhost option allows us to use the system web view, whereas 'urn:ieft:wg:oauth:2.0:oob' does not."
982,msauth: allow user to select auth flow type,"Allow the user to override which Microsoft authentication flow to use when interaction is required. The options available are:  - embedded web view  - system web view  - device code Previously we always picked one of these flows (or used a native external helper) to use. In some instances it may be desirable for the user to force a particular flow, for instance to take advantage of browser sign-in state or OS integrations by using 'system'. If no option is set, or auto is selected the existing behaviour is preserved (we pick for the user)."
983,Merge pull request #208 from microsoft/master,Cut another release with fix to macOS publishing
984,Merge pull request #207 from mjcheetham/osx-realsign-fix,osx-sign: fix macOS release build sign/upload
985,osx-sign: fix macOS release build sign/upload,"Fix the macOS real-signed release build YAML files to also create the product archive (not just the component package), and upload and sign that instead."
986,Merge pull request #206 from microsoft/master,Release GCM Core with various fixes and new Windows user-installer
987,Merge pull request #203 from mjcheetham/fixtypowin,"Make the system installer always append GCM Core entries, not outright set/replace existing values (and fix a typo)"
988,Merge pull request #205 from mastercoms/patch-1,Fix missing space in username input
989,fix missing space in username input,this caused the preceding argument to fail due to lack of separation between args
990,Merge pull request #204: Actions: use workflow_dispatch for manually running workflows,See [1] for more information. [1] https://github.blog/changelog/2020-07-06-github-actions-manual-triggers-with-workflow_dispatch/
991,Actions: use workflow_dispatch for manually running workflows,See [1] for more information. [1] https://github.blog/changelog/2020-07-06-github-actions-manual-triggers-with-workflow_dispatch/ Signed-off-by: Derrick Stolee dstolee@microsoft.com
992,git: fix --get-all output parsing bug,Since --null means that each config entry terminates with a null character ('\0') we are left with one extra entry in the array after splitting the string. This is NOT a real entry and we shouldn't return it from the method.
993,azrepos-cfg: only clear useHttpPath on Windows if no manager-core,"Only clear the useHttpPath=true option on calls to unconfigure if the ""manager-core"" option is not present and we're in the system config on a Windows platform. This would be the case for the bundled GCM Core in Git for Windows, which we would break by removing this option."
994,git: better gitcfg error and trace messages,
995,configure: handle subsequent empty entries after GCM,"If we have empty helper entries after GCM, then we should attempt to reconfigure to put GCM back ""at the front"", since otherwise it's effectively being disabled by those subsequent empty entries."
996,git: drop the redundant 'Value' from Get/Set methods,
997,git: add --get-all and --add Git config commands,"Add the --get-all and --add Git configuration commands, and use them in place of --get-regexp and --replace-all where applicable."
998,configure: append GCMCore even in system case,"Rather than set the helper to be only GCM Core in the system configuration when called with (un)configure --system, we do what we are already doing in the user-case. We only append an empty ("""") reset entry, and then the GCM full path entry. This means on uninstall of the standalone GCM (be that the system or user install), we restore the previous entry, always."
999,windows: fix a typo in the user windows installer,
1000,Merge pull request #197 from mjcheetham/winstall-split,Split Windows installer in to user/system flavours
1001,Merge pull request #201: Setup Microsoft ESRP Signing for .deb installer,"This adds a new workflow build-installers.yml, where hopefully we can either migrate all installer builds in the future (or rename and split them across the platforms.) This workflow is heavily dependent on a lot of internal Microsoft infrastructure. What we have so far results in a GPG signed .deb for GCM-Core. This is currently uploaded as an artifact on the workflow itself but it not yet published. The 3rd and last build job yet to be added is using setting up yet another internal tool with the right security to use our internal publishing service. This does the signing, but does not actually publish the package to the Microsoft package feed. Replaces #170."
1002,Merge pull request #202 from mjcheetham/osxinstall-fixwording,Fix incorrect wording of installer welcome msg
1003,osx: fix incorrect wording of installer welcome msg,Fix the incorrect wording of the macOS installer welcome screen. We do not configure different gitconfig files depending on the install mode - we always update the current user's gitconfig only.
1004,Merge pull request #198 from mjcheetham/osx-installv2,Update the Mac installer to make a product archive package/installer
1005,Merge pull request #199 from mjcheetham/install-fix,Update the configure command to set the full path to GCM Core
1006,windows: split Windows installer in to user/system,"Split the Windows installer into two versions: a single-user installer, and a system-wide installer. The old installer installed in Program Files (x86) and set the system Git configuration, which is now what the system-flavoured installer does. The new single-user installer places files in %LOCALAPPDATA% and updates the ~/.gitconfig (global) user Git configuration instead. The benefit of the single-user installer is that it does not require an administrator to install it, and doesn't affect other users of the system."
1007,configuration: update config cmd to set full path,"Update the configure and unconfigure actions to now set the full file path to GCM Core, rather than rely on manager-core resolving to git-credential-manager-core on the PATH by Git. This was a problem because Git for Windows now bundles GCM Core, and even if a standalone install of GCM Core was present on the system with a higher version, since the bundled copy is found on the PATH before anything else, Git was always picking the old one. The change to using full paths helps fix this issue, and also another issue on macOS where sometimes the /usr/local/bin directory is not on the PATH (such as for the root user, or during a postinstall script for a flat-package [.pkg] file)."
1008,Release: build and sign Linux installers,"This launches a job that downloads the ESRP signing tool client, then loads it with the necessary information for our signing abilities. Finally, it publishes our signed .deb to the build artifacts. Signed-off-by: Derrick Stolee dstolee@microsoft.com"
1009,Signing: add python script for Linux signing,The .github/run_esrp_signing.py script is executed on the signing machines. This mostly accumulates a set of JSON input files before running the ESRP signing tool that was securely downloaded. Signed-off-by: Derrick Stolee dstolee@microsoft.com
1010,.gitignore: ignore signing outputs,Signed-off-by: Derrick Stolee dstolee@microsoft.com
1011,Merge pull request #200: Just two tiny typos,
1012,Just two tiny typos,
1013,git: ensure that Git config quotes cmd args,"Ensure that we are correclty quoting arguments to Git configuration commands. We must ensure double-quotes are escaped correclty, and also any runs of back-slashes ('\') are preserved UNLESS a double-quote ('""') follows."
1014,osx: update the Mac installer to make product archives,"Update the macOS installer build to also create a distribution/product archive package, that contains the flat component package we were already building. The product archive allows us to do things like set welcome and conclusion messages, titles, and display a license (like the Windows installers do). In the new welcome and conclusion screens we include helpful links and instructions on how to uninstall GCM Core, and how to configure it for other users on the system. The macOS installer continues to install in a global location, but only configure the user's global Git configuration."
1015,Merge pull request #196 from mjcheetham/fix-wia,Fix bug where Allow Windows Integrated Authentication setting default wrong
1016,wia: fix bug where Allow WIA setting default wrong,"Fix a bug where the 'Allow Windows Integrated Authentication' setting was evaluating to false when unset, rather than true as per design and the documentation."
1017,Merge pull request #195 from microsoft/gh-patdoc-update,Update GitHub auth change document PAT link
1018,Update GitHub auth change document PAT link,"Update the GitHub auth change document PAT link to auto-select the repo, gist, and workflow scopes."
1019,docs: add GitHub auth API deprecation docs,Add documentation regarding the upcoming removal of user/pass access to the authorizations API on GitHub. Outline how to upgrade to GCM Core from GCM4W to fix.
1020,Merge pull request #187 from mjcheetham/winget,winget: update winget pkg on release
1021,winget: update winget pkg on release,Automatically create a new PR to update the winget package for GCM Core on release.
1022,Update readme to say Linux support is in preview,
1023,Merge pull request #185 from mjcheetham/docupdate,Update readme and FAQs and drop preview wording
1024,docs: update readme and FAQs; drop preview wording,"Update the readme and FAQ documentation to include Linux preview support, and elevate macOS and Windows from ""preview"" to GA."
1025,Merge pull request #184 from microsoft/master,Cut new release to fix deadlock with large Git configs
1026,Merge pull request #183 from dscho/avoid-deadlocks-when-reading-the-config,gitconfig: avoid deadlock on large amounts of config data
1027,gitconfig: avoid deadlock on large amounts of config data,"As per the Remarks section in https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.processstartinfo.redirectstandardoutput we should first read the output until the end before waiting for the git config process to finish, to avoid deadlocks. This indeed helps in the situation of this developer whose config is so large that git config -l produces 25 kilobyte worth of output. Apparently, this fills up some buffer that seems to be around 8kB and then git config -l waits for its output to be consumed, and before this patch, the consumer (i.e. GCM Core) would wait for git config -l to exit already."
1028,Merge pull request #179 from kyle-rader/user/kyrader/support-email,Linux build script updates
1029,Update src/linux/Packaging.Linux/build.sh,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1030,Update src/linux/Packaging.Linux/build.sh,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1031,Update src/linux/Packaging.Linux/build.sh,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1032,Merge pull request #181 from microsoft/master,New release to fix Linux web browser launching
1033,Merge pull request #180 from mjcheetham/fix-webopen,Disconnect standard output/error streams from xdg-open and friends
1034,oauth: disconnect streams from xdg-open,"When using the Process class to open the user's default browser on Linux, utilities like xdg-open are used. Some of these utilities do not disconnect child processes from our standard input/output/error streams. At the same time, browsers like Chromium like to write to stdout and stderr, which gets fed back to Git or the user's terminal, respectively. The latter looks messy, and the former causes Git to fail. On Linux, we instead manually locate a suitable 'shell execute' utility and launch them directly - this way we can redirect the standard output/error streams. For Windows and macOS, this is not an issue and we continue to use the Framework code to do 'shell execute'."
1035,env: introduce TryLocateExecutable method,"Introduce a TryX method version of the existing LocateExecutable method on IEnvironment, for locating executables with which and where.exe."
1036,Update support email and github url and run on pushes to release,
1037,Merge pull request #176 from microsoft/master,Fix previous release (linux support) by adding config bug fix
1038,Merge pull request #175 from mjcheetham/fix-config,Fix bug in Git configuration filtering logic
1039,gitconfig: ensure config filter is passed down,"Ensure the desired GitConfigurationLevel is passed to the GitConfiguration object so that the correct filter level can be selected. This is not so important for reading keys, but will fail when modifying keys since you need to specific which configuration level to edit. This bug resulted in calls to git-credential-manager-core unconfigure to fail. Add some tests of the config methods that modify values."
1040,Merge pull request #173 from microsoft/master,"Create new release including ""alpha"" Linux support"
1041,Merge pull request #174 from microsoft/linux-release-build,Add Linux Azure Pipelines release
1042,linux: add Linux Azure Pipelines release,
1043,Merge pull request #172 from mjcheetham/linux-credstores,Add a variety of credential stores on Linux
1044,linux-credstore: extract credstore option constants,Extract the Linux Credential Store option constant values.
1045,docs: add docs for configuring Linux cred stores,Add a document outlining the different credential stores available on Linux.
1046,gpg-credstore: add GPG/pass based credential store,"Add a pass compatible credential store that uses GPG to store encrypted credentials in files on disk. Defaults to the default pass password store, but can be overriden using standard pass envars."
1047,"tests: introduce ""Posix"" and ""All"" PlatformFact support","Refactor the PlatformFact attribute to support a flags enum, such that compound platforms can be specified (e.g., Posix = Linux | Mac)."
1048,plaintext-credstore: add plaintext credstore,"Add a plaintext credential store option for Linux. Credentials are stored in plaintext files, by default in ~/.gcm/store, but configurable by settings/environment variables. Users can select between the Secret Service API and plaintext-based credential storage using the GCM_CREDENTIAL_STORE setting."
1049,credstore: change contruction of existing credstores,"Change how we construct the existing credential stores by simply new-ing them up, rather than calling a static Open method."
1050,Merge pull request #171 from mjcheetham/gh-oauthonly,Remove username/password authentication for GitHub.com
1051,"github: fix a typo in ""DotCom"" (- ""DotDom"")",Fix a typo in a constant variable indicating the available authentication modes for GitHub.COM.
1052,github: remove user/pass auth for GitHub.com,"Now that we have the GCM OAuth application in the allow-list for GitHub apps, we no longer need to offer username/password authentication for GitHub.com!"
1053,Merge pull request #162 from mjcheetham/newcred2,Revamp credential storage system to allow for smarter searching
1054,environment: fix environment process locator,"Fix a bug in the WindowsEnvironment implementation of the LocateExectuable method. On .NET Core the UseShellExecute property of ProcessStartInfo defaults to false, whereas on .NET Framework (the runtime that we target on Windows) defaults to true. You must set this to false if you want to redirect standard streams (which we want to do). The .NET Framework-targeting build on Windows was throwing an exception here(!)"
1055,docs: update documentation to reflect changes,Update the GCM Core Host Provider spec document and architecture document to reflect the changes made to the abstract HostProvider class; replacing GetCredentialKey with GetServiceName.
1056,credstore: add support for custom cred namespaces,"Add support for customising the namespace/prefix used to store credentials in the OS credential store. By default we use ""git:{service}"". Users can use GCM_NAMESPACE or credential.namespace to set this to something different. These configuration options are the same as in GCM for Windows to help with migration."
1057,azrepos: workaround org@ user hackery,"Now that we support multiple user accounts for each host/service/remote, we have hit an interesting issue with Azure Repos. With the introduction of the dev.azure.com-style URLs for Azure Repos there was an unfortunate hack or workaround invented to add the AzDevOps org name to the userinfo part of the remote URL, for example: org@dev.azure.com/org/blah. Since GCM for Windows (and older versions of GCM Core that initially followed the same model) always uses the value ""PersonalAccessToken"" for the username field when storing credentials it was free to ignore the user part of the input. The problem now is that since we support multiple user accounts, and will perform an exact match against the credential (with user) if a username is specified in the remote URL, we never find the credential we now store (we now always store with the actual, real users' UPN). To workaround this workaround (yuck) we ignore the username IF AND ONLY IF the host is dev.azure.com, and return the first matching dev.azure.com/org credential. The upshot of this is that dev.azure.com-style URLs do NOT support multiple users OR full paths, however vs.com-style URLs will."
1058,azrepos: update azrepos to new credential model/APIs,"Update the Azure Repos provider to support the new credential storage API/model, as well as support remote URLs with explicit port numbers."
1059,github: update GitHub provider to impl new cred model,Update the GitHub provider to implement and follow the new credential storage/recall/matching model and ICredentialStore APIs.
1060,bitbucket: update BB provider to implement new cred APIs,Update the BitBucket provider to support and implement the new credential storage/recall model and APIs.
1061,basic: update basic auth to match new cred interface,Update the Basic authentication component to match the new ICredential interface.
1062,genericprovider: update the generic provider for new APIs,Update the generic host provider to support the new credential storage model and HostProvider base class APIs.
1063,hostprovider: update host prvdr base to use service name,Update the HostProvider base class to use the new 'service name' abstraction rather than the simple 'unique credential key' one. With this model we can better issue credential storage queries where the username may not be specified explicitly in a get request (often the case as the username is not always included in the remote URL for many services).
1064,inputargs: update remote URI generation to support ports,"Update the remote URI generation from the program InputArguments to support port numbers, and special characters in usernames."
1065,libsecret: update libsecret interop to match new interface,Update the SecretServiceCollection credential store (backed by libsecret) to match the new ICredentialStore interface and access model.
1066,wincredmgr: recover the correct service name,"Recover the correct service name from the target name. Since the target name may contain a userinfo component (for example https://alice_domain.com@example.com/path), and the only place we store the service name is in the target name, we need to strip out any userinfo component. We do this by looking for the ""://"" and the first '@' character before the first '/', which act as the start and end of the userinfo component."
1067,wincredmgr: update Windows CredManager to impl new interface,"Update the Windows Credential Manager component to implement the new ICredentialStore interface, including credential enumeration and matching by account/user as well as 'service name' (target)."
1068,macoskeychain: update macOS Keychain to match new interface,"Update the macOS Keychain component implementation to match the new ICredentialStore interface. We now use the SecItemCopyMatching to perform a general query for items, and return a specialised credential object including all relevant attributes."
1069,credstore: update credstore API to allow better search,"Update the ICredentialStore and ICredential API to allow for smarter searching of stored credentials. The new API exposes filtering by ""service name"" and ""account"" separately. Service name will typically be the URL the credential is stored against, and the account will be the username associated with the credential."
1070,Merge pull request #164 from kyle-rader/user/kyrader/linux-installer,Add a Linux .deb installer CI workflow
1071,Merge pull request #166 from derrickstolee/actions-native,CI: update configuration to build native bits
1072,Only remove Payloud as Payload.Linux is built by the parent cs proj and we need that output.,
1073,Clean up entire payload dir on build and publish deb and tar files.,
1074,CI: update configuration to build native bits,"The build configuration ""Release"" only builds the managed portions of GCM Core. However, on macOS and Windows we have UI bits that are native to each platform. Update the --configuration build option to include these native bits by casing on the ""os"" variable in the matrix build. Signed-off-by: Derrick Stolee dstolee@microsoft.com"
1075,Merge pull request #163: Fix errors with 'git-credential-manager-core configure' with empty config,"Resolves #161. The failures were due to subtleties when working without any credential.helper values in any level of config. This is typical for a fresh install on a Linux machine, but never happens with Git for Windows. Git on macOS might also come pre-loaded with this config."
1076,build with inherit restore,
1077,Use force,
1078,Try also running tests,
1079,Copy steps from working ci pipeline,
1080,Add pre build step,
1081,Build Linux.Payload specifically,
1082,Add steps to create .deb package distro,
1083,Simplify Linux build script into just build.sh,
1084,Add explicit framework,
1085,Start a build-installers GH workflow,
1086,GitConfiguration: be careful about arguments and exit codes,"  When we re-set the configuration, we pass an empty value to clear the existing values. However, that only works if we quote around the empty value. Otherwise, Git does not ""see"" a value argument.   If there is no configuration for a given key, the exit codes for 'git config' change. See the documentation [1] for full details. For now, be careful about exit codes 1 and 5, when appropriate.   [1] https://git-scm.com/docs/git-config Signed-off-by: Derrick Stolee dstolee@microsoft.com"
1087,GitConfiguration: be careful about key-value pairs,"For some situations, the key-value pairs we split from the response of 'git config' do not have two elements. Be careful to check the length before returning the value. If the length is not two, then this is an invalid key-value pair so skip that entry. Signed-off-by: Derrick Stolee dstolee@microsoft.com"
1088,SettingsTests: drop unused variables,Signed-off-by: Derrick Stolee dstolee@microsoft.com
1089,Merge pull request #159 from microsoft/linux,Add initial Ubuntu & Secret Service support
1090,Merge pull request #158: Fix some typos/errors in documentation,
1091,Merge pull request #157: GitHub Actions Workflow,"Starting the creation of a Github Actions CI workflow, specifically including Linux."
1092,"Use short workflow name so each job renders full name as ""GCM-Core / CI""",
1093,Use shorter name so you can see os versions in Actions UI,
1094,Spacing and use explicit ubuntu 20.04 version,
1095,Attempt using os matrix,
1096,Use with: for args to actions,
1097,Add fetch-depth: 0 so that Github actions clones with full history so the versioning task works,
1098,Copy in default dotnet core workflow template steps,
1099,add '- name' for steps,
1100,Fix typos in documentation,
1101,Add linux branch and spacing,
1102,Start ci actions yaml,
1103,Merge pull request #153: Use OAuth by default on GitHub,Make OAuth the default authentication mechanism for GitHub provider
1104,Merge pull request #155: FAQ minor writing fix,
1105,FAQ minor writing fix,
1106,github: replace link with button for OAuth login,"Replace the ""login using browser"" link with a button on the Windows GitHub login dialog."
1107,github: move OAuth option to top of Windows dialog,Move the OAuth/login with browser option to the top of the Windows GitHub login dialog when both user/pass and OAuth options are available.
1108,github: make OAuth the default auth mode,Make OAuth the default authentication mode.
1109,Merge pull request #152 from mjcheetham/homebrew-auto,Automatically update Homebrew Cask on release
1110,homebrew: automatically update Homebrew Cask on release,"On release, automatically update the Homebrew Cask in the microsoft/git Tap."
1111,Merge pull request #150 from mjcheetham/fixworkflows,Fix workflows and builds
1112,actions/workflows: fix workflows and builds,"Ensure the PR build is triggered on PRs into master or release. Also now that we're making real releases of GCM Core on GitHub and not just pre-releases, move to the simpler syntax/API calls for the Action that creates and updated the Homebrew cask on release publish."
1113,Merge pull request #149 from microsoft/master,Cut a new release
1114,Merge pull request #147 from mjcheetham/github-oauthdevice,Enable OAuth device authorisation grant support for GitHub
1115,github: enable OAuth2 device code flow for GitHub,Enable the device code authorization grant flow for GitHub.
1116,github: use final OAuth device code endpoint,Use the final OAuth2 device authorization endpoint URI.
1117,Merge pull request #148 from mjcheetham/msafix,Fix Azure Repos sign-in with Microsoft Accounts
1118,azrepos: use organizations authority for MSA accounts,"Use the /organizations authority for MSA accounts with Azure DevOps/Repos. This is because we're using MSA pass-through, an internal Microsoft mechanism to support both MSA and 'work' (AAD) accounts with the same auth stacks. You should be able to use /common, but this doesn't work. At the same time we're using ADAL Obj-C on macOS rather than MSAL.NET like we do on Windows, and ADAL speaks to the ""v1"" AAD endpoints, which don't know the /organizations tenant :( For macOS we need to fudge the authority back to /common for MSA accounts."
1119,Merge pull request #146: FAQ: typo fix,A fix for a typo that I noticed in the FAQ 🙂
1120,FAQ: typo fix,
1121,libsecret/secretservice: rename libsecret -> secretservice,Rename the LibsecretCollection type to SecretService API to more accurately reflect the API we're using.
1122,tests: skip Libsecret tests that require a GUI,
1123,linux: add stub CredStore to select the best cred store API,Introduce a credential store for Linux that passes through to a backing store that is selected based on user preference and session features. Currently this is a stub that just uses LibsecretCollection (which only works in a GUI environment).
1124,tests: run libsecret tests,
1125,linux: rewrite libsecret/glib interop,Rewrite the libsecret and glib interop code for the Linux ICredentialStore implementation to be more thorough.
1126,linux: add x86_64 Linux build (Ubuntu 18.04),Extend the PR and CI build to produce a tarball of binaries for Linux x86_64 platforms; building on Ubuntu 18.04 LTS. The release build does not publish anything currently as we need to get signing working.
1127,versioning: update Nerdbank.GitVersioning to latest,Update the Nerdbank.GitVersioning package to the latest to fix a bug where the package would fail to execute due to libgit2 dependency issues.
1128,linux: add libsecret based ICredentialStore for Linux,Implement a credential store for Linux platforms that use the libsecret Secret Service API.
1129,linux: implement stub Linux ISystemPrompts component,Implement a stub ISystemPrompts component that just throws. The component is currently not used on any platform that's not Windows anyway so this won't be hit.
1130,linux: use PosixSessionManager on Linux,
1131,linux: add IFileSystem impl for Linux,Add an implementation of the IFileSystem component for Linux distributions. We just simply assume that all file systems are case-sensitive at the moment. Also introduce a (empty) PosixFileSystem class shared between macOS and Linux.
1132,libgit2: remove libgit2 references,
1133,install: update usage of Git config,Update the use of the Git configuration components in the configuration service and configurable components; used to set up a system during install.
1134,git: implement IGit/Config using the Git CLI,"Implement IGit and IGitConfiguration components using the Git CLI executable, rather than libgit2."
1135,which: add ability to locate executables via which,"Add ability to locate executables on the current PATH by shelling out to which on UNIX platforms, and where.exe on Windows."
1136,git: split out IGit and IGitConfiguration files,Split out the IGit and IGitConfiguration interfaces and extension methods in to their own files.
1137,Merge pull request #141 from itofinity/issue/support-bbs-basicauth,Update support for Bitbucket Server
1138,Fix PR suggestion typo,
1139,Provide a name with more context.,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1140,Provide a name with more context.,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1141,Provide a name with more context.,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1142,Provide a name with more context.,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1143,Correct spacing,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1144,Correct spacing,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1145,Make the HTTP/S error message more specific.,Co-authored-by: Matthew John Cheetham mjcheetham@github.com
1146,Bitbucket Server Support: Fix storing of Bitbucker Server credentials. Save with and without usernames since BbS doesn't generally include them in its Git URLs,
1147,"Bitbucket Server Support: Added ability to set 'bitbucket' as the provier for an arbitrary host, i.e. a Bitbucket Server host",Allow HTTP as well as HTTPS for Bitbucket Server hosts TODO test more complex URLs e.g. https://my.company.com/bitbucket
1148,Merge pull request #139 from mjcheetham/svg,Add SVG version of GCM logo
1149,assets: add SVG version of GCM logo,
1150,Merge pull request #138 from mjcheetham/provider-spec,Add host provider specification
1151,docs: update readme,
1152,provider-spec: use one abbrev for GCMW/ML,
1153,provider-spec: add host provider specification,
1154,Merge pull request #137 from mjcheetham/devguide,Add Architecture overview document to help developers
1155,docs: wrap body text to 80 columns,
1156,docs: address architecture doc feedback,
1157,docs: add Architecture overview,Add a document outlining the architecture of GCM Core.
1158,Merge pull request #134 from mjcheetham/github-samlsso,github: store the PAT on 'get' request for SAML SSO
1159,github: store the PAT on 'get' request for SAML SSO,"In order to allow a user that requires SAML SSO to be manually enabled on their newly generated PATs to access org repos, we must store the PAT as soon as we generate it. This then allows the user the ability to visit the web UI, enable SSO, and then repeat their Git operation using the same PAT. Workaround for issue: #133"
1160,Merge pull request #132 from microsoft/master,Cut release fixing Bitbucket bug and 32-bit Windows support
1161,Merge branch 'release' into master,
1162,Merge pull request #131 from mjcheetham/win-x86,windows: compile to 32-bit x86 only
1163,windows: compile to 32-bit x86 only,"Since we want to ship with Git for Windows which offers both an x86 and x86_64 option, we should build an x86 (32-bit) application rather than an x86_64 (64-bit) one. Since 32-bit applications can run on 64-bit versions of Windows (including Windows on ARM) this is the more compatible target. We could also publish both a 32- and 64-bit build of GCM Core on Windows but this seems redundant as GCM Core really does not need 64-bits of addressable memory(!)"
1164,Merge pull request #127 from mjcheetham/fix-homebrew,homebrew: fix automatic Homebrew update
1165,homebrew: fix automatic Homebrew update,The Octokit API does not find releases by tag when they are prerelease (like all the beta releases of GCM Core are). Instead enumerate the list of releases and manually filter to the matching tag name instead.
1166,Merge pull request #126 from kzu/master,Don't attempt to deserialize nulls from bitbucket response
1167,Don't attempt to deserialize nulls from bitbucket response,"In my case, the field has_2fa_enabled was coming back null and that caused deserialization to fail with: Error converting value {null} to type 'System.Boolean'. Path 'has_2fa_enabled', line 1, position 79. Another alternative is to make the property bool? instead."
1168,Merge pull request #125 from microsoft/master,Cut another release to fix the bug in 2.0.153
1169,Merge pull request #124 from mjcheetham/fix-winuiflag,windows-ui: fix inverted user interactive check
1170,windows-ui: fix inverted user interactive check,The code that was copied from the .NET runtime code (dotnet/runtime) had a bug in it that inverted the check for the WSF_VISIBLE flag! Updated the code to match their now fixed version.
1171,Merge pull request #122 from microsoft/fix-release-workflow,release: add required token to release workflow
1172,release: add required token to release workflow,Add the required GITHUB_TOKEN token to the release workflow.
1173,Merge pull request #121 from microsoft/master,Cut new release with Bitbucket provider
1174,Merge pull request #116 from mjcheetham/bbui,Add Bitbucket Windows UI project
1175,bitbucket-ui: add Bitbucket Windows UI,"Add a port of the Bitbucket UI from the old GCM for Windows, and update the UI to git with the new refreshed design."
1176,bitbucket-ui: add stub UI project,
1177,winui: make SecurePasswordBox notify all changes,"Update the SecurePasswordBox control to notify all listeners of changes to the password value. Previously we only notified on the first character typed into the box. We clone the current password, modify it, and then replace the previous instance (triggering an INotifyPropertyChanged::PropertyChanged event). With a binding delay, we will batch updates of multiple keystrokes rather than one at a time."
1178,winui: add shared validation helpers,"Add property and model validation helpers, which will be used by Bitbucket's Windows UI helper in subsequent commits."
1179,Merge pull request #115 from mjcheetham/extract-winui,Extract various shared WPF components into a separate project
1180,winui: extract common DialogWindow to shared project,Extract the GitHubDialogWindow into a shared control that can be used by multiple consumers. Also simplify the IGui interface and optimise creating a DialogWindow window with a control.
1181,winui: extract parent window handling,Extract logic display a model window that is correctly parented to the GCM_MODAL_PARENTHWND window handle.
1182,winui: extract cmdline util methods,Extract shared command line parsing methods used in Windows UI helpers.
1183,winui: extract shared WPF UI into project,Extract common/shared WPF UI into its own project to be consumed by the various UI helpers (GitHub.UI currently).
1184,Merge pull request #114 from mjcheetham/github-actions,homebrew: publish new package version on release
1185,homebrew: publish new package version on release,Publish a new Homebrew Cask version on release via a GitHub action.
1186,Merge pull request #95 from mjcheetham/fix-desktopcheck,Correctly check for GUI on Win/Mac/POSIX
1187,ui: correctly check for GUI on Win/Mac/POSIX,Replace the PlatformUtils.IsDesktopSession util method with platform specific components that check use native APIs to determine the state of the current session. Environment.UserInteractive is hard-coded to return true for POSIX and Windows platforms on .NET Core 2.x and 3.x. https://github.com/dotnet/runtime/issues/770 The .NET 5 implementation (not yet released) fixes this for the Windows platform only. We take a copy of that implementation for Windows. On macOS we use the SessionGetInfo from the Security.framework. On POSIX in general we also check for the X11 $DISPLAY environment variable.
1188,Merge pull request #120 from mjcheetham/helperconfig,helpers: allow auth helpers to be overridden by config
1189,helpers: allow auth helpers to be overriden by config,Allow authentication UI helpers to be overriden by environment variables and Git configuration options.
1190,Merge pull request #118 from mjcheetham/doc-update,Update our out-of-date documentation
1191,"docs: update README, FAQs, and build docs","Update our readme, FAQs documents, and actually put something in our build/debug docs!"
1192,Merge pull request #117 from mjcheetham/fix-bb,Ensure we ship the Bitbucket DLL on Windows
1193,bitbucket: ensure we ship the Bitbucket DLL,Ensure we actually ship the Bitbucket host provider DLL!
1194,Merge pull request #111 from mjcheetham/fix-lg2error,Fix error message handling for LibGit2
1195,libgit2: fix error message handling,Fix the reversed LibGit2 error message handling when no function-name was specified.
1196,Merge pull request #104 from mjcheetham/bb-oauth,Add Bitbucket support (text prompts only)
1197,bitbucket: use Sourcetree's client ID and secret,"Until we have the GCM OAuth application ready in Bitbucket, continue to use Sourcetree's client ID and secret as GCM Windows does."
1198,bitbucket: allow OAuth params to be overridden at runtime,"Allow the OAuth client ID, secret, and redirect URI to be overridden at runtime using environment variables or config."
1199,bitbucket: add Bitbucket authentication provider,"Add a Bitbucket authentication provider using OAuth2, with TTY-based interface only."
1200,Merge pull request #110 from microsoft/release,Merge release branch changes back into master
1201,Merge branch 'master' into release,
1202,Merge pull request #109 from microsoft/fix-rel,Fix bugs in release pipeline
1203,github: make user/pass the default auth mode over TTY,Make username/password authentication the default mode when presented with the options over the TTY. This is because we still don't have a whitelisted OAuth application and any OAuth tokens will have restrictions when used for org-owned repos.
1204,packaging: fix macOS pack job use of \ vs / file seps,Use the correct file path separator for the macOS packaging step
1205,build: fix Windows packaging tool install step,"Fix the step where we install the nbgv tool on Windows. Looks like the build agents are not being cleaned and the --global install of the nbgv tool from previous runs is peristed and subsequent runs of that step fail due to ""already being installed""."
1206,notarization: skip notarization step until fix in place,"Skip notarization step until a fix is in place for #108. Notarization fails on macOS because during code signing with MicroBuild we are losing the ""Hardened Runtime"" flag, and the .NET Core runtime Mach-O binaries are not code signed."
1207,github: fix 2FA code capture,The GitHub 2FA code prompt was always reporting 'closed' rather than accepted!
1208,signing: fix signing,Revert to the old MSBuild/NuGet tools for signed builds because the Microbuild signing tasks only work with these and not the dotnet tooling.
1209,Merge pull request #107 from mjcheetham/add-banner,Add GitHub banner image
1210,Merge pull request #105 from microsoft/master,Cut new release
1211,assets: add GitHub banner image,
1212,Merge pull request #106 from mjcheetham/fix-winbuild,Workaround Azure Pipelines build bug
1213,build: workaround Azure Pipelines build bug,"For some reason our Azure Pipelines builds are failing (occasionally) to restore packages unless we explicitly run a dotnet restore before our dotnet build. The Azure Pipelines team are still not sure why this is failing, or why it only happens one some of the hosted agents and not others (despite compiling the same commit)!"
1214,Merge pull request #103 from mjcheetham/gh-oauthenv,Allow GitHub OAuth params to be overridden at runtime
1215,github: allow OAuth params to be overridden at runtime,"Allow the OAuth client ID, secret, and redirect URI to be overridden at runtime using environment variables or config."
1216,Merge pull request #102 from mjcheetham/oauth2-pkce,Implement RFC 7636 PKCE in OAuth client and fix redirect URI bug
1217,oauth: ensure auth grant redirect URI matches token req,
1218,oauth: implement RFC 7636 PKCE in OAuth client,Implement the Proof Key for Code Exchange (RFC 7636) specification in the OAuth2 client.
1219,Merge pull request #101 from mjcheetham/github-oauth-ui,Support OAuth based authentication on GitHub; include a UI refresh
1220,build: ignore Windows projects in Mac sln configs,
1221,netcore: upgrade to .NET Core 3.1,Upgrade our .NET Core components from 2.1 to 3.1 (LTS).
1222,build: use latest .NET Core SDK 3.1.201 to build,"Use the latest .NET Core 3.1.x SDK to build since we are using the new WindowsDesktop project SDK. We are not targeting .NET Core 3.1 yet, but need the newer toolchain."
1223,github-ui: use new GitHub UI on Windows,Use a refreshed WPF-based UI on Windows for GitHub authentication. Supports selecting OAuth/browser authentication and also displays the URL of a GitHub Enterprise instance if authentication to one.
1224,github: use OAuth2/web flow for GitHub,Add an OAuth2 web browser-based authentication flow to replace the username & password flow for GitHub.com and augment the u/p flow for GHE instances.
1225,settings: pull generic 'get' methods up to interface,Pull the general TryGetSetting and GetSettingValues methods up from the Settings class to the ISettings interface for all providers to use for their own settings.
1226,terminal: add a simple TTY-based menu system,Add a simple menu system that works over the TTY. This is useful for presenting a selection of authentication options to the user when no UI is available.
1227,Merge pull request #99 from mjcheetham/oauth2,Add an OAuth2 client implementation
1228,oauth: add unit tests for OAuth2Client,
1229,oauth: add an OAuth2 client implementation,"Add an OAuth2 client implementation that supports the authorization code grant, and the device authorization grant (device code) flows."
1230,build: update macOS build images,
1231,Merge pull request #94 from mjcheetham/debug-trace,Add debug trace listener when debugger is attached
1232,Add debug trace listener when debugger is attached,"When a debugger is attached, automatically add a listener that will output to the debug console."
1233,Merge pull request #92 from mjcheetham/basic-nativeui,Add ISystemPrompts component and impl for Windows
1234,Set parent window handle based on GCM_MODAL_PARENTHWD,Wire up the parent window handle to system prompts and UI helpers.
1235,Add ISystemPrompts component and impl for Windows,"Introduce the ISystemPrompts component which provides native/system UI prompts, starting with basic credential prompts. Include a basic implementation for Windows."
1236,Merge pull request #96 from microsoft/zippy,Create and publish zip & tar.gz archives of app and symbols
1237,Create and publish zip & tar.gz archives of app and symbols,"Create and publish ZIP and TAR archives on Windows and Mac containing the GCM Core app binaries, and symbols."
1238,Merge pull request #91 from mjcheetham/nointeractive,Add GCM_INTERACTIVE/credential.interactive setting
1239,Add GCM_INTERACTIVE/credential.interactive setting,"Add a setting to disable all user interaction. By setting GCM_INTERACTIVE or credential.interactive to a 'falsey' value, GCM Core will now fail and return an error if user interaction is required. This is useful in headless and unattended environments, such as build servers, where is is preferable to fail than it is to hang waiting for input from a non-existent user. The setting also existed in the previous GCM for Windows, but its behaviour has been slightly modified to treat 'always' values as 'auto'. See more in the documentation and the code. The default value is true / permit interaction."
1240,Merge pull request #87 from microsoft/release,Sync master branch with missing commits from release branch
1241,Merge pull request #89 from microsoft/fixrelease,Fix up release build problems
1242,Use correct path sep. for macOS notarize step,Use the correct path separator in the macOS build YAML for notarizing the installer pkg file and containing binaries.
1243,Merge pull request #88 from mjcheetham/release-prep,Prepare release
1244,Merge branch 'release' into release-prep,
1245,Merge pull request #85 from mjcheetham/notarize,Notarize and staple the installer pkg on macOS
1246,Notarize and staple the installer pkg on macOS,Enable installation and executable on macOS Catalina (10.15) now that Gate Keeper requires notarization. We staple the notarization ticket to the package too to allow for offline installs.
1247,Merge pull request #83 from mjcheetham/fix-copypaste,Enable copy/paste/cut in macOS MSAuth web view
1248,Do not fail pipeline if optional tests fail,"The VSTest task now fails if no assemblies match the test filter. Since we don't have any Windows-only test assemblies currently, we can just continue on error for this task."
1249,Enable copy/paste/cut in macOS MSAuth web view,"Add a basic application main menu bar, with 'Edit' submenu containing the standard text manipulation commands (cut, copy, paste, select all, delete) to enable these actions in the authentication webview. This is useful for users who use password managers and need to paste into the webview."
1250,Merge pull request #80 from mjcheetham/port-winsignfix,[Port] Fix real-sign Windows build to actually sign
1251,Fix real-sign Windows build to actually sign,Ensure the Signing MicroBuild plugin has been installed when doing a real-signed Windows build.
1252,Merge pull request #79 from mjcheetham/fix-signwindows,Fix real-sign Windows build to actually sign
1253,Fix real-sign Windows build to actually sign,Ensure the Signing MicroBuild plugin has been installed when doing a real-signed Windows build.
1254,Merge pull request #78 from microsoft/master,"Prepare release with proxy support, Windows preview, inproc MS Auth"
1255,Merge pull request #67 from mjcheetham/msauth-inproc,Move Microsoft authentication in-proc
1256,Add clarifying comments to new MS auth impl,
1257,Return to building 64-bit in NetCore and NetFx on Windows,Now that we've moved the Microsoft authentication helper in-process we no longer have a need to force all entry executables to be the same bit-width. The GitHub authentication helper is still .NET Framework (as we're targeting .NET Core 2.x still) and using 32-bit WinForms. However that helper does not make use of the LibGit2 native bits (by virtue of not instantiating the CommandContext type).
1258,Move Microsoft authentication in-proc,Move Microsoft authentication in-process when no external helper application is present. This simplifies the scenario on .NET Framework (Windows) where MSAL supports WinForms-based UI.
1259,Use JsonWebToken type in place of strings for JWTs,
1260,Merge pull request #74 from mjcheetham/new-install,New Install 6/6: Implement (un)configuration for GCM Core
1261,Don't access managed objects in finalizer,
1262,Always run in 32-bit on Windows,"In order to ensure maximum compatibilty on Windows, we target 32-bit platforms (64-bit Windows can run 32-bit applications in WoW). Also fix a bug where we had mismatching/incompatible use of the native libgit2 binaries by the main GCM executable, and the .NET Framework-only WinForms 'authentication helpers' such as the Microsoft.Authentication.Helper project. These WinForms projects prefer 32-bit and failed to load the libgit2 binaries, which were restored as their 64-bit forms by the main CLI project."
1263,Add Azure Repos host provider configuration component,Add the required configuration/unconfiguration to the Azure Repos host provider. The required config is to set useHttpPath to true for dev.azure.com hosts.
1264,Add main application configuration component.,"Add main application configuration component, which will ensure the exectuable is on the PATH (on Windows) and configure itself and Git's credential helper in the user's config."
1265,Pass the executable path from the main CLI program,Pass the executable path from the main CLI project program into the Application object and HelpCommands. This path is also required for the future commit that uses the path to set up Git and the PATH correctly.
1266,Merge pull request #73 from mjcheetham/configservice,New Install 5/6: Add IConfigurationService and (un)configure commands
1267,Add IConfigurationService and (un)configure commands,"Add service that can configure and unconfigure components at the user or system level, and two commands that map to configure and unconfigure. Call these new commands from the Windows and Mac (un)installers. Update the help command output to include the new commands."
1268,Merge pull request #77 from mjcheetham/new-certs,Replace old SHA1 signing certificates with SHA256 ones
1269,Replace old SHA1 signing certificates with SHA256 ones,Per policy we should stop using SHA1 certificates for signing binaries and installers. The replacement for the 'Microsoft' Authenticode certificate is 'Microsoft400'.
1270,Merge pull request #72 from mjcheetham/multivar-git,New Install 4/6: Extend IGitConfiguration to allow manipulating multivars
1271,Extend IGitConfiguration to allow manipulating multivars,Extend the IGitConfiguration to allow manipulation of Git configuration 'multivars' (config entries that can have multiple values). This will be used in future commits to set the credential.helper variable to have two values.
1272,Merge pull request #71 from mjcheetham/environ,New Install 3/6: Introduce IEnvironment to replace IEnvironmentVariables
1273,Introduce IEnvironment to replace IEnvironmentVariables,Replace the simple IEnvironmentVariables envar wrapper with a component that includes the envars and other methods for manipulating the $PATH. This will be useful in future commits where we need to inspect and update the $PATH for postinstall and preuninstall. Also expose the new IEnvironment and existing IGit components on the command context in prep. Add a new path comparison method to IFileSystem and introduce platform-specific implementations.
1274,Merge pull request #70 from mjcheetham/rename-exec,New Install 2/6: Rename main executable to GCM Core to make SxS easier
1275,Rename main executable to GCM Core to make SxS easier,"Rename the main executable to include ""-core"" to make side-by-side installs of GCM Core and Windows-only GCM easier. We can just change the configuration between ""manager"" and ""manager-core""."
1276,Merge pull request #69 from mjcheetham/optimise-gitcfg,New Install 1/6: Optimise the use of Git configuration from the Settings component
1277,Introduce DisposableObject base class to impl the dispose pattern,Implement the dispose pattern correctly for all IDisposable objects by introducing a common abstract DisposableObject class which 'does the correct thing'.
1278,Optimise use of Git config from Settings component,Keep hold of a single IGitConfiguration object when creating an instance of the Settings component. When querying for scoped settings now we enumerate all configuration entries and store all those that have the same section and property name locally up-front. This prevents us from calling TryGetValue on the configuration object multiple times. Add tracing to the libgit2 calls.
1279,Merge pull request #68 from jamill/fix_osx_postinstall,Install: fix postinstall script on osx
1280,Install: fix postinstall script on osx,"The macOS install encounteres the following error when running the postinstall script: ./postinstall: /tmp/PKInstallSandbox.qGkbqk/Scripts/com.microsoft.GitCredentialManager.kjGWk5/postinstall: line 21: [: missing `]'  This resulted in the credential helper not being correctly configured. The problem is with the test on the indicated line - the '[ ]' test does not support '&&' statements inside the test expression, as it splits the expression into separate commands."
1281,Merge pull request #64 from czipperz/quote-bash-variables,Quote bash variables in installation scripts
1282,Quote bash variables in installation scripts,
1283,Merge pull request #62 from mjcheetham/proxy,Use Git's HTTP proxy configuration
1284,Use Git's HTTP proxy configuration,"Use the Git HTTP proxy configuration to create new configured HttpClient instances with proxy support. Add new documentation for the network and HTTP configuration options in GCM, such as proxy and TLS verification."
1285,Encapsulate stdin/out/err streams into IStandardStreams interface,"Extract the StdIn, StdOut, and StdErr properties from the bloated ICommandContext component into their own IStandardStreams component. This allows for a more granular dependency web between all the GCM components (no need to pass the entire ICommandContext just to write a message to standard error, for example`). This new abstraction model is used initially by the IHttpClientFactory which does not take in the entire context but just the other components that it needs. Existing callsites have been updated."
1286,Merge pull request #61 from mjcheetham/provider-override,Add ability to override host provider from configuration
1287,Add ability to override host provider from configuration,"Check the Git configuration for a specified host provider for the current repository remote URI. We look for the credential.authority configuration entry (and any URL scoped variants) for backwards compatibility with older GCMs, as well as the new credential.provider entry. Also introduce a new setting credential.allowWindowsAuth to allow users who used the basic authority to disable WIA detection of the new generic provider."
1288,Simplify ISettings,
1289,Merge pull request #60 from mjcheetham/settings,Introduce ISettings component to consolidate envar and Git cfg settings
1290,Introduce ISettings component to consolidate envar and Git cfg settings,Introduce a new component ISettings that provides an interface for looking up the value of various GCM settings that can be specified from either the environment or Git configuration.
1291,Merge pull request #56 from mjcheetham/http-on-context,Move IHttpClientFactory toICommandContext`
1292,Move IHttpClientFactory toICommandContext`,Move the IHttpClientFactory to the ICommandContext and simplify the instantiation points for the various *RestApi types.
1293,Merge pull request #54 from mjcheetham/gitcfg,Add ability to read Git config via libgit2
1294,Add ability to read Git config via libgit2,Use libgit2 to read Git configuration files and call other helpful methods such as locating config files and root repository directories. LibGit2Sharp was not used as we only need a minimal subset of the APIs. P/Invoke wrapping the native libgit2 C functions was created instead.
1295,Merge pull request #55 from mjcheetham/envar-refactor,Cache environment variables dictionary
1296,Cache environment variables dictionary,Cache the environment variables in a dictionary after first use and don't always reconstruct it per access.
1297,Merge pull request #53 from mjcheetham/msal-winonly,Move to using MSAL.NET on Windows
1298,Move to using MSAL.NET on Windows,Use MSAL.NET on Windows and update the Visual Studio token cache snooping to use the new 'extensions' library for MSAL to interact with the Visual Studio MSAL cache file.
1299,Merge pull request #52 from microsoft/master,Merge master to release
1300,Merge pull request #51 from microsoft/readme-updates,Clarify Linux strategy in readme
1301,Merge branch 'master' into readme-updates,
1302,Merge pull request #49 from mjcheetham/host-refactor,Refactor to allow HostProviders to override store and erase
1303,Clarify Linux strategy in readme,
1304,Refactor to allow HostProviders to override store and erase,Refactor the core commands and host provider types to permit providers to customise how they store and erase credentials. This would allow for providers that do not want to use the OS credential store for example.
1305,Merge pull request #41 from mjcheetham/windows-installer,Add Windows payload and installer projects
1306,Add Windows payload and installer projects,Add two projects for building (and signing) the Windows payload and installer (using Inno setup).
1307,Merge pull request #45 from mjcheetham/unlink-javagcm,Unlink the Java GCM from Homebrew if installed
1308,Unlink the Java GCM from Homebrew if installed,
1309,Mark GitHub support on Windows as done (with UI),"Since #40 is complete, we now have UI for GitHub on Windows.. updating the markdown current status table. Also minor formatting change to the table, we now centre the tick columns."
1310,Merge pull request #40 from mjcheetham/github-winui,Add GitHub helper on Windows using WPF on netfx
1311,Add GitHub helper on Windows using WPF on netfx,Add a Windows authentication helper for GitHub using WPF on .NET Framework 4.6.1.
1312,Merge pull request #39 from microsoft/master,"Merge master to release including #29, #30, #32, #33, #34, #35"
1313,Fix README.md check-marks in feature table,
1314,Merge pull request #33 from mjcheetham/dsym-archive,Produce and collect symbols on build
1315,Produce and collect symbols on build,
1316,Merge pull request #35 from mjcheetham/docs,Add and update documentation files
1317,Add and update documentation files,"Add more information about that aims and state of the project to the main README.md file, as well as some basic documentation under the new docs/ directory."
1318,Merge pull request #30 from mjcheetham/native-tty,Implement a native TTY interface for POSIX and Windows platforms and fix GitHub TTY prompts
1319,Change GitHub auth API to use async Task rather than Try-pattern,Change the GitHub authentication/prompt interface to be async Task based rather than the existing TryGet pattern. These methods could throw exceptions (which would indicate failure).
1320,Implement a native TTY interface for Windows,"Use the Kernel32 console APIs to directly read/write from the CONIN$ and CONOUT$ devices (the attached console, if available). Most of this code was ported from the GCM Windows project."
1321,Implement a native TTY interface for POSIX platforms,Replace the Console.Read/Write interface for terminal prompts with a system-native implementation that uses /dev/tty directly. This allows us to read and write to the terminal even when our stdin/out/err streams have been redirected by parent processes. We can also now exercise control over the TTY echo which is useful for hiding user input of passwords and other secrets.
1322,Introduce InteropException for all P/Invoke errors,"Add a new custom exception type InteropException that wraps up failures from interop (P/Invoke) code. Win32Exceptions, macOS and POSIX error codes are now wrapped in InteropException."
1323,Merge pull request #34 from mjcheetham/issue-templates,Add issue templates for GitHub
1324,Add issue templates for GitHub,
1325,Merge pull request #29 from mjcheetham/interop-refactor,Move all interop code under Interop namespace
1326,Move all interop code under Interop namespace,Move all the platform specific interop code to the Interop namespace and also group the P/Invoke calls into classes representing the modules/libraries/headers the original C functions live in.
1327,Merge pull request #32: Support AAD in MSA,Support AAD in MSA
1328,Support AAD in MSA, use common endpoint for MSA accounts
1329,Merge pull request #27 from Microsoft/fix-pkg-sign,Fix macOS installer package file signing
1330,Fix macOS installer pkg file signing,Manually zip the unsigned package file before sending it off for signing as there appears to be a problem with the signing task's logic for doing this itself.
1331,Update master CI build badge,
1332,Merge pull request #26 from Microsoft/newbuild,"Refactor repo layout, simplify build and use NB.GitVersioning, add release build YAML"
1333,"Refactor repo layout, simplify build and use NB.GitVersioning","Change the repository layout to group all the source and test files under the src/ directory, then split by platform (windows, osx, and shared) at the next level. Redirect the build output for all the projects to the top-level out/ directory. This means it's easier to do the path-math for signing and building the installers. Use Nerdbank.GitVersioning to provide a unified Semantic Version model for all of our assemblies and installers. Integrate the Mac-native MSAuth helper Xcode workspace into the main .NET build by chaining the build into the main CLI .NET project so that MSBuild shells out to xcodebuild. Also create a wrapper .NET project for the Mac installer script with a two step process: 'layout.sh' for making the installer payload layout, and 'pack.sh' for constructing the pkg file. Building the MSBuild project will call both layout and pack to produce an unsigned pkg file for development purposes. The signed release build can call 'layout.sh' and 'pack.sh' separately (and do signing of binaries in between)."
1334,Merge pull request #25 from mjcheetham/erase-userpass-match,Only erase credentials that match the username/password if specified
1335,Merge pull request #21 from mjcheetham/mac-adal-logs,Fix the MSAuthHelper on macOS to trace ADAL logs and return correct exit codes
1336,Merge pull request #22 from mjcheetham/tracing-tweaks,Fix a few problems with tracing secrets and missing vital error codes
1337,Capture ADAL logs; upgrade ADAL; use correct trace fmt; use exit code,Enable the Microsoft Authentication helper on macOS to include ADAL logging information in the trace output when GCM_TRACE_MSAUTH is set. Also respects PII or sensitive information tracing setting GCM_TRACE_SECRETS. Upgrade to ADAL 4.0.0 which has now fixed the problem of being noisy and writing to NSLog/stderr. Update the AHLogger trace format output to be consistent with that of the main GCM application and Git's own output. Correctly return a non-zero exit code and error message on failure.
1338,Ensure we log the actual Win32 error on failure,Ensure we are reporting the actual Win32Exception error message when a failure to access the Windows credential store occurs. Also print all inner exceptions and any codes for Win32Exceptions.
1339,Merge pull request #23 from mjcheetham/podrepoupdate,Ensure macOS build does pod repo update
1340,Ensure macOS build does pod repo update,
1341,Ensure we're not tracing secret info in dictionaries,
1342,Only erase credentials that match user/pass when present,"Only erase stored credentials when the user name and password values match those passed on standard input, if any. When no user name and/or password are given on standard input we skip checking the stored value and just erase the credential. This is an important but possibly subtle behaviour to help prevent erroneous erasure of credentials. Calls to git-credential fill should immediately be followed by git-credential approve or reject. If there are concurrent processes that have called fill but not yet approve or reject, there's a gap when another (faster) process could have completed the fill+approve combination and have stored a different credential value than what the first process got from fill. If the first process fails and calls reject the valid credential as approve-ed by the second process would be deleted. This change helps prevent such a scenario (although there is still a small gap inside the GCM erase command itself between reading the OS's credential store and deleting from it - we could look at some system-wide lock around the credential store if this is deemed a problem later)."
1343,Merge pull request #19 from mjcheetham/macos-msauth-helper,Add Microsoft Authentication helper for macOS
1344,Update Azure Pipelines YAML to build macOS msauth helper,Update the Azure Pipelines YAML for macOS to build the Microsoft Authentication helper using Xcode and also build & publish the installer package.
1345,Add basic .pkg installer script,Add a simple flat-package installer with postinstall script to configure the user's system gitconfig.
1346,Add initial version of Mac MSAuth helper using ADAL 2.5.1,"Add the initial version of the Mac Microsoft Authentication Helper using ADAL 2.5.1 via CocoaPods. The pods are statically linked so only a single executable ""Microsoft.Authentication.Helper"" is required to be distributed with GCM. ADAL 2.5.1 was chosen because later ADAL versions include a bug where errors were being written to standard error: https://github.com/AzureAD/azure-activedirectory-library-for-objc/issues/1362"
1347,Merge pull request #16 from mjcheetham/windows-msauth-helper,Add Microsoft Authentication helper for Windows
1348,Enable multi-targeting to NetFX 4.6.1 on Windows,"Enable building the class libraries and head CLI project against .NET Framework 4.6.1 when compiling on Windows. This enables the Windows-only authentication helpers (which build against the Microsoft.Git.CredentialManager.dll library) to avoid pulling in the .NET Standard type-forwarding libraries, which not only allows us to deploy the helpers and the main GCM executable in to the same directory without conflicting type-fwd libraries, but also greatly reduces the number of assemblies required to ship on Windows."
1349,Add Microsoft Authentication helper for Windows,Add an authentication helper for AAD/MSA auth that runs on Windows. ADAL.NET is used to obtain an access token based on input fed over stdin by Git Credential Manager. The access token is returned back to GCM over stdout on success. Common application start-up code has been refactored into the ApplicationBase abstract class. This ensures consistent tracing and debug support using the GCM_TRACE & GCM_TRACE_SECRETS and GCM_DEBUG environment variables.
1350,Merge pull request #15 from mjcheetham/github-provider,Add GitHub host provider (with basic TTY credential prompts)
1351,Add GitHub host provider with basic TTY cred prompts,The required web calls and call flow/patterns are based on the original Git Credential Manager GitHub code. The support for GitHub authentication is by a basic TTY credential prompt (also supporting 2FA). In the future a credential helper which can show GUI to capture the user/pass/auth-code can be added in a similar manner to the Microsoft Authentication Helper.
1352,Merge pull request #18 from mjcheetham/reorganise-build,Enable building Mac/Windows specific solution projects
1353,Enable building Mac/Windows specific solution projects,"Rearrange the directory structure of the repository to make it easier to selectively build platform-specific code. The common/ directory contains any code that can be built and run on all platforms. The windows/ (and mac/, linux/, etc as needed) directory contains code that can only be built and/or run on Windows. Change the main .NET solution to be built for either Windows or Mac - building only those projects which are required for Windows/Mac. This is done via solution configurations, of which there are now four:  Debug Release WindowsDebug WindowsRelease  The Windows* configurations will build all the common class libraries (netstandard2.0), the Windows helpers (net461) and the CLI head project (netcoreapp2.1). The Debug/Release configurations will build only the common libraries (netstandard2.0) and the CLI head project (netcoreapp2.1). This is suitable for building on Mac & Linux (and Windows without the helpers)."
1354,Merge pull request #14 from mjcheetham/fix-httpclient,Don't double dispose HttpClients and ensure all objects are correctly disposed on exit
1355,Ensure all app resources are disposed on exit,Refactor the main Application class to be disposed on application exit. All components that have IDisposable object references have now been given a chance to dispose of them.
1356,Update Azure Repos REST API class to reuse it's HttpClients,"Update the Azure Repos REST API class to only create one HttpClient instance, configure common headers, and reuse the same instance for all requests."
1357,Revert back to new HttpClient instance per request,"Move back to creating a new HttpClient instance per request for few reasons:  The current code/pattern was broken - we were double disposing of    the singleton client instance. It makes setting headers slightly easier as the caller no longer    must create request message with the headers set manually - just    set the default headers on their exclusive client.  In practice we're not going to be running for a long time, and we're not going to be making many requests, which would otherwise drain all the available network ports. If the individual providers wish to obtain a new HttpClient instance and reuse it for all their web calls, they are free to do so."
1358,Merge pull request #13 from mjcheetham/fix-tracesecrets,Fix secret tracing to print correct masking characters
1359,Fix secret tracing to print correct masking characters,Fix the secret tracing facility to actually print the masking chararcters rather than a type name of the 'IEnumerable' or similar text.
1360,Merge pull request #10 from mjcheetham/azure-repos-provider,Add Azure Repos provider (not including MSA/AAD authentication helpers)
1361,Add Azure Repos host provider,Add a host provider for the Azure Repos Git host provider. Authentication with AAD or MSA is performed by calling out to a platform-specific 'helper' application which can show native GUI. These AAD/MSA auth platform helpers will be added at a later date.
1362,Update HttpClientFactory to use singleton client,"Don't create a new HttpClient on each GetClient call; we run the risk of exhausting all available sockets because a socket is assigned per client instance, and the socket does not become free immediately after disposal of the client. In light of this change to use a singleton instance, don't set the default headers on that singleton client otherwise we will pollute the client setup for other callers. Instead we set the headers per request message that is sent. Tests have been updated to cover the above changes. Additional minor change: move the HTTP-y constants to a nested static class Constants.Http.* for better grouping."
1363,Merge pull request #9 from mjcheetham/generic-provider,Add a generic provider supporting basic and WIA
1364,Broaden NTLM auth to all Windows Integrated Auth protocols,Broaden the scope of supported Windows Integrated Authentication (WIA) protocols that GCM will try and detect to also include 'Negotiate' (which could be either NTLM or Kerberos) as well as NTLM.
1365,Simplify prompt API and update basic auth API,Simplify the prompting API on ICommandContext to be explicit between the 'echoing' and 'non-echoing'/secret prompts. Also remove the not needed ability to specify the in/out streams. Update the IBasicAuthentication API to be transparent to the type of resource. Not all resources need to be valid URIs.
1366,Add a generic provider supporting basic and NTLM auth,Add a generic host provider that supports capturing credentials for both basic and NTLM protected resources.
1367,Add test HTTP objects,
1368,Merge pull request #8 from mjcheetham/cmds,"Implement the get, erase and store commands"
1369,Remove IsCredentialStoredOnCreation from IHostProvider,"Remove the IsCredentialStoredOnCreation extensibility point for host providers. Its purpose was largely to satisfy the AzureReposProvider's constraints, which we now believe is not required. If this turns out to be still required, we may consider re-adding it but only when the need arises."
1370,Add noop erase cmd test; simplify assert,
1371,Relax get command tests - ignore stdout ordering,Update the get command tests to be ignorant of the order in which the dictionary entries for username and password are output.
1372,Tweak StoreCmd tracing; test for null args in CanExec.,
1373,Add unit tests for get/erase/store commands,Add unit tests covering the new Get/Erase/StoreCommands and also update the HostProviderRegistryTests to take advantage of the newly added 'test' implementation objects that have been added; this makes the tests less verbose.
1374,Implement the erase and store commands,Implement the erase and store commands using the secure credential store APIs.
1375,Implement get command,
1376,Merge pull request #7 from mjcheetham/add-license-info,Add license headers and update LICENSE file
1377,Add license headers; update LICENSE file,"Per legal requirements:  Add license & copyright headers to every code file, Update the LICENSE file as given in an internal email: Add the product name, Update ordering of 'copyright' and 'MIT License' lines      to match order given in internal email."
1378,Merge pull request #2 from mjcheetham/secure-storage,Add secure credential storage APIs for Windows+macOS
1379,Update error handling in credstores,"Update the error handling performed in both MacOSKeychain and WindowsCredentialManager to be clearer about which native return codes we consider to be 'OK', and ensure we're throwing exceptions for all other types of unknown errors."
1380,Simplify native/managed marshaling code for MacOSKeychain,"Simplify some of the marshaling code between native and managed by using more methods from the Marshal type, rather than using our own helpers."
1381,Use the global alloc/free methods for native interop,Replace usages of the COM allocator (Marshal.AllocCoTaskMem and Marshal.FreeCoTaskMem) in the credential stores code with the global allocator (Marshal.AllocHGlobal and Marshal.FreeHGlobal). Since there is no COM heap on Mac using this allocator was not the correct thing to do. On Windows the CredRead/Write/Delete calls are Win32 API calls which don't use COM either. Use the global allocator for WindowsCredMgr native code
1382,Rename cred store static OpenDefault ctors to Open,Rename the MacOSKeychain and WindowsCredentialManager static contructor methods from OpenDefault to Open. In the future should we want to or need to disambiguate between which store is being used we can add overloads to the that singularly named method.
1383,Merge pull request #3 from mjcheetham/http,Add HTTP client factory and simplify app name/version collection
1384,Add HttpClientFactory tests; include Cache-Control header,
1385,Merge pull request #6 from mjcheetham/vscode,"Add VS Code config to enable build, test and debug"
1386,Drop 'Core' from public product name,
1387,Add Debug.Assert messages; rename helper methods, Add messages to the Debug.Assert calls in MacOSKeychain. Rename the GetDefaultCredentialStore helper method to   CreateCredentialStore in CommandContext.
1388,"Add VS Code config to enable build, test and debug","Add launch.json and tasks.json files for building, running unit tests and debugging GCM in Visual Studio Code."
1389,Merge pull request #5 from Microsoft/build-badge,Add CI build badge to README.md
1390,Add CI build badge to README.md,
1391,Merge pull request #4 from mjcheetham/yaml,Add basic Azure Pipelines-based CI and PR builds
1392,Make WriteDictionary ext methods use TextWriter.NewLine property,"Update the various WriteDictionary extension methods to use the TextWriter's configured NewLine property rather than forcing a line-feed (\n, LF). The CommandContext implementation correctly sets the NewLine property of the standard out and error TextWriters to LF, which Git is expecting. We will need to catch any regression here in functional tests. This simplifies the new-line writing code in the extensions methods (can now just use the WriteLine methods)."
1393,Fix bad ICredStore comment; add macOS native doc links,Fix an incorrect documentation comment on ICredentialStore that an exception is thrown for a missing credential key - it should return null instead. Add some more links to Apple documentation showing where various constant values came from.
1394,Add Azure Pipelines YAML PR & CI build defns,
1395,Build HTTP client user-agent string; simplify platform info,"Build a valid user-agent string for use with HTTP clients for GCM. Also simplify the building of program header version strings and command-line usage text by using reflection GetEntryAssembly in the library, rather than passing strings in from the CLI app."
1396,Add HTTP client factory and 'HEAD' extensions,Add HTTP client factory type and extension methods for sending HTTP 'HEAD' calls using HttpClient. TODO: generate a user-agent for the current machine
1397,Add secure credential storage APIs for Windows+macOS,Add secure credential storage APIs for the Windows Credential Manager and the macOS Keychain.
1398,Merge pull request #1 from mjcheetham/framework,Add basic framework for Git Credential Manager
1399,Add extra parens for readability,
1400,Add documentation comments to public types and members,
1401,Add comment about null check in Trace,
1402,More PR feedback: better xplat debug wait; test provider w/ path,
1403,Address PR feedback," Use 'Secret' rather than 'Sensitive' in tracing terminology   to be consistent with the environment variable name. Always print WriteLineSecrets but allow the caller to pass in   the secret parts as format arguments, which will now be masked   if EnableSecretTracing is false. The rationale for this is that   trace output will be more consistent, just with the secret parts   masked. git-credential treats the keys as case-sensitive; so should we. Use EnsureArgument helpers in Trace.cs Print usage information on incorrect usage."
1404,Add basic framework for Git Credential Manager,"Add basic framework for Git Credential Manager:  - .NET Core CLI application  - common/shared library with     - minimal credential-helper command stubs (get, store, erase)     - help and version commands     - Git-style tracing     - abstracted file system and stdin/out/err for testing  - unit tests"
1405,Add .DS_Store to gitignore,
1406,Initial commit,
1407,Initial commit,
1408,Initial commit,
