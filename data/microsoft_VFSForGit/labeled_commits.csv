Commit Message,Score,Correspond Changelog Sentence,Commit Description,Label
Merge pull request #1798 from neerajsi-msft/neerajsi/read-index-tickcount,0.4540103,Pull Requests,index-parser: get the time in a cheaper way,0
index-parser: Do not use DateTime.UtcNow for controlling logging.,0.59879225,- Log files now include UTC offset.,"UtcNow spends a lot of time getting a very precise system time, including leap seconds and interpolation through QueryPerformanceCounter. Use Environment.TickCount (milliseconds since boot) instead, since that just retrieves a value in shared memory that the kernel keeps up to date. This value is still suitable for controlling how much log output index parsing produces. This UtcNow call consumes 15% of the time under GitIndexParser.ParseIndex. See https://github.com/dotnet/runtime/blob/master/src/libraries/System.Private.CoreLib/src/System/DateTime.Windows.cs.",0
Merge pull request #1796 from ldennington/remove-nuget-commands-ref,0.5363294,- Upgrade supports NuGet feeds as a distribution source.,dependencies: resolve dependabot alerts,0
dependencies: upgrade SharpZipLib,0.4102456,1747: UpgradeVerb: write deprecation notice,Update newtonsoft.json to 13.0.1 to mitigate exposure to security vulnerability associated with previous versions.,0
dependencies: upgrade newtonsoft.json,0.427341,1747: UpgradeVerb: write deprecation notice,Update newtonsoft.json to 13.0.1 to mitigate exposure to security vulnerability associated with previous versions.,0
gvfs common: remove reference to Nuget.Commands,0.59839576,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,The Nuget.Commmands package version 4.9.2 contains a known vulnerability. Fortunately we are no longer using this package and can mitigate by removing our reference to it.,0
Merge pull request #1786: Adding Microsoft SECURITY.MD,0.4797644,- Updated Git for a security issue.,,0
Microsoft mandatory file,0.35716462,- Gracefully handle a missing shared object cache pack directory.,,0
Update Readme,0.78091,1750: Update Readme.md,,1
"Revert ""Merge pull request #1765 from derrickstolee/signing""",0.42363182,1647: Fix commit-graph expiration,"This reverts commit 183f1965c0dda4b73aedfccc9f17a3ba2c0fd7c2, reversing changes made to 2cd3558ab4d5bb1f7e42d55dd07df43889eba47a.",0
Merge pull request #1765 from derrickstolee/signing,0.47396573,Pull Requests,*.csproj: update MicroBuild package names,0
*.csproj: update MicroBuild package names,0.4186278,Update NuGet upgrader with new Microsoft package signing certificate,Necessary for new singing build changes.,0
Merge pull request #1763: Better index locking in FastFetch,0.5242971,- Multi-threaded index reads will improve load time of large .git/index,Use index.lock and move writes to head and refs to the end of the run to make interrupted fastfetch operations less bad,0
"Make it so that the index.lock file is just a lock file, not attempting to pass on pass-fail information to future instances",0.41165638,1675: PreCommandHook: don't lock pack-objects,,0
Get rid of the unneed 'backup' index idea - it's always working on a scratch index.,0.42814732,"* Sped up GVFS's parsing of the git index, shaving off 2-3 seconds for a large index file",,0
Refactor to do ref and index changes at the very end,0.2970066,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Add a bespoke index.lock file to protect fastfetch operations,0.5559448,1730: Fix an issue with FastFetch when deleting files,,0
Merge pull request #1761 from ldennington/deploy-with-wingetcreate,0.5513657,1738: Bumping version of update-winget action,Deploy to winget via wingetcreate,0
Deploy to winget via wingetcreate,0.6259722,1734: Adding winget workflow,Remove the custom mjcheetham/update-winget task in favor of the wingetcreate tool.,0
Merge pull request #1760: Update Git to v2.34.0.vfs.0.0,0.8473865,1736: Update Git to v2.31.1.vfs.0.3,"There were some build issues related to the install path moving from ""GVFS"" to ""VFS for Git"". The pack-file maintenance tests were flaky for reasons we've seen before on the Scalar side, so let's focus our efforts keeping the Scalar tests green.",1
Remove flaky packfile maintenance tests,0.41130054,1746: Delete custom upgrader,"These are verified by the Scalar functional tests, anyway.",0
install.bat: specify install dir,0.35192516,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
"Move expected path from ""GVFS"" to ""VFS for Git""",0.630254,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
Update Git to v2.34.0.vfs.0.0,0.8943889,1736: Update Git to v2.31.1.vfs.0.3,,1
Merge pull request #1759: Update winget link to reference winget-cli repo,0.6301581,1738: Bumping version of update-winget action,,0
Update winget link to a reference winget-cli repo.,0.675062,"After this release is promoted to a full release on GitHub, it will be available for installation via winget.",,0
"Merge pull request #1756: ""winget install microsoft-git"" finds entries in msstore",0.5220758,1653: Update Git to include v2.26.1,To address this: using the id parameter we can make sure it will always install this package.,0
Update Readme.md,0.8511744,1750: Update Readme.md,,1
"""winget install microsoft-git"" finds entries in msstore",0.5295237,Comes with Git for Windows 2.28.0,Adding the source parameter will make sure that the install command will actually install from winget,0
Merge pull request #1755 from ldennington/update-metadata,0.53241825,1750: Update Readme.md,Set up infrastructure for wingetcreate,0
Run release-winget on Windows Server,0.5645339,"After this release is promoted to a full release on GitHub, it will be available for installation via winget.",wingetcreate is a Windows exe and thus must be run on Windows. Updating our release-winget workflow accordingly.,0
Update inno installer metadata,0.43380147,- The installer now unmounts and remounts existing repos automatically,Updating inno installer metadata to align with the specification outlined in github/git-fundamentals#700.,0
Support spaces in paths when compiling,0.43636104,1685: minor path comparison fixup in ProductUpgrader,Updating necessary files to support spaces in paths when compiling VFS for Git.,0
Merge pull request #1754: Readme: add new winget install instructions,0.63689774,1738: Bumping version of update-winget action,The recommended way to install is now to use winget.,0
Readme: add new winget install instructions,0.6355113,1734: Adding winget workflow,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Merge pull request #1753 from ldennington/upgrade-winget,0.62499046,1738: Bumping version of update-winget action,Upgrade update-winget action to v1.4,0
Upgrade update-winget action to v1.4,0.82406384,1738: Bumping version of update-winget action,This version allows us to update existing winget manifests by specifying a manifest's SHA if it already exists in microsoft/winget-pkgs. Pull Requests  #178: Allow updates to existing winget manifests,1
Merge pull request #1751: Update Git to v2.33.0,0.82831943,1751: Update Git to v2.33.0,See microsoft/git#405.,1
Enable the ORT strategy in the control repo,0.44085178,1717 [HOTFIX] Update Git to remove ODB string check,,0
Update Git to v2.33.0,0.849074,1751: Update Git to v2.33.0,,1
Merge pull request #1750 from microsoft/update-readme,0.5755054,1750: Update Readme.md,Update Readme.md,0
Merge pull request #1738: Bumping version of update-winget action,0.87409,1738: Bumping version of update-winget action,Applying fix to prevent PRs into winget-pkgs from default branch of forks. See mjcheetham/update-winget#107 for more details.,1
Merge pull request #1747: UpgradeVerb: write deprecation notice,0.75339526,1747: UpgradeVerb: write deprecation notice,"We removed the old upgrader in #1746 but delayed creating its replacement. The plan was to use winget upgrade, but it is only experimental right now. Further, we would need to use winget list to determine if we needed winget install instead, and winget list is also experimental. The tool needs to mature more before we can create a dependency on it. Instead, warn a user that tries to upgrade with gvfs upgrade that this CLI is no longer supported and instead point them to the repository's README which can help with the latest update.",1
Merge pull request #1745: do not exit early if no blobs found for a period when prefetching,0.85794187,1745: do not exit early if no blobs found for a period when prefetching,Fix for #1743 - do not exit early if no blobs found for a period when prefetching.,1
UpgradeVerb: write deprecation notice,0.84190583,1747: UpgradeVerb: write deprecation notice,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1740: Skip launching UI if running unattended,0.784421,1740: Skip launching UI if running unattended,"In testing, we see the installer hanging until the UI is killed. ```pwsh Start-Process .\SetupGVFS.1.0.21085.9.exe -ArgumentList ""/VERYSILENT"", ""/NORESTART"", ""/NOCANCEL"", ""/SP-"", ""/CLOSEAPPLICATIONS"", ""/RESTARTAPPLICATIONS"", ""/LOG=gvfs.log"", ""/SUPPRESSMSGBOXES"" -Wait Hangs until GVFS.Service.UI is killed ``` Note, this is my first ever time editing an Inno Setup script or working with Pascal, so I may have gotten some things wrong :). Fixes #1739.",1
Merge pull request #1737: Update Git to v2.32.0,0.8488116,1737: Update Git to v2.32.0,,1
Update to Git 2.32.0.vfs.0.4,0.8766464,1736: Update Git to v2.31.1.vfs.0.3,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Whoops Pascal totally uses single quotes ðŸ˜Š,0.15080406,Bug fixes:,,0
Merge branch 'master' into patch-1,0.43309575,1653: Update Git to include v2.26.1,,0
Merge pull request #1746: Delete custom upgrader,0.744848,1746: Delete custom upgrader,"Remove all code for the custom upgrader that ran the installer either from GitHub or from a NuGet feed. This leaves gvfs upgrade non-functional, but a replacement will follow that calls winget upgrade vfsforgit.",1
Merge pull request #1741 from ldennington/fix-tag-formatting,0.46133018,1741: Fix winget tag specification,Fix winget tag specification,0
!fixup winget tag specification,0.82726353,1741: Fix winget tag specification,,1
Delete custom upgrader,0.90567136,1746: Delete custom upgrader,This leaves 'gvfs upgrade' non-functional Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Delete ProductUpgradeTimer,0.70086294,1668: ProductUPgradeTimer: remove unacceptable Environment.Exit(),"This timer is responsible for checking if there is a new VFS for Git version on a timer, then launches a notification to GVFS.Service.UI. I was hoping to delete all of GVFS.Service.UI, but we need the toast notifications for when we attempt to auto-mount and have a failure. Signed-off-by: Derrick Stolee dstolee@microsoft.com",1
Fix for #1743 - do not exit early if no blobs found for a period when prefetching.,0.9101322,1745: do not exit early if no blobs found for a period when prefetching,,1
FunctionalTests: disable builtin FS Monitor,0.47742575,1697: Fix functional tests to skip around ProjFS issue,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
RunFunctionalTests.bat: remove exits,0.31412262,1740: Skip launching UI if running unattended,"When I run the tests locally, these exits are hit every time. Something odd is happening. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Merge pull request #1744 from mjcheetham/newbuild,0.5230481,Pull Requests,Overhaul build and project systems and drop Mac/POSIX code,0
build: add releases/shipped to PR build trigger,0.4148625,Includes Git LTS security release,,0
Add failing unit test for #1743,0.52853465,1697: Fix functional tests to skip around ProjFS issue,,0
build: drop AnyCPU and x86 solution configurations,0.4266811,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
build: run functional tests in PR builds,0.509963,1697: Fix functional tests to skip around ProjFS issue,,0
build: add (currently unused) AzDO YAML release build,0.3790306,"A new config setting allows updating USN journals, which is needed when using BuildXL with VFS for Git.",,0
build: add GitHub Actions CI/PR workflow,0.44014788,"- VFS for Git will check the GitHub releases for the configured ring and prompt occasionally when running Git commands in a VFS for Git repository. To configure your ring, use the new gvfs config verb, like:",,0
build: add back new build scripts (for Windows only),0.42261994,The build system was rewritten from scratch to simplify the process and use a more recent version of .NET.,,0
build: migrate solution file,0.40285528,- Fixes a copy failure when copying the upgrade tool to its temporary location.,"Simplify solution configurations (we only build on Windows x64 now) and remove solution-level project build order.. we now rely on MSBuild and ""real"" project-to-project dependencies.",0
build: ignore functional tests that fail in CI only,0.49887246,1697: Fix functional tests to skip around ProjFS issue,,0
build: update FTs to run always against PATH,0.40863195,"A new config setting allows updating USN journals, which is needed when using BuildXL with VFS for Git.",,0
build: drop Mac/POSIX tests and drop WinOnly category,0.5650987,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
build: migrate GVFS.FunctionalTests project file,0.50083333,1697: Fix functional tests to skip around ProjFS issue,,0
build: merge GVFS.FunctionalTests.Windows tests into main project,0.47691998,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
build: migrate GVFS.Installer.Windows project,0.6201422,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,"Migrate the Windows installer project to the new build system, and also use wildcard inclusion of files in the Inno setup.",0
build: replace GVFS.SignFiles with GVFS.Payload project,0.63439304,1683: GVFS.SignFiles.csproj: include more DLLs for signing,Replace the 'sign files' project with a 'payload' project and script (that gathers binaries for signing).,0
build: migrate GVFS.PerfProfiling project,0.4963893,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
build: migrate GVFS.FunctionalTests.LockHolder project,0.49894688,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,,0
build: migrate GVFS.UnitTests and .Tests projects,0.41366273,- VFS for Git will performance maintenance in the background. This release will pack loose objects in .gvfsCache into packfiles. ,Also combine the GVFS.UnitTests and .Windows projects in to one project (it's all Windows now).,0
build: migrate FastFetch project,0.48552233,A case where FastFetch would not download a small number of files has been fixed.,,0
build: migrate GVFS project,0.5399344,"- In the future, VFS for Git will automatically upgrade as new bits become available in the configured ring, eliminating the need to run gvfs upgrade to ",,0
build: migrate GVFS.Service.UI project,0.50960183,* gvfs upgrade could fail if its background processes were launched in an existing enlistment.,,0
build: migrate GVFS.Service project,0.55800354,* gvfs upgrade could fail if its background processes were launched in an existing enlistment.,,0
build: migrate GVFS.Mount project,0.539186,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
build: migrate GVFS.Upgrader project,0.63728464,The gvfs upgrade command is deprecated. Future upgrades will require using winget or installing directly from the releases page.,,0
build: migrate GVFS.Hooks project,0.51446074,"- In the future, VFS for Git will automatically upgrade as new bits become available in the configured ring, eliminating the need to run gvfs upgrade to ",,0
build: migrate GVFS.Platform project,0.4958558,"- In the future, VFS for Git will automatically upgrade as new bits become available in the configured ring, eliminating the need to run gvfs upgrade to ",Also drop the .Windows specific project.. it's all Windows now.,0
build: migrate GVFS.Virtualization project,0.5198861,"- In the future, VFS for Git will automatically upgrade as new bits become available in the configured ring, eliminating the need to run gvfs upgrade to ",,0
build: migrate GVFS.GVFlt project,0.5417628,"- In the future, VFS for Git will automatically upgrade as new bits become available in the configured ring, eliminating the need to run gvfs upgrade to ",,0
build: migrate GVFS.Common project,0.49894524,"- In the future, VFS for Git will automatically upgrade as new bits become available in the configured ring, eliminating the need to run gvfs upgrade to ",,0
build: migrate VC++ projects to new build,0.42893165,1744: Overhaul build and project systems and drop Mac/POSIX code,"Migrate the native VC++ projects to use the new build variables, package restore, and WinSDK to 10.0.16299.",0
build: replace GVFS.Build with simpler MSBuild code,0.6008473,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,Replace the GVFS.Build directory and pre-build code with targets and tasks that are better integrated with the rest of the build.,0
build: drop more Mac/POSIX code,0.7770168,1744: Overhaul build and project systems and drop Mac/POSIX code,,1
build: drop old targets/props and add new ones,0.40320545,Update components included with internal distribution,Drop the older custom targets and props files for the new ones.,0
GitHooksLoader: move under GVFS dir and migrate proj,0.56227887,"- In the future, VFS for Git will automatically upgrade as new bits become available in the configured ring, eliminating the need to run gvfs upgrade to ",Move the GitHooksLoader under the GVFS directory and migrate the project file to v142 toolset (VS2019) and WinSDK10.0.16299. Also migrate project to use new MSBuild properties for the VSF for Git project.,0
build: drop all old scripts,0.4615658,1703: Delete all macOS projects,,0
build: drop old Azure Pipelines YAML CI/PR builds,0.41235888,1703: Delete all macOS projects,,0
Skip launching UI if running unattended,0.8934143,1740: Skip launching UI if running unattended,"In testing, we see the installer hanging until the UI is killed. ``` Start-Process .\SetupGVFS.1.0.21085.9.exe -ArgumentList ""/VERYSILENT"", ""/NORESTART"", ""/NOCANCEL"", ""/SP-"", ""/CLOSEAPPLICATIONS"", ""/RESTARTAPPLICATIONS"", ""/LOG=gvfs.log"", ""/SUPPRESSMSGBOXES"" -Wait Hangs until GVFS.Service.UI is killed ```",1
Bumping version of update-winget action,0.93199307,1738: Bumping version of update-winget action,,1
Merge pull request #1736: Update Git to v2.31.1.vfs.0.3,0.8868228,1736: Update Git to v2.31.1.vfs.0.3,This includes the latest changes for winget installation and upgrading with git update-microsoft-git.,1
Update Git to v2.31.1.vfs.0.3,0.9151978,1736: Update Git to v2.31.1.vfs.0.3,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1735 from ldennington/bump-release-winget,0.6370238,1738: Bumping version of update-winget action,Bumping mjcheetham/update-winget version,0
Bumping mjcheetham/update-winget version,0.74703896,1738: Bumping version of update-winget action,,1
Merge pull request #1734 from ldennington/ldennington/add-release-workflow,0.5076325,1714: Update Git to include LFS security release,Adding winget workflow,0
Cleanup,0.39900243,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Add winget workflow,0.92206395,1734: Adding winget workflow,,1
Merge pull request #1733: Update Git to include v2.31.1,0.84965634,1733: Update Git to include 2.31.1,See microsoft/git#320.,1
Merge pull request #1730: Fix an issue with FastFetch when deleting files,0.81823397,1730: Fix an issue with FastFetch when deleting files,This fixes #1729 and also takes care of a performance problem in the same method.,1
Update Git to include v2.31.1,0.82742065,1733: Update Git to include 2.31.1,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1732: Use one NuGet feed,0.75001407,1732: Use one NuGet feed,I pushed all of the packages we need to our custom feed. Script included.,1
Don't warn about higher packages,0.4068039,1747: UpgradeVerb: write deprecation notice,,0
Add bash script that pushes all local packages,0.35359886,Update components included with internal distribution,,0
Remove second NuGet feed,0.73526955,1732: Use one NuGet feed,,1
Fix an issue with FastFetch when deleting files,0.96246046,1730: Fix an issue with FastFetch when deleting files,,1
Merge pull request #1726: Config: commitGraph.generationVersion=1,0.79479724,1726: Config: commitGraph.generationVersion=1,See microsoft/scalar#492 for a similar change.,1
Update Git to include commitGraph.generationVersion config,0.74395025,1726: Config: commitGraph.generationVersion=1,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Config: commitGraph.generationVersion=1,0.923985,1726: Config: commitGraph.generationVersion=1,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1719: Enforce only a minimum Git version,0.5754161,1663: Update Git to v2.27.0,"The interface between microsoft/git and VFS for Git has been stable for a while. We don't anticipate changing it any time soon. Thus, we can drop the requirement of an exact Git version match. This PR changes the current logic in a few ways:  Take the full GitVersion parsing logic from microsoft/scalar, as it is more robust. Remove the exact version match with a minimum version match. Use a fixed constant version string instead of a build-time string. Require that the Revision of the version string is an exact match. We will use this to signal that a microsoft/git version introduces a breaking change that requires a VFS for Git upgrade.  What is a Revision item? In a Git version string such as v2.X.Y.vfs.Z.W, the Revision is represented by Z. This allows us to modify the other version items arbitrarily, including taking version numbers 2.X.Y from upstream and updating .W if we have any hotfixes to microsoft/git.",0
GVFSVerb: check custom Git version bounds,0.61551785,This includes Git v2.33.0.vfs.0.0.,"We will use the following rules for testing the Git version is compatible with the current version of VFS for Git:   The Platform must match "".vfs.""   The version must be at least the fixed minimum revision.   The Revision must equal the current minimum revision.   This allows us to upgrade Git without updating VFS for Git. Thus, we could reduce VFS for Git version upgrades when Git releases a security update. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
whitespace: standardize newlines in recently-edited files,0.2625073,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
GitVersion: use Scalar's parsing logic,0.3895279,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index",This parsing is more robust to many different Git versions. Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Merge pull request #1716: Update Git to remove ODB string check,0.8498718,1717 [HOTFIX] Update Git to remove ODB string check,[HOTFIX] Update Git to remove ODB string check,1
Update Git to remove ODB string check,0.9261248,1717 [HOTFIX] Update Git to remove ODB string check,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1714: Update Git to include LFS security release,0.87141854,1714: Update Git to include LFS security release,,1
Update Git to include LFS security release,0.92342126,1714: Update Git to include LFS security release,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
1712: git-vfs: update to Git 2.30.0,1.0000002,1712: git-vfs: update to Git 2.30.0,git-vfs: update to Git 2.30.0,1
git-vfs: update to Git 2.30.0,0.93940544,1712: git-vfs: update to Git 2.30.0,,1
Merge pull request #1710: Add new Microsoft certificate thumbprint,0.79267824,1710: Add new Microsoft certificate thumbprint,There is a new certificate thumbprint for the Microsoft signing certificates used to sign NuGet packages.,1
upgrade: add new Microsoft certificate thumbprint,0.88334215,1710: Add new Microsoft certificate thumbprint,There is a new certificate thumbprint for the Microsoft signing certificates used to sign NuGet packages.,1
Merge pull request #1706: Update Git to include GCM Core update,0.89504886,1706: Update Git to include GCM Core update,This actually updates to a better build:  It has a new tag v2.29.0.vfs.0.1. It was created after git-for-windows/build-extra updated with the new GCM Core package.,1
Update Git to include GCM Core update,0.9444603,1706: Update Git to include GCM Core update,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1703: Delete all macOS projects,0.7875021,1703: Delete all macOS projects,"Some macOS projects were causing failures in the release process, so let's finally get around to deleting them. Replaces #1700.",1
More macOS deletions,0.51232463,1703: Delete all macOS projects,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Delete all macOS projects and platform code,0.81622046,1703: Delete all macOS projects,"Some macOS projects were causing failures in the release process, so let's finally get around to deleting them. Signed-off-by: Derrick Stolee dstolee@microsoft.com",1
Merge pull request #1694: Update Git to v2.29.0,0.8180139,1694: Update Git to v2.29.0.,See microsoft/git#295. Scalar already merged these changes to the PackfileMaintenanceStepTests. The other changes were reviewed privately.,1
GitObjects: use new SideChannelStream to hash during download,0.48605242,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,"The loose object download needs to verify the objects being sent across the wire before moving them to their ""real"" locations in the object directory. The previous implementation wrote them to disk then read from that file to hash the contents. Instead, create a new ""SideChannelStream"" that injects between the responseStream and the inflater, but sends all of the data that is read out to the filestream. Here is a diagram of the stream sequence: responseStream -> sideChannelStream -> inflateStream -> hashingStream                            \                                   |                 \                                 \|/                  tempFileStream                devNull By copying all data from the hashingStream into devNull, we ensure that the responseStream is drained and written to the tempFileStream while simultaneously inflating and hashing the object contents. We then amortize this computation during the window that we are downloading data over the network, minimizing the potential performance impact. Helped-by: Matthew Cheetham mjcheetham@github.com Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
GitObjects: hash incoming loose objects,0.46918628,"- GVFS can now recover from corrupted git object files (e.g. caused by a torn write), by re-downloading them whenever git asks for an object. The assumption is that git would not be asking GVFS for it if the object was valid.","After we write the data to disk, check the file that it matches the correct hash before moving it into place. If the hash is wrong, then include details about where the data is stored for reference. This can be marked as optional to make existing unit tests work, but the logic is covered by a new set of unit tests. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Build: include SharpZipLib,0.36476466,Previous builds were not including fully-signed DLLs. This is now fixed.,"We will start hashing loose objects downloaded from the remotes, but we need to include a package (SharpZipLib) that can handle the headers included in the ZLib compression used by Git. .NET's default decompression algorithm cannot handle those optional headers, unfortunately. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
PackfileMaintenanceStepTests: Git 2.29 does batching differently,0.52007306,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",The last condition of this test no longer applies because Git will repack files in a different way than it used to. Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Update Git to v2.29.0,0.83317184,1694: Update Git to v2.29.0.,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1697: Fix functional tests to skip around ProjFS issue,0.8547845,1697: Fix functional tests to skip around ProjFS issue,See #1696 for the tracking issue. This PR intends to get our functional tests green again so we can have some confidence in the Git 2.29.0 update in #1694.,1
FunctionalTests: Use temporary branch to fix all tests,0.53894293,1697: Fix functional tests to skip around ProjFS issue,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
WindowsFileSystemTests: disable a test around LongFileName folder,0.40815818,1697: Fix functional tests to skip around ProjFS issue,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Merge pull request #1689 from kyle-rader/user/kyrader/delete-docs,0.6256119,1689: Make delete docs more verbose,Make delete docs more verbose.,0
Add sub section for recovering from pre-delete.,0.53507674,1689: Make delete docs more verbose,,0
Add explicit step for removing the repo after unmounting.,0.66142833,- The installer now unmounts and remounts existing repos automatically,,0
Merge pull request #1682: Update Git to v2.28.0,0.8004341,1682: Update Git to v2.28.0,See microsoft/git#283,1
Update Git to v2.28.0,0.8211182,1682: Update Git to v2.28.0,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1685: minor path comparison fixup in ProductUpgrader,0.8805214,1685: minor path comparison fixup in ProductUpgrader,Convert an inadvertent use of StringComparer.OrdinalIgnoreCase to the relevant OS-specific PathComparer helper.,1
minor path comparison fixup in ProductUpgrader,0.9347625,1685: minor path comparison fixup in ProductUpgrader,Convert an inadvertent use of StringComparer.OrdinalIgnoreCase to the relevant OS-specific PathComparer helper.,1
Merge pull request #1683: GVFS.SignFiles.csproj: include more DLLs for signing,0.872281,1683: GVFS.SignFiles.csproj: include more DLLs for signing,"It appears that during our build, we send some DLLs for signing, but the versions we send have already been copied to other projects. Thus, we ship versions of those DLLs that are unsigned. Add extra versions of the DLLs that are currently being signed, except include them in the GVFS.Windows project that is likely where they are being copied as part of the build.",1
GVFS.SignFiles.csproj: include more DLLs for signing,0.9207139,1683: GVFS.SignFiles.csproj: include more DLLs for signing,"It appears that during our build, we send some DLLs for signing, but the versions we send have already been copied to other projects. Thus, we ship versions of those DLLs that are unsigned. Add extra versions of the DLLs that are currently being signed, except include them in the GVFS.Windows project that is likely where they are being copied as part of the build. Signed-off-by: Derrick Stolee dstolee@microsoft.com",1
Merge pull request #1679: BuildGVFSForWindows.bat: use nuget on PATH when possible,0.89018726,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,"Our release build is failing because we cannot download nuget due to TLS 1.2 changes. But we already require nuget.exe in an earlier step of the build. Require nuget.exe to be on the PATH, and update Readme.me accordingly.",1
BuildGVFSForWindows.bat: use nuget on PATH when possible,0.90130574,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,"Our release build is failing because we cannot download nuget due to TLS 1.2 changes. But we already require nuget.exe in an earlier step of the build. Require nuget.exe to be on the PATH, and update Readme.me accordingly. Signed-off-by: Derrick Stolee dstolee@microsoft.com",1
Merge pull request #1676: Update Git to v2.27.0.vfs.1.0,0.8761134,1676: Update Git to v2.27.0.vfs.1.0,See microsoft/git#278,1
Update Git to v2.27.0.vfs.1.0,0.9195022,1676: Update Git to v2.27.0.vfs.1.0,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1675: PreCommandHook: don't lock pack-objects,0.8109636,1675: PreCommandHook: don't lock pack-objects,We have a short list of Git commands that are known to be safe to run in parallel because they do not update the index. This list did not include git pack-objects. This is blocking some legitimate use of the tool.,1
PreCommandHook: don't lock pack-objects,0.8713948,1675: PreCommandHook: don't lock pack-objects,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1674: Config: disable status.submoduleSummary,0.8370211,1674: Config: disable status.submoduleSummary,"The GVFS protocol does not support submodules, so disable the status.submoduleSummary config setting. A user had this enabled in their global config, but that caused ""git status"" to be much slower. When enabled, this runs two ""git submodule"" subprocesses, which are very slow. I investigated disabling these subprocesses in Git when the repo has no submodules, but it needs to run the processes to check for untracked submodules. Thus, there is no efficient way to detect that submodules exist or not in advance.",1
Merge pull request #1672: ProductUpgrader: be extra careful about a copy loop,0.7886972,1672: ProductUpgrader: be extra careful about a copy loop,"The ProductUpgrader makes a backup of the C:\Program Files\GVFS folder before running the install, as a mechanism for backing out a failed upgrade. However, it copies that data into C:\Program Files\GVFS\ProgramData\GVFS.Upgrade\Tools, which can create a copy loop! This affected an actual user. I'm not sure why this affects that one user but not another. In addition to adding more defensive programming (adding the target of the copy to the list of exclusions), I also added some extra tracing so we can see how these strings differ on this machine.",1
Config: disable status.submoduleSummary,0.94412845,1674: Config: disable status.submoduleSummary,"The GVFS protocol does not support submodules, so disable the status.submoduleSummary config setting. A user had this enabled in their global config, but that caused ""git status"" to be much slower. When enabled, this runs two ""git submodule"" subprocesses, which are very slow. I investigated disabling these subprocesses in Git when the repo has no submodules, but it needs to run the processes to check for untracked submodules. Thus, there is no efficient way to detect that submodules exist or not in advance. Signed-off-by: Derrick Stolee dstolee@microsoft.com",1
troubleshooting.md: include description of ,0.52755207,We have new documentation including a new troubleshooting guide!,"Checking for GVFS upgrades...- Checking for GVFS upgrades...\ Checking for GVFS upgrades...\ Checking for GVFS upgrades...| Checking for GVFS upgrades...| Checking for GVFS upgrades...Succeeded New version 1.0.19346.2 is available. Upgrade will unmount and remount gvfs repos, ensure you are at a stopping point. When ready, run gvfs upgrade --confirm from an elevated command prompt. bug Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
ProductUpgrader: use OrdinalIgnoreCase in exluded HashSet,0.46173584,1685: minor path comparison fixup in ProductUpgrader,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
ProductUpgrader: be extra careful about a copy loop,0.8985244,1672: ProductUpgrader: be extra careful about a copy loop,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1663: Update Git to v2.27.0,0.85375863,1663: Update Git to v2.27.0,"See microsoft/git#271. Updates necessary here:   The multi-pack-index builtin started honoring repack.packKeptObjects, which is false by default. We want to repack the .keep pack because that is just the most-recent prefetch pack-file. We don't expire it, but we want to repack it.   The sparse-checkout code changed some error messages and behavior, so the reset --mixed tests no longer reflect an exact behavior match to vanilla Git (without sparse-checkout). Since VFS for Git dynamically sparsifies, we can't exactly match the behavior in the control repo. ",1
ResetMixedTests: drop test that behaves differently,0.3680917,1697: Fix functional tests to skip around ProjFS issue,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
GitProcess: repack kept packs,0.5569369,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Update Git to v2.27.0,0.8675838,1663: Update Git to v2.27.0,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1669: Docs: more troubleshooting and FAQs,0.64672774,1669: Docs: more troubleshooting and FAQs,"More progress towards #1665:  Add some troubleshooting steps from the private wiki and recent issues. Add FAQs around macOS port and Scalar.  The release process needs to be documented, but it includes private info so that will happen in a private repo.",0
Update docs/troubleshooting.md,0.6411416,We have new documentation including a new troubleshooting guide!,Co-authored-by: Johannes Schindelin dscho@github.com,0
FAQ: add discussion of macOS and Scalar,0.31370062,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git",Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Troubleshooting: add more common issues and solutions,0.5340895,1669: Docs: more troubleshooting and FAQs,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Troubleshooting: copy known issues from private wiki,0.4449411,1669: Docs: more troubleshooting and FAQs,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Merge pull request #1668: ProductUpgradeTimer: remove unacceptable Environment.Exit(),0.78020644,1668: ProductUPgradeTimer: remove unacceptable Environment.Exit(),"A user reported an issue via the Teams channel. Looking at the diagnose logs I saw that the user's GVFS.Service was restarting in a loop with an exception tracking down to this Environment.Exit() call. It's completely unacceptable to exit here, as it kills the service and then it restarts. Better to have no upgrades than to let this continue. The cause of this exception was a missing executable when checking ProjFS.IsGVFSUpgradeSupported(), which seems to call PowerShell. The only reason the stack would have a Win32Exception with ""The system cannot find the file specified"" is that powershell.exe is not on the PATH, which was fixed in #1658.",1
Merge pull request #1664: Update USN journal entries for projected folders,0.8177885,1664: Update USN journal entries for projected folders,"This replaces #1648. BuildXL was having issues detecting that a folder had changes when the projection changed because VFSForGit was simply updating its in memory projection and not doing anything with the file system that would trigger and update to the USN. It would hand back the new items in the directory when ProjFS would ask for the items for enumeration the next time an enumeration happened. This change is to make the folder get a new USN when VFSForGit determines that a folder has changed.  This is done by keeping a SHA1 hash of all the names of the folder entries that are in the projection. When the projection changes, calculate the new SHA for the folder and compare with what it had before.  If it changed, then write and delete a file in the folder to trigger the USN update. Note: We don't need any upgrade step because we are already storing the SHA for the folder in the placeholder database but it is currently null for all folders so the first time there is a projection change it will cause all the folders to get the calculated SHA for the folder and update the placeholder database.  Tasks:  [X] Update folder SHA-1 calculation to depend only on child names, not contents. [x] Get installer to BuildXL folks for validation. [x] Place this behavior behind a config option. [ ] Document the config option. (Delaying to #1665) [ ] Update functional test to run in CI and PR validation (behind config). (The test is updated to work behind the config, but the fsutil usn readdata <path> command isn't working in CI. Tested locally.)",1
Merge pull request #1666: Docs: start basic template,0.6774458,1666: Docs: start basic template,"We don't have a lot of user-facing documentation. Someone owns VFSforGit.org but I don't know who. (@ethomson probably knows.) However, it would be better to have a set of docs in the repo. This provides some basic info for using VFS for Git, especially around the happy path. To finish #1665, I will update the troubleshooting docs with more advice around the not-so-happy paths.",0
ProductUpgradeTimer: remove unacceptable Environment.Exit(),0.93550885,1668: ProductUPgradeTimer: remove unacceptable Environment.Exit(),Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
docs: add basic user-facing documentation,0.47350168,1666: Docs: start basic template,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Readme: delete reference to Mac version,0.4779672,1703: Delete all macOS projects,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
FolderData: opt-in to USN journal updates with config,0.6670923,1664: Update USN journal entries for projected folders,"Add new ""usn.updateDirectories"" boolean config option. This is set in the system-wide config, and requires remounting for the config to take effect. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
FolderData: update USN journal based on file name only,0.67247367,1664: Update USN journal entries for projected folders,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
FolderData: hash child folder names,0.33799118,Adds additional logging for folder and file placeholder creation.,"To update the USN journal entries for a projected folder, we previously computed the new hash based on the contained files and their contents. Let's also include the file and folder names. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Ignore test for build machines because WSL not enabled on them,0.26993302,"A new config setting allows updating USN journals, which is needed when using BuildXL with VFS for Git.",,0
Log number of folder placeholders that get SHA updated,0.53015983,Adds additional logging for folder and file placeholder creation.,,0
Fix upgrade tests that were broken,0.48772132,1685: minor path comparison fixup in ProductUpgrader,,0
Track folder changes to update USN journal,0.729159,1664: Update USN journal entries for projected folders,,1
Add test to make sure the USN for a folder changes,0.4115679,1664: Update USN journal entries for projected folders,,0
Merge pull request #1658: ProjFSFilter: Be more robust to missing PowerShell,0.88530624,1658: ProjFSFilter: Be more robust to missing PowerShell,"A user had issues and we started a support line. Their diagnose log had thousands of service logs. These were all failing with this call stack pointing to the method changed here: System.ComponentModel.Win32Exception (0x80004005): The system cannot find the file specified  at System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo)    at GVFS.Common.ProcessHelper.StartProcess(Process executingProcess)     at GVFS.Common.ProcessHelper.Run(ProcessStartInfo processInfo, String errorMsgDelimeter, Object executionLock)      at GVFS.Platform.Windows.ProjFSFilter.IsGVFSUpgradeSupported() in E:\\A\\_work\\822\\s\\GVFS\\GVFS.Platform.Windows\\ProjFSFilter.cs:line 371         at GVFS.Upgrader.InstallerPreRunChecker.IsGVFSUpgradeAllowed(String& consoleError)          at GVFS.Upgrader.InstallerPreRunChecker.TryRunPreUpgradeChecks(String& consoleError)            at GVFS.Service.ProductUpgradeTimer.TimerCallback(Object unusedState) in E:\\A\\_work\\822\\s\\GVFS\\GVFS.Service\\ProductUpgradeTimer.cs:line 168 The only explanation I can think of is that PowerShell is not available on their system!",1
Merge pull request #1659: Update Git to include v2.26.2,0.8373573,1660: Update Git to include v2.26.2,,1
Merge pull request #1657 Add Readme.md for the virtualization states of a file,0.50557363,1750: Update Readme.md,Add Readme.md for the virtualization states of a file,0
Update Git to include v2.26.2,0.910817,1660: Update Git to include v2.26.2,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Add Readme.md for the virtualization states of a file,0.38437968,1750: Update Readme.md,,0
ProjFSFilter: use 'where' to find powershell,0.8059083,1658: ProjFSFilter: Be more robust to missing PowerShell,"This will throw a new PowershellNotFoundException if not found, but this is a private static method. One caller catches this exception explicitly, and then returns an ""invalid"" mode. The only other caller only happens if the first returns ""disabled"" instead. Signed-off-by: Derrick Stolee dstolee@microsoft.com",1
ProjFSFilter: Be more robust to missing PowerShell,0.9550142,1658: ProjFSFilter: Be more robust to missing PowerShell,A user had issues and we started a support line. Their diagnose log had thousands of service logs. These were all failing with a call stack pointing to the method changed here. The only explanation I can think of is that PowerShell is not available on their system! Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1654 Add Readme.md for the GitIndexProjection and related classes,0.578035,1706: Update Git to include GCM Core update,Add Readme.md for the GitIndexProjection and related classes,0
Add Readme.md for the GitIndexProjection and related classes,0.52510417,1706: Update Git to include GCM Core update,,0
Merge pull request #1653: Update Git to include v2.26.1,0.86042684,1653: Update Git to include v2.26.1,Re-pushed to include the correct version number after pushing the v2.26.1.vfs.1.1 tag.,1
Update Git to include v2.26.1,0.8993707,1660: Update Git to include v2.26.2,This time with the correct version number. Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1652: RepoRegistry: ignore non-existent repos,0.771466,1652: RepoRegistry: ignore non-existent repos,"The 'gvfs mount' command will send a message over the named pipe to deactivate a repo. This marks it with ""IsActive = false"" so we don't try to mount it at service startup. However, a repo can be deleted and then there is no way to send this message again. Instead, ignore repositories where the enlistment root does not exist. Don't remove it from the registry, since there may be a subtle reason why it is not visible from the service (such as a removed USB drive). Resolves #1651.",1
RepoRegistry: ignore non-existent repos,0.83817935,1652: RepoRegistry: ignore non-existent repos,"The 'gvfs mount' command will send a message over the named pipe to deactivate a repo. This marks it with ""IsActive = false"" so we don't try to mount it at service startup. However, a repo can be deleted and then there is no way to send this message again. Instead, ignore repositories where the enlistment root does not exist. Don't remove it from the registry, since there may be a subtle reason why it is not visible from the serivce (such as a removed USB drive). Signed-off-by: Derrick Stolee dstolee@microsoft.com",1
Merge pull request #1647: Fix commit-graph expiration,0.8444055,1647: Fix commit-graph expiration,"Wow, this was really not working as expected. See microsoft/git#255 for how broken the --expire-time argument was. Fix this by using the fixed argument and passing a datetime instead of an offset by seconds. This will provide a longer window for old commit-graph files, but apparently we've been leaving turd files around for a long time without anyone noticing.",1
Update Git to include expire-time fix,0.58956784,1647: Fix commit-graph expiration,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
PostFetchStep: fix --expire-time option,0.44684672,1647: Fix commit-graph expiration,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Merge pull request #1642: Update Git to v2.26.0,0.8556752,1642: Update Git to v2.26.0,"See microsoft/git#251 for details. This required an update to our test infrastructure. The rebase merge backend changed in a way that it would now open an editor during git rebase --continue, causing a test to wait for vim to close. Set the editor to be a no-op. This also changes the output to include the commit oid, so use GIT_COMMITTER_TIME to be a constant to keep the commits the same.",1
Use fixed GIT_COMMITTER_DATE in functional tests,0.42342407,1697: Fix functional tests to skip around ProjFS issue,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Use no-op editor during functional tests,0.3691128,1697: Fix functional tests to skip around ProjFS issue,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Update Git to v2.26.0,0.88194776,1642: Update Git to v2.26.0,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1637: Update Git to v2.25.1.vfs.1.1,0.8477058,1736: Update Git to v2.31.1.vfs.0.3,See microsoft/git#248.,1
Update Git to v2.25.1.vfs.1.1,0.8808375,1736: Update Git to v2.31.1.vfs.0.3,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1635 sparse: allow dehydrate to continue if a directory delete fails,0.45906252,1689: Make delete docs more verbose,sparse: allow dehydrate to continue if a directory delete fails,0
dehydrate: add test for execption when deleting empty directory,0.47456908,Git commands are now allowed to delete an empty directory,,0
sparse: allow dehydrate to continue if a directory delete fails,0.41547564,1730: Fix an issue with FastFetch when deleting files,When the code gets to the point of deleting the directory it is empty and it will not hurt anything leaving it on disk.  This also more closely matches what git does when changing the sparse-checkout since it ignores errors when trying to delete empty directories.,0
Merge pull request #1638 build: fix the build error related to dotnet core version,0.5273387,1676: Update Git to v2.27.0.vfs.1.0,build: fix the build error related to dotnet core version,0
build: fix the build error related to dotnet core version,0.5340401,The build system was rewritten from scratch to simplify the process and use a more recent version of .NET.,"Not sure why this fixes the ""The project was restored using Microsoft.NETCore.App version X, but with current settings, version Y would be used instead"" error. Maybe the nuget restore was doing something to have it use a different version.",0
Merge pull request #1626: Update Git to v2.25.0,0.77714515,1653: Update Git to include v2.26.1,See microsoft/git#233.,1
Update Git to v2.25.0,0.80830514,1660: Update Git to include v2.26.2,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1625: LocalGVFSConfig: succeed when file doesn't exist,0.6192048,* Improve error message from gvfs upgrade if the Git installation could not be found.,"An alternate approach compared to #1512. The problem happens when the config file doesn't exist, and we try to run gvfs config --list without elevation. That process cannot create the file, so the FileBasedDictionary fails to load. When we are doing read-only operations, we can just return as if the file was empty.",0
LocalGVFSConfig: allow read operations to succeed when config file doesn't exist,0.48678282,* Improve error message from gvfs upgrade if the Git installation could not be found.,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Merge pull request #1623: Add $ to make string interpolated,0.39169177,1736: Update Git to v2.31.1.vfs.0.3,"I happened to notice this whilst browsing the source code to see an example of how the Nuget CLient packages are used. I assume it's a mistake, so created a pull request. If it's not, please close.",0
Fix mixing $ to make string interpolated,0.17329063,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Merge pull request #1622: GVFSVerb: use flags for core.gvfs,0.6173191,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]","The core.gvfs config option can take a boolen ""true"" to turn on all options, but also an integer to show a bitmask of important flags. For the first time, we have a new flag that we may not want to enable right away: GVFS_PREFETCH_DURING_FETCH. This flag will make the git fetch builtin run a git gvfs-helper prefetch command. Until that hardens a bit, we do not want VFS for Git users to use that code path. Update Git to include this option.",0
GVFSVerb: use flags for core.gvfs,0.62710565,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]","The core.gvfs config option can take a boolen ""true"" to turn on all options, but also an integer to show a bitmask of important flags. For the first time, we have a new flag that we may not want to enable right away: GVFS_PREFETCH_DURING_FETCH. This flag will make the git fetch builtin run a git gvfs-helper prefetch command. Until that hardens a bit, we do not want VFS for Git users to use that code path. Update Git to include this option. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Merge pull request #1621 from github/linux-functional-test-tweaks,0.49019182,1697: Fix functional tests to skip around ProjFS issue,"[Linux] functional test backing root and DotGVFSRoot fixes First, we replace one use of a "".gvfs"" string constant in the functional tests which was added in 9fc6bc1, in order to align with the changes made in 8348777.  This allows the CloneTests to pass on Linux where "".vfsforgit"" is used instead of "".gvfs"". Second, the MountSetsCoreHooksPath() functional test performs an unmount step before resetting Git's configurations, and while this actually does succeed on Linux as it stands, the ""src/"" RepoRoot directory is entirely empty while it's unmounted, so to be consistent, use the backing root instead.",0
Merge pull request #1597 from Move config & upgrader files to ProgramFiles,0.48718998,1685: minor path comparison fixup in ProductUpgrader,,0
Move config & upgrader files to ProgramFiles (4),0.44391176,1685: minor path comparison fixup in ProductUpgrader, Updated installer to migrate gvfs.config and statuscachetoken files from   old ProgramData directory to new secure data root directory inside   Program Files.,0
Move config & upgrader files to ProgramFiles (3),0.4514741,1685: minor path comparison fixup in ProductUpgrader, Removed unused method GetDataRootForGVFS from GVFSHooksPlatform. Updated FT to use new secure data root path,0
Move config & upgrader files to ProgramFiles (2),0.44399977,1685: minor path comparison fixup in ProductUpgrader, Updated CopyDirectoryRecursive to exlude subdirectories to   prevent cyclic copying.,0
Move config & upgrader files to ProgramFiles (1),0.45249486,- Fixes a copy failure when copying the upgrade tool to its temporary location.," Created new Secure Data Root on Windows platform,   ""C:\Program Files\GVFS\ProgramData"". Upgrader tool files, downloaded   upgrade installers, gvfs.config, statuscachetoken file will be put in   this secure location. Log files would remain in   ""C:\ProgramData\GVFS\\Logs"" directory. GVFSPlatform changes - renamed GetDataRoot methods to GetSecureDataRoot   to signify that they return the new secure data root. GVFSPlatform changes - new GetCommonAppDataRoot method to get access to   the old ProgramData directory. This can be used for keeping log files. Updated Service and gvfs command to use the new secure data root access   methods.  Fixes #1585",0
use backing root in mount core hooks func test,0.34043163,- Multiple mount process reliability bugs have been squashed.,"The MountSetsCoreHooksPath() functional test performs an unmount step before resetting Git's configurations, and while this does succeed on Linux too, the ""src"" RepoRoot directory is empty while unmounted, so to be consistent, use the backing root instead.",0
use DotGVFSRoot constant in place of .gvfs path,0.5262033,- GVFS has a better icon.,"Replace one use of a "".gvfs"" constant in the functional tests which was added in 9fc6bc1d3d, in order to align with the changes made in 8348777d70.  This allows the CloneTests to pass on Linux where "".vfsforgit"" is used instead of "".gvfs"".",0
Merge pull request #1618: Update Git to v2.24.1,0.771786,1642: Update Git to v2.26.0,See microsoft/git#226.,1
Update Git to v2.24.1,0.8220135,1642: Update Git to v2.26.0,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1614 from Review git settings used in GVFSVerb,0.61300105,1676: Update Git to v2.27.0.vfs.1.0,,0
Merge pull request #1615: PostFetchStep: do not immediately delete expired commit-graph files,0.73108923,1647: Fix commit-graph expiration,"We have noticed a lot of ""cannot find all commit-graph files"" errors, more than is reasonable for simply hard-drive failures. Likely there is an issue with how Git is comparing the paths of the commit-graph files it is queueing for deletion and the ones it plans to keep, related to how we use the --object-dir parameter. The commit-graph code in Git will ""touch"" all the files that are currently in the commit-graph-chain, so as long as we pass a non-zero expire time, that will prevent us from deleting the files that are still in the chain despite the path difference. This is a faster fix than fixing Git first.",1
nan,0.15730172,1732: Use one NuGet feed,Incorporating review comments,0
CommitGraphStep: do not immediately delete expired commit-graph files,0.70557076,1647: Fix commit-graph expiration,"We have noticed a lot of ""cannot find all commit-graph files"" errors, more than is reasonable for simply hard-drive failures. Likely there is an issue with how Git is comparing the paths of the commit-graph files it is queueing for deletion and the ones it plans to keep, related to how we use the --object-dir parameter. The commit-graph code in Git will ""touch"" all the files that are currently in the commit-graph-chain, so as long as we pass a non-zero expire time, that will prevent us from deleting the files that are still in the chain despite the path difference. This is a faster fix than fixing Git first. Signed-off-by: Derrick Stolee dstolee@microsoft.com",1
Review git settings used in GVFSVerb,0.65612423,- VFS for Git will performance maintenance in the background. This release will pack loose objects in .gvfsCache into packfiles. , Went through the commit history and documented git config settings that are set it GVFSVerb.,0
Merge pull request #1610 dehydrate: skip mount validation steps,0.4526009,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,dehydrate: skip mount validation steps,0
dehydrate: skip mount validation steps,0.395991,- Multiple mount process reliability bugs have been squashed.,"When re-mouting a repo as part of dehydrate there is no need to check if the repo is already mounted, as dehydrate itself unmounted it. Additionally, there is no need to perform a version check (unless --no-status was specified) as dehydrate would have required the repo already be mounted to run 'git status' in it.",0
Merge pull request #1607 sparse: check for not recursive matches when finding dirty files,0.49098998,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",sparse: check for not recursive matches when finding dirty files,0
sparse: split PathCoveredBySparseFolders into two methods,0.20484605,"- ""Sparse"" push algorithm should improve performance of pushes where only a small cone of a repository is modified.",Move the logic for extracting git paths out of PathCoveredBySparseFolders and into its own method.  This makes unit testing the code more straightforward.,0
Update sparse verb tests,0.33237994,1697: Fix functional tests to skip around ProjFS issue, Switch from using $ to @ in unit tests (where possible) Fix functional test failure in ModifiedFileInSparseSetShouldAllowPrune   where we were failing to validate the correct set of sparse folders,0
sparse: improve pattern matching related tests,0.3786438,1697: Fix functional tests to skip around ProjFS issue,Update one of the functional tests to cover non-recursive parents and cleanup the unit tests.,0
sparse: check for not recursive matches when finding dirty files,0.3378392,* git multi-pack-index verify would run slowly if the objects directory had more than 2048 packfiles.,"The previous file path matching was only matching against recursive sparse paths, and incorrectly flagging children of non-recursive folders as dirty.  This matching has been updated to match both recursive and non-recursive parents, and unit tests were added to validate the matching behavior.",0
Merge pull request #1605 HandleDehydrateFolders: update index using reset,0.4946472,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",HandleDehydrateFolders: update index using reset,0
FolderDehydratePreviouslyDeletedFolders: add more validation,0.398338,1689: Make delete docs more verbose,,0
Improve functional tests coverage,0.6028253,1697: Fix functional tests to skip around ProjFS issue,Update dehydrate and sparse functional tests to cover dehydrating multiple folders and validating that prune does not overwrite users' changes inside the sparse set.,0
HandleDehydrateFolders: don't parse index a second time,0.36696267,"* Sped up GVFS's parsing of the git index, shaving off 2-3 seconds for a large index file","HandleDehydrateFolders was triggering two parsese of the index:  Once in response to 'git reset' to validate the modified paths    are correct Once with an explicit call to ForceIndexProjectionUpdate  Making matters worse, the explicit call to ForceIndexProjectionUpdate was not happening inside of an external GVFSLock, and so it could collide with the parse triggered by reset mixed (which runs on the background thread). To prevent this race (and double parsing), HandleDehydrateFolders now sets a flag 'resetForDehydrateInProgress' to true when it calls 'git reset', and when that flag is true the ForceIndexProjectionUpdate that is called by HandlePostIndexChangedRequest will request that the projection be updated.",0
HandleDehydrateFolders: update index using reset,0.4007042,1664: Update USN journal entries for projected folders,Use 'git reset ' rather than 'git checkout -f' (or 'git checkout -f ') because:  'git reset ' will not overwrite modified files (like    'checkout -f' would). reset will update the index for paths that are outside of    ModifiedPaths.dat (unlike checkout -f ).  We need the index to be updated because when a folder is dehydrated it is removed from ModifiedPaths.dat and we need to make sure its entries in the index are updated.,0
Merge pull request #1552 from github/dehydrate-backing-root-tests,0.43323362,Pull Requests,"[Linux] use backing root in dehydrate functional tests A number of tests in the DehydrateTests class fail on systems such as Linux where the virtualized repository's contents are not available at the mount location after the repository is unmounted. This PR adjusts these tests so they refer instead to the backing root location anytime file paths are referenced after the repository is unmounted. We also create a CheckDehydratedFolderAfterUnmount() helper method in DehydrateTests which encapsulates the different checks required on Windows and POSIX platforms, and GetBackingPathTo(path) in GVFSFunctionalTestEnlistment to parallel the existing GetVirtualPathTo(path); both of these path helper methods now use TestConstants.GitPathSeparator instead of a hard-coded slash character. In addition, the CreatedDirectoryParentFolderInModifiedPathsShouldOutputMessage() test was removed as it was now identical to the earlier ParentFolderInModifiedPathsShouldOutputMessage() test. One call to GetVirtualPathTo() was removed because it was being called an extra time when constructing the path to pass the fileToWrite to AppendAllText() in the FolderThatIsSubstringOfExistingFolder() test. Lastly, we make some minor line-ending whitespace cleanups for ease of future development on this class.",0
tidy parent/child path creation in dehydrate tests,0.31192762,1685: minor path comparison fixup in ProductUpgrader,,0
use abstract TestPath class in dehydrate tests,0.32063755,1697: Fix functional tests to skip around ProjFS issue,"We can simplify our use of virtual vs. backing root paths in the dehydration tests through the use of a common private TestPath wrapper class, as suggested by kewillford on PR review.  Also includes additional explanatory comments per wilbaker's request.",0
align sequence of child folders in dehydrate tests,0.3082603,* git multi-pack-index verify would run slowly if the objects directory had more than 2048 packfiles.,"Simplify comparison between child-before-parent and parent-before-child dehydration tests by aligning the sequence in which we handle the pairs of files, excepting the difference in ordering in the dehydration command itself.",0
use GitPathSeparator in func test path helpers,0.40174204,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"Per PR review from kewillford, we can use the common TestConstants.GitPathSeparator in both the virtual path and backing root path helper methods in the GVFSFunctionalTestEnlistment class.",0
simplify virt paths in dehydration status tests,0.2801964,1697: Fix functional tests to skip around ProjFS issue,"Per PR suggestions from wilbaker, we can further simplify the virtual path calls several dehydration tests.",0
revise other child folder names in dehydrate tests,0.3013178,1664: Update USN journal entries for projected folders,"Change to more accurate folder path variable names in the child-before-parent and parent-before-child dehydration tests, per PR advice from wilbaker.",0
Merge pull request #1602: Migrate to Azure Artifacts,0.51406926,Pull Requests,,0
Migrate to Azure Artifacts,0.3600023,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Merge pull request #1601 sparse: don't warn about dirty files inside the sparse set,0.4593021,"A background task will now compress and deduplicate the pack-file data in the shared object cache, resulting in more sustainable disk usage",sparse: don't warn about dirty files inside the sparse set,0
SparseTests: add more prune tests,0.39637408,1697: Fix functional tests to skip around ProjFS issue,Add ModifiedFileInSparseSetShouldAllowPrune and ModifiedFileInSparseSetShouldNotBeReportedWhenDirtyFilesOutsideSetPreventPrune to validate that files inside the sparse set to are not reported as dirty and do not prevent pruning.,0
sparse: don't warn about dirty files inside the sparse set,0.35206586,"A background task will now compress and deduplicate the pack-file data in the shared object cache, resulting in more sustainable disk usage","When 'gvfs sparse' found dirty files outside of the sparse set, it would show all dirty paths to the user (even those inside the sparse set). Additionally, when 'gvfs dehydrate' was being called to prune, it was unnecessarily running its own 'git status' that would fail even when all of the dirty files were inside of the sparse set. Two changes were made to address these issues:   The sparse verb will now collect and report the dirty paths     that were found outside of the sparse set (rather than all     paths)   A new StatusChecked property has been added to the dehydrate     verb, and is set to true by the status verb.  When true,     the dehydrate verb will not call 'git status' itself. ",0
Merge pull request #1600 WindowsGitHooksInstaller: allow configuring hooks in local git config,0.48738602,This includes the Git 2.30.2 security fix (CVE-2021-21300).,WindowsGitHooksInstaller: allow configuring hooks in local git config,0
MountMergesLocalPrePostHooksConfig: skip comments in hooks config,0.3354629,1674: Config: disable status.submoduleSummary,The MountMergesLocalPrePostHooksConfig test was failing because it was not properly skipping comments when checking the contents of the .hooks file.,0
MountMergesLocalPrePostHooksConfig: add more logging,0.42057905,- Added better diagnostic info in the GVFS logs when there are network errors,Add messages to some of the Should(...) checks to make it easier to debug test failures.,0
Use cmd.exe as the dummy hook in MountMergesLocalPrePostHooksConfig,0.33365917,1658: ProjFSFilter: Be more robust to missing PowerShell,"The .bat fail is failing to run in Pipelines, try using cmd.exe instead.",0
WindowsGitHooksInstaller: allow configuring hooks in local git config,0.42306262,This includes the Git Credential Manager Core v2.0.394.50751.,"Prior to the changes in this commit gvfs.clone.default-pre-command and gvfs.clone.default-pre-command would only be read from the system and global git configs.  This meant that users were unable to config custom pre/post command hooks at a per-repo level. With this change InvokeGitAgainstDotGitFolder when reading the above config values, and using InvokeGitAgainstDotGitFolder will give us the standard git config behavior of local config ""winning"" over a system or global config.",0
Merge pull request #1586 Update sparse parent folder mtimes to trigger Explorer refresh,0.48170862,1664: Update USN journal entries for projected folders,Update sparse parent folder mtimes to trigger Explorer refresh,0
GetDirectoriesOutsideSparse: use List instead of array,0.30403638,Large improvements to git checkout performance when there are many folder placeholders.,"There was no need to use arrays, and we can save ourselves the overhead of calling ToArray by using Lists.",0
Refresh the parents of pruned directories,0.35561016,1664: Update USN journal entries for projected folders,"In addition to refreshing the parents of directories that were added or removed from the sparse set, parents of pruned directories must also have their write times updated or they might not properly refresh in explorer. Example (where refreshed pruned parent is required):  Sparse set is A\B Create a new directory A\C gvfs --sparse prune (or gvfs sparse --set A\B --prune)  If A is not refreshed it will appear empty in Explorer as the last refresh will have occured when A\C was deleted (while VFS4G was unmounted) making A appear empty.",0
Merge pull request #1596 from Fix upgrade timer crash,0.500239,1747: UpgradeVerb: write deprecation notice,Fix upgrade timer crash,0
Fix upgrade timer crash,0.5667839,1668: ProductUPgradeTimer: remove unacceptable Environment.Exit()," When no upgrade is available, product upgrader returns null for newer version. Added null check before using version.",0
Merge pull request #1593 from microsoft/features/mac-endpoint-security-prototype,0.39856106,1710: Add new Microsoft certificate thumbprint,Mac: EndpointSecurity MirrorProvider-like prototype,0
Merge pull request #1594: GVFSVerb: explicitly disable new config settings,0.643615,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]","In Git 2.24.0, some new config settings were created. Disable them locally in VFS for Git repos in case a user has set them globally. The feature.* config settings change the defaults for some other config settings. We already monitor config settings pretty carefully, so let's disable these. The fetch.writeCommitGraph setting choses to write a commit-graph file at the end of each git fetch call. We already build the commit-graph file in the background AND put it in the shared cache instead of the local Git repo.",0
GVFSVerb: explicitly disable new config settings,0.67127776,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]","In Git 2.24.0, some new config settings were created. Disable them locally in VFS for Git repos in case a user has set them globally. The feature.* config settings change the defaults for some other config settings. We already monitor config settings pretty carefully, so let's disable these. The fetch.writeCommitGraph setting choses to write a commit-graph file at the end of each git fetch call. We already build the commit-graph file in the background AND put it in the shared cache instead of the local Git repo. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Move folder refresh into sparse verb,0.3853282,1664: Update USN journal entries for projected folders,"Rather than refreshing in GVFS.Mount, move the refresh logic out into 'gvfs sparse'.  This ensures that folders will be refreshed correctly in scenarios where a dehydrate is required.  Dehydrate scenarios were not working correctly because when the repo was remounted GVFS.Mount would only refresh the root.  Rather than having GVFS.Mount remember the old sparse set (or having the sparse verb pass the set to GVFS.Mount) it's simpler to just have 'sparse' itself perform the refresh.",0
Merge pull request #1578 Create shared cache folders with the same ACLs as repo folders,0.6292436,- Added a new volume-wide cache for downloaded git objects that is shared amongst multiple repos. Only newly created repos will use the new cache location. Existing clones will continue to use their own private cache.,Create shared cache folders with the same ACLs as repo folders,0
Make CreateDirectoryAccessibleByAuthUsers a Try method,0.3299208,  - Now approves credentials on authentication success,Rename CreateDirectoryAccessibleByAuthUsers to TryCreateDirectoryAccessibleByAuthUsers and have it return true/false rather than throwing exceptions when there are errors.,0
RefreshSparseFolders: move path separator string out of loop,0.34004414,1685: minor path comparison fixup in ProductUpgrader,There is no need to generate a new string in each iteration of the loop. Move the creation out of the loop and reuse the same string.,0
Merge pull request #1582: Update Git to include sparse-checkout feature branch,0.51632583,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",We are merging the features/sparse-checkout-2.24.0 branch into vfs-2.24.0 in microsoft/git#222. Update our version of Git to match.,0
Allow downgrading Git on install,0.54746616,Includes Git LTS security release,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
"Adds subscription to NOTIFY_LOOKUP events, logging those in target.",0.33258334,Initial Mac platform native notifications,,0
"General clean-up of EndpointSecurity prototype, adding detailed code comments",0.4432846,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Fixes incorrect freeing of memory for copied event messages.,0.3950997,1672: ProductUpgrader: be extra careful about a copy loop,,0
Mac EndpointSecurity prototype: Try muting own process,0.32655647,1740: Skip launching UI if running unattended,,0
Mac EndpointSecurity MirrorProvider prototype: updated project settings,0.3876316,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Mac EndpointSecurity MirrorProvider prototype: Better debug output,0.3544488,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Mac EndpointSecurity MirrorProvider prototype: fixes crawler detection,0.35312325,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Adds assertions that all auth responses succeed,0.6028875,  - Now approves credentials on authentication success,,0
Update 4 Changes,0.6905323,Major updates:,,0
Mac EndpointSecurity prototype: Prints auth response time information.,0.3492178,  - Now approves credentials on authentication success,,0
Mac EndpointSecurity prototype: Adds sanity check counter for in-flight auth requests,0.40063572,  - Now approves credentials on authentication success,,0
Mac EndpointSecurity prototype: Improved debug output & crawler handling,0.3591026,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Mac EndpointSecurity prototype: Adds support for mirroring symlinks,0.4121517,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
"Mac EndpointSecurity prototype: Removes random delay, reduces debug output",0.32111683,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Mac EndpointSecurity prototype: Updated for macOS 10.15 beta 3 SDK,0.3937165,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Mac EndpointSecurity prototype: Catches unexpected action and event types,0.28899726,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Mac EndpointSecurity prototype: Moves hydration off-thread,0.36675972,- No-op gvfs prefetch --hydrate performance is dramatically improved,,0
Mac: Adds extremely basic EndpointSecurity based mirroring prototype,0.3373569,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Use sparse-checkout feature branch,0.42674267,Large improvements to git checkout performance when there are many folder placeholders.,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Change how RefreshSparseFolders discovers folders to refresh,0.4197899,1664: Update USN journal entries for projected folders,"The old approach (refreshing just the parent of a new path) could miss some folders that need a refresh. Example:  gvfs sparse --set A;B\C\D --prune gvfs sparse --set A;B\D\F --prune  In the above example, B should be refreshed, but it would not be. Rather than just refreshing the parent VFS4G will now refresh all ancestors of entries that were added or removed from the sparse set. This might result in over-refreshing, but we should no longer miss any folders.",0
Update sparse parent folder mtimes to trigger Explorer refresh,0.4048511,1664: Update USN journal entries for projected folders,"If a File Explorer window is open to a directory in VFS4G, changes to the files being projected are not enough to trigger a refresh. This is especially noticeable when using the 'gvfs sparse' verb. To force Explorer to refresh when 'gvfs sparse' triggers a projecion changes, VFS4G will now update the last write time for every folder placeholder that had children added or removed from the sparse set.",0
Merge pull request #1349 Use static runtime for hooks,0.4502343,Pull Requests,Use static runtime for hooks,0
CreateDirectoryAccessibleByAuthUsers: use SetAccessControl,0.38244623,  - Now approves credentials on authentication success,"Rather than using CreateDirectory(String, DirectorySecurity) use CreateDirectroy + SetAccessControl to avoid having to create a temporary directory. Additionally, remove unnecessary code for creating intermediate directories from callers.",0
Merge pull request #1562: PackfileMaintenanceStepTests: fix flaky tests,0.4837085,"Other bug fixes, engineering improvements, and test reliability fixes.","The PackfileMaintenanceStepTests have been failing periodically, and mostly with failures in RepackAllToOnePack() leading to a failure in ExpireAllButOneAndKeep(). The way we ""force"" Git to repack all is to provide a custom batch size. This batch size used to mean ""repack all pack-files with size at most X until reaching a size of at least X"". By specifying ""total size - 1"", this required repacking all objects. HOWEVER, the new logic actually computes an ""expected"" size of the objects in a pack that are referenced by the multi-pack-index. If we have duplicate objects, then those objects can cause two types of error: The duplicates reduce the total expected size below the batch size. The computation of ""total expected size"" causes round-off error. Both types of error under-count the number of bytes in the final pack-file. By changing the batch size to ""total size - min size + 1"" we ensure the following: I. The batch size is larger than the maximum pack size. II. Every pack-file is required to reach the batch size. III. We have minimized the chance that duplicate objects will drop below this threshold. With the use of gvfs-helper, we have less control over the pack-files that are downloaded as part of the clone operation. At minimum, with this change we should be in a better state than before.",0
Merge pull request #1574: Update Git to include v2.24.0.windows.2,0.69834906,1642: Update Git to v2.26.0,See microsoft/git#218 for details.,0
Update Git to include v2.24.0.windows.2,0.7496146,1660: Update Git to include v2.26.2,,1
Create shared cache folders with the same ACLs as repo folders,0.57017696,- Added a new volume-wide cache for downloaded git objects that is shared amongst multiple repos. Only newly created repos will use the new cache location. Existing clones will continue to use their own private cache.,The changes in this commit address the ACL problems that can occur on Windows Server when a shared cache created by an elevated VFS4G process is used by a non-elevated process. By adding Authenticated Users to the shared cache ACLs we ensure that the permissions of the shared cache will be consistent with those used in the repo itself.,0
Merge pull request #1571: Update Git to have proper version number,0.6968704,1663: Update Git to v2.27.0,"The previous installer was generated without the v2.24.0.vfs.1.1 tag, which caused the Git version generation to fail. That is the only change between the .1 and .2 builds.",0
Merge pull request #1550 from Set git config autoRefreshIndex to true,0.57496935,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Merge pull request #1570 LooseObjectsStep: simply code for getting directory paths,0.47373474,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",LooseObjectsStep: simply code for getting directory paths,0
Merge pull request #1561 from Functional test failures on Server 2016,0.48909354,1697: Fix functional tests to skip around ProjFS issue,,0
Update Git to have proper version number,0.6577696,1663: Update Git to v2.27.0,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Setting the git config autoRefreshIndex to true,0.5936698,- Built-in git rebase is on by default.," This setting is not needed anymore, because current version of gvfs   does not use index.lock. (This change was introduced initially to   prevent git diff from acquiring index.lock file.) Added FT",0
LooseObjectsStep: simply code for getting directory paths,0.3616559,- Gracefully handle a missing shared object cache pack directory.,"The code in CountLooseObjects can be simplified by avoiding an unnecessary Path.Combine. Additionally, fix a bug in the MockFileSystem where EnumerateDirectories was not returning the full paths of directories and it should.",0
Win server 2016 FT fixes (5),0.5025108,Bug fixes:, Incorporated review comments. Added new switch case for GeneridProjFSError. Simplifies the default handler a lot. New const member for reset timeout,0
Merge pull request #1559: Update Git to vfs-2.24.0,0.8216252,1736: Update Git to v2.31.1.vfs.0.3,See microsoft/git#213 for details.,1
Merge pull request #1569: Ensure git-credential cmds are run with correct wrkdir,0.5499848,This includes the Git Credential Manager Core v2.0.394.50751.,,0
Update Git to new vfs-2.24.0 branch,0.8243315,1736: Update Git to v2.31.1.vfs.0.3,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Win server 2016 FT fixes (4),0.4941655,Bug fixes:," Increased reset time out for GVFS Lock holder from 3 to 10 secs.   On Win server 2016, the lock was getting released too early causing   couple tests to fail occassionally.",0
Win server 2016 FT fixes (3),0.4838369,Bug fixes:, Updated regex in HealthTests FT to not treat spaces that   may be present between a number and percentage symbol in   gvfs command output as errors.,0
Win server 2016 FT fixes (2),0.480779,Bug fixes:," Updated Functional Tests for UpdatePlaceholders. ProjFS on   2016 seem to support POSIX style delete, Win 10 supports   POSIX delete anyways. Removed the check for OS version to   decide POSIX delete support.",0
Win server 2016 FT fixes (1),0.4802221,Bug fixes:," Handle the generic error returned by ProjFS, when GVFS.Mount   tries to delete a partial placholder, on server 2016. Create new error code -2147024579 in HResultExtenstions.   Named it GenericProjFSError. Updated error handler in GitIndexProjection to handle   GenericProjFSError error when DirtyData is also set the same   way it already handles VirtualizationInvalidOperation.",0
Merge pull request #1566 dehydrate: skip installing hooks when re-mounting,0.43829927,- The installer now unmounts and remounts existing repos automatically,dehydrate: skip installing hooks when re-mounting,0
Ensure git-credential cmds are run with correct wrkdir,0.5401868,- Consume new GCM to fix git credential erase behavior,"Ensure that all git-credential commands are run with the correct working directory. Currently only 'fill' is invoked against the .git directory and the 'reject' and 'approve' commands are invoked outside the repository. The result of this mismatch means that if the user has a local configuration entry set, for say credential.usehttppath, then the behaviour for locating credentials will be different between read and modification operations.",0
dehydrate: skip installing hooks when re-mounting,0.36162418,- The installer now unmounts and remounts existing repos automatically,"There is no need to copy the hooks when mounting as part of dehydrate.  Additionally, this copy can cause problems if 'gvfs dehydrate' is called as part of a post-command hook.",0
use backing paths after unmount in dehydrate tests,0.30557096,- gvfs prefetch learned how to take --files-list.,"To support filesystems where the virtualized repository contents are not available when the repository is not mounted, always use the backing root path instead after unmounting in all DehydrateTests.",0
use common file name constants in DehydrateTests,0.24838611,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles","We extract file name string constants as distinct variables which typically contain just the local path within the test repo, without any full virtual path prefix. This will be valuable when introducing additional backing root paths in subsequent commits.",0
use common folder name constants in DehydrateTests,0.32369742,1664: Update USN journal entries for projected folders,"As we have certain folder names repeated as constant strings within each test, we can replace them with a single variable per test, usually folderToDehydrate. This will be valuable when introducing additional backing root paths in subsequent commits.",0
use consistent path var names in DehydrateTests,0.3236252,1685: minor path comparison fixup in ProductUpgrader,"We try to use consistent variable names for all variables in DehydrateTests which contain full virtual paths as constructed by GetVirtualPathTo(). While this is not immediately helpful, it will be crucial when we introduce the distinction between virtual paths (full paths to the mounted test repo) and backing root paths (full paths to the repo's backing store which may be accessed while the repo is unmounted on Linux).",0
fix extra virtual path call in dehydrate tests,0.40043557,1697: Fix functional tests to skip around ProjFS issue,"The FolderDehydrateFolderThatIsSubstringOfExistingFolder() test called GetVirtualPathTo() to construct a path for fileToWrite, and then called it again passing the constructed path and thus adding extra path elements beyond what was intended.",0
remove redundant dehydrate folder deletion test,0.38847792,1730: Fix an issue with FastFetch when deleting files,"Since commit 7956bd95b3539f9c2bd03be0c4258de50206190b two of the functional tests in DehydrateTests have been identical, so we can remove one of them.",0
add single path arg version of GetBackingPathTo(),0.3103214,1685: minor path comparison fixup in ProductUpgrader,"Add a version of GetBackingPathTo(path) in the functinal test suite's Tools/GVFSFunctionalTestEnlistment.cs which takes only a single path argument, to parallel the existing GetVirtualPathTo(path) method.",0
use common folder test method in dehydrate tests,0.353411,* git multi-pack-index verify would run slowly if the objects directory had more than 2048 packfiles.,Create a CheckDehydratedFolderAfterUnmount() helper method in DehydrateTests which encapsulates the different checks required on Windows and POSIX platforms.,0
use consistent line endings in DehydrateTests,0.1534553,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,This is a whitespace-only patch for the sake of avoid additional line-ending changes while refactoring DehydrateTests.cs in subsequent commits.,0
PackfileMaintenanceStepTests: fix flaky tests,0.52142525,1697: Fix functional tests to skip around ProjFS issue,"The PackfileMaintenanceStepTests have been failing periodically, and mostly with failures in RepackAllToOnePack() leading to a failure in ExpireAllButOneAndKeep(). The way we ""force"" Git to repack all is to provide a custom batch size. This batch size used to mean ""repack all pack-files with size at most X until reaching a size of at least X"". By specifying ""total size - 1"", this required repacking all objects. HOWEVER, the new logic actually computes an ""expected"" size of the objects in a pack that are referenced by the multi-pack-index. If we have duplicate objects, then those objects can cause two types of error: The duplicates reduce the total expected size below the batch size. The computation of ""total expected size"" causes round-off error. Both types of error under-count the number of bytes in the final pack-file. By changing the batch size to ""total size - min size + 1"" we ensure the following: I. The batch size is larger than the maximum pack size. II. Every pack-file is required to reach the batch size. III. We have minimized the chance that duplicate objects will drop below this threshold. With the use of gvfs-helper, we have less control over the pack-files that are downloaded as part of the clone operation. At minimum, with this change we should be in a better state than before. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Merge pull request #1553 Add sparse prune info and failures to stderr,0.39969945,1689: Make delete docs more verbose,Add sparse prune info,0
Send back error message from TryDehydrateFolder to sparse prune,0.30213252,1730: Fix an issue with FastFetch when deleting files,,0
Rename DisplayName to ActionName in the DehydrateVerb,0.20298891,1738: Bumping version of update-winget action,,0
Add exit code for failure to dehydrate folders and write folders to stderr,0.33606845,Adds additional logging for folder and file placeholder creation.,,0
Add constant for folder dehyrate successful message,0.35871392,Adds additional logging for folder and file placeholder creation.,,0
Fix dehydrate tests for updated user messages,0.34732443,- Fixed several incorrect interactions with credentials,,0
Don't send the .git folder for dehydration when pruning,0.5153613,- git status now supports an option to avoid doing its ahead/behind calculations. This allows the user to decide if they want to skip that overhead if all they care about is the status of the working directory.,,0
Make some messages in dehydrte custom for the verb running dehydrate,0.21812412,1689: Make delete docs more verbose,,0
Better information in logs for sparse when using prune,0.23615769,1689: Make delete docs more verbose,,0
Allow output from execution of verb to send output to status spinner,0.25418198,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",,0
Add sparse prune message when finding folder to prune,0.33367065,1689: Make delete docs more verbose,,0
Merge pull request #1558 Do not try to uninstall prjflt unless flag is passed,0.40871406,1652: RepoRegistry: ignore non-existent repos,Do not try to uninstall prjflt unless flag is passed,0
Do not try to uninstall prjflt unless flag is passed,0.34940112,- Better errors around ProjFS installation issues.,,0
Merge pull request #1557 Fix tests to check windows version for POSIX delete support,0.48190212,1689: Make delete docs more verbose,Fix tests to check windows version for POSIX delete support,0
Use argument to determine if prjflt should be removed,0.3260719,1697: Fix functional tests to skip around ProjFS issue,,0
Fix tests to check windows version for posix delete support,0.44690406,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #1546 from pmj/native-hooks-undeclared-string-fix,0.43744755,1717 [HOTFIX] Update Git to remove ODB string check,Native hooks: Fix build error due to missing std::string declaration,0
Merge pull request #1549 HttpRequestor: retry 429 (too many requests) responses,0.4944331,Pull Requests,HttpRequestor: retry 429 (too many requests) responses,0
HttpRequestor: retry 429 (too many requests) responses,0.44934708,- Fix backoff on cache server size endpoint 404.,429 indicates that there is server-side throttling.  VFS4G should retry requests that receive a 429 response.,0
Native hooks: Fixes build error due to missing std::string declaration,0.33551553,Previous builds were not including fully-signed DLLs. This is now fixed.,This fixes a build failure when building VFSForGit with Xcode 10 and the macOS 10.14 SDK. std::string should only be used after #including ,0
Merge pull request #1510 Update upgrade messages for platforms that do not support NuGet package verification,0.5641778,Update NuGet upgrader with new Microsoft package signing certificate,Update upgrade messages for platforms that do not support NuGet package verification,0
Merge pull request #1545 Add message to sparse disable,0.4292292,Pull Requests,Add message to sparse disable,0
Add message to sparse disable,0.28401512,1689: Make delete docs more verbose,,0
Merge pull request #1535 from github/dehydrate-linux-fixes,0.45404148,Pull Requests,"[Linux] Use backing root & min version in dehydrate cmds/tests The DehydrateVerb TryBackupFiles() method currently fails on Linux due to the inadvertent use of the WorkingDirectoryRoot as the source location for the backup. This is because on Linux the src/ working directory is fully unavailable when the provider is unmounted. Instead, by using the WorkingDirectoryBackingRoot, which is always available on all platforms (and is equivalent to the WorkingDirectoryRoot on Windows and Mac), we can allow most dehydrate tests to succeed on Linux. Also, the DehydrateShouldFailOnWrongDiskLayoutVersion() functional test currently fails and leaves the test suite in a broken state if it attempts to set the disk layout major version number below a platform's minimum supported version. By checking whether the existing version is higher than the minimum version first, we can proceed with this test only when safe to do so. To accommodate this check, we move the platform-specific disk layout major version numbers and minimum version numbers into GVFSHelpers from DiskLayoutVersionTests.",0
Merge pull request #1542 Run prune code even when no folders change,0.4515922,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",Run prune code even when no folders change,0
Merge pull request #1538 IsFileSystemSupported: cleanup test files on Mac,0.4858982,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,IsFileSystemSupported: cleanup test files on Mac,0
Merge pull request #1531 from github/posix-and-case-fixups,0.4528495,Pull Requests,"[Linux] minor POSIX and path case comparison fixups Convert a few recent inadvertent uses of StringComparison.OrdinalIgnoreCase in file path comparisons to the relevant OS-specific PathComparison helpers. The array returned by Directory.GetDirectories() is inconsistently ordered across different platforms, so we use ShouldContain to check the array's contents in CheckMainSparseFolder() in the SparseTests functional tests rather than explicit array indexes. We can also mark one recent new functional test, RunPythonExecutable(), as POSIXOnly since it applies to Linux as well as macOS.",0
Functional Tests: validate clone and mount create expected directories in root,0.52599317,1697: Fix functional tests to skip around ProjFS issue,Add a new functional tests that validates that cloning and mounting create exactly the directories that are expected,0
IsFileSystemSupported: cleanup test files on Mac,0.36567605,1730: Fix an issue with FastFetch when deleting files,IsFileSystemSupported was leaving around test files it uses to test if the file system is case sensitive.  Fix up the paths it uses for its tests.,0
Run prune code even when no folder change,0.28635404,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",,0
Merge pull request #1537 When using --set add folders back to directories for checking git status,0.58659196,- git status now supports an option to avoid doing its ahead/behind calculations. This allows the user to decide if they want to skip that overhead if all they care about is the status of the working directory.,When using --set add folders back to directories for checking git status,0
use ShouldContain in sparse directory list tests,0.4008972,1697: Fix functional tests to skip around ProjFS issue,"Per advice from wilbaker, just use ShouldContain() on the contents of the array returned by GetDirectories() in CheckMainSparseFolder() instead of sorting it.",0
When using --set add folders back to directories for checking git status,0.640504,- git status now supports an option to avoid doing its ahead/behind calculations. This allows the user to decide if they want to skip that overhead if all they care about is the status of the working directory.,The set option was removing folder from the directories hashset to know what folders needed to be removed but the directories hashset was used in checking status and for pruning so it needs to be the set of folders that will be in the sparse set after determining the what to add and remove so that git status and prune will have the correct set of sparse folders.,0
Merge pull request #1536 Add newline before outputting sparse was aborted,0.38216656,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!",Add newline before outputting sparse was aborted,0
Add newline before outputting sparse was aborted,0.20903367,1745: do not exit early if no blobs found for a period when prefetching,,0
skip test of below-minimum disk layout version,0.45319468,1697: Fix functional tests to skip around ProjFS issue,"The DehydrateShouldFailOnWrongDiskLayoutVersion() functional test currently fails and leaves the test suite in a broken state if it attempts to set the disk layout major version number below a platform's minimum supported version. By checking whether the existing version is higher than the minimum version first, we can proceed with this test only when safe to do so.",0
move func test disk layout versions to GVFSHelpers,0.5129688,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",This change will permit other functional test classes besides the DiskLayoutVersionTests to access and use the platform-specific disk layout major version numbers and minimum version numbers.,0
use working dir backing root for dehydrate backups,0.27991444,- git status now supports an option to avoid doing its ahead/behind calculations. This allows the user to decide if they want to skip that overhead if all they care about is the status of the working directory.,"The DehydrateVerb TryBackupFiles() method currently fails on Linux due to the inadvertent use of the WorkingDirectoryRoot as the source location for the backup.  This is because on Linux the src/ working directory is fully unavailable when the provider is unmounted. Instead, by using the WorkingDirectoryBackingRoot, which is always available on all platforms (and is equivalent to the WorkingDirectoryRoot on Windows and Mac), we can allow most dehydrate tests to succeed on Linux.",0
ensure consistent ordering in sparse func tests,0.43089777,1697: Fix functional tests to skip around ProjFS issue,"The array returned by Directory.GetDirectories() is inconsistently ordered across different OS platforms, so we use a PathComparer to sort the array prior to checking its contents in CheckMainSparseFolder() in the SparseTests functional tests.",0
make RunPythonExecutable func test POSIXOnly,0.29625618,1697: Fix functional tests to skip around ProjFS issue,"As this Python test succeeds on Linux as well, we can convert it to POSIXOnly.",0
use generic path comparisons in latest path checks,0.4877207,1685: minor path comparison fixup in ProductUpgrader,,0
Merge pull request #1413 from github/posix-and-crossdevice-tests,0.4473472,1744: Overhaul build and project systems and drop Mac/POSIX code,"[Linux] Revise functional tests for cross-device mounts On POSIX systems, where a rename(2) returns with errno set to EXDEV when trying to move a file or directory between mounted filesystems, the functional tests which do this fail if the repository is mounted on a separate device (as is the case on Linux). Therefore we create a RepositoryMountsSameFileSystem test category for use on VFSForGit implementations which allow renaming across repository boundaries (i.e., Windows PrjFlt and Mac kext), and mark a number of tests with this category designation if they move files or folders in or out of the repository, or create hard links across the repository boundary. In the ModifiedPathsTests suite, two specific tests which check the contents of the ModifiedPaths database after remounting or after hard linking across the repository boundary are subdivided into pairs of tests.  Each pair consists of one test which only checks changes that do not cross the repository boundary, suitable for all implementations, and one test which checks other changes that do span the repository boundary and which is therefore marked with the RepositoryMountsSameFileSystem category flag.",0
tidy same-filesystem func test category comments,0.30786955,* git multi-pack-index verify would run slowly if the objects directory had more than 2048 packfiles.,"Per PR advice from wilbaker, we avoid sprinkling comments throughout the functional test suite regarding the use of the RepositoryMountsSameFileSystem category, and instead add a more verbose description in Categories.cs which should clarify the expected use case for this test flag.",0
separate func tests which rename in/out of repo,0.41019773,1697: Fix functional tests to skip around ProjFS issue,"On POSIX, where a rename(2) returns EXDEV when trying to move a file or directory between mounted filesystems, the functional tests which do this currently fail if the repository is mounted on a separate device (as is the case on Linux). Therefore we create a RepositoryMountsSameFileSystem test category for use on VFSForGit implementations which allow rename(2) across repository boundaries (i.e., Windows PrjFlt and Mac kext), and mark a number of tests which move contents in or out of the repository with this category designation. In the ModifiedPathsTests suite, two specific tests which check the contents of the ModifiedPaths database after remounting and after hard-linking, specifically, are subdivided into pairs of tests.  Each pair consists of one test which only checks changes that do not cross the repository boundary, suitable for all implementations, and one test which check changes spanning the repository boundary and which is marked with the RepositoryMountsSameFileSystem category.",0
Merge pull request #1529 from github/posix-only-func-tests,0.47510007,1697: Fix functional tests to skip around ProjFS issue,"[POSIX] convert Mac-specific functional tests to POSIX where viable Where appropriate, convert functional tests marked MacOnly into POSIXOnly tests which also execute on Linux. The rename(2) function is identical on Linux and Mac, so update its DllImport wrapper name to POSIXRename() from MacRename() in GVFSLockTests. Finally, use generic POSIX options to ln(1) in BashRunner because the GitStatusReportsSymLinkChanges() functional test will fail on Linux otherwise, as ""ln -s -F"" does not have the same meaning as on BSD/Darwin; the -F flag does not imply -f on Linux but instead tries to hard link a directory. Thus the deletion of the target testFilePath in the test does not occur and the test fails. Instead, we use ""ln -s -f"" in the CreateSymbolicLink() method in BashRunner which suffices on both types of systems.",0
Merge pull request #1526: Fix Installer Versioning issues with kext/VFS4G.app,0.63319945,1736: Update Git to v2.31.1.vfs.0.3,Configure VFS4G pkg installer to always install kext/'VFS For Git.app' regardless of version,0
Merge pull request #1500 from Windows native toasts,0.39071068,Pull Requests,Windows native toasts,0
Enable native notifciations on Windows (2),0.48002788,Initial Mac platform native notifications, Changes in GVFS.Service.UI launch behavior -- GVFS.Service.UI is run as a regular user process in    the logged in users session id. -- Installer launches it after install. Un installer    shuts it down. -- GVFS.Service starts it in the user session when a user    logs in. Removed sessionId arg from INotificationHandler interface.   This is not needed any more (GVFS.Service.UI is not   launched on-demand now. But upon user login and also from   installer in the user session id). GVFS.Service.UI keeps its logs in   %programdata%\GVFS\GVFS.Service.UI directory. The logs   get captured by diagnose verb.,0
use generic POSIX options to ln(1) in BashRunner,0.23661277,1744: Overhaul build and project systems and drop Mac/POSIX code,"The GitStatusReportsSymLinkChanges() functional test will fail on Linux because ""ln -s -F"" does not have the same meaning as on BSD/Darwin; the -F flag does not imply -f on Linux but instead tries to hard-link a directory.  Thus the deletion of the target testFilePath in the test does not occur and the test fails. Instead, we use ""ln -s -f"" in the CreateSymbolicLink() method in BashRunner which suffices on both types of systems.",0
use generic POSIX wrapper name in func tests,0.4373143,1697: Fix functional tests to skip around ProjFS issue,"The rename(2) function is identical on Linux and Mac, so update its DllImport wrapper name to POSIXRename() from MacRename() in GVFSLockTests.",0
convert some MacOnly func tests into POSIXOnly,0.43076414,1697: Fix functional tests to skip around ProjFS issue,"Where appropriate, convert functional tests marked MacOnly into POSIXOnly tests which also execute on Linux.",0
Enable native notifciations on Windows (1),0.4873429,Initial Mac platform native notifications, Added a few new classes. WinToastNotifier to interface   with Windows Toast APIs. GVFSToastRequestHandler to parse   toast notification payload contained in incoming requests   from GVFS client processes. GVFSServiceUI class to create   ServiceUI pipe and handle toast notification requests. UT   class for GVFSToastRequestHandler. Updated project files. Minor corrections in Toast XML element class ActionItem.cs.,0
Configure BundleIsVersionChecked to false,0.40764207,1674: Config: disable status.submoduleSummary,"Presently, the installer is not actually updating the version of PrjFSKext.kext or the 'VFS For Git.app' on disk because we initially started with a test version of 1 and we now stamp it with our real version numbers (0.6.YYDDD). PackageKit will be 'smart' and not downgrade the version. You can see this system install.log like so: 2019-08-02 16:17:04-07 nickgra-trashcan installer[1230]: PackageKit: Skipping component ""com.microsoft.VFSForGit"" (0.6.19213-1.0.0-) because the version 1.0.0-1.0.0- is already installed at /Library/Application Support/VFS For Git/VFS For Git.app 2019-09-19 16:35:30-07 nickgra-trashcan installer[1474]: PackageKit: Skipping component ""org.vfsforgit.PrjFSKext"" (0.6.19262-0.6.0-) because the version 1.0.0-1.0.0- is already installed at /Library/Extensions/PrjFSKext.kext. Ameen caught this issue when testing out upgrade for the latest release, we started hitting issues since we made a backwards incompatible change with the kext. It turns out we haven't been upgrading the kext (or the .app) since we initially released them. The cleanest fix is in our component plist: configure BundleIsVersionChecked to be false. With this change, I've observed the kext version to roll backwards from 1 to the dev build number (0.2).",0
Merge pull request #1524: GitMaintenanceStep: delete commit-graphs folder before rewriting,0.60272026,1647: Fix commit-graph expiration,"If ""git commit-graph verify"" fails, we call the method LogErrorAndRewritecommitGraph(). This is supposed to get us into a better state. It appears that it is not doing that when we have an issue around our incremental commit-graph format. Fix that by deleting the commit-graphs folder in addition to the commit-graph file. Report the status of the call, so we know if we had such a folder.",0
Merge pull request #1503 from github/case-sensitive-followups,0.4542142,Pull Requests,"restore mixed-case prefetch folder list tests and tidy MirrorProviders On case-insensitive filesystems, we can restore the use of non-case-matching mixed-case file and folder paths in several PrefetchVerbTests, while retaining case-sensitive exact matches on Linux. We also use the PathComparison we set in our MirrorProviders to actually perform path comparisons, and add a PathComparer for use on Windows in particular.",0
specific comment on case-differing sparse mode dir,0.30526498,Adds additional logging for folder and file placeholder creation.,"Per wilbaker's PR review, add a more specific comment on the directory entry added in PR 1412 to the functional test suite's SparseModeFolders list in order to support case-sensitivity in the DeleteFolderAndChangeBranchToFolderWithDifferentCase() test.",0
GitMaintenanceStep: delete commit-graphs folder before rewriting,0.5446499,1647: Fix commit-graph expiration,"If ""git commit-graph verify"" fails, we call the method LogErrorAndRewritecommitGraph(). This is supposed to get us into a better state. It appears that it is not doing that when we have an issue around our incremental commit-graph format. Fix that by deleting the commit-graphs folder in addition to the commit-graph file. Report the status of the call, so we know if we had such a folder. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Merge pull request #1514 from pmj/dtruss-fstatat-output-improvements,0.39498678,Pull Requests,Mac dtruss: Improved argument formatting for fstatat() and other syscalls,0
Mac dtruss: Improvements to fstatat and getattrlistbulk output,0.33433875,- Multiple mount process reliability bugs have been squashed.,,0
Mac dtruss: Improves trace output for various syscalls,0.36383227,Performance improvements:," shm_open() traces now print the name of the shared memory object fchdir() traces now correctly print only one argument, in decimal as it is a file descriptor. chdir() traces now print the path to the directory getattrlistbulk() traces print the bit mask of requested attributes and all 5 arguments",0
Dtruss: formatting for listxattr() syscall,0.19449806,1741: Fix winget tag specification,,0
Mac dtruss: Improved fstatat() and related syscall argument formatting,0.30551273,- Multiple mount process reliability bugs have been squashed.,"This change improves the output produced for certain syscalls:  * lstat64_extended: This undocumented syscall previously used the default argument formatter (3 hex values). Now, dtruss more helpfully prints the first argument as a string (path) and the fourth argument as a decimal value.  * fstatat64: This undocumented syscall is essentially equivalent to fstatat and now uses the same argument format.  * openat, faccessat, fchmodat, readlinkat, and fstatat are a group of syscalls which accept file descriptor relative paths. The file descriptor argument is now printed as decimal, with the AT_FDCWD special descriptor explicitly called out.",0
Merge pull request #1521 Add disable option to quickly get out of sparse mode,0.38544422,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.",Add disable option to quickly get out of sparse mode,0
Sparse tests use static variable when checking for no folders,0.3518424,1697: Fix functional tests to skip around ProjFS issue,,0
Handle sparse --disable when not in sparse mode,0.31225234,1745: do not exit early if no blobs found for a period when prefetching,,0
Add functionality for the --disable option for sparse verb,0.29258564,1689: Make delete docs more verbose,,0
Add check for disable running with other options,0.41114932,1740: Skip launching UI if running unattended,,0
Add sparse option for disabling and returning to a full enlistment,0.3980388,- Improvements to compact and maintain the ModifiedPaths.dat database to help mitigate the problem of command perf degrading over time in an enlistment.,,0
Merge pull request #1520 Add sparse set and file options,0.45672533,Pull Requests,Add sparse set and file option,0
Add functional tests for sparse options,0.3557984,1697: Fix functional tests to skip around ProjFS issue,,0
Use ReportErrorAndExit when checking options for sparse,0.32539785,1745: do not exit early if no blobs found for a period when prefetching,,0
Add sparse functionality for set and file,0.26112974,"- ""Sparse"" push algorithm should improve performance of pushes where only a small cone of a repository is modified.",,0
Abstract listing sparse folders,0.37596735,Large improvements to git checkout performance when there are many folder placeholders.,,0
Add sparse option for set and file,0.2759209,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Merge pull request #1516 Allow sparse when dirty files in status are in sparse set,0.43221283,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,Allow sparse to continue when dirty files in status are in sparse set,0
Fix sparse issue on Mac when folder is left around but not in placeholders,0.39080966,Adds additional logging for folder and file placeholder creation.,,0
Merge pull request #1517 Call multi-pack-index with --no-progress,0.5719145,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",Call multi-pack-index with --no-progress,0
Add test for sparse with a bunch of changes,0.26750445,1697: Fix functional tests to skip around ProjFS issue,,0
Allow sparse change if dirty files are in sparse set,0.3421226,"- ""Sparse"" push algorithm should improve performance of pushes where only a small cone of a repository is modified.",,0
Add git status porcelain method to the GitProcess class,0.55405676,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
Merge pull request #1511 Add prune argument to the sparse verb,0.3961151,1689: Make delete docs more verbose,Add prune argument to the sparse verb,0
Call multi-pack-index with --no-progress,0.49192464,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",,0
Merge pull request #1492 Setting FileSystemCallback instance in FileSystemVirtualizer early,0.47703525,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,Setting FileSystemCallback instance in FileSystemVirtualizer early,0
"Changing test to read file contents, so that the file is materialized on windows",0.40244347,1697: Fix functional tests to skip around ProjFS issue,,0
Refactoring according to PR comments,0.29918218,Perf improvements:,,0
Setting FileSystemCallback instance in FileSystemVirtualizer early,0.39748082,- gvfs prefetch learned how to take --files-list.,,0
"GetRelativePath does not exist in non-dotnetcore, replacing with my own implementation",0.39178047,- Gracefully handle a missing shared object cache pack directory.,,0
Fixing reproduction test,0.4480403,1697: Fix functional tests to skip around ProjFS issue,,0
"REverting bandaid fix, adding reproduction functional test",0.41620272,1697: Fix functional tests to skip around ProjFS issue,,0
Add --prune option for removing folders outside the sparse list,0.34922594,- gvfs prefetch learned how to take --files-list.,,0
Add sparse prune functional tests,0.4568442,1697: Fix functional tests to skip around ProjFS issue,,0
Add prune option for the GVFSProcess in the functional tests,0.52366316,1697: Fix functional tests to skip around ProjFS issue,,0
Move some common functions to GVFSVerb,0.512495,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
Merge pull request #1513 Sparse UI cleanup,0.4670321,Pull Requests,Sparse ui cleanup,0
Update user message when no folders in sparse list,0.3556193,1664: Update USN journal entries for projected folders,,0
Remove top level try/catch to allow correct message to the user,0.23751727,- Fixed several incorrect interactions with credentials,,0
Merge pull request #1498: Don't allow Executables to be Placeholder,0.44881183,1652: RepoRegistry: ignore non-existent repos,Don't allow Executables to be Placeholders,0
Upgrade: upgrade help text for the NoVerify option,0.5256643,1747: UpgradeVerb: write deprecation notice,,0
Upgrade: better message for platforms that do not support NuGet verification,0.59344554,Update NuGet upgrader with new Microsoft package signing certificate,,0
Hydrate executables,0.32549074,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build, This fixes the failure when a Phython Executable is called before hydration.,0
Merge pull request #1506 from Mac installer preinstall failure,0.41627616,- The installer now unmounts and remounts existing repos automatically,,0
Merge pull request #1323 Dehydrate folders,0.48201865,Pull Requests,Dehydrate folders,0
Merge pull request #1508: diff: use csharp driver for better function headers in .cs files,0.3959182,- A couple of fixes for using VS Code on top of VFS for Git.,diff: use csharp driver for better function headers in .cs files,0
Merge pull request #1499 from pmj/mac-projfs-offline-io-registration-no-kext-user-version-validation,0.47929886,- Better errors around ProjFS installation issues.,Mac ProjFS: Don't perform user/kernel version validation for offline I/O,0
Update tests to match new messages,0.35565788,1697: Fix functional tests to skip around ProjFS issue,,0
diff: use csharp driver for better function headers in .cs files,0.34314477,- We have started porting parts of the product to .NET Standard.,Update .gitattributes to use the csharp pattern for hunk headers in *.cs files. This will result in the csharp function name that a change occurs in to be included in the hunk header.,0
Rename DehydrateFolder to TryDehydrateFolders indicating there is a return value,0.28605267,- Gracefully handle a missing shared object cache pack directory.,,0
"Method name cleaup, string comparison fix, and add const for folder separator",0.25394502,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",,0
Merge pull request #1507 Check the disposing flag in Dispose methods,0.48694372,1689: Make delete docs more verbose,Check the disposing flag in Dispose methods,0
Rename methods to be more descriptive,0.24746425,General Improvements,,0
Update messages to be more consistent,0.3888737,Release Notes,,0
Remove NormalizePath from SparseTable,0.21979856,1685: minor path comparison fixup in ProductUpgrader,,0
Check the disposing flag in Dispose methods,0.30293202,1689: Make delete docs more verbose,When implementing Dispose the disposing flag needs to be checked so that objects that may have already been disposed of through gc will not be used and cause a ObjectDisposedException.,0
Mac installer preinstall failure,0.39699498,- The installer now unmounts and remounts existing repos automatically,All registered repositories should be unmounted before unloading the PrjFS Kext.,0
restore mixed-case tests in PrefetchVerbTests,0.52796364,1697: Fix functional tests to skip around ProjFS issue,"On case-insensitive filesystems, we can restore the use of non-case-matching mixed-case file and folder paths in several PrefetchVerbTests, while retaining case-sensitive exact matches on Linux. These changes are a follow-up based on PR feedback from wilbaker on PR #1412 and commit 5c7890237893.",0
clean up path comparers in MirrorProviders,0.49105218,1685: minor path comparison fixup in ProductUpgrader,"Use the PathComparison we set in our MirrorProviders to actually perform path comparisons, and add a PathComparer for use on Windows in particular. Also repair a handful of line endings while we're here.",0
Add more functional tests for dehydrate,0.29838234,1697: Fix functional tests to skip around ProjFS issue,,0
Mac ProjFS: Don't perform user/kernel version validation for offline I/O,0.5013864,- Better errors around ProjFS installation issues.,"Offline I/O registration uses a trivial user/kernel API which is not sensitive to version differences, and there have been instances where gvfs upgrade has failed and left VFS4G in an unusable state because version validation failed mid-upgrade. This change disables validation for offline I/O registration only.",0
Show parent folder that needs to be dehydrated,0.2938137,- Gracefully handle a missing shared object cache pack directory.,,0
Use fullDehydrate variable in all places,0.19175442,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",,0
Rollback placeholders and modified paths when there is an exception,0.4053844,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Placeholder on Mac will not get created unless folder is included,0.5112971,Adds additional logging for folder and file placeholder creation.,,0
Parent dehydrated means cannot create placeholder for child,0.41540152,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Add logging when adding a modified path fails,0.42222804,Adds additional logging for folder and file placeholder creation.,,0
Use BashRunner for deleting the backup directory of Dehydrate tests,0.39678743,Git commands are now allowed to delete an empty directory,,0
Add unit tests for the RemoveAllEntriesForFolder method,0.33031818,1689: Make delete docs more verbose,,0
Update some messge wording,0.42299068,General improvements:,,0
Allow multiple strings in DehydrateShouldSucceed method,0.18370105,1717 [HOTFIX] Update Git to remove ODB string check,,0
Update dehydrate folder tests,0.36589766,1664: Update USN journal entries for projected folders,,0
Update message for failed folders during dehydrate,0.41652083,- Gracefully handle a missing shared object cache pack directory.,,0
Separate copy and delete in dehydrate folders to give better error messages,0.4194111,1689: Make delete docs more verbose,,0
Update output for status when using folders option,0.46721697,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",,0
Error handling and comment when creating the placeholder on Mac when included,0.41588426,Adds additional logging for folder and file placeholder creation.,,0
Add functional tests and address some PR feedback,0.51764935,1697: Fix functional tests to skip around ProjFS issue,,0
Remove unused method,0.36713463,1746: Delete custom upgrader,,0
Move NormalizePath to GVFSDatabase class so it can be used in table classes,0.35885978,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
Cleanup some error messages,0.38473377,1689: Make delete docs more verbose,,0
Only create placeholder on mac if folder is included,0.51701933,Adds additional logging for folder and file placeholder creation.,,0
Add some error handling to dehydrate folders,0.41653213,- Gracefully handle a missing shared object cache pack directory.,,0
Add functional tests for dehydrating folders,0.3957465,1697: Fix functional tests to skip around ProjFS issue,,0
Add dehydrate message to named pipe messages,0.2334238,1745: do not exit early if no blobs found for a period when prefetching,,0
Add method to dehydrate a folder,0.32470506,Adds additional logging for folder and file placeholder creation.,,0
Add method to remove all entries for a folder,0.40778452,1689: Make delete docs more verbose,,0
Add method to remove all entries that start with a path,0.28254622,1689: Make delete docs more verbose,,0
Add folders option to the dehydrate verb,0.30927122,Adds additional logging for folder and file placeholder creation.,,0
Add method of running the full dehydrate,0.21105453,- No-op gvfs prefetch --hydrate performance is dramatically improved,,0
Merge pull request #1466 from Better installer logs,0.51574475,Pull Requests,,0
[macOS] Capture installer log on upgrade failure,0.3790903,1746: Delete custom upgrader, Save last 100KB of /var/log/installer.log immediately after   an upgrade failure. Installer logs would be available through gvfs diagnose. Added new platform property SupportsSystemInstallLog. This will be   set to true for Platforms(macOS) that keep system wide installer log   (vs custom logs specific to VFSForGit installer package).,0
Fix mac installer/upgrader failure,0.45847845,1746: Delete custom upgrader,"VFSForGit installer fails in postinstall script while trying to launch Service and UserNotification agents in GUI context of logged in users. To determine users logged into the GUI context, postinstall script looks for loginwindow commands and the user running the command. When Fast User switching is enabled, then loginwindow can be running as root user, even though root user is Not logged in. In such cases, postinstall tries to launch Service and UserNotifcation agents in GUI context of root user (that does not exist) resulting in failure. This commit makes postinstall look for Finder command (which only runs after a user has successfully logged into GUI context and is therefore more reliably associated with GUI session) rather than loginwindow. Also Updated launchd plist for Service and Notification agents, added LimitLoadToSessionType = Aqua, just to make sure the agents get launched into the GUI context only. Fixes #1444",0
Merge pull request #1486: Clean up Register/Unregister for OfflineIO,0.33320677,1652: RepoRegistry: ignore non-existent repos,Clean up Register/Unregister for OfflineIO,0
Clean up Register/Unregister for OfflineIO,0.2752814,1740: Skip launching UI if running unattended, Add a call from MountSetsCoreHooksPath Ensure we check Register is successful when starting up Have verbs explicitly unregister,0
Merge pull request #1485: Mark panic strings as 'public' so they appear in Console,0.44451785,1717 [HOTFIX] Update Git to remove ODB string check,Mark panic strings as 'public' so they appear in Console,0
Merge pull request #1482 from pmj/mac-projfs-1479-1480-no-follow-symlinks,0.51368606,1736: Update Git to v2.31.1.vfs.0.3,"Mac ProjFS: Don't follow symlinks in kext & userlib, logging improvements",0
Mark panic strings as 'public' so they appear in Console,0.28508875,1717 [HOTFIX] Update Git to remove ODB string check,,0
Mac ProjFS kext test: Use switch fall-through to make coverage happy,0.61950415,1697: Fix functional tests to skip around ProjFS issue,For some reason the test coverage check fails when we return from the default: switch case. Removing the default: case and returning after the switch block instead seems to make it happy.,0
Mac ProjFS kext: Consistently don't follow symlinks on vnode_lookup,0.49535438,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"As ProjFS operates on symlinks themselves, vnode lookups must not follow symlinks.",0
Mac ProjFS userlib: Consistently don't follow symlinks for metadata I/O,0.48581505,- Better errors around ProjFS installation issues.,"The code previously used a mixture of symlink-following and non-symlink following function calls. As ProjFS operates on symlinks as well, all such calls must be non-following.",0
Mac ProjFS kext: Vnode access error logging improvements,0.602501,- Added better diagnostic info in the GVFS logs when there are network errors," The KextLog_File* macros are extended to output the vnode type as well as path. Failures on vnode_lookup() will now only generate an ""error"" level log event if the path lies within an active root, otherwise the default log level is used.",0
Merge pull request #1487: Use the full path to GVFS.Hooks executable in the hook configuration,0.5793721,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,,0
Properly test the hooks are absolute paths,0.3459082,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #1483 from pmj/mac-projfs-shadowed-variable-bugfixes,0.516761,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"Mac ProjFS: shadowed variable bugfixes This fixes a few subtle bugs caused by accidentally shadowed variables, and enables a compiler warning to prevent the class of bug in future.",0
Use the full path to GVFS.Hooks executable in the hook configuration,0.53758633,Instructions for installing and using GVFS are available at https://github.com/Microsoft/GVFS,,0
Merge pull request #1412 from github/case-sensitive-repos,0.4803307,Pull Requests,"[Linux] Support case-sensitive filesystems Introduce case-sensitive file path matching and sorting of file and folder names within the repository as well as the modified paths and placeholder list databases, but only on Linux and other case-sensitive file systems, while retaining existing case-insensitive behaviour on Windows and Mac platforms. We use filesystem-specific case matching when comparing path throughout the functional test suite, and also make sure to exclude the case-sensitive filesystem unit tests when running on Windows or Mac platforms. We include some filename case corrections to prevent test case regressions on case-sensitive filesystems, and use lowercase paths generated from SHA1 values because that ensures consistency with Git's own naming scheme for files under .git/objects on case-sensitive filesystems.",0
"Mac ProjFS: Enable warning for shadowed local variables, fix instances",0.53250927,- Better errors around ProjFS installation issues.,"To avoid bugs resulting from shadowed variables in future, the corresponding compiler warning is now turned on across the entire project. A few benign instances discovered by the setting are resolved as well.",0
Mac ProjFS userlib: Fixes resource leaks from shadowed variables,0.5121498,1697: Fix functional tests to skip around ProjFS issue,"Variables were re-declared instead of simply assigned, potentially causing resource leaks and incorrect return codes on error control flow paths.",0
restore common func tests but add case-sensitivity,0.45471352,1697: Fix functional tests to skip around ProjFS issue,"As wilbaker noted in PR review, we really don't need the Case[In]SensitiveFileSystem functional test categories because we've now created the public boolean flag in FileSystemHelpers, so we can just toggle case-sensitive behaviour on that flag instead of duplicating tests and moving code around.  Nice catch!",0
fix abd8a62c6c2f612,0.35668358,- Other perf and reliability fixes.,,0
only down-case SHA1s on case-sensitive filesystems,0.2681688,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git",Per PR advice from wilbaker.,0
hoist case-sensitivity check out of compare loop,0.2545881,1697: Fix functional tests to skip around ProjFS issue,"Per PR suggestion from wilbaker, we hoist the check on whether to perform a case-sensitive string comparison or not out of the core loop of the LazyUTF8String.Compare() method in GitIndexProjection.  This should reduce the number of additional conditional tests to just one per Compare() invocation, as opposed to one per compared byte. (We could, if need be, further reduce the overhead by creating two independent Compare() methods and not passing in a bool flag, and then hoisting the comparsion-mode check higher in SortedFolderEntries.GetSortedEntriesIndexOfName() so that different versions of that method were executed depending on the mode.  However, we reserve this option for now, depending on the results of performance tests.) We also add labels to the bool flags used in some of the helper methods used by the unit tests, per PR advice.",0
Add case-differing-only SortedFolderEntriesTests,0.31922042,1697: Fix functional tests to skip around ProjFS issue,Per PR suggestion from kewillford.,0
add case-sensitive filesystem DiffHelperTests test,0.4015358,1697: Fix functional tests to skip around ProjFS issue,Per PR suggestion from kewillford.,0
use FileSystemHelpers in additional func tests,0.4922753,1697: Fix functional tests to skip around ProjFS issue,"Simplify a few more platform-specific case-sensitivity checks in the functional tests and CmdRunner by using FileSystemHelpers, as suggested by kewillford on PR review.",0
use mixed-case FastFetch.dll in functional tests,0.50562114,A case where FastFetch would not download a small number of files has been fixed.,Make sure to use the exact case-sensitive name of FastFetch.dll in the test suite.,0
always lowercase SHA1 filenames for Linux,0.24563113,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,"On Linux, file paths are case-sensitive, so we always use lowercase paths generated from SHA1 values because that ensures consistency with Git's own naming scheme for files under .git/objects.",0
toggle path case-sensitivity in UTF8 tests,0.3236538,1685: minor path comparison fixup in ProductUpgrader,"We divide the FilterNonUTF8FileName() functional test into a pair, one for case-sensitive filesystems such as Linux, and one for case-insensitive filesystems like Mac and Windows.",0
toggle path case-sensitivity in folder tests,0.30381203,1697: Fix functional tests to skip around ProjFS issue,"We divide the FolderContentsProjectedAfterFolderCreateAndCheckout() functional test into a pair, one for case-sensitive filesystems such as Linux, and one for case-insensitive filesystems like Mac and Windows.",0
toggle path case-sensitivity in hydrate func tests,0.3644182,1697: Fix functional tests to skip around ProjFS issue,"We divide the HydratingFileUsesNameCaseFromRepo() and HydratingNestedFileUsesNameCaseFromRepo() functional tests into pairs, one for case-sensitive filesystems such as Linux, and one for case-insensitive filesystems like Mac and Windows.",0
use platform-specific path matching in func tests,0.485673,1697: Fix functional tests to skip around ProjFS issue,Use filesystem-specific case matching when comparing path throughout the functional test suite.,0
use platform-based case comparisons in DiffHelper,0.35272896,1685: minor path comparison fixup in ProductUpgrader,Includes filename case corrections in PrefetchVerbTests to prevent test case regressions on Linux.,0
add case-sensitive matching/sorting on repo paths,0.4744149,Large improvements to git checkout performance when there are many folder placeholders.,"Introduce case-sensitive file path matching and sorting of file and folder names within the repository as well as the modified paths and placeholder list databases, but only on Linux and other case-sensitive file systems, while retaining existing case-insensitive behaviour on Windows and Mac platforms. Also make sure to exclude the case-sensitive filesystem unit tests when running on Windows or Mac platforms.",0
use platform-specific property for case matching,0.1945453,1744: Overhaul build and project systems and drop Mac/POSIX code,"This only applies to on-disk operations like locating the "".git"" directory or "".idx"" files, etc. -- the repository contents remain case-insensitive. Co-authored-by: Chris Darroch chrisd8088@github.com",0
Merge pull request #1452: Correct Upgrade Messages for Mac,0.50791574,1747: UpgradeVerb: write deprecation notice,Correct Upgrade Messages for Mac,0
Merge pull request #1476 Mark MoveIndexFileFails as MacOnly because CmdRunner on Windows failing,0.43531758,1673: [HOTFIX] ProductUpgrader: be extra careful about a copy loop,Mark MoveIndexFileFails as MacOnly because CmdRunner on Windows failing,0
Correct Upgrade Messages for Mac,0.5784198,Initial Mac upgrade functionality,,0
Merge pull request #1473 Mac: Add mdworker_shared to the IsFileSystemCrawler block list,0.4567453,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Mac: Add mdworker_shared to the IsFileSystemCrawler block list,0
Mark MoveIndexFileFails as MacOnly because CmdRunner on Windows is failing,0.37755612,1730: Fix an issue with FastFetch when deleting files,,0
Merge pull request #1469 from Enabling Service verb Functional tests,0.4612991,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #1389: Update Git to v2.23.0,0.7353181,1663: Update Git to v2.27.0,"See microsoft/git#165 for the rebase onto v2.23.0.windows.1. This PR has a few reactions to that update: A newline was dropped in a message. Remove it from our expectation in a test. Rebase now has unpredictable extra line of whitespace sometimes. However, -q doesn't work in tandem with --merge, but using GIT_QUIET=true makes the output quiet on Windows. Still doesn't work on OSX for some reason, so also ignore the error output and focus on the end-result. Use git rev-parse HEAD^{tree} to ensure we got the same resulting working directory. FileContentsShouldMatch() used to fail if both of the files didn't exist. Something changed in v2.23.0 such that a cherry-pick loses a file in both vanilla Git and VFS for Git, so the test started failing on that path. Relax the condition, since the files do match. KnownGitCommands needs to include restore and switch, resolving #1463. Includes the performance fix for git checkout -b from microsoft/git#183.",1
Mac: Add mdworker_shared to the IsFileSystemCrawler block list,0.39205456,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,mdworker_shared is part of the Spotlight indexing service and should not be allowed to hydrate files.,0
Merge pull request #1467 Add a global setup class when using a --test= option,0.33903503,Includes fixes to config settings for internal users only,Add a global setup class when using a --test= option,0
Update Git to include 'git checkout -b' fix,0.6461358,This includes the Git 2.30.2 security fix (CVE-2021-21300).,Includes updates from microsoft/git#183. Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Add a global setup when using a --test= option,0.31919107,Includes fixes to config settings for internal users only,,0
Merge pull request #1445: Check for new Panic Logs where PrjFSKextLogDaemon is started,0.4437821,- Added better diagnostic info in the GVFS logs when there are network errors,Check for new Panic Logs where PrjFSKextLogDaemon is started,0
Merge pull request #1289 from Actionable notifications,0.5349491,Pull Requests,,0
Enabling Service verb Functional tests,0.4626618,1697: Fix functional tests to skip around ProjFS issue, Removed Category.MacTODO.NeedsServiceVerb Updated the category of SharedCacheTests::CloneCleansUpStaleMetadataLock   to TestNeedsToLockFile. The test case assumes Windows style file   locking behavior; causing it to fail on the Mac.  Fixes #1217,0
Check for new Panic Logs where PrjFSKextLogDaemon is started,0.42670622,- Added better diagnostic info in the GVFS logs when there are network errors, A time file is used to differentiate the last sweep The name of the panic file is sent to telemetry,0
Merge pull request #1440: Add LogInfo / LogWarning messages to PrjFSLib,0.4529108,- Better errors around ProjFS installation issues.,Add LogInfo / LogWarning messages to PrjFSLib,0
Update IsCheckoutWithFilePaths for 'switch' and 'restore',0.3540356,1685: minor path comparison fixup in ProductUpgrader,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Merge pull request #1456 from Auto-unmount repos in pre-install,0.5862329,- The installer now unmounts and remounts existing repos automatically,,0
Add LogInfo / LogWarning messages to PrjFSLib,0.40424502,- Better errors around ProjFS installation issues.,,0
Add 'restore' and 'switch' to list of known git commands,0.5281638,- Built-in git rebase is on by default.,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Use GIT_QUIET to make tests more robust,0.51894337,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.",Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
"Make rebase validation use -q, check tree after",0.37334254,- Built-in git rebase is on by default.,"The output is strangely off by some whitespace, so instead of worrying about that, make sure the resulting tree is the same. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Drop extra newline that was dropped in Git v2.23.0,0.5443278,This includes the Git 2.30.2 security fix (CVE-2021-21300).,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Update Git to v2.23.0 [PR Build],0.7749425,1653: Update Git to include v2.26.1,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Merge pull request #1411 from github/backing-root-fixes,0.4846307,- Updated Git for a security issue.,"[Linux] Convert tests and repair jobs to use backing root Convert all relevant uses of RepoRoot and WorkingDirectoryRoot in the GVFS provider and functional tests to use the backing root, to ensure these tests will pass on systems where they are distinct (e.g., Linux). For example, repair jobs run while the GVFS enlistment is not mounted, which on Linux requires us to use the backing root in order to access the "".git"" contents; similarly, the MountTests are adjusted to ensure they don't expect file contents within an unmounted repository.",0
Auto-unmount repos in pre-install,0.7043897,- The installer now unmounts and remounts existing repos automatically,Mac installer pkg would now automatically unmount all repositories registered for auto mount Fixes #1124,1
Merge pull request #1429 from pmj/mac-kext-182-block-offline-empty-file-access,0.43874058,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,"Mac ProjFS kext: Deny I/O on offline roots, with exceptions, part 2 This is a continuation of the work on issue #182. The remaining operations to block are:  A process attempts to read/execute an empty file in an offline root. The result of the read would be bad data, so failing with denied authorisation is preferable to letting the bad data propagate. A process attempts to create files or directories in an offline root.  The commits implementing those 2 changes are fairly straightforward, however they did cause some knock-on effects:  During gvfs clone, the git subprocess itself wants to create files/directories in the offline root, so we need it to inherit the parent gvfs process's entitlement to access offline roots. The exception check therefore now walks up the process hierarchy. One of the functional tests, CheckoutBranchWithOpenHandleBlockingProjectionDeleteAndRepoMetdataUpdate needs to mess with the repo while it's not mounted, so I've registered the test runner for offline I/O for the duration of that test. To avoid weird edge cases, I've made the offline I/O registration in the native userlib thread-safe and reference counted, so registering multiple times is fine, and we only actually deregister once it's been matched with an equal number of unregister calls.",0
Mac ProjFS Kext: Prevents creation of new files & dirs in offline roots,0.49683514,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"Also adds a kext unit test for blocking file/directory creation in offline roots. This further access restriction to offline roots causes problems in the CheckoutBranchWithOpenHandleBlockingProjectionDeleteAndRepoMetdataUpdate functional test, so this test now registers for offline I/O as well.",0
Mac PrjFSLib: Makes offline I/O registration thread safe and refcounted,0.41009724,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git","Calling PrjFS_RegisterForOfflineIO() twice and then PrjFS_UnregisterForOfflineIO() twice no longer causes a failed assertion, is more efficient (only one shared user client instance) and is now thread-safe.",0
Mac ProjFS kext: Offline I/O privilege is inherited by child processes,0.5053097,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,,0
Mac ProjFS Kext: Disallows read access to empty files in offline roots,0.43591493,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,,0
Merge pull request #1428 from github/move-index-test,0.49680662,Pull Requests,"add MoveIndexFileFails() functional test On some platforms (notably Linux), we receive only a pre-rename permission request rather than a pre-delete permission request during a rename(2) operation, so the virtualization instance's OnPreRename() handler becomes responsible for ensuring that, outside of a GVFS lock, the .git/index file can not be renamed or overwritten. The BasicFileSystemTests.DeleteIndexFileFails() test handles the case of a true delete of .git/index, as well as platforms which deliver a pre-delete event on the source path prior to a rename action. As well, several GVFSLockTests tests such as the LockPreventsRenameFromInsideWorkingTreeOnTopOfIndex() test the case of a file being renamed to .git/index, but no existing test checks for the case of .git/index being renamed to another path (although DeleteIndexFileFails() likely suffices on platforms which send a pre-delete event). Therefore we add an explicit MoveIndexFileFails() functional test to cover this case.  Note that we use System.IO.File.Replace() in the SystemIORunner because File.Move() is implemented on Unix/POSIX systems such that it actually performs a copy or hard link first, then a delete, not a true rename(2).  The effect on a platform where pre-rename but not pre-delete events are delivered on rename operations is that the link succeeds, then the delete fails (since that does send a pre-delete permission request, which is denied as the path is .git/index), leaving behind a spurious extra file link.  So we want to trigger a true rename(2), which is what File.Replace() does.",0
align CmdRunner access-denied messages with others,0.34773576,- Fixed several incorrect interactions with credentials,"Per PR suggestion from wilbaker, we can align the messages and tests in the AccessShouldBeDenied versions of the DeleteFile and ReplaceFile methods with those found in the other runner classes.",0
Merge pull request #1448 from github/use-dir-sep-char,0.40972036,"* Sped up GVFS's parsing of the git index, shaving off 2-3 seconds for a large index file","[POSIX] Use platform-specific path separators in repair jobs and cache tests Avoid hard-coding the Windows backslash path separator in messages printed by the repair jobs. Per @kewillford's suggestion, we use GVFSConstants.DotGit.* properties throughout. Also fix the path matching in the HydrateEntireRepo() helper for MultiEnlistmentTests.SharedCacheTests, which was not excluding {repoRoot}/.git/ paths on Mac (or Linux) due to hard-coded Windows path separators.",0
Merge pull request #1450 Add information for when lock is release by process not owning the lock,0.46046406,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,Add information for when lock is release by process not owning the lock,0
Merge pull request #1446 Cleanup virtualizer tests,0.46237934,Pull Requests,Cleanup virtualizer tests,0
Add information for when lock is release by process not owning the lock,0.35833994,- Better recovery from a process that terminates without releasing the GVFS lock.,,0
Merge pull request #1449 Don't log errors when MaintenanceSteps fail due to the repo being deleted,0.4691608,* Improve error message from gvfs upgrade if the Git installation could not be found.,Don't log errors when MaintenanceSteps fail due to the repo being deleted,0
Don't log errors when MaintenanceSteps fail due to the repo being deleted,0.48287857,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
avoid hydrating .git dir in cache tests on Mac,0.5739941,- Added a new volume-wide cache for downloaded git objects that is shared amongst multiple repos. Only newly created repos will use the new cache location. Existing clones will continue to use their own private cache.,"Fix the path matching in the HydrateEntireRepo() helper for MultiEnlistmentTests.SharedCacheTests, which was not excluding ""{repoRoot}/.git/"" paths on Mac (or Linux) due to hard-coded Windows path separators.",0
use DirectorySeparatorChar in repair job messages,0.3156351,1658: ProjFSFilter: Be more robust to missing PowerShell,Avoid hard-coding the Windows backslash path separator in messages printed by the repair jobs.,0
Use virtualizer tester in all the windows virtualizer unit tests,0.2814057,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Add unit tests to cover sparse in MacFileSystemVirtualizer,0.46635318,1697: Fix functional tests to skip around ProjFS issue,,0
Use the MacFileSystemVirtualizerTester for tests,0.3945234,1697: Fix functional tests to skip around ProjFS issue,,0
Add MacFileSystemVirtualizerTester to use for Mac tests,0.37129748,1697: Fix functional tests to skip around ProjFS issue,,0
Add InvokeGetFileDataCallback for tester and use in tests,0.33208865,1697: Fix functional tests to skip around ProjFS issue,,0
Create classes for testing the FileSystemVirtualizers,0.36933362,1697: Fix functional tests to skip around ProjFS issue,,0
Use static placeholder version variable,0.34442422,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Use default content id for VirtualizerTests,0.27975774,1697: Fix functional tests to skip around ProjFS issue,,0
Use default file length for MockGVFSGitObjects,0.533157,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",,0
Merge pull request #1436: [Mac kext] Allow privileged system service 'amfid' to hydrate,0.42954436,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Allow privileged system service 'amfid' to hydrate,0
Merge pull request #1337: [Mac Kext] Remove '/System/Volumes/Data' when only in path,0.4366845,Git commands are now allowed to delete an empty directory,Remove '/System/Volumes/Data' when only in path,0
Merge pull request #1408: Include panic logs for vfs in diagnose,0.61613756,- Added better diagnostic info in the GVFS logs when there are network errors,Include panic logs for vfs in diagnose,0
Allow privileged system service 'amfid' to hydrate,0.26594934,- No-op gvfs prefetch --hydrate performance is dramatically improved," When amfid is invoked to check the code signature of a library which has not been hydrated,   blocking hydration would cause the launch of an application which depends on the library to fail,   so amfid should always be allowed to hydrate.",0
Merge pull request #1431 Add lock around writes to SQLite database tables,0.4750749,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,Add lock around writes to SQLite database tables,0
Add lock around writes to SQLite database tables,0.3045221,Moves placeholder database into SQLite for better performance.,,0
Merge pull request #1409 from Halterer/SubDirectoryInfoObject,0.42581114,Pull Requests,SubDirectoryInfo Object,0
Merge pull request #1417: Update mac uninstall script to remove GVFS service directory,0.51167095,* Improve error message from gvfs upgrade if the Git installation could not be found.,Update mac uninstall script to remove GVFS service directory,0
Update mac uninstall script to remove GVFS service directory,0.47532612,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]","The mac uninstall script did not remove the GVFS service directory, resulting in GVFS artifacts being left around. This change updates the uninstall script to also remove the GVFS service directory. This brings the behavior of the mac uninstall script to match the Windows uninstall script in src/Scripts/UninstallGVFS.bat. One motivation for this change was that the Mac Functional test machines were gathering cruft from repeated test runs, such as the list of registered repositories in the repo-registry growing. This apparently caused the GVFS service start up time to grow, resulting in test failures.",0
Merge pull request #1425: update NUnit dependencies,0.46684274,1653: Update Git to include v2.26.1,Update NUnit dependencies,0
Merge pull request #1416 Mac: Fix and enable remaining dehydrate functional tests,0.4678534,1697: Fix functional tests to skip around ProjFS issue,Mac: Fix and enable remaining dehydrate functional tests,0
Update NUnit dependencies,0.40593606,- Upgrade supports NuGet feeds as a distribution source.,"Update the following dependencies: NUnit:              3.10.1 -> 3.12.0   NUnitLite:          3.10.1 -> 3.12.0   NUnite3TestAdapter: 3.10.1 -> 3.13.0 This update includes a fix for the following issue we have have observed in our CI builds, where tests fail with the following exception: System.InvalidOperationException: Stack empty. Which appears to be this issue #2772 in https://github.com/nunit/nunit which indicates it is fixed in NUnit 3.12.",0
Update ShouldMatchInOrder to validate order,0.26933238,1685: minor path comparison fixup in ProductUpgrader,,0
Include panic logs for vfs in diagnose,0.6127593,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Remove '/System/Volumes/Data' when only in path,0.34786427,Git commands are now allowed to delete an empty directory,,0
"Merge pull request #1421: Update Git, drop MIDX writes",0.51217,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.","This PR does two things: Updates Git to include the slow commit-graph write fix from microsoft/git#168. Also see #1420 for the M153 hotfix. Removes the multi-pack-index writes from the PostFetchStep and instead only writes the multi-pack-index during the PackfileMaintenanceStep. In order to get the most out of the step, we need to ensure we have a multi-pack-index before running the expire and repack steps. Also, we can only expire the packs from that day if they are contained in the multi-pack-index. If we agree that we should send (2) as a hotfix to the M155 release (in addition to (1), which is necessary), then I'll create a hotfix PR to that branch.",0
add MoveIndexFileFails() functional test,0.36239552,1697: Fix functional tests to skip around ProjFS issue,"On some platforms (notably Linux), we may receive only a pre-rename notification event rather than a pre-delete event, so the virtualization instance's OnPreRename() handler becomes responsible for ensuring that, outside of a GVFS lock, the .git/index file can not be renamed or renamed over. The BasicFileSystemTests.DeleteIndexFileFails() test handles the case of a true delete of .git/index, as well as platforms which deliver a pre-delete event on the source path prior to a rename action. As well, several GVFSLockTests tests such as LockPreventsRenameFromInsideWorkingTreeOnTopOfIndex() test the case of a file being renamed to .git/index, but no existing test checks for the case of .git/index being renamed to another path (although DeleteIndexFileFails() suffices on platforms which send a pre-delete event). Therefore we add an explicit MoveIndexFileFails() functional test to cover this case.",0
PostFetchJob: stop writing multi-pack-index,0.4358249,1745: do not exit early if no blobs found for a period when prefetching,"The multi-pack-index write is taking a lot of memory. Instead of writing it with every prefetch (every hour) let's write it during the packfile maintenance step (once a day). This will lead to a few packs not covered by the multi-pack-index between runs, but that will not be a huge loss to performance. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Update Git to fix slow commit-graph writes,0.63972276,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.",See microsoft/git#168 for full details. Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Merge pull request #1208 from pmj/mac-kext-182-no-writes-on-offline-roots,0.43935108,Pull Requests,"Mac ProjFS: Deny I/O on offline roots, with exceptions, part 1 This is the first stage of implementing #182 - the kext now blocks write I/O to empty or placeholder files on offline roots. I/O needs to be blocked when:  A message failed to deliver to the provider. A process attempts to write to an empty file in an offline root (this file would subsequently be overwritten by a hydration event) A process attempts to write to a placeholder (hydrated unmodified) file when the provider is offline. The file would not show up in git status and could be overwritten by a subsequent checkout/rebase/merge. A process attempts to rename a file in an offline root. A process attempts to read/execute an empty file in an offline root. The result of the read would be bad data, so failing with denied authorisation is preferable to letting the bad data propagate. A process attempts to create files or directories in an offline root.  This change implements cases 1-4. Cases 5-6 will be covered in a future change. At first glance this seems like it would be a very simple change, but in practice, some processes must be allowed unfettered access to files in offline roots. So a large part of this patch set is dedicated to implementing a system for allowing exceptions - there is a new type of IOKit user client for processes which need unrestricted access to offline roots, and this needed to be implemented all the way through from kext, via native lib, to (managed) VFS4G code proper. Next, the vnode handler, which is in the actual business of denying or allowing file access, has been expanded to allow returning different results based on whether the root's provider is offline. Finally, ""deny"" results are actually returned for a number of different cases - so far, this only includes writes. Even this caused some test failures, so the test process itself needs to register as an exception with unrestricted offline root access.",0
Merge pull request #1280 from pmj/mac-kext-resize-roots,0.41282034,Pull Requests,"Mac kext: Drop lock for allocating virtualization root array memory Performing a blocking memory allocation while holding a lock in a vnode listener callback is not necessarily safe. (There is potential for a deadlock in low-memory situations.) When growing the virtualization root array, this was exactly what the existing code was doing. This change restructures the virtualization root insertion logic so that the lock can be dropped for allocating the larger memory block. Dropping the lock means it must be re-checked whether an insertion is still necessary, which was not readily possible with the old code structure.",0
Merge pull request #1415: Update Git to include octopus merge bugfix,0.5125363,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"See microsoft/git#167 for details. This package also includes a Linux installer, since we have updated the build definition since the last Git update.",0
Mac: Fix and enable remaining dehydrate functional tests,0.43105024,1697: Fix functional tests to skip around ProjFS issue,,0
Some smaller cleanup,0.4723354,General Improvements,Stop passing around KeyValuePairs instead of data objects Update unit tests accordingly,0
Merge pull request #1403 Mac: Do not lookup or download file sizes when updating placeholders,0.64231473,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",Mac: Do not lookup or download file sizes when updating placeholders,0
Mac kext: Drop lock for allocating virtualization root array memory,0.3931839,- No-op gvfs prefetch --hydrate performance is dramatically improved,"Performing a blocking memory allocation while holding a lock in a vnode listener callback is not necessarily safe. (There is potential for a deadlock in low-memory situations.) When growing the virtualization root array, this was exactly what the existing code was doing. This change restructures the virtualization root insertion logic so that the lock can be dropped for allocating the larger memory block. Dropping the lock means it must be re-checked whether an insertion is necessary, which was not readily possible with the old code structure.",0
Mac ProjFS kext: Hardcodes offline I/O process array to fixed length of 128,0.37898898,1697: Fix functional tests to skip around ProjFS issue,"Some reduction in code complexity, as 128 ought to be enough for anyone.",0
Move thread calculation into MultiThreadedPlaceholderUpdatesAndDeletes,0.32421625,  - Break down update placeholders timings so we can see where time is spend during checkout.,,0
Update Git to include octopus merge bugfix,0.54882526,This includes the Git 2.30.2 security fix (CVE-2021-21300).,See microsoft/git#167 for details. Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Mac: Do not lookup or download file sizes when updating placeholders,0.6497899,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Mac ProjFS kext: Blocks renaming files in offline roots at the hydration stage,0.4888597,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,This causes the offline root check to block the file renaming operation at the hydration stage for empty files. The unit test is updated to check both the empty and hydrated scenarios.,0
Mac ProjFS kext: Unit test for rename blocking on offline roots,0.519119,1697: Fix functional tests to skip around ProjFS issue,"This adds a unit test for disallowing file renames in offline roots on Mojave or newer, while also testing that on High Sierra, the rename is not blocked.",0
Mac ProjFS Kext: Disallows file/directory renames in offline roots,0.46797317,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,Renaming a file or directory in an offline virtualisation root should not be permitted. This change implements that functionality on OS versions which enable us to distinguish between KAUTH_VNODE_DELETE operations that are caused by a rename operation versus not. Older OSes necessarily must allow any KAUTH_VNODE_DELETE operation.,0
Mac ProjFS Kext: Denies write access to placeholder files in offline root,0.44524142,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"Placeholder (non-full) files, although hydrated, should not be modified while the provider is offline, as the provider would miss the PreConvertToFull/FileModified events. This change enforces this and updates the tests to reflect this new expected behaviour.",0
Mac ProjFS kext: Denies write access to empty files in offline root,0.4246984,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,Writes of any kind to empty files in an offline root should be denied to prevent data loss when the provider comes back online. File deletions meanwhile must be allowed so that the user may recursively delete the entire repository even if it is not mounted. A test has been added to verify that write access to empty files is indeed denied.,0
Mac ProjFS kext: Denies access when provider does not respond,0.48770487,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"If for some reason the provider does not respond to a kernel request originating from an authorisation check callback, we now deny that authorisation.",0
Register/Unregister for offline I/O in functional tests,0.40591705,1697: Fix functional tests to skip around ProjFS issue,,0
Mac ProjFS kext: Preparation for denying access to offline roots.,0.4487999,- Better errors around ProjFS installation issues.,"This change rearranges the TryGetVirtualizationRoot() and HandleVnodeOperation() logic to include decision points to deny or allow certain file operations if the root's provider is offline, to protect the integrity of the repository. All the new logic is added, but operations are not yet denied. Some new tests for HandleVnodeOperation are also added to cover the new code paths.",0
Mac ProjFS: User-space support for offline I/O process registration.,0.5075047,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git",,0
Mac ProjFS kext: Adds system for registering processes for offline root I/O,0.47340354,- Better errors around ProjFS installation issues.,"This change is in preparation for enabling I/O protection for offline virtualization roots.  Processes which must access the contents of offline roots, such as VFSForGit's own, may register with the kext to be granted permission by opening a new type of user client connection to the kext's service. There is no restriction on this mechanism, it simply prevents accidental untracked changes. There are new unit tests covering the new functionality.",0
Mac ProjFS Kext: Minor macro tweak,0.44702333,1697: Fix functional tests to skip around ProjFS issue,This protects the vnodeType parameter of the KextLog_VnodeOp() macro from bugs due to operator precedence in expanded expressions.,0
MountTests fixes,0.6517906,- Multiple mount process reliability bugs have been squashed.,,0
use RepoBackingRoot as needed in functional tests,0.56616235,1697: Fix functional tests to skip around ProjFS issue,,0
use WorkingDirectoryBackingRoot in RepairJobs,0.3212275,- Fix backoff on cache server size endpoint 404.,"Repair jobs run while the GVFS enlistment is not mounted, which on Linux requires us to use the backing root in order to access the .git contents.",0
Merge pull request #1330 Add sparse verb for allowing projection of only specific folders,0.5502664,1664: Update USN journal entries for projected folders,Add sparse verb for allowing projection of only specific folders,0
Cleanup Sparse code from PR feedback,0.34350574,"- ""Sparse"" push algorithm should improve performance of pushes where only a small cone of a repository is modified.",,0
Use IsIncluded only on folder entries (#1345),0.3656388,1658: ProjFSFilter: Be more robust to missing PowerShell,  Use IsIncluded only on folder entries   Add more tests for SortedFolderEntries   Add comments for better understanding of the code   Remove call to GetFolderSparseState in UpdateOrDeleteFilePlaceholder ,0
Add unit tests for SparseTable and pull out some common code to base class (#1379),0.36146128,1697: Fix functional tests to skip around ProjFS issue,,0
More cleanup sparse (#1368),0.37598395,1689: Make delete docs more verbose,  Normalize paths that are saved in the sparse table   Add comment for how the IsRecursive for a sparse folder is set   Add verification for mockCommand3 in GVFSDatabaseTests   Rename sparse test   Add some validation to sparse folder test   Rename method that validate folders to ValidateFoldersInSparseList   Add to and update the sparse tests   Add tests for various paths for the sparse verb and trim spaces ,0
Rename include to sparse throughout the code to more closely match git and it's sparse (#1348),0.5716121,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",,0
Some suggested cleanup for included folders (#1346),0.4814971,Large improvements to git checkout performance when there are many folder placeholders.,"  Add unit tests, comments, and renamed variables to make code more understandable   Update include verb to give more information to the user   Change OnFolderCreated to have an out parameter instead of return value   Add comment for when there is an EIOError and why OnFileConvertedToFull is called   Log warning when TryAddIncludedFolder gets an exception from the database   Remove isDirectory parameter from MarkDirectoryAsPlaceholder since it is not used   Rename IncludedFoldersList to GetIncludedFolders   Revert changes to the GitIndexProjection constructor   Add test for mac creating a folder and file that are excluded ",0
Extend GitRepoTests to allow include mode (#1331),0.47448248,Includes Git v2.27.0," Extend GitRepoTests to allow include mode  The GitRepoTests can be initialized with a ValidateWorkingTree mode that is currently a boolean. If enabled, we will add extra checks to make sure the working tree of our virtual enlistment matches the enlistment from a vanilla Git repo. To extend this to the ""include"" mode, we need to first modify this boolean into an enum and add it as an extra option. Second, we need to be very careful about what we are comparing. We will no longer virtualize outside of the included folders. Be careful to include files in the root directory. The functional tests can then be run with ""--partial-mode"" to exercise only this option, which will isolate the test failures to this setting AND keep the test suite from getting too slow. Currently, the partial mode space is probably wider than necessary and can be reduced in later iterations. This does provide some coverage. Signed-off-by: Derrick Stolee dstolee@microsoft.com   Use enum for passing into all tests instead of an int   Clean up functional tests file system should extensions   Rename argument to --include-mode to match the feature   Add included folders below top level ",0
Default include verb to show list of folders when no arguments are passed,0.35836667,Adds additional logging for folder and file placeholder creation.,,0
Add different method for creating a folder for windows and mac,0.3721115,Adds additional logging for folder and file placeholder creation.,,0
Check return code when trying to add new folder to include,0.4507298,- Gracefully handle a missing shared object cache pack directory.,,0
Add comments for more information,0.38086897,New features:,,0
Fix issues when a file is read or modified before changing included folders,0.43757716,- Gracefully handle a missing shared object cache pack directory.,,0
Adding more functional tests for included folders,0.44966805,1697: Fix functional tests to skip around ProjFS issue,,0
Handle folder created adding to included folder for Mac,0.41769782,Adds additional logging for folder and file placeholder creation.,,0
Add to included when folder created inline instead of on BG thread,0.42884088,Adds additional logging for folder and file placeholder creation.,,0
Add and clean up functional tests for included folders,0.48060668,1697: Fix functional tests to skip around ProjFS issue,,0
Fix ReExpanding folders when included folders are being used,0.3756052,- Gracefully handle a missing shared object cache pack directory.,,0
Use enum for projection state for paths so it is more explicit in checks,0.32831132,1685: minor path comparison fixup in ProductUpgrader,,0
Fix unit tests using include folders,0.38623542,- Gracefully handle a missing shared object cache pack directory.,,0
Add some parenthesis to make code more readable,0.20927745,General improvements:,,0
Update IncludeVerb HelpText and output for --list when there are none,0.31352797,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Add path to included folders when folder created that is in the index but not in the included list,0.32775587,1664: Update USN journal entries for projected folders,,0
Force untracked files to be shown when running status for Dehydrate and Include verbs,0.40345728,1674: Config: disable status.submoduleSummary,,0
Update projection to use the included folders,0.64479434,1664: Update USN journal entries for projected folders,,0
Add Include Verb,0.2618835,Git: Includes incremental commit graph,,0
Add include folder interface to the FileSystemCallbacks constructor,0.4439468,- Gracefully handle a missing shared object cache pack directory.,,0
Add new interface and class for storing the include folders,0.39945802,- Gracefully handle a missing shared object cache pack directory.,,0
Merge pull request #1363: Handle corrupt objects on Mac,0.4762149,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,Handle corrupt objects on Mac,0
Updated functional tests,0.59743786,1697: Fix functional tests to skip around ProjFS issue,,0
Implemented SubDirectoryInfo object,0.4116572,Adds additional logging for folder and file placeholder creation.,"Some organizational improvements to the code, since the SubDirectoryInfo object has named fields. Sub directory list now shows the fraction of files which are hydrated, sorting remains by number of hydrated files Added unit tests for the newly available information, the total number of files per sub directory.",0
Added SubDirectoryInfo object,0.3771034,Adds additional logging for folder and file placeholder creation.,,0
Merge pull request #1351 No longer set PATH for git process and remove use of gvfs hooks root,0.6456015,1676: Update Git to v2.27.0.vfs.1.0,No longer set PATH for git process and remove use of gvfs hooks root,0
Merge pull request #1392 Mac: Add version information to kext and PrjFS logging daemon,0.44891304,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Mac: Add version information to kext and PrjFS logging daemon,0
Remove unused code,0.376976,1703: Delete all macOS projects,,0
"GeneratePrjFSXCConfig.sh should exit early if it fails to determine BUNDLE_VERSION.  Additionally, make BUNDLE_VERSION Major.Minor",0.4023155,1685: minor path comparison fixup in ProductUpgrader,,0
Merge pull request #1308: Updating README.md,0.69878554,1750: Update Readme.md,"Now, that local cache path defaults to $HOME/.gvfsCache, there's no need to specify --local-cache-path explicitly.",0
Merge pull request #1384: [Mac] Don't allow cloning or mounting on case sensitive volumes,0.43337125,1736: Update Git to v2.31.1.vfs.0.3,[Mac] Don't allow cloning or mounting on case sensitive volumes,0
Handle corrupt objects on Mac,0.4654987,"- GVFS can now recover from corrupted git object files (e.g. caused by a torn write), by re-downloading them whenever git asks for an object. The assumption is that git would not be asking GVFS for it if the object was valid.",,0
Merge pull request #1399 Add SetupFixture for teardown to get the test results at the end,0.4169595,Pull Requests,Add SetupFixture for teardown to get the test results at the end,0
Merge pull request #1398 Mac: Don't download file sizes as part of OnEnumerateDirectory,0.43819794,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",Mac: Don't download file sizes as part of OnEnumerateDirectory,0
Merge pull request #1394 Increasing precision of timestamps being logged,0.53691745,- Log files now include UTC offset.,Increasing precision of timestamps being logged,0
Add SetupFixture for teardown to get the test results at the end,0.31290945,1697: Fix functional tests to skip around ProjFS issue,Currently the output for running functional tests put the service logs and the run times for each of the tests at the end after the actual test summary results. This makes finding the actual results of failures harder to find since you have to scroll up an indeterminate amount to get to the results. This change will move the test run summary to the bottom of the output. So you can go straight to the bottom to see any failures.,0
Reject case senstive volumes on Mac,0.26441032,- Multiple mount process reliability bugs have been squashed.,,0
Merge pull request #1388: Proper error message for 'git gui' on Mac,0.5050757,1694: Update Git to v2.29.0.,Proper error message for 'git gui' on Mac,0
Changes for PR feedback:,0.46622932,General improvements:,- Add comments where needed - Stop creating BlobSizeConnections in OnEnumerateDirectory - Remove populateSizes parameter from GetProjectedItems,0
Return correct errror message for 'git gui' on Mac,0.5288126,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
No longer set PATH for git process and remove use of gvfs hooks root,0.58021796,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,"The git process was launched using a PATH environment variable with the gvfs hooks path to make sure that when a path in the repo was included in the user's PATH environment variable that it would only search outside the repo.  This was when the code was using git cat-file to hydrate files and searching for gvfs hooks would cause it to hydrate files which would cause it to search for hooks and it would be in a loop. This is no longer the case, the code is using libgit2 and the hooks are not called.  Since the gvfs hooks root was only used for setting the PATH for the git process, all references to it can be removed.",0
Mac: Don't download file sizes as part of OnEnumerateDirectory,0.34157926,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",,0
Merge pull request #1393: Setup.iss: use {sys} variable when calling sc.exe,0.41057038,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,The InnoSetup constants documentation lists {sys} as the way to expand to what is typically C:\Windows\System32. This should reduce issues with PATH modifications or system drive swaps. I manually tested upgrade to see that these paths were expanded correctly.,0
Increasing precision of timestamps being logged,0.55537176,- Log files now include UTC offset.,,0
Setup.iss: use {sys} variable when calling sc.exe,0.30712515,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Add PrjFSConfig.xcconfig to input path of GeneratePrjFSVersionFiles,0.48444068,- Better errors around ProjFS installation issues.,,0
Mac: Add version information to kext and PrjFS logging daemon,0.39662868,1664: Update USN journal entries for projected folders,,0
Merge pull request #1303: GVFS Health Feature,0.54400516,"- Lots of bug fixes to make GVFS's file writes (e.g. to its database files) more reliable, even in the face of power loss",Initial cut of Health Feature,0
Quote paths when calling the command line,0.23642075,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Merge pull request #1382: Update Git to include more tracing updates,0.5424937,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Includes updates from microsoft/git#164.,0
Merge pull request #1381: Upgrade: Fix test flakiness around upgrade reminders,0.4868383,"Other bug fixes, engineering improvements, and test reliability fixes.","Should fix #852. The fix is to use an environment variable to always show the upgrade message, if present. While looking at the post-command hook code, I discovered some simple cleanups that are isolated to different commits:  Removed unreachable code. Changed a message to refer to gvfs status instead of git status.",0
Merge pull request #1380: GitProcess: Catch InvalidOperationException when setting priority class,0.50224364,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"As specified in the documentation [1], the PriorityClass setter will throw an InvalidOperationException if the process ID is not available. This could happen due to a race condition where the process completes before we can set its priority. The other exceptions it can throw are either platform-specific or signal a bug, so do not be overly aggressive in the 'catch'. [1] https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.process.priorityclass?view=netframework-4.8",0
Update Git to include more tracing updates,0.5600141,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Includes updates from microsoft/git#164. Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Upgrade: make reminder deterministic for tests,0.34121364,"Other bug fixes, engineering improvements, and test reliability fixes.","Use a new environment variable, GVFS_UPGRADE_DETERMINISTIC, to always print the ""upgrade available"" message, if it is present. This should fix test flakiness and issue #852. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Hooks: Fix message around 'gvfs status',0.60326344,* Improve error message from gvfs upgrade if the Git installation could not be found.,"If we fail to communicate with the mount process, then 'gvfs status' gives us the information we want, not 'git status'. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Hooks: Remove unused code,0.3321823,1746: Delete custom upgrader,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
GitProcess: Catch InvalidOperationException when setting priority class,0.3902971,- git status now supports an option to avoid doing its ahead/behind calculations. This allows the user to decide if they want to skip that overhead if all they care about is the status of the working directory.,"As specified in the documentation [1], the PriorityClass setter will throw an InvalidOperationException if the process ID is not available. This could happen due to a race condition where the process completes before we can set its priority. The other exceptions it can throw are either platform-specific or signal a bug, so do not be overly aggressive in the 'catch'. [1] https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.process.priorityclass?view=netframework-4.8 Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Merge pull request #1318 from jamill/mac_installer_pkg,0.40113026,- The installer now unmounts and remounts existing repos automatically,Mac build scripts: consume git installer pkg directly,0
Merge pull request #1375 Remove all TODO(POSIX) and TODO(Mac) comments.,0.46245638,1744: Overhaul build and project systems and drop Mac/POSIX code,Remove all TODO(POSIX) and TODO(Mac) comments.,0
GetGitVersionNumber: handle more git version strings,0.46478355,Includes Git LTS security release,"The script would fail to properly parse Git Version strings that included multiple hyphens, which broke Git Version strings that were generated by ""draft"" pipelines, which had the form: 1.2.3-DRAFT-pr as it would not include any text after the second hyphen.",0
CreateMacInstaller: consume pkg installer directly,0.41136214,- The installer now unmounts and remounts existing repos automatically,"Previously, the GitForMac.GVFS.Installer NuGet package contained only the git for mac installer as a .dmg file. This .dmg package contained the Git for Mac installer .pkg. The VFS4G installer takes a .pkg installer as input to the combined VFS4G / Git for Mac installer. As the NuGet package only contained the .dmg, the script to build the VFS4G combined installer had to mount the .dmg and extract the .pkg file. The GitForMac.GVFS.Installer package has been updated to include both a .dmg and .pkg file, so the installer script can now consume the installer .pkg directory, instead of mounting and extracting it from the .dmg file.",0
Merge pull request #1340 PrjFSKextLogDaemon: Don't log every time a dropped kext message is detected,0.42664105,- Added better diagnostic info in the GVFS logs when there are network errors,PrjFSKextLogDaemon: Don't log every time a dropped kext message is detected,0
Update issue number for TryGetGVFSHooksPathAndVersion,0.60015374,1676: Update Git to v2.27.0.vfs.1.0,,0
Update comment for CreateGitScript,0.2944359,1726: Config: commitGraph.generationVersion=1,,0
Rename TryFetchAndLogKextHealthData and StartKextHealthDataPolling to more appropriate names,0.27002648,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Remove all TODO(POSIX) and TODO(Mac) comments.,0.35420206,1689: Make delete docs more verbose,These comments were replaced with specific issue numbers or removed if no longer relevant.,0
Added experimental tag and status message,0.32091513,Release Notes,"Now upon starting to run the verb tells the user that it's collecting statistics for the repository, and the help message now displays a tag explaining that the feature is still experimental.",0
Merge pull request #1342: Update Git to include tracing updates,0.5555028,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Includes changes from:  microsoft/git#158 (experimental tracing: trace threading and cache-tree extension) microsoft/git#159 (experimental tracing: prime_cache_tree()) microsoft/git#160 (experimental tracing: checkout and reset perf) microsoft/git#162 (support building with GCC v9.x),0
Update Git to include tracing updates,0.5630289,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Includes changes from:  microsoft/git#158 microsoft/git#159 microsoft/git#160 microsoft/git#162  Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Use static runtime for hooks,0.23749475,1740: Skip launching UI if running unattended,,0
PrjFSKextLogDaemon: Don't log every time a dropped kext message is detected,0.3811797,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Small UX changes and GitProcess edit,0.48500305,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Remove some unused code,0.3456608,1746: Delete custom upgrader,,0
Set of improvements to health verb,0.48099613,General improvements:,,0
Remove the design docment from the branch,0.3720975,1746: Delete custom upgrader,,0
Actionable notifications,0.47123438,Initial Mac platform native notifications,"Native notifications can now have actions associated with them. When user clicks on the action button on a notification bubble, VFSForGit will run a Command in response. Example: Mount_Failure notification can specifiy the gvfs command ""gvfs mount "" as its associated action. Actionable notifications also have an actionTitle, which get displayed as text in a Button control on the Notification bubble. Other details - Commands are run using Terminal app. - Terminal is launched using Applescript. - Only UpgradeAvailable and Mount_Failure notifications are actionable now. - VFSForGitNotification class now confirms to NSCoding protocol.   VFSForGitNotification object holds details of the notification   including associated commands. It is archived and sent to the   OS notification center. When user clicks the notification   bubble, the archived VFSForGitNotification is retrieved from   the native notification, its associated Command is read and   executed.",0
Bugfix for non skip worktree files,0.40146622,1685: minor path comparison fixup in ProductUpgrader,The files without the skip worktree bit set were not being correctly unioned into the EnlistmentPathData object. Now those files will be included in the count of files which are managed by git (slow files) Small fix for formatting breaking with commas in the list of directories,0
Merge pull request #1328 from jeschu1/teststouserdir,0.44143915,Pull Requests,Move Enlistment Directory For Functional tests to ~/GVFS.FT,0
Merge pull request #1320 Making max pipe length platform-dependant,0.40744197,1647: Fix commit-graph expiration,Making max pipe length platform-dependant,0
Merge pull request #1317: Setup.iss: Update GitHub URL,0.4882863,- Updated Git for a security issue.,,0
Adding max pipe length explanations to POSIX and Windows platforms as well,0.28188157,Adds additional logging for folder and file placeholder creation.,,0
Merge pull request #1322 from jamill/generate_mac_upgrader_nuspec,0.46058208,1750: Update Readme.md,Script to generate GVFS.Installer.Mac nuspec,0
More Enlistment Directory For Functional tests to ~/GVFS.FT,0.555274,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,,0
MacInstaller: Include script to generate GVFS.Installer.Mac nuspec,0.5409761,GVFS is now available as a binary installer,,0
Heath rating now based on total hydrated files (#1325),0.29428977,Perf improvements:,"Instead of displaying the hydration percent for directories, the total number of hydrated files is now displayed, and that is how the list of directories is sorted. Unit and functional tests have been updated accordingly.",0
Merge pull request #1319 from Don't change version number for dev builds,0.535218,Pull Requests,,0
Dont change version no for dev builds,0.41824472,This release is identical to the previous. It was published to test upgrade.,Apple's agvtool changes version number contained in Info.plist files during build. Info.plist is part of VFSForGit sources and the version changes created by the agvtool end up creating noise in git command outputs. This PR updates the build script to not trigger version update when running dev builds.,0
Merge pull request #1312: Use the new signing certificate.,0.53645146,Update NuGet upgrader with new Microsoft package signing certificate,,0
Comment upkeep (#1321),0.38641572,General Improvements,Added and updated documentation in HealthVerb and HealthCalculator,0
Adding manpage link to comment,0.25625134,Release Notes,,0
Making max pipe length platform-dependant,0.16920848,"* The client will now also query the /gvfs/sizes endpoint on a cache server that implements that endpoint, reducing the latency on those requests even further",,0
Health functional tests (#1313),0.37731624,1697: Fix functional tests to skip around ProjFS issue,"Functional tests are now implemented with EnlistmentPerFixture as their methodology. Tests cloning, placeholders, modified paths, the conversion from placeholders to modified paths, and filtering by directory. Only focuses on basic functionality, more tests to come when the final output design is decided on. Additional bugfix for non skip-worktree files in the health verb.",0
Update GVFS/GVFS.Installer.Windows/Setup.iss,0.663132,Instructions for installing and using GVFS are available at https://github.com/Microsoft/GVFS,Co-Authored-By: John Briggs jobriggs@microsoft.com,0
Setup.iss: Update GitHub URL,0.43626934,"A new config setting allows updating USN journals, which is needed when using BuildXL with VFS for Git.","I don't know where this actually shows up as part of the generated installer, but it can't hurt to update this correctly.",0
Merge pull request #1250: Switch on UTF-8 Tests,0.43833268,Pull Requests,"When we were standing up the Functional Tests on macOS, we saw failures in tests that involved UTF-8 strings on the Azure Pipelines hosted macOS agents which we could never repro locally. Now that they've moved to a newer image, these tests now pass on both our local dev machines, our dedicated functional test machines and the Azure Pipelines hosted machines. Let's enable the tests.",0
Merge pull request #1285 from Installer reliability,0.52728415,Pull Requests,Installer reliability,0
Use the new signing certificate.,0.5808432,Update NuGet upgrader with new Microsoft package signing certificate,,0
Merge pull request #1283: Incremental commit graph,0.66350234,Git: Includes incremental commit graph,"The incremental commit-graph format is designed to speed up commit-graph writes, and especially to allow fast verification of the new data. At least, most of the time. Uses the new feature in microsoft/git#156. By only writing the new data to a small ""tip"" commit-graph file, we can write much less data and only verify the new tip file. Current settings include --size-multiple=4: This guarantees each level of the chain is half the size of the level below. This means the chain length will be limited by log_4(N) where N is the number of commits. This means ~6 levels is the maximum theoretical chain length with 4,000,000 commits. We are not currently using the --max-commits setting. With these settings, the git commit-graph verify command will be much faster on most new tip files. For example, a tip graph with 3,300 commits uses 183 KB of data and took 0.7 seconds to verify.",0
DiagnoseVerb: Copy commit-graph files from info dir,0.52789956,1726: Config: commitGraph.generationVersion=1,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
PostFetchStep: log commit-graph chain,0.5863099,- We have enabled the generation of the serialized commit graph in the post-fetch thread. This should provide across-the-board perf wins in any command that walks many commits.,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Updating README.md,0.8049646,1750: Update Readme.md,"Now, that local cache path defaults to $HOME/.gvfsCache, there's no need to specify --local-cache-path explicitly.",1
Write incremental commit-graph files,0.6647599,Git: Includes incremental commit graph,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Merge pull request #1300: Update Git to include status deserialize fix,0.5605678,1663: Update Git to v2.27.0,"Includes status deserialziation bug fix from microsoft/git#157. Further, update the dehydrate verb to specifically use -uall when checking for local changes.",0
Reorganize health assets (#1307),0.2644198,- Improvements to compact and maintain the ModifiedPaths.dat database to help mitigate the problem of command perf degrading over time in an enlistment.,Renamed the following classes:   GVFSEnlistmentHealthCalculator -> EnlistmentHealthCalculator   GVFSEnlistmentPathData -> EnlistmentPathData   GVFSEnlistmentHealthData -> EnlistmentHealthData Extracted EnlistmentPathData and EnlistmentHealthData to be standalone classes instead of inner classes of EnlistmentHealthCalculator. Created a GVFS.Common.HealthCalculator to house the 3 health classes,0
Unit Test Refactoring (#1302),0.39811268,1697: Fix functional tests to skip around ProjFS issue,A test case was renamed to better specify the case being tested. Added a few more checks in test cases to test small missed behavior Used the test data to determine expected results instead of hardcoded values to increase readability Added comments in several test cases to increase the readability of checks Refactored the test fixture to use the builder design pattern to create GVFSEnlistmentPathData objects in a much more expressive way Slight change to GVFSEnlistmentHealthCalculator to allow arrays to be passed instead of only List objects,0
Merge pull request #1301 from github/simplify-case-match-tests,0.41336834,Pull Requests,"simplify Git functional tests of case-sensitive file paths The FileShouldHaveCaseMatchingName() and related FolderShouldHaveCaseMatchingName() methods used in the GitCommands functional tests currently take two arguments, first a file path, and then a file name which must match case-sensitively against the last component of the path. On Linux, the use of at least one of these matching tests fails due to an incorrect usage: the caller, CaseOnlyRenameFileAndChangeBranches(), is passing a file path which differs in case from the case-sensitive name. This happens to work fine on Windows and Mac because the intended file is found regardless of case, but on Linux, it fails as the intended file can't be located. In order to clarify the function of these matching test methods, we change them to take a single, case-sensitive file path, and then check that the file or folder found at that path has the matching case in its parent directory's listing. This is effectively a no-op on Linux, but should retain the same functionality as before on other platforms.",0
simplify path case-matching Git functional tests,0.5280949,Large improvements to git checkout performance when there are many folder placeholders.,"The FileShouldHaveCaseMatchingName() and related FolderShouldHaveCaseMatchingName() methods used in the GitCommands functional tests currently take two arguments, first a file path, and then a file name which must match case-sensitively against the last component of the path. On Linux, the use of at least one of these matching tests fails due to an incorrect usage: the caller, CaseOnlyRenameFileAndChangeBranches(), is passing a file path which differs in case from the case-sensitive name. This happens to work fine on Windows and Mac because the intended file is found regardless of case, but on Linux, it fails as the intended file can't be located. In order to clarify the function of these matching test methods, we change them to take a single, case-sensitive file path, and then check that the file found at that path has the matching case in its parent directory's listing. This is effectively a no-op on Linux, but should retain the same functionality as before on other platforms.",0
Force untracked files to be shown when running status for Dehydrate verb,0.36301154,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",,0
GVFS Health Verb Initial Merge (#1249),0.5252558,- Added better diagnostic info in the GVFS logs when there are network errors,"The health verb adds analytic functionality in the form of an outward facing tool which can equip consumers to better diagnose the performance issues they see in their VFS4G repositories. It has two command line arguments, -n which specifies the number of child directories to be displayed, and -d which specifies a target directory to run the health verb in. The default for -n is 5, and then default for -d is the current working directory. It also inherits a third command line argument from GVFSVerb.ForExistingEnlistment which is an optional path to the enlistment to run the command against in the case of being outside of it. The HealthVerb is what is run from the command line, and interacts with the enlistment to get the path data needed to compute the health of the enlistment. It uses the SQLite database to get placeholder data, the named pipe to get modified paths data, and the git index to get overall enlistment data. It packages this information into a GVFSEnlistmentPathData object which is passed to the GVFSEnlistmentHealthCalculator. The GVFSEnlistmentHealthCalculator takes in a GVFSEnlistmentPathData object and then analyzes it by building a local cone of the git tree and using that cone to compute health data (hydration) for the current directory as well as minimal information about the health of its child directories (to help when searching for the root cause of a problem). It then returns a GVFSEnlistmentHealthData object containing all of the corresponding data. The GVFSEnlistmentHealthCalculator is unit tested by the GVFSEnlistmentHealthTests unit test file. Squash merged from https://github.com/microsoft/VFSForGit/pull/1249",0
Update Git to include status deserialization fix,0.6162992,This includes the Git 2.30.2 security fix (CVE-2021-21300).,Includes status deserialziation bug fix from microsoft/git#157.,0
Merge pull request #1284 from jamill/enable_mac_upgrade,0.47364086,Pull Requests,Enable mac upgrade MVP,0
Merge pull request #1287 from github/diff-tree-result-relative,0.52310145,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",use repository relative paths in DiffTreeResult.TargetPath,0
Merge pull request #1297 from jamill/upgrade_fix,0.47981396,1663: Update Git to v2.27.0,Upgrader: NuGet Upgrader should use GitHub endpoint for notifications,0
ProjFSKext: indicate support for upgrade,0.56175464,- Better errors around ProjFS installation issues.,,0
MacPlatform: indicate support for upgrade,0.5382382,Initial Mac upgrade functionality,,0
UpgradeVerb: run upgrade tool in same window,0.5335468,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
Upgrader: NuGet Upgrader should use GitHub endpoint for notifications,0.66143596,- Upgrade supports NuGet feeds as a distribution source.,"Fixes a bug where NuGet Upgrader no longer checks the GitHub endpoint to determine whether to show a notification that an upgrade is available. This did not affect the actual upgrade command, just whether to show a notification. (cherry picked from commit 9a6710335fd20acbb200ad0fbc3b6f8180925408)",0
use repository relative paths in DiffTreeResult.TargetPath,0.3929655,1685: minor path comparison fixup in ProductUpgrader,"We construct absolute paths at point of use -- some cases use the Enlistment's WorkingDirectoryRoot, and others use the WorkingDirectoryBackingRoot.  (These are identical on Windows and Mac, but different on Linux.)",0
Merge pull request #1291 from github/fastfetch-checkout-threads,0.4367333,A case where FastFetch would not download a small number of files has been fixed.,"use correct checkout thread maximum in FastFetch The --checkout-thread-count parameter to FastFetch, when set to 1, previously caused the program to fail because no executions of HandleAll*Operations() methods occurred. This was due to the Parallel.For() method being called with equal fromInclusive and toExclusive parameters, both set to 1, so the number of executions was zero. We adjust the fromInclusive parameter to zero so that the number of parallel executions will be this.maxParallel (i.e., toExclusive-fromInclusive == this.maxParallel-0), which is the value from CheckoutThreadCount, as set by the --checkout-thread-count command line option. Note that this failure condition could also be triggered when run in a single-core environment (e.g., a small VM), in which case CheckoutThreadCount, being constrained to a maximum of Environment.ProcessorCount, is always 1.",0
use correct checkout thread maximum in FastFetch,0.54320395,A case where FastFetch would not download a small number of files has been fixed.,"The --checkout-thread-count parameter to FastFetch, when set to 1, previously caused the program to fail because no executions of HandleAll*Operations() methods occurred. This was due to the Parallel.For() method being called with equal fromInclusive and toExclusive parameters, both set to 1, so the number of executions was zero. We adjust the fromInclusive parameter to zero so that the number of parallel executions will be this.maxParallel (i.e., toExclusive-fromInclusive = this.maxParallel-0), which is the value from CheckoutThreadCount, as set by the --checkout-thread-count command line option. Note that this failure condition could also be triggered when run in a single-core environment (e.g., a small VM), in which case CheckoutThreadCount, being constrained to a maximum of Environment.ProcessorCount, is always 1.",0
Merge pull request #1281: PrefetchStep: don't send post-fetch request if no new packs,0.5363504,- We have moved MIDX computation to a post-fetch thread. This should save blocking time per prefetch that downloads a packfile from the cache server.,"Every time the post-fetch step runs, we write a new multi-pack-index. This is important to catch any leftover packs that were added by gvfs prefetch --files or by the loose objects step. However, for a normal git fetch that calls gvfs prefetch --commits, there are likely no new packs. This previously triggered a post-fetch step anyway, and now it will not make that request if there are no new packs. This can save about one minute of CPU time per ""trivial"" prefetch.",0
PrefetchStep: don't send post-fetch request if no new packs,0.5895542,1745: do not exit early if no blobs found for a period when prefetching,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Installer reliability,0.5098318,Performance and Reliability," No change in behavior for fresh install. Upgrade install - avoid un-necessary unloading of launchd agent   plist files in preinstall script only to reload them later in   postinstall. Use launchctl kickstart -k instead in postinstall.   It restarts the agent without needing to unload/reload its plist   file. Uninstaller - removed usage of ""-w"" option from launchctl ""unload""   command.  ""-w"" disables the service after unload which is   undesirable. Uninstaller - fixed a logic error, where the agent plists were   getting un-installed only if they were un-loaded as well.",0
Merge pull request #1282 Remove requirement to run --no-renames,0.47218758,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!",Remove requirement to run --no-renames,0
Merge pull request #1224 from jamill/upgrader_tasks/directory_structure,0.49414474,1676: Update Git to v2.27.0.vfs.1.0,ProductUpgrader: platform specific upgrade directories,0
Merge pull request #1202 from Platform native notifications PR_3,0.51078343,Initial Mac platform native notifications,,0
Remove requirement to run --no-renames,0.31608197,1652: RepoRegistry: ignore non-existent repos,,0
ProductUpgrader: platform specific upgrade directories,0.6091005,1685: minor path comparison fixup in ProductUpgrader,Different platform have different structures for where the upgrade application and logs need to go. This change introduces the architecture for making this platform specific. Description of different components involved in upgrade and how they interact with different platforms.  Component                | description -----------------------  | ----------- Upgrader Application     | Temporary copy of upgrader application upgrade main application gvfs.config              | config file for upgrade related settings Upgrade Package Download | Location to download upgrade package Upgrader Package Unpack  | Location to unpack the downloaded update package Upgrader Logs            | Directory to write upgrade logs to Upgrade Available File   | File indicating whether an upgrade is available Component                | data scope                      | Windows                                                     | Mac ------------------------ | ------------------------------- | ----------------------------------------------------------- | ------------------------------------------------------------------------ Upgrader Application     | Protected                       | ProgramData\GVFS\GVFS.Upgrade\Tools                         | /usr/local/vfsforgit_upgrader/Tools gvfs.config              | Protected                       | ProgramData\GVFS\gvfs.config                                | /usr/local/vfsforgit/gvfs.config Upgrade Package Download | Protected                       | ProgramData\GVFS\GVFS.Upgrade\Download                      | /usr/local/vfsforgit_upgrader/Download Upgrader Package Unpack  | Protected                       | ProgramData\GVFS\GVFS.Upgrade\Download\InstallerTemp        | /usr/local/vfsforgit_upgrader/Download/InstallerTemp Upgrader Logs            | Writable by user account        | ProgramData\GVFS\GVFS.Upgrade\UpgraderLogs                  | ~/Library/Application Support/GVFS/GVFS.Upgrade/UpgraderLogs Upgrade Available File   | Written by GVFS.Service process | ProgramData\GVFS\GVFS.Upgrade\Tools\HighestAvailableVersion | ~/Library/Application Support/GVFS/GVFS.Upgrade/HighestAvailableVersion,0
Enable display of Automount notifications,0.35126305,Initial Mac platform native notifications,"This is the third incremental PR to enable platform native notifications on the Mac. In this PR, GVFS.Service sends auto-mount notifications to VFS For Git.app for display to user. Service displays notification for auto-mount failures only - when it fails to auto-mount a repository that has been registered for auto-mount. Details - New VFSForGitNotification class. It supports 3 different notifications   - AutomountStart, MountSuccess, MountFailure. It will not display any   other notification. - VFSForGitNotification defines the title & message body for each of the   supported notification. It is not possible for GVFS.Service or another   client to display random text. - MessageListener class creates a socket and waits for notification   requests from client. - MessageParser class to parse the incoming JSON formatted message   text. - New UT for VFSForGitNotification & MessageParser classes. - GVFS.Service does not wait for a reply from VFS For Git.app for the   notification requests that it sends. - VFS For Git.app get automatically launched after installation. - VFS For Git.app has the same app version as gvfs version. - Updated MacServiceTests to not use INotificationHandler to verify   Automount start. Now Service posts notification only on auto-mount   failures. More Info - https://github.com/microsoft/VFSForGit/pull/1202",0
Platform specific gvfs.config location,0.57083964,Instructions for installing and using GVFS are available at https://github.com/Microsoft/GVFS,"The config file location currently exists in the same directory as the GVFS service data directory. On Mac, the GVFS Service directory is per user, and not per machine. Even if the service is per user on Mac, we still would like the config to be per machine. This change enables the GVFS config file to exist at a location independent of the GVFS Service data directory. On Windows, the location will not change, but on macOS, it will now exist in the GVFS binary location.",0
Merge pull request #1248: LooseObjectsStep: report full object cache size,0.46294224,"A background task will now compress and deduplicate the pack-file data in the shared object cache, resulting in more sustainable disk usage","As the PackfileMaintenanceStep is now running in production, I noticed a user's repo was growing significantly between runs. It turns out this user had many loose objects and the packs created by the LooseObjectsStep were large. Add extra object size checks and pack-size checks to the LooseObjectsStep so we can report the total effect on the object cache's contents.",0
Merge pull request #1278: Fix performance regression in LibGit2RepoInvoker,0.5966643,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!","Today, we noticed a performance regression from 1.0.19074.2 to 1.0.19130.1 (M150). In that release, we changed the way we allocate and refresh LibGit2Repo objects. In order to allow packfile deletions, we need to drop the handles that LibGit2 keeps open during the duration of the LibGit2Repo. The change was to share one repo object and to dispose of it after 15 minutes of inactivity. However, that doesn't take into account the startup time required to initialize the data. This can be a lot worse if the user has thousands of pack-files. To fix this, change the model. With this change, the PackfileMaintenanceStep will request that the LibGit2Repos are closed before performing the expire command, and then will reinitialize the LibGit2 repo right after. This will keep the ""warmup"" time as part of the initial mount or as the background operation. If the read-object hook or a file hydration comes in while the expire command is running, a LibGit2 repo will be initialized and it may cause some .idx files to stick around until the next run. This was already the case, but then the warmup would happen during those operations. This will happen at most once a day.   How did you find this was the issue?   @jrbriggs gets all the credit for realizing that the performance difference between versions only happened in calls where one used the read-object hook. If the read-object hook wasn't called, then there was no difference in the performance numbers. But there was a significant slowdown if the read-object hook was called, and could even be several seconds for a single object. From that, I started spelunking the diff and looked specifically at what changed around the logic in InProcessMount for downloading an object. There were two candidates: i. The interaction with the Git credential manager had a lot of changes. I checked with @jamill about his expectations of performance numbers there, even if it is misbehaving. He and @jeschu1 thought there was no reason for more than 100ms of delay in any of that code, and other side-effects would be very visible if it required more server connections. This led me to focus hard on item (ii). ii. The LibGit2RepoInvoker was updated in this release to no longer create a large pool of repos at mount time and only dispose of them at process end. We had shipped this independently of the packfile maintenance for this very reason of being safe, but I had anticipated any problems would be in the multi-threaded access of a single libgit2 repo. The multi-threaded access has not been a problem, as far as I can tell.   How did you test the performance of this change?   To measure this, I made a change like in this commit to use a Stopwatch around the two operations. This would easily point to which of the two options above were likely the cause. After installing that version locally and running git grep foo to trigger loose object downloads, I saw the timing for the first read-object hook had 2.5 seconds in the TryGetIsBlob() method, and all subsequent calls were ~2 milliseconds. This was on my local repo where I had inflated the pack dir to ~800 packs. If a user has 7,000+ then libgit2 will take even longer to prep the packfile data structures. This performance testing also led me to double-check this PR and notice that the first run was still slow. The trick was to add the commit ""LibGit2RepoInvoker: Test a real SHA1 when initializing"" because using an empty SHA-1 seems to short-cut somewhere in the logic and not actually load the object store data in the LibGit2Repo. With that change, I see all of my TryGetIsBlob() calls taking 1-2 milliseconds again, even the first one after a PackfileMaintenanceStep. Resolves #1277",0
PrefetchTests: Unmount before deleting packs,0.4924726,1745: do not exit early if no blobs found for a period when prefetching,"If we do not unmount, then the packs do not get deleted and we skip writing the commit-graph due to no new packs, failing the test. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
PrefetchStep: Close libgit2 repo before deleting .idx files,0.43992943,1717 [HOTFIX] Update Git to remove ODB string check,"Also, unmount GVFS when running tests, as the mount process has libgit2 repos open. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
LibGit2RepoInvoker: Test a real SHA1 when initializing,0.31034705,- Consume new GCM to fix git credential erase behavior,"In order to force the LibGit2Repo to load the object store information upon initialization, it does not suffice to use the empty SHA, as that is short-cut somewhere and does not acheive the goals we want. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
LibGit2RepoInvoker: Remove unused Timer,0.362284,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
LibGit2RepoInvoker: cleanups from feedback,0.40834454,1652: RepoRegistry: ignore non-existent repos,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
LibGit2RepoInvoker: Run a simple query to preload data,0.32943767,- We have enabled the generation of the serialized commit graph in the post-fetch thread. This should provide across-the-board perf wins in any command that walks many commits.,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
LibGit2Repo: Do not dispose on a timer,0.3242345,- Consume new GCM to fix git credential erase behavior,"To fix a performance regression with the new LibGit2RepoInvoker, we should now always load the LibGit2Repo from the start, and keep it around until the PackfileMaintenanceStep runs. At that time, we can reload the repo. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Merge pull request #1193: Mac ProjFS: Only hydrate/expand when deleting due to rename,0.49647787,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,Mac ProjFS: Only hydrate/expand when deleting due to rename,0
Update FileMoved Test to use an unhydrated file,0.30249414,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Add PreDeleteFromRename Message Type,0.44838125,1689: Make delete docs more verbose,,0
Merge pull request #1230 from jamill/upgrader_tasks/installer_command,0.46208358,1746: Delete custom upgrader,Upgrader: add command install action,0
Merge pull request #1276 [master] POSIX: Switch to Process.Start for launching GVFS.Mount,0.6233541,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,[master] POSIX: Switch to Process.Start for launching GVFS.Mount,0
Update functional tests to check StartedByVerb,0.53362775,1697: Fix functional tests to skip around ProjFS issue,,0
Add additional comments,0.29275057,New Features,,0
POSIX: Switch to Process.Start for launching GVFS.Mount:,0.552558,Instructions for installing and using GVFS are available at https://github.com/Microsoft/GVFS, Launch GVFS.Mount with stdin/out/err redirected Close stdin/out/err in GVFS.Mount and redirect to /dev/null  With these changes the functional test hang reported in #1205 has not be reproducible,0
NuGetUpgrader: fix typo in private method name,0.5456112,1747: UpgradeVerb: write deprecation notice,replacementToken method should be PascalCase,0
NuGetUpgrader: tiny cleanup - remove an unnecesary assignment,0.56191,- Properly reacquire credentials during nuget upgrader,,0
Upgrader: add command install action,0.48632738,- Fixes a copy failure when copying the upgrade tool to its temporary location.,"When running install actions, we previously only supported starting an application or document contained in the installer package. You might want to run instead a command that is provided by the host operating system / environment. For example, on macOS you might want to run bash or the ""installer"" binary directly.",0
Merge pull request #1234 from jamill/upgrader_tasks/platform_tasks,0.47158134,Pull Requests,Includes the following changes to enable cross platform functionality required by the upgrade functionality: Platform specific blocking process lists Platform specific ability to locate programs Implement IsServiceInstalledAndRunning for Mac platform,0
Merge pull request #1263 from jeschu1/log_more,0.4704371,Pull Requests,Log Folder Placeholders Removed,0
Merge pull request #1259: Update Git to v2.22.0,0.73407286,1642: Update Git to v2.26.0,"Updates to v2.22.0.vfs.1 as discussed in  microsoft/git#140. Includes these changes in microsoft/git:  microsoft/git#133 microsoft/git#139 microsoft/git#141 microsoft/git#143  Also, the post-indexchanged hook was renamed to post-index-change as it was upstreamed.",1
Upgrader: blocking process set should be case insensitive,0.46103612,1685: minor path comparison fixup in ProductUpgrader,,0
MacPlatform: implement isServiceInstalledAndRunning,0.4008739,1740: Skip launching UI if running unattended,Determine the services that are installed and running on the mac platform via the launchctl program.,0
Upgrader: platform specific blocking process list,0.43032867,* gvfs upgrade could fail if its background processes were launched in an existing enlistment.,"Different platforms have different requirements for the list of processes that block installation. The POSIX platforms also remove ""gvfs"" from the list of blocked processes, as they can run upgrade while the 'gvfs upgrade' command is running. We might want to come back and restrict this to only the gvfs upgrade command (or only if the running command is a parent process) in a future change.",0
ProcessHelper: account for platform differences in program locater,0.36266217,1685: minor path comparison fixup in ProductUpgrader,"Currently, this is hardcoded to run the ""where"" program, which is not appropriate on non-Windows platforms. Add a platform abstraction so different platforms can run different programs.",0
Merge pull request #1267 Add logging to clone/mount paths,0.4485101,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Add logging to clone/mount paths,0
Merge pull request #1270 from VFSForGit installer non-relocatable,0.60281765,1677: Update Git to v2.27.0.vfs.1.0,,0
Log Folder Placeholders Removed,0.6567191,Adds additional logging for folder and file placeholder creation.,,0
LooseObjectsStep: report full object cache size,0.37261367,"A background task will now compress and deduplicate the pack-file data in the shared object cache, resulting in more sustainable disk usage",Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Revert change to call daemon,0.31924188,See the full change log,,0
VFSForGit installer non-relocatable,0.53361547,GVFS is now available as a binary installer,"Added component-plist file for ""VFS For Git"" package. This is an xml file that contains specifications for how installer should handle bundles in VFSForGit. BundleIsRelocatable is set to true, for ""VFS For Git.app"". This stops the installer from searching the disc for a copy of the app, which it then upgrades. Now the installer will always fresh-install (or upgrade) ""/Library/Application\ Supp ort/VFS For Git/VFS For Git.app"" only. Also updated CreateInstaller script to use the component-plist file.",0
Switch to using daemon on POSIX and add logging to clone/mount paths,0.37617844,- Multiple mount process reliability bugs have been squashed.,,0
Merge pull request #1257: Mac: Bash Functional Test Hang,0.4811865,1697: Fix functional tests to skip around ProjFS issue,Mac: Bash Functional Test Hang,0
Add missed file,0.39611605,- Gracefully handle a missing shared object cache pack directory.,,0
Merge pull request #1176 from Platform native notifications PR_2,0.52380747,Initial Mac platform native notifications,,0
Handle spaces in directories,0.2959539,Git commands are now allowed to delete an empty directory, Quote the directory being deleted,0
Platform native notifications PR_2,0.754498,Initial Mac platform native notifications,"Display about box with VFSForGit and Git version info. - Fetch Version info by running gvfs & git commands - Added UT (updated tests cases added required mocks) - Renamed GVFSTask to ProductInfoFetcher - New ProcessHelper wrapper class around NSTask - Separate xcodebuild test & build steps for native app.   This helps prevent XCTest frameworks from getting   injected into deployment binaries - Use nullability decorators - VFSForGit classes are prefixed with ""VFS"". - Use default Xcode code indentations",1
Merge pull request #1241: Update heartbeats for folder placeholders and file hydration,0.572962,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",Update heartbeats to contain folder placeholder and file hydration metadata,0
Update Git to v2.22.0.vfs.1,0.8375026,1676: Update Git to v2.27.0.vfs.1.0,Includes a change to the post-indexchanged hook (now the post-index-change hook). Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Mac ProjFS: Only hydrate/expand when deleting due to rename,0.38794303,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"This change utilises the KAUTH_FILEOP_WILL_RENAME event which was introduced with Mojave/10.14 to determine if a KAUTH_VNODE_DELETE authorisation check is due to a rename() operation. In this case, the file or directory genuinely needs hydrating, otherwise hydration can be skipped. This change also adds unit tests for the new rename operation tracking code, and adapts existing unit tests so hydration is not expected when a KAUTH_VNODE_DELETE check occurs outside of a rename() operation. Note that this change means the behaviour on macOS 10.13 and earlier versus 10.14 and later subtly diverges.",0
Mac ProjFS kext testing: Use modern mock vnode creation API,0.5289786,1697: Fix functional tests to skip around ProjFS issue,Replaces a use of the old mock vnode creation function with the new tree and mountpoint-based one.,0
Mac ProjFS kext: Adds enum for darwin major versions,0.42882645,- Better errors around ProjFS installation issues.,"This adds an enum scoped in a namespace to be used instead of magic numbers in version checks. The reasons for choosing a classic enum in a namespace are:  * The namespace gives us explicit scoping rather than polluting the root namespace.  * The using a classic enum vs a modern C++ enum class means the values are implicitly convertible to integers, which is how we actually use them.",0
Moves vnode eligibility check to start of HandleVnodeOperation,0.34368703,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,"This change moves the vnode eligibility check (file system type, vnode type) from ShouldHandleVnodeOpEvent to HandleVnodeOperation to avoid repeated calls. A unit test has been added to provide test coverage for the new code branch.",0
Merge pull request #1225 from jamill/upgrader_tasks/platform_strategy,0.47907293,1747: UpgradeVerb: write deprecation notice,Upgrader - platform specific directory creation,0
Add unit tests to cover code changes to heartbeats,0.33107257,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Rework GetMetadataForHeartbeat to be more explicit,0.12849775,Release Notes,"Add new helper to 'swap' the ConcurrentDictionary, move away from managing EventLevel by passing a ref to passing an out bool. Rename methods for clarity that were brought up in code review",0
UpgradeVerb: enable platform specific logic,0.4765401,1747: UpgradeVerb: write deprecation notice,,0
UpgradeOrchestrator: handle platform differences,0.4927513,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Upgrade: introduce platform strategy,0.5145275,Initial Mac upgrade functionality,,0
NuGetUpgrader: fix issue with upgrader using interop services,0.64604384,- Properly reacquire credentials during nuget upgrader,"Instead of querying interop services at runtime (with a dll that is not included with the windows install), determine this at compile time using the under construction flags.",0
Merge pull request #1242: Mac: Add FileSystemType,0.43924493,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git",Mac: Add FileSystemType,0
Merge pull request #1207 from pmj/mac-kext-vnode-put-race-fix,0.444277,1676: Update Git to v2.27.0.vfs.1.0,Mac kext: Fix for potential vnode_put() race in VirtualizationRoot_RegisterProviderForPath,0
Merge pull request #1239: NuGetFeed: only encrypt in memory credential  on supported platforms,0.4943355,- Properly reacquire credentials during nuget upgrader,NuGetFeed: only encrypt in memory credential  on supported platforms,0
NuGetFeed: only encrypt in memory credential  on supported platforms,0.51212806,- Properly reacquire credentials during nuget upgrader,"The NuGet Client API has flags to control whether a password is stored in clear text or not. This flag controls: 1) Whether the password is stored in clear text when persisted to a   config file on disk. 2) Whether the password is stored encrypted in memory Encrypting the password is only supported on Windows (and Mono) platforms, and not on netcore platfroms. As VFS for Git does not actually update any configuration files, the flag only controls how the password is stored in memory. For netcore platforms, do not set this flag. As VFS for Git does not persist this data to disk, the tradeoff is whether the process is encrypting the password in memory or not. VFS for Git itself is working with the plain text password, so this is not broading the risk in this aspect.",0
Try switching on the UTF8 tests that previously failed on our build agents,0.44202211,Previous builds were not including fully-signed DLLs. This is now fixed.,,0
rework how Heartbeat event metadata is structured.,0.2530458,1689: Make delete docs more verbose,,0
Add Heartbeat data for Folder Placeholder creation and File Hydration,0.62902063,Adds additional logging for folder and file placeholder creation.,Initial implementation of additional fields on the FileSystemCallbacks heartbeat to cover folder placeholder creation and file hydration. Includes plumbing changes to route the image path name through for folder placeholders and file hydration.,0
Merge pull request #1215: Remove Placeholder after calling PreDelete,0.4798175,1689: Make delete docs more verbose,Remove Placeholder after calling PreDelete,0
Merge pull request #1243: Upgrade to Microsoft.Windows.ProjFS 1.1.19156.1,0.58049756,- Better errors around ProjFS installation issues.,Upgrade to Microsoft.Windows.ProjFS 1.1.19156.1,0
Upgrade to Microsoft.Windows.ProjFS 1.1.19156.1,0.63557553,- Better errors around ProjFS installation issues.,,0
Mac kext: Improves safety of auth cache disabling,0.47709203,  - Now erases credentials on authentication failure,"Previously, vnode_mount() was called on a vnode that was not guaranteed to have a strong reference on it after the lock was dropped. This patch changes InsertVirtualizationRoot_Locked so it calls vnode_get() on the vnode in the case of an active provider, and VirtualizationRoot_RegisterProviderForPath() calls vnode_put() after disabling the auth cache. Due to the change, InsertVirtualizationRoot_Locked() now also pairs nicely with ActiveProvider_Disconnect(), which tidies up some unit tests a little.",0
Mac: Add FileSystemType,0.3214354,GVFS is now available as a binary installer,,0
Merge pull request #1199 Move ShouldHandleFileOpEvent unit tests into their own class,0.42436904,1697: Fix functional tests to skip around ProjFS issue,Move ShouldHandleFileOpEvent unit tests into their own class,0
Use ActiveProvider_Disconnect instead of setting providerUserClient to nullptr,0.373712,  - Now erases credentials on authentication failure,,0
Move ShouldHandleFileOpEvent unit tests into their own class,0.35869074,1697: Fix functional tests to skip around ProjFS issue,Additionally: - Reorder PrjFSKextTests files so they're in alphabetical order - Replace the usage of org_vfsforgit_PrjFSProviderUserClient with PrjFSProviderUserClient - Make PrjFSProviderUserClient userClient an instance variable - Update XCTAssertTrue to XCAssertEqual where appropriate,0
Merge pull request #1184: Mac: Support Hardlinks,0.41494012,Pull Requests,Mac: Support Hardlinks,0
Simplify logic for OnHardLinkCreated,0.24957354,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,,0
Merge pull request #1235: Handle KAUTH_FILEOP_CLOSE_MODIFIED as a bit field,0.37024915,1676: Update Git to v2.27.0.vfs.1.0,Handle KAUTH_FILEOP_CLOSE_MODIFIED as a bit field,0
Merge pull request #1228: Upgrader - copy entire application directory,0.51249003,- Fixes a copy failure when copying the upgrade tool to its temporary location.,Upgrader: copy entire application directory,0
Handle KAUTH_FILEOP_CLOSE_MODIFIED as a bit field,0.21968864,1717 [HOTFIX] Update Git to remove ODB string check,,0
Remove Placeholder after calling PreDelete,0.36381423,1689: Make delete docs more verbose," PreDelete will perform a convert to Full This requires we hydrate the file first, hence the call order changes in KauthHandler",0
ProductUpgrader: copy whole upgrade application,0.5841005,1672: ProductUpgrader: be extra careful about a copy loop,"When upgrading VFS for Git via the built-in upgrade logic, the upgrade verb will copy the upgrader application to a temporary directory, and run the upgrade app from the temporary directory. The main reason for this is so that the upgrade application can update the original application without open file handles getting in the way (and preventing the deletion of the application that is being updated). The upgrade verb currently has a hard coded list of dependencies (files) required for the upgrader application to run. This can be fragile as we need to keep this list in sync with the actual dependencies, across multiple platforms. This can easily break if the dependencies change, and we update the list of files included with the installer, but not with the upgrader application. A specific occurrence of this happened in #1144. Instead, just copy over the whole VFS for Git application directory when creating a temporary copy of the upgrader application to run. We might copy over a few additional files, but this should not cause any noticeable downsides.",0
PhysicalFileSystem: teach ability to copy a directory,0.27939737,Adds additional logging for folder and file placeholder creation.,Teach PhysicalFileSystem the ability to copy an entire directory to a destination path.,0
Merge pull request #1200 from pmj/mac-kext-testing-assert-integration,0.44345528,Pull Requests,Mac kext testing: assert() integration,0
Merge pull request #1140 use SWLite to track placeholders,0.41497153,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",Start using SQLite to track placeholders,0
PR Feedback - clean up tests,0.38489053,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #1212 from Fix couple installer issues,0.5264449,Pull Requests,,0
Add CategoryConstants.ExceptionExpected to test that was missing it,0.30832314,1697: Fix functional tests to skip around ProjFS issue,,0
Use platform path separators instead of hard coded,0.35666022,1685: minor path comparison fixup in ProductUpgrader,,0
PR Feedback - use GVFSHelpers.PlaceholderFieldDelimiter,0.4492503,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,,0
Use case insensitive database field for the path and folders to keep HashSet,0.30050325,Large improvements to git checkout performance when there are many folder placeholders.,,0
PR Feedback - put get and set on separate lines,0.298782,1741: Fix winget tag specification,,0
Make sure placeholders are removed for all cases other then Ok when updating,0.56329036,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Add comments why and how we are using the HashSet of all placeholders for folder reexpansion,0.59822714,Adds additional logging for folder and file placeholder creation.,,0
Revert change that VS made to remove the recursive entry,0.29961166,See the full change log,,0
Rename PlaceholderListDatabase to LegacyPlaceholderListDatabase,0.500924,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
PR Feedback to cleanup disposing and returning connections to the pool,0.30509162,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Merge pull request #1213: Prefetch tests: Delete multi-pack-index before indexing a pack,0.5615121,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles","This test deletes an existing .idx file, and then checks that VFS for Git calls git index-pack when scanning the pack-files. When we take Git 2.22.0, this test starts to fail. The fix is to delete the multi-pack-index before rebuilding the .idx. This is a reasonable expectation because we won't have a pack covered by the multi-pack-index without having the corresponding .idx file. The reason this broke with Git 2.22.0 is a bit subtle: When running git index-pack, Git looks for duplicate objects in order to check for SHA-1 collisions. When the multi-pack-index includes the objects in the pack, Git sees what it thinks are the same object ids and goes to load the content to verify they are equal. In Git 2.22.0, we solved the ""many packs"" problem by adding the pack-files from the multi-pack-index to the packed_git linked list. Adding to this list will fail if there is no corresponding .idx file. (The multi-pack-index prevents any reads into this .idx file, but existence is required.) This means that the content lookup fails and Git complains with ""fatal: cannot read existing object info"" This will unblock taking Git 2.22.0 after the release. See microsoft/git#140 for details on that update.",0
Add validation and tests for the sha value,0.27564633,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,,0
PrjFS kext testing: Fixes test failing due to expected failed assertion,0.68667936,1697: Fix functional tests to skip around ProjFS issue,The test testFindVnodeRootFromDiskAndUpdateCache_InvalidUpdateCacheBehaviorValue deliberately goes down a code path in the kext which triggers a failed assertion. This change causes the test to register the assertion failure as expected so that the test itself does not fail.,0
PrjFS kext testing: Fixes newly failing tests by tidying up root handling,0.6737053,1697: Fix functional tests to skip around ProjFS issue,"Since enabling kext assert()s in unit test runs, a number of tests have been falling afoul of failed assertions when calling VirtualizationRoots_Cleanup() because connected mock providers were not cleanly disconnected. This change fixes those tests so they tidy up after themselves properly.",0
PrjFS kext testing: Fixes newly failing disappearing provider tests,0.6378133,1697: Fix functional tests to skip around ProjFS issue,"Two HandleVnodeOperationTests used ProviderMessageMock_SetCleanupRootsAfterRequest() to force removal of the (mock) provider. This caused the mock version of ProviderMessaging_TrySendRequestAndWaitForResponse() to call VirtualizationRoots_Cleanup(). This was problematic for 2 reasons:  VirtualizationRoots_Cleanup() does not just disconnect the provider, it wipes the entire root array, making any handles invalid. This never actually happens in the real kext. Any such sledgehammer approach has actually been prevented by assertions in the kext code. Now that those kick in during unit testing, this made the tests in question fail in multiple ways.  The fix is therefore to replace the call to VirtualizationRoots_Cleanup() with the more appropriate ActiveProvider_Disconnect(). Rather than special-casing this, ProviderMessageMock_SetCleanupRootsAfterRequest() has been replaced with ProviderMessageMock_SetRequestSideEffect() which allows setting a lambda expression to run in the mock version of ProviderMessaging_TrySendRequestAndWaitForResponse(). In the tests in question, it is the lambda that calls ActiveProvider_Disconnect().",0
PrjFS Kext tests: Adds kext assert() integration for unit tests,0.564334,1697: Fix functional tests to skip around ProjFS issue,"Previously, assert() has been disabled (MACH_ASSERT macro not defined) in the testable kext build, so no failing assertions in the kext have been caught during unit testing. This change:  Enables assertions in the testable kext build. Implements the back-end Assert()Â and panic() functions used by the assert() and assertf()Â macros, respectively. These back-end functions call into XCTest's test failure reporting mechanism, so failed kext assertions in unit tests are now reported as regular unit test failures. To facilitate this, the current test case needs to be known outside the test's Objective-C class, so we track that in thread-local storage by subclassing XCTestCase and deriving all tests from the new class, and perform current test registration/deregistration during setUp/tearDown. Some unit tests deliberately cause failed assertions, so a mechanism for ignoring a specific number of them in a test is provided. Not having full coverage in panic/Assert/etc. is a good thing, so those have been added to the 100% test coverage exceptions",0
Fix installer auto-mount failure,0.4885446,- The installer now unmounts and remounts existing repos automatically,"Mac installer relies on GVFS.Service to do the auto-mount of registered repos. When GVFS.Service gets launched (post installation) it (Service) calls gvfs mount in the background (without user interaction). In this case if the kext is not loaded, then mount will fail. Updating the installer to load kext would help in scenario. Also updated postflight script to log output of kextstat command that is used to determine if macOS autoloaded kext or not. A non empty output means kext got autoloaded or there was an error running kextstat. Fixes #1210",0
Merge pull request #1206: Really really fix LooseObjectStepTests by unmounting,0.5326003,- Multiple mount process reliability bugs have been squashed.,"These tests have been super-flaky and frustrating. After weakening the tests, but still finding places where the loose object count is not deterministic, I thought it was worth starting over with the full list of exact-count assertions. To avoid loose objects being added or dropped from the counts in unexpected ways, now we unmount the repo before counting the objects. I ran the functional tests 20 times on this PR and only one failure, but it was in the GVFS.FunctionalTests.Tests.EnlistmentPerFixture.GitReadAndGitLockTests.GitAliasNamedAfterKnownCommandAcquiresLock() test, unrelated to this change. Replaces #1162, #1198, #1116. Fixes #1201.",0
Prefetch tests: Delete multi-pack-index before indexing a pack,0.47028416,1745: do not exit early if no blobs found for a period when prefetching,"This test deletes an existing .idx file, and then checks that VFS for Git calls git index-pack when scanning the pack-files. When we take Git 2.22.0, this test starts to fail. The fix is to delete the multi-pack-index before rebuilding the .idx. This is a reasonable expectation because we won't have a pack covered by the multi-pack-index without having the corresponding .idx file. The reason this broke with Git 2.22.0 is a bit subtle: When running git index-pack, Git looks for duplicate objects in order to check for SHA-1 collisions. When the multi-pack-index includes the objects in the pack, Git sees what it thinks are the same object ids and goes to load the content to verify they are equal. In Git 2.22.0, we solved the ""many packs"" problem by adding the pack-files from the multi-pack-index to the packed_git linked list. Adding to this list will fail if there is no corresponding .idx file. (The multi-pack-index prevents any reads into this .idx file, but existence is required.) Since the .idx file is not there, that add fails. This means that the content lookup fails and Git complains with ""fatal: cannot read existing object info"" Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Address multiple issues with HardLinks,0.3870117,- Gracefully handle a missing shared object cache pack directory.," Enhance functional tests Send """" for paths outside virtualization roots If we can't get a RelativePath, log an error and skip the message Ensure proper handling",0
LooseObjectStepTests: Unmount before running,0.43290547,1730: Fix an issue with FastFetch when deleting files,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
"Revert ""LooseObjectStepTests: Be more flexible with loose object count""",0.41769108,1675: PreCommandHook: don't lock pack-objects,This reverts commit 859d81fa896e8bc20effe3fe619586c2bcd3ad7c.,0
"Revert ""Relax LooseObjectStepTests from exact object counts to ""positive or zero"" checks""",0.38523847,1675: PreCommandHook: don't lock pack-objects,This reverts commit e40a21f51f31ff154d0a805f7ff1ab18133e9f31.,0
"Revert ""Remove all reference to looseObjectCount in LooseObjectStepTests""",0.4291181,1675: PreCommandHook: don't lock pack-objects,This reverts commit 90aaf2fa5e28855355d21861d04e2b0e631a7d96.,0
Keep the existing placeholders hashset up to date for reexpansion,0.41682607,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Add exception type to use for GVFSDatabase queries,0.5108874,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Fix some changes from rebasing to master,0.36493468,Major Changes,,0
Merge pull request #1198: Remove all reference to looseObjectCount in LooseObjectStepTests,0.43003112,1717 [HOTFIX] Update Git to remove ODB string check,"When making the tests more flexible in #1162, I missed one instance. To be sure I didn't miss any more, I removed all use of the exact loose object count.",0
Little changes from PR Feedback,0.44171754,General improvements:,,0
PR Feedback - pass IDbConnection to the CreateTable method instead of IDbCommand,0.2524025,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Rename Count() to GetCount(),0.14525071,1652: RepoRegistry: ignore non-existent repos,,0
PR feedback - Use enum for where pathType in SQL query and cleanup PlaceholderDatabaseRepairJob,0.3829797,Moves placeholder database into SQLite for better performance.,,0
PR Feedback - remove ITracer from GVFSDatabase and rename some variables,0.48139954,Improves the rate of .gvfsCache cleanup.,,0
Remove using that was no longer being used,0.3464742,1689: Make delete docs more verbose,,0
Remove $ from string that didn't need it,0.1749968,1717 [HOTFIX] Update Git to remove ODB string check,,0
Add method to add folder with type for other methods to use,0.37614822,Adds additional logging for folder and file placeholder creation.,,0
Rename PlaceholdersTable to PlaceholderTable and make everything match,0.42183593,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Remove the IPooledConnection and use IDbConnection for pooled connections,0.2068832,A case where FastFetch would not download a small number of files has been fixed.,,0
Rename IDbConnectionCreator to IDbConnectionFactory,0.27762738,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Get the file placeholder list for ReExpand after updating file placeholders,0.51945,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Fix Dehydrate test,0.25602967,1697: Fix functional tests to skip around ProjFS issue,,0
Update to use DbNull.Value when inserting placeholder data,0.4792423,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Rename PlaceholdersTests to PlaceholdersTableTests,0.4161232,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Rename gvfs.sqlite to VFSForGit.sqlite as well as constants,0.4731775,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
Fix path for the Mac,0.36572838,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Rename Placeholders to PlaceholdersTable,0.37154824,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Rename IPlaceholderDatabase to IPlaceholderCollection,0.27484345,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Add summaries to new classes and interfaces,0.31954443,New features:,,0
Add unit tests for GVFSDatabase and Placeholders,0.44248116,Instructions for installing and using GVFS are available at https://github.com/Microsoft/GVFS,,0
Remove $ for strings that don't need it,0.16768746,1658: ProjFSFilter: Be more robust to missing PowerShell,,0
Add interfaces to enable unit testing,0.34221315,1697: Fix functional tests to skip around ProjFS issue,,0
Update placeholder database repair to use new SQLite database,0.66311014,Moves placeholder database into SQLite for better performance.,,0
Remove Contains from the placeholder interface and use in memory hashset,0.27745673,- Fixed an issue where some concurrent updates to the placeholder database would fail,Using this because Contains was only being used on Mac and is only used when updating placeholders.  Using the in memory hashset is much faster and will not affect the Windows code.,0
Update initial connections and wait time,0.36470908,  - Break down update placeholders timings so we can see where time is spend during checkout.,,0
Update Placeholders.Contains to check for null as well as DBNull.Value,0.41080275,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Refactor DiskLayoutUpgradeTests and create one for Mac,0.3694632,1697: Fix functional tests to skip around ProjFS issue,,0
Rename the DiskLayoutUpgradeTests to WindowsDiskLayoutUpgradeTests,0.3722417,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
Update the upgrader tests,0.56957495,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
Add upgrader to convert placeholderlist to SQLite,0.5622673,Moves placeholder database into SQLite for better performance.,,0
Clean up some code in GitIndexProjection,0.46044272,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index",,0
Fix WindowsTombstoneTests using SQLite,0.3493324,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Fix some placeholder tests that were broken,0.51374876,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Add connection pooling to the GVFSDatabase class,0.4808079,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Use Sqlite for the placeholders,0.62325174,Moves placeholder database into SQLite for better performance.,,0
Add Placeholder database class that uses SQLite,0.6374472,Moves placeholder database into SQLite for better performance.,,0
Add database class for gvfs,0.55121124,Instructions for installing and using GVFS are available at https://github.com/Microsoft/GVFS,,0
Remove all reference to looseObjectCount in LooseObjectStepTests,0.39121285,1675: PreCommandHook: don't lock pack-objects,"When making the tests more flexible, I missed one instance. To be sure I didn't miss any more, I removed all storage of the exact loose object count. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Merge pull request #1098 Update PrjFSKextLogDaemon to forward messages to GitServiceDaemon,0.48279786,1676: Update Git to v2.27.0.vfs.1.0,Update PrjFSKextLogDaemon to forward messages to GitServiceDaemon,0
Merge pull request #1084: Support alternate names for the .gvfs folder,0.5715808,1676: Update Git to v2.27.0.vfs.1.0,"On Linux, the existence of a GNOME Virtual file system .gvfs directory precludes the use of VFS for Git entirely. For both this reason, and to fully disambiguate the VFSForGit project from GVfs, it would be preferable to use a different folder name for VFSForGit's metadata, such as .vfsforgit. This PR introduces support for modifying the name of .gvfs folder on a per-platform basis. GVFSPlatform.Instance.Constants.DotGVFSRoot now holds the appropriate name of that folder.",0
Set /Zc:__cplusplus on Windows so that __cplusplus reports the correct value,0.34047595,- Gracefully handle a missing shared object cache pack directory.,,0
Merge pull request #1190 Add notarize shell script for notarizing the kext with Apple,0.42421448,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Add notarize shell script for notarizing the kext with Apple,0
Fix/Add Functional Tests,0.6291659,1697: Fix functional tests to skip around ProjFS issue,,0
"Simply handling of NULL, send EmptyString from the top level and react appropriately",0.13896808,1740: Skip launching UI if running unattended," path as nullptr can also signify we need to look it up sending path as """" means the path is outside the virtualization root",0
Merge pull request #1194 Mac: Refactor testShouldHandleFileOpEvent test,0.47403735,1697: Fix functional tests to skip around ProjFS issue,Mac: Refactor testShouldHandleFileOpEvent test:,0
Mac: Refactor testShouldHandleFileOpEvent test:,0.50236565,1697: Fix functional tests to skip around ProjFS issue,  - Split testShouldHandleFileOpEvent into separate test cases with more descriptive names   - Fix an issue where the testShouldHandleFileOpEvent_VnodeCacheUpdated tests were sometimes failing due to vnode cache collisions from other tests   - Updated the provider initiated I/O and provider offline scenarios to use file vnodes rather than the repo root vnodes,0
Merge pull request #1130:Mac: Don't Fill Placeholders & Properly Remove Placeholder Flag,0.4983974,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",Mac: Don't Fill Placeholders & Properly Remove Placeholder Flag,0
Update cache health messages: Remove message string and use more descriptive event name,0.35450602,- Fix backoff on cache server size endpoint 404.,,0
"Add ""stat"" Functional Tests",0.43957785,1697: Fix functional tests to skip around ProjFS issue,,0
Add notarize shell script for notarizing the kext with apple,0.3491993,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Merge pull request #1150: Update Git to vfs-2.21.0,0.7853216,1676: Update Git to v2.27.0.vfs.1.0,"Updates Git to 2.21.0, as rebased in microsoft/git#122.",1
Update Git to vfs-2.21.0,0.8533644,1676: Update Git to v2.27.0.vfs.1.0,Signed-off-by: Derrick Stolee dstolee@microsoft.com,1
Add more output to GeneratePrjFSVersionHeader.sh,0.36778668,1664: Update USN journal entries for projected folders,,0
Fix PRINTF_FMT macro on Windows,0.35565445,Switched over to use the Windows Projected File System (ProjFS) optional feature on RS4 and later. ProjFS is the new name for the GvFlt driver and its associated user mode library.,,0
"Fix printf issues in the native hooks, and mark the die function as using printf formatting",0.21480572,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #1186 from Halterer/ReadmeUpdate,0.45222783,1750: Update Readme.md,Fixed typo in Windows install directions in Readme,0
Kext changes to support sending RelativeFromPath,0.3023049,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,,0
Add handling for RelativeFromPath to support Hardlinks,0.35706624,- Gracefully handle a missing shared object cache pack directory.,- add both from / to paths to ModifiedFiles.dat,0
Add/Fix Functional Tests for Hardlinks,0.59039277,1697: Fix functional tests to skip around ProjFS issue,,0
Fixed typo in Windows install directions in Readme,0.42934096,- Fixes a copy failure when copying the upgrade tool to its temporary location.,"In the Readme document, there was an typo in the Windows installation directions. The document had the path for the installer as ...\BuildOutput\GVFS.Installer... Where it should have been ...\BuildOutput\GVFS.Installer.Windows... For installation on a windows machine.",0
Don't fill placeholder with data to make size,0.3940291,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Fix placeholder flag,0.4219666,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Update PrjFSKextLogDaemon to forward messages to message listening service,0.36603886,1664: Update USN journal entries for projected folders, Kext error messages and vnode health data is now forwarded to the message listener (if present) Added JsonWriter class for generating JSON to send to message listener Added GeneratePrjFSVersionHeader.sh script to generate a header file with the PrjFS version of the build Added a new target for PrjFSLib unit tests,0
Fix mirror provider,0.30318865,1732: Use one NuGet feed,,0
"Merge pull request #1178: Repack: use one thread, but allow deltas",0.46064296,Pull Requests,"When running 'git multi-pack-index repack', we are setting two config options intended to speed up the underlying 'git pack-objects' command: pack.delta=0    (default is 50) pack.window=0   (default is 10)  These were inserted to prevent the delta calculations from taking over a user's processor during a background operation. When packing the from-loose packs, this can become an expensive operation. However, this came with a significant downside, due to my misunderstanding of how these options work. When repacking the (already nicely-packed) prefetch packs, these options force deltified trees to become un-deltified. This means the resulting pack can be larger than the given batch size. To prevent losing these good deltas, drop these config options and instead use pack.threads=1 to prevent multiple threads from taking over the machine. In combination with the recent lower-priority git processes, this should keep the background repack from disrupting users, but will also keep our pack directory small. In my testing, I used the Windows repository and ran the packfile maintenance step with a batch size of ""100m"" instead of ""2g"". This allowed me to run it with my real data, which was currently in a state where ""2g"" would do nothing. Before: 588m pack, repack took 50s  After:  80m pack, repack took 28s* The fact that the repack sped up is possibly related to writing less data to disk. I would expect this to slow down in some cases. This expansion of deltas explains why users running the packfile maintenance step directly have a higher than expected steady-state. We are not-optimally repacking the data.",0
"Repack: use one thread, but allow deltas",0.34558195,- Multi-threaded index reads will improve load time of large .git/index,"When running 'git multi-pack-index repack', we are setting two config options intended to speed up the underlying 'git pack-objects' command: pack.delta=0    (default is 50) pack.window=0   (default is 10)  These were inserted to prevent the delta calculations from taking over a user's processor during a background operation. When packing the from-loose packs, this can become an expensive operation. However, this came with a significant downside, due to my misunderstanding of how these options work. When repacking the (already nicely-packed) prefetch packs, these options force deltified trees to become un-deltified. This means the resulting pack can be larger than the given batch size. To prevent losing these good deltas, drop these config options and instead use pack.threads=1 to prevent multiple threads from taking over the machine. In combination with the recent lower-priority git processes, this should keep the background repack from disrupting users, but will also keep our pack directory small. In my testing, I used the Windows repository and ran the packfile maintenance step with a batch size of ""100m"" instead of ""2g"". This allowed me to run it with my real data, which was currently in a state where ""2g"" would do nothing. Before: 588m pack, repack took 50s  After:  80m pack, repack took 28s* The fact that the repack sped up is possibly related to writing less data to disk. I would expect this to slow down in some cases. This expansion of deltas explains why users running the packfile maintenance step directly have a higher than expected steady-state. We are not-optimally repacking the data. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Merge pull request #1157: GitProcess: Enable lower ProcessPriorityClass,0.5866084,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"In an effort to have fewer complaints for running things in the background, give background Git commands a lower process priority. See ProcessPriorityClass enum documentation for details of how this should work. By specifying ""BelowNormal"", we are allowing the process to run while a user is at the machine, but the process should not keep them from doing their work. The only lower priority is Idle which implies that the user is not using the machine, such as with a screensaver. I'm not sure if we want to go that low.",0
Rename ForBackground to LowerPriority,0.314771,Background tasks run with lower priority to address user feedback on maintenance job performance.,Makes it more clear what is going on. Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
cleanup,0.39900243,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
"use "".mockvfsforgit"" in MockPlatform",0.47127146,1697: Fix functional tests to skip around ProjFS issue,,0
refactor use of .gvfs directory name,0.55683684,- GVFS has a better icon.,,0
Merge pull request #985 from pmj/mac-two-path-provider-messages,0.4559528,Pull Requests,"Mac ProjFS: Two-path provider messages, message provider for original hardlinked location",0
Mac ProjFS kext tests: Moves existing fileop tests to new file,0.5769003,1697: Fix functional tests to skip around ProjFS issue,"Now that there is a separate file/class holding tests for HandleFileOpOperation(), the existing tests for that function can be moved from the HandleVnodeOperationTests class.",0
Mac ProjFS kext: Adds HandleFileOpOperation tests for hardlink creation,0.5831421,1697: Fix functional tests to skip around ProjFS issue,The tests check that appropriate providers are or are not messaged depending on the exact circumstances of the hardlink event.,0
Mac kext: Sends hardlink notifications to both affected providers,0.3586735,Initial Mac platform native notifications,"This change uses the extra kernel-user message field for the ""from"" path to send the original path of the file being hardlinked in addition to the new path, and sends this message to the provider covering the original path, if this is different from the provider responsible for the new link location.",0
Mac kext: Adds extra path field to kernel-provider message,0.35011038,1685: minor path comparison fixup in ProductUpgrader,"This changes the kext-to-provider message format to contain an additional variable-length path string field, to be used for the source path of hardlink notifications. Both encoding and decoding code is updated. To simplify this, the existing field and the new field have been placed in an array of the appropriate length, thus allowing decoding/encoding code to loop over the variable-length path fields. Existing users of the message sending API are updated to call it with an extra argument, but this is currently always null, the changes to hardlink notifications will follow in a subsequent change.",0
Merge pull request #1146 from Platform native notifications - PR_1,0.530665,Initial Mac platform native notifications,,0
Platform native notifications,0.8085582,Initial Mac platform native notifications,"This is the first in a series of upcoming changes to add platform native notifications. This commit adds a native Mac app that shows a status menu in the macOS menu bar. It contains the following changes  - Boilerplate code generated by Xcode for native apps  - VFSForGit Icon asset files  - UI .xib files  - Placeholder source code files for upcoming changes.  - Updated buildscript to build the app  - Platform native app is named ""VFS For Git.app"". It is installed    in ""/Library/Application Support/VFS For Git"" directory  - Updated uninstaller to delete the app  - Added placeholders for UT The app will get installed, but will not get automatically launched. Right now it displays no useful information its About box, neither does it perform any useful function.",1
Merge pull request #1166: Better Categorize M4 tests,0.443156,Pull Requests,Better Categorize M4 tests,0
Merge pull request #1169: Fix Append Files,0.45058948,Pull Requests,Fix Append Files,0
Merge pull request #1155 from jamill/upgrader_tasks/rooted_pipe,0.41818565,1673: [HOTFIX] ProductUpgrader: be extra careful about a copy loop,GVFSService: platforms should use appropriate pipe name,0
Fix Appended Files,0.36276776,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build, We should call MessageType_KtoU_NotifyFilePreConvertToFull on KAUTH_VNODE_APPEND_DATA,0
Better Categorize M4 tests,0.28690755,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Merge pull request #1160 from github/skip-root-rmdir,0.47625616,Git commands are now allowed to delete an empty directory,"Add repo root dir to retention list before projection updates The GitIndexProjection.UpdatePlaceholders() method, after processing the list of placeholder files, iterates over the list of placeholder folders and tries to remove any which are actually files, or not in the projection, or a possible tombstone. The last placeholder folder in the ordered list appears to always correspond to the root of the repository; this placeholder has an empty path string, and IsPathProjected() returns false for both the isProjected and isFolder flags for this entry. Because both flags are false, RemoveFolderPlaceholderIfEmpty() is called, which then results in a call to DeleteFile() in the lower-level ProjFS layer.  This always fails, because the root folder is never empty (it contains, among other things, the .git folder), but since RemoveFolderPlaceholderIfEmpty() handles the FSResult.DirectoryNotEmpty error code, no exception is propagated. We can avoid these unnecessary attempts to remove the repository's root folder on ""git checkout"" operations by adding the empty path to the folderPlaceholdersToKeep list.",0
Merge pull request #1059 from jamill/upgrader_netcore,0.48656404,- Upgrade supports NuGet feeds as a distribution source.,GVFS.Upgrader: migrate to netcore project,0
GVFS.Upgrader: migrate to netcore project,0.6293611,The gvfs upgrade command is deprecated. Future upgrades will require using winget or installing directly from the releases page.,GVFS.Upgrader will be run on both Windows and non-Windows platforms. This enables a netcore version of the project to be built along side a netframework version. Update tests to run in the base unit test project to follow the implementation.,0
Merge pull request #1159 from jamill/upgrader_tasks/gvfs_config,0.6503836,Bug Fix: Fixes a bug with gvfs upgrade that causes versions v1.0.20112.1 from upgrading from private feeds.,MacPlatform: enable GVFS config verb,0
don't try to remove repo root in projection update,0.54801774,- The installer now unmounts and remounts existing repos automatically,"The GitIndexProjection.UpdatePlaceholders() method, after processing the list of placeholder files, iterates over the list of placeholder folders and tries to remove any which are actually files, or not in the projection, or a possible tombstone. The last placeholder folder in the ordered list appears to always correspond to the root of the repository; this placeholder has an empty path string, and IsPathProjected() returns false for both the isProjected and isFolder flags for this entry. Because both flags are false, RemoveFolderPlaceholderIfEmpty() is called, which then results in a call to DeleteFile() in the lower-level ProjFS layer.  This always fails, because the root folder is never empty (it contains, among other things, the .git folder), but since RemoveFolderPlaceholderIfEmpty() handles the FSResult.DirectoryNotEmpty error code, no exception is propagated. We can avoid these unnecessary attempts to remove the repository's root folder on ""git checkout"" operations by adding the empty path to the folderPlaceholdersToKeep list. Co-authored-by: Kevin Willford kewillf@microsoft.com",0
Merge pull request #1096 from jamill/submodule_tweak,0.43140858,Pull Requests,Do not take GVFSLock for git submodule commands,0
Merge pull request #1154 from jamill/projfs_dependency_fix,0.59640634,- Better errors around ProjFS installation issues.,ProjectedFSLib: do not copy into GVFS.Platform.Windows output dir,0
"Revert ""Fix handling of >>""",0.42765892,1741: Fix winget tag specification,This reverts commit d29e00a3d0bb67b7f736a4a0c82c0e6e9af35919.,0
Merge pull request #1162: Relax LooseObjectStepTests from exact object counts,0.4288472,1675: PreCommandHook: don't lock pack-objects,"We are having some flaky tests because somtimes we get one too many or one too few loose objects in our LooseObjectStepTests. The only reason this can happen (as I see it) is that we are downloading a loose object due to the virtualization layer, and that file exists in a pack somehow. This causes us to delete or add an object during the LooseObjectsStep and have off-by-one errors. Instead of seeing 160 objects (for example) we see 159 or 161. Relax the test conditions to verify that we did not delete all of the loose objects during the steps instead of requiring the count is exact. (We already relaxed this in one direction in #1116.)",0
Do not take GVFSLock for git submodule commands,0.61694694,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,"Some git commands are unsupported in virtualized (VFS4G) repositories, and git will return an error when they are run inside of a virtualized repository. Depending on the type of command, git might block execution before or after calling the pre-command hook. If this command results in the GVFSLock being acquired, this can affect other actions, such as placeholder creation. The git submodule command in particular is causing an issue in an environment that we would like to unblock. Make the change in VFS4G until we can investigate making a deeper fix in git (see issue #1164).",0
"Relax LooseObjectStepTests from exact object counts to ""positive or zero"" checks",0.32103932,1675: PreCommandHook: don't lock pack-objects,,0
ProjectedFSLib: do not copy into GVFS.Platform.Windows output dir,0.52366686,Switched over to use the Windows Projected File System (ProjFS) optional feature on RS4 and later. ProjFS is the new name for the GvFlt driver and its associated user mode library.,"Currently, ProjectedFSLib.dll is expected to be copied into the GVFS.Platform.Windows output directory during a build, and from there is copied into the installer. Due to how this is included in the project, it is not consistently copied into the GVFS.Platform.Windows output directory, and this can cause a build failure simiar to: Error on line in C:\Sources\Vfs4Git\src\GVFS\GVFS.Installer.Windows\Setup.iss: Source file ""C:\Sources\Vfs4Git\src\..\BuildOutput\GVFS.Windows\bin\x64\Debug\ProjectedFSLib.dll"" does not exist. To fix this, we could fix the project setup to have the file copied over consistently. However, this file is not needed by the GVFS.Platform.Windows project. Post RS4, ProjectedFSLib.dll should be provided by the operating system and not copied over the product. Previously, the product had to bring over its own copy of ProjectedFSLib.dll, as it was not providided by the OS. By now, we expect developers to have moved to a version of Windows that includes this the ProjectedFSLib.dll component in box. This also means:   We can remove logic for deleting this file as part of a post build   step on systems where this file should not be provided by the product.   We have to include the ProjFSLib.dll dependency into the Windows   unit test project. Otherwise, running the unit test will fail on   systems that do not have the projfs feature enabled. ",0
Implement Posix IsElevatedImplementation,0.23387194,- Improved the memory usage during MIDX computation.,,0
GitProcess: Enable lower ProcessPriorityClass,0.45631585,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"In an effort to have fewer complaints for running things in the background, give background Git commands a lower process priority.",0
GVFSService: platforms should use appropriate pipe name,0.53480697,Instructions for installing and using GVFS are available at https://github.com/Microsoft/GVFS,"On POSIX platforms the pipe name should be a rooted path so that we have full control over the pipe path. If a relative path is used, then the pipe is created in a temporary dictory, which can be a different location depending on the user's context (i.e. running as root vs normal user). This can result in an process running as root not being able to communicate with the GVFS Service. This change enables the different platforms to create a pipe path that is suitable for the platform, and encapsulates the logic for creating the pipe name for client / server in a single location.",0
Merge pull request #1148: Fix handling of >>,0.44925737,1741: Fix winget tag specification,Fix handling of >>,0
Merge pull request #1151 from Updated Service response to EnablePrjFS request,0.4716049,Pull Requests,Updated Service response to EnablePrjFS request,0
Fix handling of >>,0.32028428,1741: Fix winget tag specification," This will not call PreConvertToFull If we get a modified event for a file that is a placeholder, call PreConvertToFull unders the covers   This will add it to ModifedPaths.dat",0
Updated Service response to EnablePrjFS request,0.4627688,- Better errors around ProjFS installation issues.,"Service (RequestHandler.cs) on the Mac, was sending responses to EnableProjFS requests in an incorrect format. This was causing gvfs service --mount-all to fail with ""un-expected response message"" error. Updated RequestHandler to first create a Message object from EnableProjFS Response and use it in its reply to client. (It was sending string representation of the response before.) This helps create a client parsable response with expected header and body. Also added new UT in MacServiceTests. Service response before the change - GVFS.Common.NamedPipes.NamedPipeMessages+EnableAndAttachProjFSRequest+Response Service response after the change - TRequestResponse|{\""State\"":1,\""ErrorMessage\"":null} Fixes #1053",0
Merge pull request #1147 Update functional test documentation,0.51066315,Pull Requests,Update functional test documentation,0
Additional changes to functional test documentation,0.51522136,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Merge pull request #1131: PostFetchStep: delete and rewrite commit-graph on write error,0.63381994,1647: Fix commit-graph expiration,"We are no longer using 'verify' to check that our commit-graph is valid, but we can still discover some errors during the 'write' command. We currently never recover from this problem. If we inspect the response from the 'write' command, then we can delete and rewrite on failure. This will resolve some issues that users are seeing right now.",0
Add .vsconfig file to declare required VS components,0.37852377,Update components included with internal distribution,,0
Merge pull request #1123 from github/refactor-posix-mac-filesystem,0.45928797,1744: Overhaul build and project systems and drop Mac/POSIX code,"[POSIX, Mac] Refactor BSD-specific values out of POSIXFileSystem This PR is a prerequisite to the addition of a GVFS.Platform.Linux set of classes. In particular, we convert POSIXFileSystem into an abstract class and move the majority of its implementation into MacFileSystem, due to the fact that many of the syscall function signatures and flag values, plus the layout of the struct stat fields, differ between BSD/Darwin and Linux. So we need to separate these out from the POSIX-level commonalities between the two. The visibility of the members of the NativeFileReader subclass is also adjusted, and we remove some of its unused constants such as Create (for the O_CREAT flag, which isn't used here). And we correct the return value of getuid(2) in POSIXPlatform to a 32-bit uint.",0
add comment re O_RDONLY value in MacFileSystem,0.36559832,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Per advice from @wilbaker on PR review.,0
Update functional test documentation,0.5061016,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #1007: Do not attempt to approve credentials for anonymous access,0.5347108,  - Now approves credentials on authentication success,Do not attempt to approve credentials for anonymous access,0
Merge pull request #1117 from pmj/mac-kext-shouldhandle-cleanup-1,0.46540922,1744: Overhaul build and project systems and drop Mac/POSIX code,Mac ProjFS Kext: ShouldHandleFileOpEvent Cleanup Part 1,0
Do not attempt to approve credentials for anonymous access,0.6076106,  - Now approves credentials on authentication success,"The current logic has an issue where it will attempt to approve credentials when communicating with anonymous access, even though there are no credentials to approve. The other logic in this method guards credential operations to non-anonymous auth scenarios. Update logic to only approve / store credentials to non-anonymous auth scenarios.",0
Merge pull request #1137: remove Micrsoft.Diagnostic.Tracing.EventSource,0.42954472,"Other bug fixes, engineering improvements, and test reliability fixes.",Upgrader: do not include Micrsoft.Diagnostic.Tracing.EventSource,0
Merge pull request #1132: netcore build: fix runtime patch selection issues,0.44669706,- A couple of fixes for using VS Code on top of VFS for Git.,netcore build: fix runtime patch selection issues,0
Remove EventSource NuGet packages,0.4736066,1746: Delete custom upgrader,"Product code no longer has a dependency on Microsoft.Diagnostics.Tracing.EventSource, so remove references to NuGet packages.",0
Upgrader: do not include Micrsoft.Diagnostic.Tracing.EventSource,0.59019625,1746: Delete custom upgrader,"The upgrade verb attempts to copy Microsoft.Diagnostic.Tracing.EventSource when copying the ProductUpgrader to the temporary directory to run. If this file is not present, then the upgrade verb will fail. This following commit removes this file: cbe5787d (""Remove in-proc ETW trace event listener"", 2019-02-18) Clean installs of VFS4G that include this commit will no longer have this file in the installation directory, and will not be able to upgrade. This dll is no longer needed or installed during installation, so we remove it from the list of files copied over for upgrade. This is a quick fix - we will also see how to make this less fragile. One option might be to install ""upgrader app"" into its own directory under the VFS For Git installation directory, and then just copy the directory to the temp location, instead of providing a list of files that need to be kept in sync.",0
netcore build: fix runtime patch selection issues,0.41865346,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,"Issue: When switching between command line and IDE builds, the build will often fail with an error similar to: NETSDK1061: The project was restored using Microsoft.NETCore.App version   2.1.9, but with current settings, version 2.1.0 would be used instead. To   resolve this issue, make sure the same settings are used for restore and for   subsequent operations such as build or publish. Typically this issue can occur   if the RuntimeIdentifier property is set during build or publish but not during   restore. For more information, see   https://aka.ms/dotnet-runtime-patch-selection. My understanding is that this can happen when the runtime used by the restore operation does not match the runtime expected by the publish operation. As the publish operation might not call restore itself, it will generate this error when the runtime does not match the expected version. To fix this, the projects that generate self-contained applications will also set the TargetLatestRuntimePatch property to target the latest runtime.",0
Merge pull request #1119 from github/rename-workdir-backing-path,0.45209098,1676: Update Git to v2.27.0.vfs.1.0,"Rename WorkingDirectoryBackingRootPath constants This PR primarily is a followup to #1102 to accommodate the fact that on Linux, the relative location of the working directory backing store will be a short path (i.e., "".gvfs/lower"") and not a single filename like ""src"". Hence we rename the WorkingDirectoryBackingRootName constants to WorkingDirectoryBackingRootPath, akin to how other short relative path constants are constructed in GVFS.Common.GVFSConstants.DotGVFS. We also fix up the internal name of the workingDirectoryBackingRoot argument to the GVFS.Common.Enlistment class, and add a TODO comment regarding the git.cmd script, which is unused on non-Windows platforms.",0
PostFetchStep: delete and rewrite commit-graph on write error,0.58193004,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,"We are no longer using 'verify' to check that our commit-graph is valid, but we can still discover some errors during the 'write' command. We currently never recover from this problem. If we inspect the response from the 'write' command, then we can delete and rewrite on failure. This will resolve some issues that users are seeing right now. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Mac ProjFS kext: Moves fsid/inode query out of ShouldHandleFileOpEvent,0.48806626,1697: Fix functional tests to skip around ProjFS issue,"It turns out that centralising the vnode fsid and inode fetching actually made the code bigger and more complex, so this moves it out of the ShouldHandleFileOpEvent function and simply gets it on demand in each location where it is needed.",0
Mac ProjFS kext: Further cleans up ShouldHandleFileOpEvent function,0.47193018,1697: Fix functional tests to skip around ProjFS issue,"The root finding part of ShouldHandleFileOpEvent is fairly complex but also self-contained, so this change moves it to a helper function to improve readability of the main function.",0
Mac ProjFS Kext: Cleans up the ShouldHandle... functions a little,0.51303875,1697: Fix functional tests to skip around ProjFS issue,"This change makes a start at cleaning up the functions ShouldHandleVnodeOpEvent and ShouldHandleFileOpEvent. The basic sanity checks on a vnode - whether it is on a supported file system, and whether its type is handled by the kext - are moved to a helper function, which is then called by both ShouldHandle() functions. Tracing of these sanity checks is also simplified in the VnodeOp case.",0
Merge pull request #1104 from github/libgit2-nuget-upgrade-linux,0.5342898,- Upgrade supports NuGet feeds as a distribution source.,"Update libgit2 native binaries and include .so for Linux Upgrade the LibGit2Sharp.NativeBinaries NuGet package from v1.0.165 (containing LibGit2Sharp v0.23.1) to v2.0.278, which contains the latest LibGit2Sharp release v0.26. LibGit2Sharp version 0.26 eliminates most external library dependencies other than OpenSSL. In particular, by removing the dependency on libcurl, there is no longer a link-time requirement for a version of libcurl with deprecated CURL_OPENSSL_3 symbols and SSLv3 support. This allows us to include the compiled libgit2-*.so from the LibGit2Sharp.NativeBinaries NuGet package when building on Linux; otherwise, builds on Linux are unsuccessful or else require old and insecure libcurl installations, so this is a prerequisite for a Linux platform build.",0
add note re unused git.cmd script on POSIX systems,0.51654834,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"Add a TODO note regarding the ""git.cmd"" script which is ignored on macOS (and also Linux) as it's not in $PATH and will not override the ""git"" binary because the "".cmd"" extension is not ignored as it is on Windows.",0
correct return from getuid() to unsigned int,0.1872303,- Properly reacquire credentials during nuget upgrader,,0
refactor BSD-only values out of POSIXFileSystem,0.40452692,1744: Overhaul build and project systems and drop Mac/POSIX code,"Also adjust the visibility of the members of the NativeFileReader subclass, and remove some of its unused constants.",0
fixup naming of working dir backing path variables,0.36779064,1685: minor path comparison fixup in ProductUpgrader,"Since on Linux the relative location of the working directory backing store will be a short path (i.e., "".gvfs/lower"") and not a single filename, rename the WorkingDirectoryBackingRootPath constants appropriately. Also fixup the internal name of the workingDirectoryBackingRoot argument to the common Enlistment class.",0
Merge pull request #1065: Add Full Coverage for HandleVnodeOperation,0.4437003,- A couple of fixes for using VS Code on top of VFS for Git.,Add Full Coverage for HandleVnodeOperation,0
Merge pull request #1116: LooseObjectStepTests: Be more flexible with loose object count,0.42634505,1675: PreCommandHook: don't lock pack-objects,"It appears that sometimes we are getting an extra loose object after some of the steps, and it is probably because we are deleting pack-files from the object store so we download a ""missing"" commit or something. Use ShouldBeAtLeast() to demonstrate that the loose objects we expect to remain are still there.",0
Merge pull request #1103 from jeschu1/check_rename,0.46294102,Pull Requests,Enable Rename tests on Mac and add additional tests for coverage,0
LooseObjectStepTests: Be more flexible with loose object count,0.38257247,1675: PreCommandHook: don't lock pack-objects,"It appears that sometimes we are getting an extra loose object after some of the steps, and it is probably because we are deleting pack-files from the object store so we download a ""missing"" commit or something. Use ShouldBeAtLeast() to demonstrate that the loose objects we expect to remain are still there. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Check result of HandleVnodeOperation,0.34867275,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Merge pull request #1111 Update Microsoft.Data.Sqlite packages to version 2.2.4.0,0.41140574,1653: Update Git to include v2.26.1,Update Microsoft.Data.Sqlite packages to version 2.2.4.0,0
New Rename tests for moving files in/out of the Virtualization Root,0.35953495,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git",,0
Turn on Rename tests for Mac,0.31388068,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Merge pull request #1107 Refactor for easier conversion to sqlite,0.46634918,Moves placeholder database into SQLite for better performance.,Refactor for easier conversion to sqlite,0
Update Microsoft.Data.Sqlite packages to version 2.2.4.0,0.37348652,The local file size cache was migrated from ESENT to SQLite,,0
Merge pull request #1094: Delete corrupt loose objects during LooseObjectsStep,0.43525136,1675: PreCommandHook: don't lock pack-objects,"If we have a corrupt loose object, the git pack-objects command will fail as it cannot put that object into a pack-file. This stops all future iterations of the LooseObjectsStep from succeeding, so users will be stuck in a bad situation.   Refactor WriteLooseObjectIds() to rely on a new LooseObjectsBatch() method.   On failure to create a pack, check all objects in the batch (using LooseObjectsBatch() and libgit2) and delete those that fail.   Start disposing the repo in the dehydrate verb for safety.   Create a functional test that verifies this behavior. Move the LooseObjectStepTests to have a new enlistment for each test, since we are messing with the object store. Part of the issue is that .NET doesn't allow us to move files that are marked as read-only, which becomes problematic as tests create pack-indexes and other files.   Resolves #1079",0
Rename GetAllEntriesAndPrepToWriteAllEntries to GetAllEntries,0.2545939,1664: Update USN journal entries for projected folders,,0
Rename filePlaceholdersFromDiskByPath since it is now a HashSet,0.3249763,Adds additional logging for folder and file placeholder creation.,,0
Rename EstimatedPlaceholderCount to PlaceholderCount,0.4135506,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Update commments with renamed method names for GetAllEntriesAndPrepToWriteAllEntries,0.32714066,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Move LooseObjectStepTests to enlistment per test case,0.42036358,- Improvements to compact and maintain the ModifiedPaths.dat database to help mitigate the problem of command perf degrading over time in an enlistment.,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
LooseObjectStepTests: return temp packs at end of test,0.3860457,1675: PreCommandHook: don't lock pack-objects,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
LooseObjectStepTests: use Git to delete loose objects,0.515097,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
DehydrateVerb: Properly dispose repo and context,0.38965833,- The installer now unmounts and remounts existing repos automatically,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
LooseObjectsStep: Use ObjectExists() and other cleanups,0.36459315,1675: PreCommandHook: don't lock pack-objects,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
LooseObjectsStep: use TryGetIsValidObject,0.37613428,1675: PreCommandHook: don't lock pack-objects,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
LooseObjectsStep: move filename logic to helper method,0.3720211,1730: Fix an issue with FastFetch when deleting files,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
LooseObjectsStep: Clarify behavior of TryGetIsBlob,0.3646056,1675: PreCommandHook: don't lock pack-objects,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Add functional test for corrupt loose object,0.44619375,1697: Fix functional tests to skip around ProjFS issue,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Delete corrupt loose objects,0.4017486,1730: Fix an issue with FastFetch when deleting files,Signed-off-by: Derrick Stolee dstolee@microsoft.com,0
Refactor LooseObjectsStep.WriteLooseObjectIds,0.32797968,1675: PreCommandHook: don't lock pack-objects,We will need to enumerate a batch of loose objects independently of writing them to a stream. Pull out the loop and consume it as an enumerator instead.,0
Merge pull request #1102 Rename LocalStorageRoot,0.4162219,Pull Requests,Rename LocalStorageRoot,0
Merge pull request #1109: readme formatting tweaks,0.476628,1750: Update Readme.md,,0
Minor formatting proposals,0.36697376,General improvements:,,0
Merge pull request #1097 from jamill/vs2019_build_instructions,0.44620848,Pull Requests,Enable building with Visual Studio 2019,0
Merge pull request #1101 from Use published version of Service,0.52371037,Pull Requests,,0
update libgit2 native binary and include for Linux,0.45298818,1706: Update Git to include GCM Core update,"Upgrade the LibGit2Sharp.NativeBinaries NuGet package from v1.0.165 (containing LibGit2Sharp v0.23.1) to v2.0.278, which contains the latest LibGit2Sharp release v0.26. LibGit2Sharp version 0.26 eliminates most external library dependencies other than OpenSSL.  In particular, by removing the dependency on libcurl, there is no longer a link-time requirement for a version of libcurl with deprecated CURL_OPENSSL_3 symbols and SSLv3 support. This allows us to include the compiled libgit2-*.so from the LibGit2Sharp.NativeBinaries NuGet package when building on Linux.",0
Rename LocalStorageRoot,0.24510753,The local file size cache was migrated from ESENT to SQLite,,0
Use published version of Service,0.4469908,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,"On the Mac, use published version of GVFS.Servcie rather than using dotnet GVFS.Service.dll Fixes #1095",0
Merge pull request #1074: Separate LocalStorageRoot from WorkingDirectoryRoot,0.38059756,- A couple of fixes for using VS Code on top of VFS for Git.,"On platforms where a layered filesystem is used (i.e. Linux), the .git directory must be accessed on the lower filesystem directly, and not through the projection as that would cause a call back into the provider. This PR introduces the concept of a ""local storage root"", defined as the directory where actual stored objects are located. On platforms where filters are used (Windows and Mac), this is the same as the working directory root -- the hydrated files (and the .git directory) exist physically in place. On layered filesystems, the objects are stored in a separate directory (currently .gvfs/lower relative to the enlistment root). We need to be sure to make accesses to .git in this directory, not via the projection.",0
Enable building with Visual Studio 2019,0.44752973,"A new config setting allows updating USN journals, which is needed when using BuildXL with VFS for Git.",Update the Windows build script to be able to build with Visual Studio 2019 tooling and update Readme with details. Includes the following changes:   Tweak logic to find msbuild for different Visual Studio versions   Remove checks for unnecessary packages   Add checks for .Net Core 2.1 development packages   Tweak check for Windows 10 SDK (10.0.10240.0) ,0
this should go in LinuxPlatform,0.30068904,Switched over to use the Windows Projected File System (ProjFS) optional feature on RS4 and later. ProjFS is the new name for the GvFlt driver and its associated user mode library.,,0
Separate LocalStorageRoot from WorkingDirectoryRoot,0.28754148,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",,0
Merge pull request #1027 from github/posix-hooks-refactor,0.48691028,Pull Requests,[POSIX] rename common Mac hook code to share with Linux,0
Merge pull request #1051 from Auto-mount repos on Mac & UT,0.47197396,Pull Requests,,0
Auto-mount repos on Mac & UT,0.5228342,- The installer now unmounts and remounts existing repos automatically,"Updated GVFS.Service on Mac to auto-mount registered repositories on user login. Also added new UT for GVFS.Service on Mac  Added PATH environment setting in Service's launchd plist file Moved RepoRegistryTests.cs from GVFS.UnitTests.Windows to   GVFS.UnitTests Made GVFSPlatformConstants abstract. Specific platforms (Mac, POSIX,   Windows & Mock) has been updated to provide overrides for required   methods. Updated GVFSPlatform Constructor to not accept executable and   installer extension string as args. These are now set by specific   platforms using GVFSPlatformConstants.  fixes #646 and fixes #996",0
Merge pull request #1090 Replace use of Count on FileSystemTaskQueue with IsEmpty,0.40487742,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",Replace use of Count on FileSystemTaskQueue with IsEmpty,0
Replace calls to Count with IsEmpty,0.18265069,1745: do not exit early if no blobs found for a period when prefetching,Using Count on concurrent collections carries a significant performance cost when using .Net Core.  IsEmpty is much more performant.  This change replaces the use of Count in performance critical paths for the Background operations.,0
Add interface for interaction with the placeholder database,0.51919466,Moves placeholder database into SQLite for better performance.,,0
use std::string length() in common POSIX hook code,0.21658295,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index",,0
rename common Mac hook code to share with Linux,0.4618392,1744: Overhaul build and project systems and drop Mac/POSIX code,Rename common.mac.cpp to common.posix.cpp so it can be used as a basis for Linux hook programs as well. Also replace the BSD-specific strlcat() and strlcpy() with generic C string functions from the  standard library header.,0
Updated tests to cover more functionality and be clearer,0.47786945,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Merge pull request #1073 GVFS.Service should copy ProjectedFSLib.dll when it's missing and the installed ProjFS version matches the packaged version,0.55674094,Bug Fix: Fixes a bug with gvfs upgrade that causes versions v1.0.20112.1 from upgrading from private feeds.,GVFS.Service should copy ProjectedFSLib.dll when it's missing and the installed ProjFS version matches the packaged version,0
Move ProjFSFilterTests MockTracer creation into SetUp method,0.62646765,1697: Fix functional tests to skip around ProjFS issue,,0
Add unit tests for TryCopyNativeLivIfDriverVersionsMatch,0.47369337,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #1085: Refresh AuthoringTests.md,0.46308607,1750: Update Readme.md,Fix Markdown formatting and some old references.,0
refresh AuthoringTests.md,0.41184503,1750: Update Readme.md,Fix Markdown formatting and some old references.,0
"Move GetVersionInfo to PhysicalFileSystem, cleanup variable names, and fix TryEnablePrjFlt return value",0.45632455,1697: Fix functional tests to skip around ProjFS issue,,0
Replace uses of PlaceholderListDatabase.PlaceholderData with IPlaceholderData,0.5024581,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Add interface for placeholder data to allow class sqlite data,0.547398,Moves placeholder database into SQLite for better performance.,,0
Merge pull request #1071 from jamill/github_upgrader_filesystem,0.5416007,1676: Update Git to v2.27.0.vfs.1.0,Teach Enlistment.GetNewGVFSLogFileName to take FileSystem parameter,0
Merge pull request #1068: Upgrade to new ProjFS versions,0.59555423,- Better errors around ProjFS installation issues.,Upgrade to new ProjFS versions,0
Teach Enlistment.GetNewGVFSLogFileName to take FileSystem parameter,0.4510452,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,"This will enable the Enlistment.GetNewGVFSLogFileName method to interact with the file system through the file system abstraction layer, enabling us to unit test this method and methods that call this method. Instead of updating all call sites to pass in a physical file system, this is an optional argument. If one is passed in, it will be used. If no physical file system argument is provided, a default physical file system object will be created.",0
Make TelemetryDaemonEventListener and JsonTracer thread-safe and async,0.24334817,1732: Use one NuGet feed,Ensure that modifications and enumeration of the JsonTracer::listeners collection is safe with multiple threads adding/removing listeners at the same time as we're writing messages. A ConcurrentBag is used to achieve this aim. Also ensure the TelemetryDaemonEventListener does not hold up calling threads posting messages over the pipe by queuing up messages to be sent on a single background thread.,0
"Make TelemetryDaemonEL, JsonTracer thread-safe + async",0.26788977,1732: Use one NuGet feed,"Ensure that modifications and enumeration of the JsonTracer::listeners collection is safe for being accesses from multiple threads. Also create a background thread to write to TelemetryDaemonEventListener pipe, freeing up the trace message entry thread to continue. Since message send/failure now happens after the call to write an event message the mechanism for reporting EventListener failure and recovery has been changed from a method return value approach to an event sink/ callback model to allow communication back to the JsonTracer when a listener fails in the background.",0
Don't fall back to installing via INF when enabling the optional feature fails (#127),0.44149974,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
Copy ProjectedFSLib.dll to VFS4G's install directory when prjflt.sys on machine matches version in package,0.475674,Switched over to use the Windows Projected File System (ProjFS) optional feature on RS4 and later. ProjFS is the new name for the GvFlt driver and its associated user mode library.,,0
Merge pull request #1072: GitMaintenanceStep: Throw if stopped while Git is running,0.53242666,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"The GitMaintenanceStep throws a StoppingException if the RunGitCommand() method is run after a Stop() call. However, it doesn't throw when the Stop() call happens during the Git process. This requires extra handling of the Stopping boolean after receiving a response from RunGitCommand(). Such extra handling was added in #1064, but would not be necessary with this change. The better thing to do is to throw the StoppingException after the Git process completes. Add a unit test that verifies we automatically skip the remainder of a PerformMaintenance() method in a subclass. Looking through the error logs, all logged instances of a failure during 'commit-graph verify' or 'multi-pack-index verify' are actually due to this issue. Otherwise we would see errors from GitMaintenanceStep saying ""Git process {command} failed with errors:"" and those messages do no appear in the logs.",0
Add Full Coverage for HandleVnodeOperation,0.32683223,- Added better diagnostic info in the GVFS logs when there are network errors,,0
GitMaintenanceStepTests: Combine utility subclasses,0.35439,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index","The GitMaintenanceStepTests have three subclasses of GitMaintenanceStep to invoke the Stop() method at different times and report which blocks were reached. Instead, use an enum to specify when we should call Stop() and use the same subclass in all methods. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
GitMaintenanceStep: Throw if stopped while Git is running,0.50945705,- git status now supports an option to avoid doing its ahead/behind calculations. This allows the user to decide if they want to skip that overhead if all they care about is the status of the working directory.,"The GitMaintenanceStep throws a StoppingException if the RunGitCommand() method is run after a Stop() call. However, it doesn't throw when the Stop() call happens during the Git process. This requires extra handling of the Stopping boolean after receiving a response from RunGitCommand(). The better thing to do is to throw the StoppingException after the Git process completes. Add a unit test that verifies we automatically skip the remainder of a PerformMaintenance() method in a subclass. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Upgrade to new ProjFS versions,0.6456237,- Better errors around ProjFS installation issues.,,0
Merge pull request #1060 Fix FastFetch build in VS for Mac,0.5651102,- A couple of fixes for using VS Code on top of VFS for Git.,Fix FastFetch build in VS for Mac,0
Merge pull request #1064: Maintenance: Check Stopping before reacting to error code,0.48809808,Pull Requests,"When someone unmounts, it triggers a Stop() on the maintenance step that is currently running. This can interrupt longer-running Git commands more often than other actions, so check Stopping before checking the error code for a response. This is more likely a reason for people to hit this error than any data-shape issues that we were expecting to cause a problem. While I am updating the check around the commit-graph verify command, I am not un-commenting it as we don't have the full fix for the ""too many pack-files"" case.",0
Maintenance: Check Stopping before reacting to error code,0.4561557,Background tasks run with lower priority to address user feedback on maintenance job performance.,"When someone unmounts, it triggers a Stop() on the maintenance step that is currently running. This can interrupt longer-running Git commands more often than other actions, so check Stopping before checking the error code for a response.",0
Add comments to FastFetch.csproj,0.4984474,A case where FastFetch would not download a small number of files has been fixed.,,0
Fix FastFetch build in VS for Mac,0.6168735,A case where FastFetch would not download a small number of files has been fixed.,Use Otherwise for Mac in FastFetch csproj,0
Merge pull request #1058: tweak GVFS.props,0.54102093,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",GVFS.props: remove extra path marker before BuildOutput and package dir,0
GVFS.props: make path markers more consistent,0.4772529,- GVFS has a better icon.,"Fixes an issue where incremental builds are broken due to ""GenerateBindingRedirects"" task failing. In commit f2125719, a preceding path marker ('\') was added to the BuildOutput and Package directories. When the SolutionDir already has a trailing slash, this will result in paths with double slashes. Certain MSBuild tasks have trouble with double slash, including the GenerateBindingRedirects task. For example: `root\src\..\BuildOutput' is resolved to: root\src\BuildOutput, instead of root\BuildOutput as we intend This change ensures that the SolutionDir variable has a trailing slash, and removes the preceding slash in BuildOutput and Package directory variables.",0
Merge pull request #1039: introduce OrgNuGetUpgrader,0.5054538,- Upgrade supports NuGet feeds as a distribution source.,Client side logic to interact with an org info server to anonymously query for available VFSForGit versions,0
Merge pull request #1055 Fix race condition in MockVirtualizationInstance.CompleteCommand,0.40781555,1697: Fix functional tests to skip around ProjFS issue,Fix race condition in MockVirtualizationInstance.CompleteCommand,0
AzDevOpsFromNuGetFeedUrlParser: parsing logic for NuGet Feed URLs,0.5507109,1732: Use one NuGet feed,,0
ProductUpgraderTimer: use ProductUpgrader factory,0.59221554,1672: ProductUpgrader: be extra careful about a copy loop,,0
ProductUpgrader: refactor TryCreateProductUpgrader,0.59355366,1685: minor path comparison fixup in ProductUpgrader,,0
Introduce OrgNuGetUpgrader,0.44750553,- Upgrade supports NuGet feeds as a distribution source.,This is an upgrader that will query an anonymous endpoint to get which version of VFS for Git it should download from a NuGet feed.,0
Add client to communicate with org info server,0.18387093,- We have started porting parts of the product to .NET Standard.,,0
ProductUpgrader: add SuportsAnonymousQuery flag,0.5874792,1685: minor path comparison fixup in ProductUpgrader,,0
Remove public CompletionResult property,0.3160523,1674: Config: disable status.submoduleSummary,,0
Merge pull request #1041 Update PrjFSKextLogDaemon to monitor and record vnode cache health,0.451411,- Added better diagnostic info in the GVFS logs when there are network errors,Update PrjFSKextLogDaemon to monitor and record vnode cache health,0
Fix race condition in MockVirtualizationInstance.CompleteCommand,0.34061775,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #1050: Turn on PackFileMaintenanceStep,0.47938496,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",,0
Merge pull request #1052: GVFS.props: Use better path concatenation and initialize SolutionDir,0.5594307,- A couple of fixes for using VS Code on top of VFS for Git.,,0
Fix totalFindRootForVnodeHits so that it's pulling the value from VnodeCacheHealthStat_TotalFindRootForVnodeHits,0.3699342,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Rename PrjFSHealthData and health related functions/enums to be vnode cache specific,0.3626663,Improves the rate of .gvfsCache cleanup.,,0
Switch from atomic_exchange_explicit to atomic_store_explicit where appropriate,0.36363605,1675: PreCommandHook: don't lock pack-objects,,0
Merge pull request #1026 Track tombstones so that we know when DeleteFile needs to be called,0.57646143,1689: Make delete docs more verbose,Track tombstones so that we know when DeleteFile needs to be called,0
Use memory_order_relaxed for counters,0.39071292,- Improved the memory usage during MIDX computation.,,0
GVFS.props: Use better path concatenation,0.465125,- GVFS has a better icon.,"When building a single project using 'dotnet build' from a project directory instead of building from the solution file, the SolutionDir property is undefinded. Add a setting to initialize its location two levels above the project level. Also add an extra path marker ('\') between the SolutionDir and the "".."" that is intended to move the BuildOutput and package directories out of the source directory.",0
Merge pull request #1043: Add Code Coverage for ShouldHandleFileOpEvent,0.4631709,1697: Fix functional tests to skip around ProjFS issue,Add Code Coverage for ShouldHandleFileOpEvent,0
Merge pull request #1049 from Fixing failure in full FT,0.47562122,Pull Requests,Failing test name - GVFS.FunctionalTests.Tests.EnlistmentPerFixture.UpgradeReminderTests.UpgradeTimerScheduledOnServiceStart(),0
Turn on PackFileMaintenanceStep,0.40139708,1675: PreCommandHook: don't lock pack-objects, Add PackFileMaintenanceStep to the queue via a timer that starts in 30 minutes and runs every 12 hours,0
Use explicit string comparision,0.18394789,1717 [HOTFIX] Update Git to remove ODB string check,,0
Check to make sure tombstone folder entry is removed from placeholder file,0.41994524,Adds additional logging for folder and file placeholder creation.,,0
Update DiskLayoutVersionTests to new version number,0.37878472,1697: Fix functional tests to skip around ProjFS issue,,0
Add functional test to make sure possible tombstones are removed,0.38572055,1697: Fix functional tests to skip around ProjFS issue,,0
Fix name of placeholder tests file,0.40140796,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Add test to PlaceholderDatabaseTests for tombstone placeholders,0.49612597,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Update the upgrade tests current disk layout major version,0.43672574,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
Add upgrader for the tombstone folder placeholders,0.46695226,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
Rework to shared code and use virtual method for tombstone processing,0.2981396,- Gracefully handle a missing shared object cache pack directory.,,0
Update MockFileSystemVirtualizer to implement abstract methods,0.4585488,1697: Fix functional tests to skip around ProjFS issue,,0
Rework to move platform specific code,0.53590864,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Track tombstones so that we know when DeleteFile needs to be called,0.4774995,1689: Make delete docs more verbose,,0
Fixing full FT failure,0.38884425,1730: Fix an issue with FastFetch when deleting files,"When GVFS.Service creates its log directory, the log directory created will be given the name of the Service. Name of the Service can change though. When it is launched by Functional tests, its name would be different. Replaced the hard coded log directory name with run-time name.",0
Merge pull request #1046 Add category for extra tests to run in PRs,0.5121187,Pull Requests,Add category for extra tests to run in PRs,0
Merge pull request #998 from Service Mac repo-registry & IPC,0.44502038,Pull Requests,Service Mac repo-registry & IPC,0
Service Mac repo-registry & IPC,0.41353542,1652: RepoRegistry: ignore non-existent repos,"Enabling GVFS.Service on the Mac. Service now listens for client requests over named pipe and services the requests. Service supports register, un-register and listing of registered repositories. Change details - Added NamedPipeMessages handler and repo-registry handlers to GVFS.Service.Mac - Updated GVFS Service directory on Mac to   ~/Library/Application\ Support/GVFS/GVFS.Service - Updated Service Logs directory to   ~/Library/Application\ Support/GVFS/GVFS.Service/Logs - Repo-registry file location   ~/Library/Application\ Support/GVFS/GVFS.Service/repo-registry - Service helps gvfs mount and unmount commands to register and unregister   respectively with repo-registry - New RequestHandler class to handle client requests. Separate   RequestHandler.Windows.cs to handle Windows specific requests - Moved Paths.GetServiceDataRoot to GVFSPlatform - Renamed GetServiceDataRoot to GetDataRootForGVFS. The old name was confusing   (it was not clear whether the name refered to GVFS.Service's root directory or   GVFS ProgramData directory.) To get ProgramData (or equivalent on Mac)   directory use  GVFSPlatform.GetDataRootForGVFS(). To get GVFS.Services   directory inside ProgramData (or equivalent on Mac) use   GVFSPlatform.GetDataRootForGVFSComponent(""GVFS.Service"") - Added new MacPlatform.Shared.cs (this is needed because the directory   ""~/Library/Application\ Support"" exists on Mac but not on Linux. So   POSIXPlatform.Shared.cs cannot reference that path) - Removed UnderContstructionFlags.supportsGVFSService - Restructured GVFS.Service directory. Mac & Windows specific files in Service   project directory have .Mac & .Windows appended to the filenames. - Created a new noop handler for EnableAndAttachProjFSRequest on Mac",0
Add dependency for fastfetch on the GVFS.FunctionalTests.Windows,0.5404097,A case where FastFetch would not download a small number of files has been fixed.,,0
Change full suite to extra coverage with option to only run the extra ones,0.3389501,Includes fixes to config settings for internal users only,,0
Poll for health data every 30 minutes instead of 15 minutes,0.17057557,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Reset cacheStats.cacheEntries in InvalidateCache_ExclusiveLocked,0.36606547,- Fix backoff on cache server size endpoint 404.,,0
Add Code Coverage for ShouldHandleFileOpEvent,0.3828817,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #1015: Test Coverage for ProcesswasSpawnedByRegularUser,0.4660211,1697: Fix functional tests to skip around ProjFS issue,Test Coverage for ProcesswasSpawnedByRegularUser,0
Merge pull request #1038: Close directory fds when walking directory hierarchy in PrjFSLib,0.48024595,1664: Update USN journal entries for projected folders,Close directory fds when walking directory hierarchy in PrjFSLib,0
Update PrjFSKextLogDaemon to monitor and record Vnode cache health,0.4422496,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Test Coverage for ProcessWasSpawnedByRegularUser,0.41515508,1697: Fix functional tests to skip around ProjFS issue,,0
Close directory fds when walking directory hierarchy in PrjFSLib,0.37854376,1664: Update USN journal entries for projected folders,"We have two spots in PrjFSLib where we traverse a directory structure, calling opendir on directories encountered, but we never call closedir on those directories before moving onto the next directory. Now both HandleRecursivelyEnumerateDirectoryRequest and RecursivelyMarkAllChildrenAsInRoot properly close directory file descriptors when walking the directory hierarchy. This was detected while standing up the Large Repo Perf Tests on macOS. I noticed that my machine was running out of file descriptors after running a test where thousands of placeholders (files and directories) are created and then deleted. Using lsof -a -p <PID> on the PID of GVFS.Mount, I saw that we had a bunch of file descriptors open for folders that were already deleted.",0
Merge pull request #885: Updates for new ProjFS API,0.58690464,- Better errors around ProjFS installation issues.,Updates for new ProjFS API,0
Merge pull request #1036 from jamill/normalize_line_endings,0.37112507,Pull Requests,Normalize line endings,0
NuGetUpgraderTests: normalize line endings,0.3438483,- Upgrade supports NuGet feeds as a distribution source.,,0
NuGetUpgrader: normalize line endings,0.512322,- Upgrade supports NuGet feeds as a distribution source.,,0
ProductUpgrader: normalize line endings,0.5423361,1685: minor path comparison fixup in ProductUpgrader,,0
Minor cleanup,0.45258933,General Improvements,,0
Update Dispose pattern,0.30664527,1746: Delete custom upgrader,,0
Merge pull request #1030: Add more time for disposal,0.45495674,1689: Make delete docs more verbose,Add more time for disposal,0
"Using new API, FileNotFound will not be called",0.30705157,Adds additional logging for folder and file placeholder creation.,,0
Implement IRequiredCallbacks in Windows Virtualization classes,0.32261407,1683: GVFS.SignFiles.csproj: include more DLLs for signing,,0
William Feedback,0.38710693,General Improvements,,0
Merge pull request #1023: make ProductUpgrader more testable,0.5703919,1685: minor path comparison fixup in ProductUpgrader,Make ProductUpgrader more testable,0
ProductUpgrader: add unit tests for ProductUpgrader factory method,0.47100723,1672: ProductUpgrader: be extra careful about a copy loop,,0
Merge pull request #1029: exclude .a files from code coverage,0.42583612,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",exclude .a files from code coverage,0
Add more time for disposal,0.30704942,1689: Make delete docs more verbose,,0
exclude .a files,0.31185424,1652: RepoRegistry: ignore non-existent repos,,0
MockLocakGVFSConfig: move to non-windows mocking project,0.44904196,1697: Fix functional tests to skip around ProjFS issue,,0
ProductUpgrader: inject ICredentialStore dependency,0.50670934,1685: minor path comparison fixup in ProductUpgrader,,0
NuGetUpgrader: inject ICredentialStore dependency,0.5510671,- Upgrade supports NuGet feeds as a distribution source.,,0
ProductUpgrader: inject LocalGVFSConfig dependency,0.5160204,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
GitHubUpgrader: inject LocalGVFSConfig dependency,0.61644745,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
NuGetUpgrader: inject LocalGVFSConfig dependency,0.52392733,- Upgrade supports NuGet feeds as a distribution source.,,0
Merge pull request #687: readme: update path for PrjFS project,0.5214647,1664: Update USN journal entries for projected folders,,0
Merge pull request #1014 Check the projection for the folder before attempting to delete,0.5240867,Git commands are now allowed to delete an empty directory,Check the projection for the folder before attempting to delete,0
Merge pull request #1017 POSIX: Change default location of .gvfsCache folder from /.gvfsCache to ~/.gvfsCache,0.56573915,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",POSIX: Change default location of .gvfsCache folder from /.gvfsCache to ~/.gvfsCache,0
Remove platform specific help text for clone verb,0.26743606,1689: Make delete docs more verbose,,0
Merge pull request #1022: AutomaticallyDisposesAfterNoUse additional test logging,0.44338176,Pull Requests,AutomaticallyDisposesAfterNoUse additional test logging,0
Improve error handling and add functional test,0.43419713,1697: Fix functional tests to skip around ProjFS issue,,0
"Merge pull request #999 use ""which"" to locate git installation",0.48050743,1663: Update Git to v2.27.0,"use ""which"" to locate git installation",0
Merge pull request #715 Mac: vnode cache,0.47854808,1676: Update Git to v2.27.0.vfs.1.0,Mac: vnode cache,0
Add a vnode cache to the kext to improve the performance of finding a vnode's virtualization root.,0.3584622,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Merge pull request #1004 from Test reliability issue #852,0.51622146,Pull Requests,"About the test failure - when Upgrade reminder marker file is created by the Service, git hooks should start showing reminder messaging. That does not seem to happen sometimes. It is not clear whether it was a failure in the Service (the Service was not able to create the marker file) or if it was the git hooks which failed to display the reminder. Added better logging - Log details on failures. Updated Service to log message when upgrade reminder marker file is created or deleted.",0
AutomaticallyDisposesAfterNoUse additional test logging,0.3996309,Adds additional logging for folder and file placeholder creation.,,0
Test reliability issue #852,0.45253807,Other bug fixes for reliability,Added better logging - Log details on failures. Updated Service to log message when upgrade reminder marker file is created or deleted.,0
Merge pull request #1016 from jeschu1/UseMainForkIfNamedStream_coverage,0.4190364,Pull Requests,Test Coverage for UseMainForkIfNamedStream,0
remove unit test,0.33950883,1697: Fix functional tests to skip around ProjFS issue,,0
"use ""where"" to locate git installation",0.48585775,Includes Git v2.27.0,,0
Update comments and remove unused code,0.3377523,1689: Make delete docs more verbose,,0
Use IsPathProjected for determining if folder is still in projection,0.4168139,1664: Update USN journal entries for projected folders,,0
Check the projection for the folder before attempting to delete,0.49238443,Git commands are now allowed to delete an empty directory,"Because attempting to delete a folder placeholder is an expensive operation especially when there are hundreds of thousands, we want to reduce the number that we need to try to delete.  There are a few criteria for attempting the delete. First if the folder is in the folderPlaceholdersToKeep list it will not be deleted.  Then if one of the following is true it will try to delete the folder.  If the path is no longer in the projection If the path is in the projection but is a file and not a folder If the path no longer exists on the file system - this is in the case of tombstones on windows.",0
Merge pull request #1018 Mac: Check the return value of stat in PrjFS_DeleteFile,0.45607927,1689: Make delete docs more verbose,Mac: Check the return value of stat in PrjFS_DeleteFile,0
Mac: Change default location of .gvfsCache folder from /.gvfsCache to ~/.gvfsCache,0.46662354,Improves the rate of .gvfsCache cleanup.,,0
Check the return value of stat in PrjFS_DeleteFile,0.419521,1730: Fix an issue with FastFetch when deleting files,,0
"Merge pull request #926: [Mac, Linux] refactor Mac platform into POSIX base",0.6685458,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Add test coverage for UseMainForkIfNamedStream,0.3939833,1697: Fix functional tests to skip around ProjFS issue,,0
rename,0.2932827,Major Changes,,0
Merge pull request #1010: Improve WriteWithoutClose \ CreateFileWithoutClose Stability,0.49925125,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,Improve WriteWithoutClose \ CreateFileWithoutClose Stability,0
More logging for failing tests,0.38896,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Merge pull request #984 from pmj/mac-projfs-absolute-paths,0.5267708,- Better errors around ProjFS installation issues.,Mac ProjFS: Moves all relative path calculations to user space.,0
remove Windows InstallerExtension,0.44536412,1746: Delete custom upgrader,,0
remove Mac InstallerExtension,0.5080032,1746: Delete custom upgrader,,0
remove GetInstallerExtension,0.45757252,1746: Delete custom upgrader,,0
revert whitespace changes,0.2779776,Major Changes,,0
Merge pull request #1012 Make sure fastfetch.dll is copied to the correct location to run tests,0.5573457,A case where FastFetch would not download a small number of files has been fixed.,Make sure fastfetch.dll is copied to the correct location to run tests,0
Make sure fastfetch.dll is copied to the correct location to run tests,0.62648875,A case where FastFetch would not download a small number of files has been fixed.,,0
Merge pull request #1009: Remove Code Coverage Exclusion for ShouldIgnoreVnodeType,0.44537228,1697: Fix functional tests to skip around ProjFS issue,Remove Code Coverage Exclusion for ShouldIgnoreVnodeType,0
rework ShouldIgnoreVnodeType for coverage,0.3648196,1697: Fix functional tests to skip around ProjFS issue,,0
Format Fix,0.3010704,Major Changes,,0
Remove Exclusion,0.23915312,1652: RepoRegistry: ignore non-existent repos,,0
Merge pull request #1008 from Mac uninstaller launchd issue,0.45770407,1703: Delete all macOS projects,"Un-installer was not deleting launchd plist files when LaunchAgent unload fails. This was causing a dangling launchd plist file that was pointing to VFSForGit assemblies that no longer exist on disc. Launchd disables the VFSForGit services, causing future VFSForGit installs to fail. Updated un-installer to remove the launchd plist file even when the unloading fails. When such a failure happens, user will have to manually logout and re-login for the un-install to be complete. Fixes #1005",0
Mac uninstaller launchd issue #1005,0.42598605,1668: ProductUPgradeTimer: remove unacceptable Environment.Exit(),"Un-installer was not deleting launchd plist files when LaunchAgent unload fails. This was causing a dangling launchd plist file that was pointing to VFSForGit assemblies that no longer exist on disc. Launchd disables the VFSForGit services, causing future VFSForGit installs to fail. Updated un-installer to remove the launchd plist file even when the unloading fails. When such a failure happens, user will have to manually logout and re-login for the un-install to be complete.",0
Merge pull request #1006 Add additional diagnostics to GitStatusAfterRenameFileIntoRepo functional test,0.53162634,This includes the Git 2.30.2 security fix (CVE-2021-21300).,Add additional diagnostics to GitStatusAfterRenameFileIntoRepo functional test,0
Merge pull request #997: Added Code Coverage to build,0.471242,Pull Requests,Added Code Coverage to build,0
Merge pull request #950: NuGetUpgrader: defer credential acquisition,0.68865365,- Properly reacquire credentials during nuget upgrader,NuGetUpgrader: defer credential acquisition,0
GitAuthentication: remove credential string from trace data,0.54837644,- Consume new GCM to fix git credential erase behavior,,0
NuGetUpgrader: override mock NuGetFeed SetCredentials,0.66784513,- Properly reacquire credentials during nuget upgrader,,0
Test NuGet credential re-acquisition,0.67562014,- Properly reacquire credentials during nuget upgrader,,0
Introduce ICredentialStore,0.26111645,"A background task will now compress and deduplicate the pack-file data in the shared object cache, resulting in more sustainable disk usage",,0
Update credential methods on GitProcess,0.61862546,This includes the Git Credential Manager Core v2.0.394.50751.,The approve / reject credential methods could fail - make them follow the Try* pattern.,0
Add additional diagnostics to GitStatusAfterRenameFileIntoRepo,0.48776168,1717 [HOTFIX] Update Git to remove ODB string check,,0
Merge pull request #1002 Add more logging when test gets access denied from moving src folder,0.42786297,Pull Requests,Add more logging when test gets access denied from moving src folder,0
Merge pull request #1001 from Test reliability issue fix,0.53924924,Other bug fixes for reliability,"VFSForGit installer was trying to mount repositories that were registered for auto-mount by previous test runs. Subsequent Installers used to fail sometimes, with error 17 while trying to auto-mount such repositories. Un-installer was already removingProgramData\GVFS\GVFS.Upgrade directory. Updated it to rather remove ProgramData\GVFS so that repo-registry and other state info associated with current install is removed, before the next tests are run. Fixes #911",0
Add more logging when test gets access denied from moving src folder,0.31516173,Adds additional logging for folder and file placeholder creation.,,0
Test reliability issue fix,0.53288984,Other bug fixes for reliability,"VFSForGit installer was trying to mount repositories that were registered for auotmount by previous test runs. Subsequent Installers used to fail sometimes, with error 17 while trying to auto-mount such repositories. Un-installer was already removing ProgramData\GVFS\GVFS.Upgrade directory. Updated it to remove ProgramData\GVFS so that repo-registry and other state info associated with current install is removed, before the next tests are run. Fixes #911",0
Added Code Coverage to build,0.3819587,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
remove POSIXFileBasedLock for now,0.39640844,1730: Fix an issue with FastFetch when deleting files,,0
"Mac ProjFS lib: Renames ""fullPath"" to ""absolutePath"" in message handlers",0.5067751,- Better errors around ProjFS installation issues.,,0
Mac ProjFS: Moves all relative path calculations to user space.,0.52291524,- Better errors around ProjFS installation issues.,This change removes the relative path calculation from the kext and changes the native ProjFS library to expect absolute paths in messages from the kernel. The absolute path is passed through to event handlers where in many cases the logic for re-combining the relative path into an absolute one could be removed as well.,0
Merge pull request #988 from pmj/mac-kext-c11-atomics,0.46255976,1744: Overhaul build and project systems and drop Mac/POSIX code,Mac kext: Replaces use of OSAtomic with standard C11 atomic operations,0
ensure POSIXFileBasedLock isn't reused blindly,0.36491948,- Multiple mount process reliability bugs have been squashed.,"Some constants differ per @chrisd8088's comment here: https://github.com/Microsoft/VFSForGit/pull/926#discussion_r265886976 When we add the Linux project, we should factor out of POSIXFileBasedLock what's Mac-specific.",0
revert to MacDiskLayoutUpgradeData,0.31083238,Please see the full change log.,,0
using GVFS.Platform.POSIX,0.65615225,Instructions for installing and using GVFS are available at https://github.com/Microsoft/GVFS,,0
reintroduce MacPlatform.InstallerExtension,0.4305749,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
Merge pull request #952: Add HandleVnode / HandeFileOp Tests,0.46770117,1697: Fix functional tests to skip around ProjFS issue,Test HandleVnodeOperation,0
Merge pull request #980: Decrease telemetry volume from VFS for Git.,0.60660505,1676: Update Git to v2.27.0.vfs.1.0,,0
Changes to fix perf build break,0.6655373,Perf improvements:,,0
Decrease telemetry volume from VFS for Git.,0.55986047,- VFS for Git will performance maintenance in the background. This release will pack loose objects in .gvfsCache into packfiles. ,,0
Simplify CallCount,0.20969586,Performance improvements:,,0
Fix Perf Build,0.6941762,Perf improvements:,,0
Mac kext testing: Implements MockCalls::DidCallFunctionsInOrder(),0.43972793,1697: Fix functional tests to skip around ProjFS issue,,0
Added CallCount and SequenceCheck to Mocks,0.4298523,1697: Fix functional tests to skip around ProjFS issue,,0
PR Feedback / Cleanup,0.41926482,General improvements:,,0
Mac kext testing: Workaround for redefining  constants,0.43708146,1697: Fix functional tests to skip around ProjFS issue,,0
Make tests more generic for failures,0.45155555,1697: Fix functional tests to skip around ProjFS issue,,0
Add FileOp Handling tests,0.4836555,1697: Fix functional tests to skip around ProjFS issue,,0
Add HandleVnodeOperationTests,0.37241077,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Mac kext testing: Implementation of mock function argument checking,0.41391858,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #990 from jamill/fetch_releases_fix,0.52367365,Pull Requests,Fetch releases fix,0
Remove unused using,0.34454638,1689: Make delete docs more verbose,,0
GitHubUpgrader: handle TaskCanceledException that indicates a network timeout,0.44972804,* Improve error message from gvfs upgrade if the Git installation could not be found.,"HttpClient can throw a TaskCanceledException to indicate a timeout in certain situations. We do not currently handle this exception, which was crashing the process (either the GVFS.Service or ProductUpgrader).",0
Mac kext: Replaces use of OSAtomic with standard C11 atomic operation,0.3471205,1744: Overhaul build and project systems and drop Mac/POSIX code,"The OSAtomic APIs are not available in that form in user space, and so caused errors when linking the testable kext. The similar user space equivalents are already deprecated in any case, so replacing their use with the standardised C11 operations is the sensible choice.",0
Merge pull request #981: Tweak upgrade notification message,0.4971575,1747: UpgradeVerb: write deprecation notice,Tweak upgrade notification message,0
Tweak notification message,0.40615666,Initial Mac platform native notifications,,0
Merge pull request #972 from Install GVFS.Service as a Launch Agent on Mac,0.5842139,1676: Update Git to v2.27.0.vfs.1.0,Install GVFS.Service as a Launch Agent on Mac  Added new Launchd plist for GVFS.Service.  Updated Mac installer to auto-load the Service as a User agent for all logged in users.  Updated Uninstaller to unload the service.  Also added title text to Mac installer.,0
Service installer Mac,0.40191594,Initial Mac upgrade functionality, Added new Launchd plist for GVFS.Service. Updated Mac installer to auto-load the Service as a User agent   for all logged in users Updated installer preflight to un-load previously installed   service instances Updated Uninstaller to unload the service for all active users Also added title test to Mac installer,0
Merge pull request #961 Pass session id through to mount process for correlation with git trace2,0.7060983,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Pass session id through to mount process for correlation with git trace2,1
Use Moq for ITracer so test will check if SetGitCommandSessionId was called,0.3103744,- Consume new GCM to fix git credential erase behavior,,0
Updating and adding tests for LockData,0.38388517,1675: PreCommandHook: don't lock pack-objects,,0
Simplify getting the parent session id,0.19092882,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,,0
Add comments for lock body parsing,0.27927995,1675: PreCommandHook: don't lock pack-objects,,0
Merge pull request #963 from Service porting to Mac,0.495533,Pull Requests,Service porting to Mac,0
Service porting to Mac,0.38071737,1744: Overhaul build and project systems and drop Mac/POSIX code,"Created GVFS.Service.Mac and GVFS.Service.Windows. Mac service performs no useful function. Removed Windows specific service entry methods from GVFS.Service.cs, on the Mac Service will get launched by launchd like any other regular program. Updated dependent Windows only projects to reference the new renamed GVFS.Service.Windows.",0
Pass session id through to mount process for correlation with git trace2,0.7209838,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,"git trace2 creates a session id for the git command and by passing this through to the mount process, logging will be able to have this correlation id to be able to join the git trace2 data with any logged data from the mount process.",1
Merge pull request #962 Fix GVFS.FunctionalTests.Windows so that they can be run from the IDE,0.6282187,- A couple of fixes for using VS Code on top of VFS for Git.,Fix GVFS.FunctionalTests.Windows so that they can be run from the IDE,0
Merge pull request #969 Fix Mac Profiling build,0.51817626,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Fix Mac Profiling build,0
Merge pull request #939: Fix credential interactions,0.6166489,- Fixed several incorrect interactions with credentials,Fix credential interactions,0
Fix Mac Profiling build,0.44202882,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Merge pull request #954 Add timings to different parts of updating placeholders,0.5038087,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",Add timings to different parts of updating placeholders,0
Merge pull request #967 Fix EventMetadata construction in TryDownloadPrefetchPacks,0.4249829,1685: minor path comparison fixup in ProductUpgrader,Fix EventMetadata construction in TryDownloadPrefetchPacks,0
Fix EventMetadata construction in TryDownloadPrefetchPacks,0.3310636,A case where FastFetch would not download a small number of files has been fixed.,,0
Credentials: always reject credentials with just a URL,0.5509623,  - Now approves credentials on authentication success,"In commit e41f25f7, the username and password was including in the call to reject credentials. However, with GCM 1.18.5, this does not result in the credentials being rejected. This is due to a behavior with the main credential helper - Credentials acquired from Windows GCM for dev.azure.com urls are not round-tripable. A credential acquired via credential fill from Windows GCM for a dev.azure.com URL cannot successfully be rejected when including the username / password. To make this work, only reject credentials by URL. The downside is that we might attempt to erase a credential that is not the current credential for a URL, but this is a tradeoff to have the scenario work in general. When this behavior is corrected in the credential helper used by VFS4G, we can make reject credentials more specifically.",0
Credentials: consistently use usehttppath for dev.azure.com scope,0.8753866,  - Now scopes credential.useHttpPath to just dev.azure.com hostname,"The git credential commands are not consistent in whether they set usehttppath or not. This can lead to inconsistencies in how credentials are generatated and cleared. VFSForGit might retrieve / create credentials using the full http path, but clear with the only the host name. This leads to the incorrect behavior where VFSForGit is unable to erase bad / stale credentials. Additionally, only dev.azure.com URLs need to set the useHttpPath setting - so scope it to these URLs.",1
Merge pull request #964:  Log when a path can't be looked up from fsid,0.4608537,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Log when a path can't be looked up from fsid,0
Merge pull request #965: [Port from releases/shipped] Turn off Commit Graph Verify,0.61618996,1647: Fix commit-graph expiration,[Port from releases/shipped] Turn off Commit Graph Verify,0
Add timings to different parts of updating placeholders,0.5790816,  - Break down update placeholders timings so we can see where time is spend during checkout.,,0
PR Feedback,0.39133063,Release Notes,,0
Log when a path can't be looked up from fsid,0.35622072,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Turn off Commit Graph Verify,0.82811403,- Disable commit-graph verify for performance concerns, temporarily remove until performance issues are addressed,1
Fix GVFS.FunctionalTests.Windows so that they can be run from the IDE,0.54536057,1697: Fix functional tests to skip around ProjFS issue,,0
Fix Mirror Provider APIs,0.40827647,- Fix backoff on cache server size endpoint 404.,,0
refactor Mac platform into POSIX base,0.72671896,1744: Overhaul build and project systems and drop Mac/POSIX code,"For ease of comparsion with the original Mac-only source files, we retain the line endings on the refactored POSIX common files to exactly match the original ones.",1
Add missing package,0.3367198,- Gracefully handle a missing shared object cache pack directory.,,0
Updates for IWriteBuffer and new ProjFS Feed,0.4910729,- Better errors around ProjFS installation issues., Moved ProjFS to Managed and Native Version,0
Fix Bash Delete Test Failure,0.43923175,1730: Fix an issue with FastFetch when deleting files,,0
Updates for new ProjFS API,0.63936824,- Better errors around ProjFS installation issues.,,0
Merge pull request #941 from .Net core porting - GVFS.FunctionalTests.LockHolder,0.5177486,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,"Porting FunctionalTests.LockHolder to .netcore - Migrated the project file to new format  - Removed GVFS.Platform.Windows dependency  - Directly using WindowsFileSystem.Shared.cs  - Updated GitHelper to launch GVFS.FunctionalTests.LockHolder.dll using dotnet command. Previously it was an exe and launched directly  - Replaced WindowsPlatform code (GVFSPlatform.Instance.GetNamedPipeName) with private implementation  - Removed Categories.MacTODO.NeedsLockHolder 7.Implemented IsProcessActiveImplementation on MacPlatform. Fixes #701, #150",0
Porting FunctionalTests.LockHolder to .netcore,0.43283626,1697: Fix functional tests to skip around ProjFS issue," Migrated the project file to new format 2.Removed GVFS.Platform.Windows dependency 3.Directly using WindowsFileSystem.Shared.cs 4.Updated GitHelper to launch GVFS.FunctionalTests.LockHolder.dll using dotnet command. Previously it was an exe and launched directly 5.Replaced WindowsPlatform code (GVFSPlatform.Instance.GetNamedPipeName) with private implementation 6.Removed Categories.MacTODO.NeedsLockHolder 7.Implemented IsProcessActiveImplementation on MacPlatform.  Fixes #701, #150",0
Merge pull request #944 Update GVFS.Service to log why repos were determined to be invalid,0.6365222,* Improve error message from gvfs upgrade if the Git installation could not be found.,Update GVFS.Service to log why repos were determined to be invalid,0
Merge pull request #913: Additional Kext Tests,0.47671628,Pull Requests,Additional Kext Tests,0
Merge pull request #791; Mac: Add PreConvertToFull when Write Access is requested,0.36164057,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,Mac: Add PreConvertToFull when Write Access is requested,0
Add new unit tests,0.4208967,"Other bug fixes, engineering improvements, and test reliability fixes.", VirtualizationRoot_IsValidRootHandle VirtualizationRoot_VnodeIsOnAllowedFilesystem ShouldHandleVnodeOpEvent,0
Clean up value/error code handling,0.32548797,Other bug fixes for reliability,,0
Add FileFlaggedInRoot Tests,0.38045454,Adds additional logging for folder and file placeholder creation.,,0
Combine CreateWithoutRepoUrlFromDirectory and CreateFromDirectory,0.36304593,Adds additional logging for folder and file placeholder creation.,,0
Update GVFS.Service to log why repos were determined to be invalid,0.7012837,* Improve error message from gvfs upgrade if the Git installation could not be found.,,1
Merge pull request #943 Add check for existing pipe on clone and better error messaging,0.418097,1673: [HOTFIX] ProductUpgrader: be extra careful about a copy loop,Add check for existing pipe and better error messaging,0
Merge pull request #917: PrjFs: use builtins for detecting overflow to protect memory allocations,0.45979375,1697: Fix functional tests to skip around ProjFS issue,,0
Mac: Add PreConvertToFull when Write Access is requested,0.25108474,1675: PreCommandHook: don't lock pack-objects, This will mark the file as D in placeholders.dat and insert into modifiedPaths.dat This cleans up the existing ModifiedFile event which was also being used as the initial switch from placeholders.dat,0
Add check for existing pipe and better error messaging,0.28222308,- Added better diagnostic info in the GVFS logs when there are network errors,"When cloning and the GVFS.Mount process somehow was left running but the enlistment directory was deleted, the clone would hang because the hook was communicating to the wrong pipe.  The only way we have found to get into this state is by formatting the drive that has a mounted repo and then clone to where the mounted repo was.  This will remove all directories allowing the clone to proceed but leave the mount process running with the pipe listening. This change will check for a listening pipe when cloning to determine if there is still a running mount process that needs to be stopped before the clone can run.",0
Get the changes in Memory.hpp under unit tests,0.3657443,See the full change log,,0
PrjFs: use builtins for detecting overflow to protect memory allocations,0.3859741,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #908 from pmj/mac-find-root-tests,0.44709814,Pull Requests,Mac kext: Unit tests for VirtualizationRoot_FindForVnode,0
Mac kext testing: Improves documentation & API for creating mock vnodes,0.35035506,1697: Fix functional tests to skip around ProjFS issue,,0
Mac kext testing: Adds test case for deeply nested file in a repo,0.46041766,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",,0
Mac kext: Adds tests for detecting roots from xattr & recycled roots,0.27562284,1697: Fix functional tests to skip around ProjFS issue,"Three new tests for VirtualizationRoot_FindForVnode:  Finding the root for a file in an offline repo which has previously not been seen. Finding the root for a file in an offline repo which has previously not been seen, then recycling and recreating the repo root vnode, and finding the root for another file in the same repo. Finding the root for a nested subdirectory in an offline repo which has previously not been seen.",0
Mac kext testing: Adds comprehensive constructor/factory for mock vnodes,0.4015199,1697: Fix functional tests to skip around ProjFS issue,"Rather than adding ever more parameters for the creation of mock vnodes, this allows us to set only the attributes we care about with just one overload.",0
Mac kext: Adds VirtualizationRoot_FindForVnode not-in-root unit test,0.34391654,1697: Fix functional tests to skip around ProjFS issue,,0
Mac kext testing: Adds basic xattr support to mock vnodes,0.33769011,1697: Fix functional tests to skip around ProjFS issue,,0
Mac kext: Adds simple VirtualizationRoot_FindForVnode unit test,0.33707598,1697: Fix functional tests to skip around ProjFS issue,,0
Mac kext testing: Renames SetPath to SetAndRegisterPath in mock vnode,0.38055885,1697: Fix functional tests to skip around ProjFS issue,,0
Mac kext testing: Adds support for directory trees for mock vnodes,0.42168278,1697: Fix functional tests to skip around ProjFS issue,"It is now possible to use mount::CreateVnodeTree() to generate the leaf vnode for a particular path, as well as any intermediate vnodes to the root of the file system which previously did not already exist. Additionally, there are now working implementations of vnode_getparent()Â and vnode_isvroot().",0
Merge pull request #937 from pmj/mac-kext-static-analysis-fixes,0.48116028,Pull Requests,Mac kext: Fixes potential issues flagged by clang static analyser,0
Mac kext: Fixes potential issues flagged by clang static analyser,0.45828366,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Merge pull request #930 from jeschu1/changeloglevel,0.5239012,Pull Requests,Change background maintenance failures from error to warning,0
Change background maintenance failures from error to warning,0.513138,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Merge pull request #798 from pmj/mac-av-deadlock,0.4122917,Pull Requests,Mac PrjFS: Countermeasures for deadlocks with Antivirus software,0
Mac kext: Removes now-obsolete VirtualizationRoot_PIDMatchesProvider,0.3768469,1746: Delete custom upgrader,"The functionality of this function has been rolled into VirtualizationRoot_GetActiveProvider, and there are no longer any callers for the original function.",0
Mac kext: Reduces deadlock risk by limiting VFS operations to regular users,0.5400222,- Better recovery from a process that terminates without releasing the GVFS lock.,"In the kext, only allow processes owned by unprivileged users, or processes spawned by unprivileged users to cause files to be hydrated. Antivirus typically runs as root, while repos are owned by non-privileged users, so this simply denies AV services access to un-hydrated files. If a user launches a process via sudo or setuid root executable, this will still be allowed to hydrate because a process in the parent chain will be owned by the unprivileged user.",0
Mac PrjFS: Reduces deadlock risk by delaying hydration close(),0.5535694,- Better recovery from a process that terminates without releasing the GVFS lock.,"In the provider, report hydration success back to the kext without waiting for close() to return. This avoids delaying on other kexts' KAUTH_FILEOP_CLOSE callbacks.",0
Merge pull request #909 from pmj/kext-provider-messaging-refactor,0.39601284,Pull Requests,Mac kext: Move provider messaging to separate source file,0
Mac kext: Moves provider messaging to separate source file,0.29619068,Update components included with internal distribution,"KauthHandler.cpp has thus far covered 2 main areas of responsibility:  The handler callback functions for kauth listeners (as the name suggests) Sending & waiting for messages to providers  The 2 blocks of functionality are almost entirely independent from one another, and as KauthHandler.cpp is a large file, it makes more sense to move the messaging aspect to a separate source file. There are no functional changes.",0
Merge pull request #915: Update Git and GCM,0.7648643,1706: Update Git to include GCM Core update,Update git to 2ab7360 and include new Git Credential Manager,1
Merge pull request #804: Remove isMountComplete check,0.465162,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,Remove isMountComplete check,0
Merge pull request #914: PrjFs: enable static analysis during build,0.46645793,1697: Fix functional tests to skip around ProjFS issue,,0
Update git to 2ab7360,0.7327093,1737: Update Git to v2.32.0,"Updates git and dependencies. The main update is to Git Credential Manager, which includes a fix to erase credentials when requested. Git was also updated with a change to block filters and EOL conversions. git updated to commit: 2ab7360 https://github.com/Microsoft/git/commit/2ab73608a0c5baf0c979cd767ea15e7404771bbe",1
Add Test MountCanProcessSavedBackgroundQueueTasks,0.46589363,- Multiple mount process reliability bugs have been squashed.,,0
Merge pull request #898: Upgrader: reacquire credentials on auth failure,0.55271375,- Properly reacquire credentials during nuget upgrader,Upgrader: reacquire credentials on auth failure,0
Merge pull request #905 from Upgrade Functional Test failure fix,0.48878253,Pull Requests,"When Nuget settings (upgrade.feedurl & upgrade.feedpackagename) are not available in gvfs config, then an attempt to read (or write) those missing values will cause gvfs config read/write to exit with error code 3. UpgradeReminder FT tries to 1. read existing nuget config, 2. delete it, 3. execute tests and then 4. restore previously read Nuget config. The failure used to happen in step 1. while attempting to read a config key which is not available in gvfs config file. Fixes #852",0
PrjFs: enable static analysis during build,0.4514077,1697: Fix functional tests to skip around ProjFS issue,,0
Upgrader: erase and re-acquire credentials on auth rejection,0.66719836,- Properly reacquire credentials during nuget upgrader,,0
Upgrade test reliability,0.47616187,Other bug fixes for reliability,"When Nuget settings (upgrade.feedurl & upgrade.feedpackagename) are not available in gvfs config, then an attempt to read (or write) those missing values will cause gvfs config read/write to exit with error code 3. This will cause UpgradeReminder FT to fail on PCs where Nuget is not configured. Fixes #852",0
Merge pull request #887 from pmj/mac-prjfs-perf-counter-name-verification,0.47682872,- Better errors around ProjFS installation issues.,Mac PrjFS: Adds static verification for perf counter name initialization,0
Merge pull request #906 Catch exceptions when trying to set Visual Studio registry key,0.42320094,- A couple of fixes for using VS Code on top of VFS for Git.,Catch exceptions when trying to set Visual Studio registry key,0
Merge pull request #839 from pmj/mac-root-unit-tests,0.45655543,Pull Requests,"Mac kext: Expanded test infrastructure, added virtualization root unit tests",0
Merge pull request #907 Use a thread-safe collection for the failed listeners in JsonTracer,0.3699443,Pull Requests,[master] Use a thread-safe collection for the failed listeners in JsonTracer,0
Move JsonTracer code for writing to non-failed listeners to a common,0.27229244,1697: Fix functional tests to skip around ProjFS issue,helper method.,0
Use a thread-safe collection for the failed listeners in JsonTracer,0.2348359,1732: Use one NuGet feed,,0
Catch exceptions when trying to set Visual Studio registry key,0.29746434,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,There are some cases when the registry key that is being written to is volatile and will get the error message: Cannot create a stable subkey under a volatile parent key. This change will catch exceptions and continue to mount since the registry key is not required for VFSForGit to work.,0
Mac kext unit testing: Cleans up the vnode mock functions,0.3961512,1697: Fix functional tests to skip around ProjFS issue,"The mock vnode APIs were previously declared as friend functions. This changes most of them to simply access public members of the mock vnode class, along with some other minor tweaks.",0
Mac kext unit testing: Adds mock vnode recycling & test based on it.,0.37815985,1697: Fix functional tests to skip around ProjFS issue,,0
Mac kext: Fixes some virtualization root bugs found by unit testing,0.40910926,1697: Fix functional tests to skip around ProjFS issue," The search loop counter variable could overflow if the maximum array size (32768) was hit. This could lead to memory corruption and/or infinite loops. If the virtualization root array could not be grown, 0 was returned instead of an appropriate errno.  These are unlikely to happen in practice but need to be fixed nonetheless.",0
Mac kext unit testing: enables code coverage instrumentation,0.40513307,1697: Fix functional tests to skip around ProjFS issue,,0
Mac kext unit testing: Virtualization root tests & mock vnode/mount,0.38834068,1697: Fix functional tests to skip around ProjFS issue,"In order to create better tests for the provider registration code, the test doubles for the vnode and mount point/vfs kernel APIs needed to be much more sophisticated, and turned into proper mock objects. This change implements basic working implementations for the vnode and mount point APIs, as well as minimal stubs for locks and memory allocation functions. All the mocks are also moved to appropriate files. There is also a facility for tracking calls to verify whether or not a function was called as a result of a test. This is not yet widely implemented in the various functions and does not yet support checking arguments.",0
Mac kext unit testing: First pass at tests for provider registration.,0.3787578,1697: Fix functional tests to skip around ProjFS issue,There is a vnode iocount bug lurking somewhere in the virtualization root/provider registration code. This is a first attempt at creating unit tests for that code in order to flush out the bug.,0
Mac kext: Hides PrjFSProviderUserClient API behind free functions for mocking,0.47827083,1697: Fix functional tests to skip around ProjFS issue,"The PrjFSProviderUserClient class, being an OSObject based class is near-impossible to use properly from user space. This moves all uses of it from the rest of the kext behind free functions which we can easily replace with mocked versions when unit testing. VirtualizationRoots.cpp then only needs a forward declaration of the class.",0
Merge pull request #879 Add contributing guidelines to VFSForGit repo,0.6128938,1676: Update Git to v2.27.0.vfs.1.0,Add contributing guidelines to VFSForGit repo,0
Add contributing guidelines to VFSForGit repo,0.5890709,"- VFS for Git will check the GitHub releases for the configured ring and prompt occasionally when running Git commands in a VFS for Git repository. To configure your ring, use the new gvfs config verb, like:",,0
Merge pull request #884 from Adding Distribution.xml & installation-check,0.50057524,Pull Requests,"On the Mac, the GVFS standalone installer and the combined GVFS & Git meta installer, would check if any GVFS of git processes are running. If they are running, then installer would display error messaging and will not continue.",0
Installation check on Mac,0.45848474,Initial Mac upgrade functionality,"On the Mac, the GVFS installer and the combined GVFS & Git meta installer, would check if any GVFS of git processes are running. If it is running, then installer would display error messaging and will not continue. Blocking process list - ""gvfs"", ""gvfs.mount"", ""git"", ""gitk"", ""wish"". Installer also unloads previously loaded PrjFlt kexts. Fixes #881",0
"Merge pull request #886 Mac kext: Don't try to message offline providers, fixes missing root assert",0.43145925,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"Mac kext: Don't try to message offline providers, fixes missing root assert",0
Mac PrjFS: Adds static verification perf counter name initialization,0.4000618,1697: Fix functional tests to skip around ProjFS issue,,0
Mac kext: Fixes minor logging message typo,0.3771246,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,"KextLog messages should not end in a newline character, this change fixes 2 instances of this.",0
Mac kext: Fileop handler should not attempt to message missing provider,0.36162144,- Gracefully handle a missing shared object cache pack directory.,This changes ShouldHandleFileOpEvent to return false if there is no active provider on the virtualization root in question. This avoids attempting to generate relative paths without a root path.,0
Merge pull request #829: Improved MaintanceStep Handling,0.45258075,Pull Requests,Improved MaintanceStep Handling,0
Mac kext: Adds poisoned root path string check for debug builds,0.5002936,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Any attempt to use a poisoned/missing root path string is a bug. This adds an assertion that will catch the poisoned case in debug builds.,0
Merge pull request #875 from Test reliability,0.5411775,Pull Requests,"The issue is that when gvfs upgrade verb uses Nuget server for upgrades when Nuget config is available. The failing test sets the upgrade ring to ""None"". Then creates dummy upgrade marker file (C:\ProgramData\GVFS\GVFS.Upgrade\highestAvailableVersion). Then launches upgrade verb. Since the upgrade ring is None, the test expects upgrade verb to delete the marker file. This used to work. But now, upgrade verb will use Nuget upgrader when Nuget config is availble. Nuget upgrader ignores upgrade ring and checks for upgrade. It will not delete the marker file, if it finds one. Updated the test to delete Nuget config before running. Fixes #852",0
Test reliability,0.45670682,Other bug fixes for reliability,"The issue is that when gvfs upgrade verb uses Nuget server for upgrades when Nuget config is available. The failing test sets the upgrade ring to ""None"". Then creates dummy upgrade marker file (C:\ProgramData\GVFS\GVFS.Upgrade\highestAvailableVersion). Then launches upgrade verb. Since the upgrade ring is None, the test expects upgrade verb to delete the marker file. This used to work. But now, upgrade verb will use Nuget upgrader when Nuget config is availble. Nuget upgrader ignores upgrade ring and checks for upgrade. It will not delete the marker file, if it finds one. Updated the test to delete Nuget config before running. Fixes #852",0
Merge pull request #861 from No telemetry for non-elevated upgrade,0.4933685,Pull Requests,"When user runs gvfs upgrade --confirm from a non-elevated command prompt, VFS4Git displays error on Console and triggers a Telemetry error event. This PR removes the telemetry (no other change). Rather than generating pre-check telemetry errors generally at the higher UpgradeVerb level, InstallerPrerunChecker now decides whether to log Warning or Error events depending on specific pre-check failures. Updated events. 1. Unattended mode - Log error locally. No reporting to server. 2. Non-elevated upgrade - Log error locally. No reporting to server. 3. PrjFlt not inboxed & enabled - Report to server. 4. Service not running - Log warming. Report warning to server. 5. Installer blocked by running processes - Log error locally. Fixes #831",0
Shutdown cleanly,0.2744205,Background tasks run with lower priority to address user feedback on maintenance job performance., Prevent futher maintenance calls by thorwing an exception,0
Merge pull request #751: [Mac] Rename reverse-DNS xattr & kext identifiers,0.33819848,1741: Fix winget tag specification,Mac: Rename reverse-DNS xattr & kext identifiers,0
Merge pull request #741 from pmj/mac-inode-path-query,0.4380349,Pull Requests,"Mac PrjFS kext/lib: Use fsid/inode for messages to user space, not vn_getpath()",0
Merge pull request #817 Add retry and sleep while checking if file/folder exists for predelete cases,0.4407716,1689: Make delete docs more verbose,Add retry and sleep while checking if file/folder exists for predelete cases,0
Remove upgrade on minimum verison test,0.5762816,1746: Delete custom upgrader,,0
Review comments,0.29947466,General Improvements,PrjFlt check failures are treated as warnings with live-site reporting.,0
Add retry and sleep for checking if file/folder exists in predelete cases,0.41966003,1730: Fix an issue with FastFetch when deleting files,"Because the predelete event means that the delete might not have happened yet, the code needs to check for existence and retry for a limited amount of time. In testing, the delete would be completed within 10 ms so the code sleeps for 1 ms up to 10 times before giving up and not trying to remove from the modified paths. Because removing from modified paths is purely an optimization and will only affect newly created files and folders, if the path is not removed, it will not cause correctness issues. There could be performance issues but only if it is not able to remove hundreds of thousands of paths and they get left in the modified paths.",0
Mac kext: Poisons the debug-only path for offline roots to catch any dependency,0.3990692,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Also adds an assertion that the root path must never be empty when it's required for generating a relative path.,0
"Mac kext: When using a file's inode for messaging provider, use linkid, not fileid",0.31183702,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,"On HFS+, the linkid is specific to a particular hard link, whereas the fileid is the same for all links to the same file. This increases the chances that generated paths (with vn_getpath in the kext and fsgetpath in user space) are for the hard link for which a kauth handler was called, not the path to any other hard link. No such distinction exists for APFS. For identifying virtualization roots, the identity of the directory and its contents is relevant, not a specific path to it, so we continue to use the fileid there.",0
Mac kext: offline roots don't need to know their path.,0.36305034,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git",,0
Mac PrjFS kext/lib: Only send vnode path to provider when available,0.4183602,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"On the user space side, if no path if received with a message from the kext, fsgetpath() is used to look it up from the FSID/inode pair. On the kext side, this allows us to entirely remove the vn_getpath() calls from the kauth vnode listener, so no workarounds are needed for when that call fails.",0
Mac PrjFS kext/lib: Removes obsolete user-to-kernel message codes,0.43638724,- Better errors around ProjFS installation issues.,"Starting a virtualisation instance is now handled by calling the provider user client external method for registering a root, while stopping is done implicitly when the provider closes its user client connection. The start & stop enum values are no longer used for anything useful and can be removed. As removing them changes the numerical values of the enum, and this enum is used in user/kernel communication, the kext API version is bumped as well.",0
Merge pull request #819 from pmj/mac-root-find-race-fix,0.4227046,Pull Requests,Mac kext: Fix for race conditions in virtualization root lookup & provider client cleanup,0
Mac kext: Fixes potential race condition in provider client cleanup,0.34675065,- Fixed an issue where some concurrent updates to the placeholder database would fail,"It is not 100% clear whether there could be a race condition between IOUserClient::stop()Â and IOUserClient::clientClose(), so this change causes cleanupProviderRegistration(), which is called from both, to acquire the mutex to be on the safe side.",0
Mac kext: Fixes race condition in virtualization root lookup,0.35983402,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"The function FindRootAtVnode_Locked() is called while holding a shared lock from FindOrDetectRootAtVnode(). However, very rarely, when a root's vnode is recycled and the new one is encountered, FindRootAtVnode_Locked() will refresh the registered vnode in the virtualization root. When only the shared lock is held, this could potentially cause a race between 2 or more threads. In theory, all threads involved should reach the same conclusion and update to the same vnode, so there should not be any actual data corruption. This change fixes the race by not refreshing the vnode in FindRootAtVnode_Locked() and instead performing the refresh in a new helper function, which is only called when the lock is held exclusively.",0
Enable telemetry daemon tracing on Windows and macOS,0.34816244,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Re-enable the telemetry daemon trace listener for Windows and enable it for macOS (using the byte-based transmission mode).,0
Fold telemetry listener creation to non-platform specific code,0.28929627,1732: Use one NuGet feed,"Now the telemetry daemon listener is not platform specific, and there is only one listener for telemetry, we can remove the API from GVFSPlatform and just construct the TelemetryDaemonEL in the JsonTracer.",0
Remove in-proc ETW trace event listener,0.33092117,1740: Skip launching UI if running unattended,"Now that we're replacing the in-proc telemetry dispatch with the pipe & telemetry daemon solution, we can delete the ETW code.",0
Merge pull request #870 from jamill/quick_fix,0.45814508,Pull Requests,NuGetUpgrader: test actual gitbin variable,0
Merge pull request #871 from jamill/upgrade_git_master,0.5628911,1663: Update Git to v2.27.0,Update git to include midx verify performance fix,0
Merge pull request #856 from pmj/mac-kext-iocount-fix,0.42152572,Pull Requests,"Mac kext: Fix for vnode_put() panic bug, tighter invariant assertion & improved root search logic.",0
Update git to include midx verify performance fix,0.5677524,- Disable commit-graph verify for performance concerns,,0
Mac kext: Cleans up root finding code further.,0.39520848,1744: Overhaul build and project systems and drop Mac/POSIX code,"In the unlikely (impossible?) event that vnode_get fails in VirtualizationRoot_FindForVnode(), the function now returns instead of continuing without an iocount. Additionally, the root search now starts with the vnode's parent directory if the vnode is not itself a directory. This avoids pointlessly querying the vnode attributes on non-directories.",0
Mac kext: Improves assert for catching incorrect inode/vnode pairings,0.38808304,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git","Although the vnode_put panic bug is now fixed, this tightens up the invariant checks when a vnode match is found for a virtualization root directory.",0
Mac kext: Fixes incorrect inode handling in root search (fixes vnode_put panic),0.35786322,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,"The inode logic in VirtualizationRoot_FindForVnode() has been flawed: instead of looking up the inodes for the file's parent, grandparent, etc. directories in the virtualization root array, it has simply been searching for the inode of the file itself. In many cases, this only mattered once a virtualisation root's vnode had been recycled, but if the first event for a root was for a file in that root, and not the root itself, the root's entry in the array could become corrupted with the vnode on the next event for the original event's file. When this corruption happened while a provider was connected, disconnecting would cause vnode_put() to be called on the file, not the root directory vnode, leading to the panic. Obtaining the inode at every step of the parent directory walk fixes this.",0
Incorporating review comments,0.20984955,General improvements:, Unattended mode - Log error locally. No telemetry. Non-elevated upgrade - Log error locally. No telemetry. PrjFlt not inboxed & enabled - Telemetry. Service not running - Log error locally. No telemetry. Installation blocked by running processes - Log error locally. No telemetry.  Also updated UT.,0
NuGetUpgrader: test actual gitbin variable,0.51136845,- Properly reacquire credentials during nuget upgrader,,0
Merge pull request #867: Upgrade: handle not finding git installation,0.5549374,1676: Update Git to v2.27.0.vfs.1.0,Upgrade: handle not finding git installation,0
Added Minimum Version Test,0.426246,This release is identical to the previous. It was published to test upgrade.,,0
NuGetUpgrader: check for git install,0.5833214,- Upgrade supports NuGet feeds as a distribution source.,,0
Tracer: do not crash when unable to find git install,0.47452354,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
Merge pull request #866: Upgrade: run upgrader in system diretory,0.5507791,1747: UpgradeVerb: write deprecation notice,Upgrade: run upgrader in system diretory,0
Upgrade: run upgrader in system diretory,0.49543625,- Fixes a copy failure when copying the upgrade tool to its temporary location.,"Run the upgrade tool from the system directory to avoid potential interactions with the local directory. This could happen if the installer attempts to run a batch script, which might pick environment from the local location (e.g. if it runs a git command, it might try and run the locally configured git hooks).",0
Merge pull request #855 from Background upgrade check fix,0.546582,Pull Requests,Service was not checking for upgrades in the background. UpgradeTimer.Start() was incorrectly placed after service.WaitOne(). Meaning the timer was getting scheduled just when the Service is about to stop. Fixed and manually tested and verified that timer is getting scheduled correctly on Service launch. Added FT to verify Upgrader get scheduled on Service start.,0
Merge pull request #859: GitStatusCache: handle errors creating directory,0.58114004,Git commands are now allowed to delete an empty directory,,0
Merge pull request #857: GitStatusCache: logging tweaks,0.53640693,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
incorporating review comments,0.20984955,General improvements:,,0
GitStatusCache: handle errors creating directory,0.584339,Git commands are now allowed to delete an empty directory,,0
No telemetry for non-elevated upgrade,0.3774787,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,"When user runs gvfs upgrade --confirm from a non-elevated command prompt, VFS4Git displays error on Console and triggers a Telemetry error event. This PR removes the telemetry. Fixes #831",0
GitStatusCache: reduce tracing,0.605046,- Added a new volume-wide cache for downloaded git objects that is shared amongst multiple repos. Only newly created repos will use the new cache location. Existing clones will continue to use their own private cache.,,0
GitStatusCache: log when cache is not enabled,0.51680225,- Added a new volume-wide cache for downloaded git objects that is shared amongst multiple repos. Only newly created repos will use the new cache location. Existing clones will continue to use their own private cache.,,0
Merge pull request #851:  [cherry-pick to master] Enhance git command logging,0.5683763,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!",[cherry-pick to master] Enhance git command logging,0
Background upgrade check fix,0.5187903,- Fixes a copy failure when copying the upgrade tool to its temporary location.,UpgradeTimer.Start() was incorrectly placed after service.WaitOne(). Meaning the timer was getting scheduled just when the Service is about to stop. Fixed and manually tested and verified that timer is getting scheduled correctly on Service launch. Added FT to verify Upgrader get scheduled on Service start.,0
Merge pull request #845 Tests: Check for the actual objects directory instead of just one folder,0.49200463,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",Tests: Check for the actual objects directory instead of just one folder,0
Merge pull request #849: UpgradeVerb: tweak message logged after checking for update,0.59977925,1747: UpgradeVerb: write deprecation notice,UpgradeVerb: tweak message logged after checking for update,0
Check for the actual objects directory instead of just one folder,0.38800842,- Gracefully handle a missing shared object cache pack directory.,,0
Enhance git command logging,0.52371323,  - Correlate trace2 stream with VFS for Git stream with the Git session ID., Limit error message output to 1000 chars Include name of GitCommand Remove Output logging from commands. This can be looked up in Trace2.,0
UpgradeVerb: tweak message logged after checking for update,0.6015296,1747: UpgradeVerb: write deprecation notice,,0
Merge pull request #802: Add tests for ShouldIgnoreVnodeType,0.456091,Pull Requests,Add tests for ShouldIgnoreVnodeType,0
Merge pull request #843 [cherry-pick to master] Use a new log directory for upgrade logs to avoid ACL issues,0.454588,Pull Requests,[cherry-pick to master] Use a new log directory for upgrade logs to avoid ACL issues,0
Use a new log directory for upgrade logs to ensure correct ACLs and,0.33990902,1685: minor path comparison fixup in ProductUpgrader,"ownership. In previous versions of VFS4G gvfs upgrade could create directories with regular users as owners, and this ownership setting left GVFS.Service unable to update the ACLs on the directory. Rather trying to take ownership of the old logs directory and update the ACLs, this commit updates VFS4G to using a new directory (UpgraderLogs) that is explicitly created with the correct ACLs. Old log files will not be migrated to the new folder.",0
Merge pull request #813 from Cleanup gvfs log output,0.54724073,1676: Update Git to v2.27.0.vfs.1.0,Cleanup gvfs log so that file paths are all aligned in the same column. Fixes #760,0
Merge pull request #814 from Reconsider PhysicalFileSystem.DeleteDirectory,0.42635518,Git commands are now allowed to delete an empty directory,PhysicalFileSystem.DeleteDirectory is a single line wrapper around for PhysicalFileSystem.RecursiveDelete. Removing redundant DeleteDirectory. Fixes #758,0
Merge pull request #815 from Perform Upgrade Check after PrjFlt is enabled,0.48151648,Pull Requests,"On Windows server PCs, PrjFlt is not inboxed. In this scenario UpgradeCheck used to run in parallel with the Service code to enable PrjFlt. If UpgradeCheck wins, then installer pre-check detects PrjFlt is not enabled. Upgrade check would fail. In this PR, Upgrade check is scheduled to happen only after PrjFlt is enabled. Fixes #774",0
Cleanup gvfs log output,0.61905843,- Added better diagnostic info in the GVFS logs when there are network errors,Cleanup gvfs log so that file paths are all aligned in the same column. Fixes #760,0
Reconsider PhysicalFileSystem.DeleteDirectory,0.3876637,1730: Fix an issue with FastFetch when deleting files,PhysicalFileSystem.DeleteDirectory is a single line wrapper around PhysicalFileSystem.RecursiveDelete. Removing DeleteDirectory. Fixes #758,0
Perform Upgrade Check after PrjFlt is enabled,0.4190611,"VFS for Git will check in the background for an available upgrade. If one is available, a message will be shown periodically to the user in the post-command hook to run gvfs upgrade to install the new version.","On Windows server PCs, PrjFlt is not inboxed. In this scenario UpgradeCheck used to run in parallel with the Service code to enable PrjFlt. If UpgradeCheck wins, then installer pre-check detects PrjFlt is not enabled. Upgrade check would fail. In this PR, Upgrade check is scheduled to happen only after PrjFlt is enabled. When EnablePrjFlt failure should not prevent Service from starting. Added a comment to clarify. Also ""gvfs mount"" was logging incorrect error message when PrjFlt enable failed. Corrected the message. Fixes #774, #815",0
Merge pull request #827: Improve perf of prefetch when using large --files-list,0.6495857,- gvfs prefetch learned how to take --files-list.,,0
Add tests for ShouldIgnoreVnodeType,0.3509658,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #820 from pmj/mac-kextlog-levels,0.43331757,Pull Requests,Mac: Matches up KextLog levels with os_log levels,0
"Using OrdinalIgnoreCase string comparer in hashset, instead of doing ToLower, as per code review suggestion",0.23220998,"* Sped up GVFS's parsing of the git index, shaving off 2-3 seconds for a large index file",,0
Mac: Matches up KextLog levels with os_log levels,0.38817775,- Log files now include UTC offset.,"The existing levels in the KextLog mechanism have repeatedly caused confusion with regard to their relative importance and whether or not they hit the on-disk system log.  The ""Note"" level has been replaced with ""Default"" to match its os_log counterpart. The corresponding macros have been renamed to KextLog() and KextLog_File(), so ""Default"" need not be spelled out explicitly. Comments have been added to the log level enum definition to explain the syslog policy.",0
746 Call git-credential approve on successful credential usage,0.56309974,  - Now approves credentials on authentication success,"After we have successfully used a generated credential we should inform Git that the credential is valid and should be stored, by calling git credential approve. We make an effort to not call approve (which calls gcm store) if we've already called it once before for the currently cached credential to prevent a store per successfully auth'd network request.",0
"Switching to HashSet for the list of files to be prefetched to improve performance, when the list is long",0.5158251,- gvfs prefetch learned how to take --files-list.,,0
Merge pull request #823: Consume new Git: Contains fixes to preserve system config during Git installation,0.54551125,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
New Git: preserve system config across upgrades,0.5256679,"- In the future, VFS for Git will automatically upgrade as new bits become available in the configured ring, eliminating the need to run gvfs upgrade to ",,0
Merge pull request #805 from pmj/mac-root-vnode-invariants,0.4991721,Pull Requests,Mac Kext: Extra virtualization root vnode assertions & logging,0
Merge pull request #807: Update RunFunctionalTests to not load kext,0.53020895,1697: Fix functional tests to skip around ProjFS issue,Update RunFunctionalTests to not load kext when testing installed gvfs,0
Mac kext: Adds verbose logging when inserting/updating roots/providers,0.38257855,Adds additional logging for folder and file placeholder creation.,,0
Mac kext: Adds assertion for disconnecting user client matching expected,0.36761987,  - Now erases credentials on authentication failure,,0
Move DiskLayoutVersion into IDiskLayoutUpgradeData,0.2987064,Update components included with internal distribution,,0
Mac kext: Adds a few more assertions for virtualisation root invariants,0.37949613,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git",,0
Make versioning platform specific,0.42536727,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
"Merge pull request #812: Provide a more actionable ""unsupported features"" message for Server 2016 users",0.4668724,Pull Requests,,0
Provide a more actionable error for Server 2016 users when NTFS reports features required by VFS for Git are not supported,0.5729184,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
Merge pull request #806: Set feed url based on upgrade ring during installer,0.505267,- Upgrade supports NuGet feeds as a distribution source.,,0
Consistency and logging tweaks,0.42334434,Other bug fixes for reliability,,0
Don't overwrite configuration if not necessary,0.4772401,Includes fixes to config settings for internal users only,,0
Update RunFunctionalTests to not load kext when testing installed gvfs,0.53211147,1697: Fix functional tests to skip around ProjFS issue,"We've recently made the infrastructure change to call the RunFunctionalTests.sh script with '--test-gvfs-on-path' to ensure that we're testing the product as it is installed on customer machines. When we're testing in that scenario, we shouldn't call the developer convenience script as it will load the locally built kext rather than the installed kext.",0
Remove isMountComplete check,0.3773024,- Multiple mount process reliability bugs have been squashed., Only start ProjFS once VFS4G is ready to service requests,0
Improve the log searchability,0.3384003,Adds additional logging for folder and file placeholder creation.,,0
Correct logging when setting feedpackagename,0.33311844,1732: Use one NuGet feed,,0
Set feed url based on upgrade ring during installer,0.46700227,- Upgrade supports NuGet feeds as a distribution source.,,0
Merge pull request #796 GetInsertionIndex should include the entry's name when it throws an InvalidOperationException,0.3961291,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",GetInsertionIndex should include the entry's name when it throws an InvalidOperationException,0
GetInsertionIndex should include the entry's name when it throws an InvalidOperationException,0.21678844,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Merge pull request #787 from Stop reading ring info from Nuget feedurl,0.604953,1732: Use one NuGet feed,Reverting commit c4af872. Service will only use ring info specified in upgrade.ring config setting. Service will not use ring info specified in nuget feed url (even if it contains one.) Also removed the associated UT cases.,0
Call git-credential approve on successful credential usage,0.59690523,- Consume new GCM to fix git credential erase behavior,"After we have successfully used a generated credential we should inform Git that the credential is valid and should be stored, by calling git credential approve. Include the username and password when we make calls to reject to match Git's behaviour, and to give any credential helpers (GCM) a chance to double-check if the credential it's about to erase matches the value to caller expected to be stored there. Also rename the GitAuthentication methods to match the terminology used by git-credential (approve and reject). Update unit tests to check for expected number of approval and rejections of credentials.",0
Stop reading ring info from Nuget feedurl,0.6018479,1732: Use one NuGet feed,Reverting commit c4af8726f4ad02e0a7f414814f8051de7d8d023e. Service will only use ring info specified in upgrade.ring config setting. Service will not use ring info specified in nuget feed url. Also removed the associated UT cases.,0
Merge pull request #773: Improve termination of background Git processes during upgrade,0.55499375,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",Better feedback and fixes for Upgrade Scenario,0
Kill Background Process Trees,0.37898713,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Mac: Moves reverse-DNS identifiers to org.vfsforgit prefix,0.42076474,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",This applies to:  Bundle identifiers IOKit subclass name prefixes Names for extended file attributes msleep calls in the kext,0
Merge pull request #775: Improve upgrader logging,0.51455575,Pull Requests,Improve upgrader logging,0
"Merge pull request #777 [merge to master] Log GVFS.Service ACL exceptions, and fix upgrade log directory ACL issue",0.59109896,Bug Fix: Fixes a bug with gvfs upgrade that causes versions v1.0.20112.1 from upgrading from private feeds.,"[merge to master] Log GVFS.Service ACL exceptions, and fix upgrade log directory ACL issue",0
Merge pull request #772 from Rephrase ProjFS error messaging,0.56754017,- Better errors around ProjFS installation issues.,On Windows RS1/Server ProjFS is not inboxed. On those PCs the current gvfs upgrade pre-check error messaging is confusing. Updated the messaging. Issue #769,0
Merge pull request #744: Installer updates for PrjFSKextLogDaemon,0.4790805,- Improved reliability of how the installer upgrades from non-inboxed to inboxed ProjFS.,Configure installer to install PrjFSKextLogDaemon,0
GitHubUpgrader: use common installation ID for log files,0.4540692,Git: Includes incremental commit graph,,0
Upgrader: write out more informative error message when install fails,0.5249645,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
Upgrader: use a common installation ID for all log files,0.48583806,1746: Delete custom upgrader,NuGetUpgrader: use common installation ID,0
NuGetUpgrader: add details to error message,0.54628175,- Properly reacquire credentials during nuget upgrader,"When running an install action fails, it might or might not have error text. With this change, NuGetUpgrader adds extra context to the error message that is eventually consumed by a user.",0
Rephrase ProjFS error messaging,0.68191266,- Better errors around ProjFS installation issues.,On Windows RS1/Server ProjFS is not inboxed. On those PCs the current upgrade pre-check error messaging is confusing. Updated the messaging. Issue #769,0
Remove stray character from comment,0.1895804,1717 [HOTFIX] Update Git to remove ODB string check,,0
Mark DiagnoseTests as NonParallelizable to prevent conflicts with repos (un)registering for auto-mount,0.5242933,1652: RepoRegistry: ignore non-existent repos,,0
Merge pull request #749: update git to include trace2 V7,0.58614355,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Update git to include trace2 V7,0
Update git package to include consume commit 178619c,0.6210104,1653: Update Git to include v2.26.1,"Update git to: 178619c5d0 (""Merge pull request #117 from jeffhostetler/gvfs-trace2-next-fixup"", 2019-02-11) Includes trace2 V7 and associated fixes.",0
Configure installer to install PrjFSKextLogDaemon,0.4633631,- Better errors around ProjFS installation issues.,This commit installs the logging daemon as part of our installer. Update the plist with the install location and modify the xcodeproj to have the Daemon copied into the BuildOutput directory. Modify the Installer project to have the plist and daemon in the structure that becomes part of the installer. Add a preinstall/postinstall script to register the daemon with launchd. Update uninstaller to handle these new additions.,0
"Migrate child directories of the log folder, reduce code duplication, improve comments",0.4163587,Adds additional logging for folder and file placeholder creation.,,0
Migrate log files to fresh directory if updating ACLs fails,0.26320076,- Log files now include UTC offset.,,0
Delete any existing Tools directory before creating a new one,0.42267448,Git commands are now allowed to delete an empty directory,,0
"Merge pull request #683: Use a single LibGit2Repo for multiple requests, dispose if left unused",0.44492584,Pull Requests,,0
Merge pull request #512: Load SSL certificate according to git config,0.49780965,- Updated Git for a security issue.,Load SSL certificate according to git config,0
Log exceptions that occur when GVFS.Service adjusts ACLs,0.60237074,- Added better diagnostic info in the GVFS logs when there are network errors,,0
List blocking processes with pid,0.2387765,1658: ProjFSFilter: Be more robust to missing PowerShell, Wait for backgorund processes to complete,0
Merge pull request #764: Log ring when querying for upgrades on the background timer,0.47043854,Pull Requests,,0
Log ring when querying for upgrades on the background timer,0.3819825,1747: UpgradeVerb: write deprecation notice,,0
Merge pull request #753 Bug Bash Fixes [into master],0.49602675,This includes the Git 2.30.2 security fix (CVE-2021-21300).,Bug Bash Fixes [into master],0
Merge pull request #734 from jeschu1/bug_for_missing_file,0.47135615,Pull Requests,Add listener for OPEN event,0
Merge pull request #737 from pmj/mac-syscall-tracing,0.4167942,Pull Requests,Mac syscall tracing: Updates to dtruss to make it practical for tracing VFS4G issues,0
Move UpgradeOrchastrator's tracer construction into Execute to avoid creating multiple log files,0.44868246,1746: Delete custom upgrader,,0
Fix highestVersionAvailable traching in TryQueryNewestVersion,0.36034778,1726: Config: commitGraph.generationVersion=1,,0
Merge pull request #748 Merge upgrade_extensibility (NuGet upgrader) feature branch to master,0.52139795,- Upgrade supports NuGet feeds as a distribution source.,Merge features/upgrade_extensibility to master,0
GVFSUpgrade verb should delete upgrade marker,0.61218214,The gvfs upgrade command is deprecated. Future upgrades will require using winget or installing directly from the releases page.,,0
Remove UpgradeMarkerFile when upgrade is disabled,0.6205551,1746: Delete custom upgrader,,0
Update functional tests to create marker file in correct location,0.4504388,1697: Fix functional tests to skip around ProjFS issue,,0
PR Feeback: Minor cleanup items before merging to master,0.4026602,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!",,0
Merge pull request #740 from mjcheetham/disable-daemon-listener,0.41100252,1750: Update Readme.md,Disable the TelemetryDaemonEventListener on Windows,0
Merge pull request #731 NuGetUpgrader: verify integrity of downloaded NuGet package,0.61032426,Update NuGet upgrader with new Microsoft package signing certificate,NuGetUpgrader: verify integrity of downloaded NuGet package,0
Update unit tests to use mock download path,0.37518778,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #742 Read upgrade ring config from feedurl,0.46888256,- Upgrade supports NuGet feeds as a distribution source.,Read upgrade ring config from feedurl,0
Add tests around package verification,0.43707043,1697: Fix functional tests to skip around ProjFS issue,,0
NuGetUpgrader: verify integrity of downloaded NuGet package,0.6321571,Update NuGet upgrader with new Microsoft package signing certificate,Verify the integrity / signature of NuGet packages. The NuGet upgrader will rely on the services provided by the NuGet client library to verify downloaded NuGet packages. Relies on the high level command VerifyCommandRunner exposed by NuGet client library to actually perform NuGet package verification.,0
Read upgrade ring from feedurl,0.4867949,- Upgrade supports NuGet feeds as a distribution source.,"Upgrade feedurl contains upgrade ring specification as a substring. Github upgrader now attempts to parse feedurl and read the ring info specified. If the feedurl is set, but if it does not contain the ring info, then that would be interpreted as a None ring - meaning GVFS.Service would not be able to do upgrade checks in the background. But if feedurl is not set at all, then regular uprade.ring config would be used.",0
Merge pull request #735 [features/upgrade_extensibility] Additional ACL changes for upgrading,0.4709058,1714: Update Git to include LFS security release,[features/upgrade_extensibility] Additional ACL changes,0
Trigger FileCreated on OPEN,0.368707,Adds additional logging for folder and file placeholder creation.,We should listen for file creation on OPEN instead of CLOSE. If a file handle isn't correctly closed we could miss the event.,0
Merge remote-tracking branch 'msft/features/upgrade_extensibility' into more_service_acl_changes,0.47257325,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
fixup bad merge,0.37243688,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!",,0
PR Feedback: Move create method to PhysicalFileSystem and add comments,0.4187973,Adds additional logging for folder and file placeholder creation.,,0
Merge remote-tracking branch 'upstream/master' into features/upgrade_extensibility,0.45777708,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Merge pull request #736 from jamill/upgrade_check,0.5120106,Pull Requests,ProductUpgrader: only write newest version available,0
Disable the TelemetryDaemonEventListener on Windows,0.3238141,1740: Skip launching UI if running unattended,Disable the new daemon-based telemetry event listener on Windows until we have the Mac version working and that we're happy with the stability of the listener.,0
Fixing spelling and naming,0.36441118,General improvements:,,0
Add ProductUpgraderInfoTests,0.5166201,1685: minor path comparison fixup in ProductUpgrader,,0
Enable ProductUpgraderInfo to be testable,0.5302011,1685: minor path comparison fixup in ProductUpgrader,,0
Split ProductUpgraderInfo into a shared and non-shared class,0.52519655,1672: ProductUpgrader: be extra careful about a copy loop,"This will facilitate adding tests for the logic that the hooks projects do not depend on, as those projects do not support the PhysicalFileSystem abstraction.",0
ProductUpgrader: only write newest version available,0.5705911,1672: ProductUpgrader: be extra careful about a copy loop,"When an upgrade is available, GVFS will download the update in the background, and git commands will periodically check for the existence of the downloaded package in a well known directory to advertise that an update is available. However, this downloaded update is not used for the actual update. This changes the logic to write out a file in a well known location containing the version of the latest available update, and avoid downloading the actual update. While this change stands on its own, it will be even more applicable with the NuGet Upgrader, which will still use GitHub releases to check for available updates, but will download the actual update from another location.",0
Merge pull request #712 Try to load the kext if not loaded,0.4656706,Pull Requests,Try to load the kext if not loaded,0
Rename NuGetUpgrader namespace and move NuGetUpgrader unit tests to NuGetUpgrade folder,0.55354667,- Upgrade supports NuGet feeds as a distribution source.,,0
Additional cleanup,0.48012334,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Change log to informational when IsReady fails,0.3746439,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Add more information to message when kext is loaded successfully,0.32568103,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Moved TryLoad to IsReady method for each platform to perform,0.25918415,- Gracefully handle a missing shared object cache pack directory.,,0
Add comment about where exit codes loading kext came from,0.32719487,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Pass a TextWriter to TryLoad of the driver,0.20653586,Switched over to use the Windows Projected File System (ProjFS) optional feature on RS4 and later. ProjFS is the new name for the GvFlt driver and its associated user mode library.,"This is so that the code can write a message if needed to the output, like when a password prompt will be shown.",0
Use full path for kextload,0.3201698,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Allow the mount verb to message the user about loading the kext,0.37842375,- Multiple mount process reliability bugs have been squashed.,,0
Try to load the kext if not loaded,0.22305018,Switched over to use the Windows Projected File System (ProjFS) optional feature on RS4 and later. ProjFS is the new name for the GvFlt driver and its associated user mode library.,,0
Merge pull request #686 from nickgra/DiagnoseKextLogs,0.45773983,Pull Requests,Add PrjFSKext log collection to diagnose verb,0
Fix PhysicalFileSystem plumbing in UpgradeVerb,0.48918632,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
PR Feedback: Move common ACL code to helpers in WindowsFileSystem,0.3700933,Adds additional logging for folder and file placeholder creation.,,0
Merge branch 'features/upgrade_extensibility' into more_service_acl_changes,0.40657336,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
"PR Feedback: Cleanup comments, naming, and method signatures",0.4726822,General improvements:,,0
PR Feedback: Make upgrader Create method parameters consistent,0.51604337,1685: minor path comparison fixup in ProductUpgrader,,0
PR Feeback: Move download directory creation to TryDownloadNewestVersion,0.37322327,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
Merge pull request #726 from nickgra/libProcessName,0.44061026,Pull Requests,Update ProjFSLib to log Process Name when in debug mode,0
Merge pull request #738 from jamill/nuget_auth,0.50988615,- Properly reacquire credentials during nuget upgrader,Use package feed URL to query for credentials,0
NuGetUpgrader: remove feedUrlForCredentials,0.6748763,- Properly reacquire credentials during nuget upgrader,The URL to query Git Credential Manager with for the credentials to access the packaging feed no longer needs to be explicity provided. The URL will be generated from the packaging feed URL.,0
Add process name to lib debug logging,0.31334054,- Log files now include UTC offset.,,0
Add PrjFSKext log collection to diagnose verb,0.43619612,- Added better diagnostic info in the GVFS logs when there are network errors,The new PrjFSKextLogDaemon writes kext log messages out to the os log. This change updates the diagnose verb to consume the os log via the log show commandline. This change does not install the daemon as part of the product. Note that this effectively exports the logs as text rather than the binary .logarchive format. This was chosen for ease of viewing on any machine (Console.app and log are only on MacOS).,0
NuGetUpgrader: use transformed URL from feed URL for credentials,0.6877178,- Properly reacquire credentials during nuget upgrader,,0
NuGetUpgrader: construct AzDev Org URL from AzDev packaging URL,0.4880783,Update NuGet upgrader with new Microsoft package signing certificate,We want to construct an AzDev URL of the format: https://azure.devops.com/{org} from a packaging URL. This is so we can query the Git Credential Helper for a corresponding PAT to access the feed with.,0
Mac dtruss: Basic documentation,0.39518052,1669: Docs: more troubleshooting and FAQs,This adds some simple instructions on how to use our version of dtruss.,0
Mac dtruss: Fixes for follow mode.,0.33538684,Bug fixes:,"Following child processes (-f) in dtruss has not worked reliably on Mac, at least not in recent OS versions. There are a few reasons for this:  Thread recycling behaviour means the self->child variable doesn't get wiped when a thread exits or a process dies, so random other processes end up with threads which suddenly start being traced. dtruss assumed new processes were always started with fork/execve or vfork/execve, entirely ignoring posix_spawn, which is much more common on macOS. The logging of newly detected threads in child processes was odd, implying each of them was caused by a fork() which of course is not the case. If traced parent processes died, newly created threads in child processes may fail to be traced.  This change fixes all of the above. The key changes:  The self->child thread-local variable identifying threads as being part of processes which are descendents of processes which match the original criteria now stores the PID, not simply a boolean. This lets us detect the case where threads are recycled. The self->start variable suffers from the same problem, causing the first syscall of a recycled thread to be traced, even if self->child has been cleaned up. There is special support for tracing through the various stages of posix_spawn in order to mark the newly spawned child process. The default buffer size for dynamic DTrace variables is hugely increased, as the script in its current state seems to consume a lot of memory.",0
Mac dtruss: adds a command-line flag for filtering noisy syscalls,0.24065503,Background tasks run with lower priority to address user feedback on maintenance job performance.,"Currently this just applies to one case: close()Â when it returns EBADF. It seems that some processes (clang?)Â will call close() on thousands of file descriptors that don't exist, which totally floods the trace. Specifying -F will now remove those calls from the trace; if -c (counts) are enabled, the filtered calls will still be counted in the overall statistic; additionally, the number of ignored close() calls for each process is tracked and output.",0
Mac dtruss: Fix for non-command regressions & dangling subshell,0.2946208,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,"The command-launching changes caused dtrace to error out on other modes; this adds command line arguments to fix that. Additionally, if the dtrace command fails in the command case, we now terminate the launched subshell instead of leaving it forever suspended.",0
Pass tracer to DeleteAllInstallerDownloads,0.35279313,1746: Delete custom upgrader,,0
Prevent unit tests from deleting the upgrader download directory,0.45479158,- Properly reacquire credentials during nuget upgrader,,0
Additional Unit Test changes,0.518537,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Mac dtruss: Improve tracing of syscall with string/buffer parameters,0.3105253,- No-op gvfs prefetch --hydrate performance is dramatically improved,"Tracing certain syscalls such as read/write would sometimes trigger dtrace errors for one of the following reasons:  NULL pointer passed by caller. This change adds safety checks for these. Buffer is very large, so copyin() runs out of scratch memory. This change limits the copied buffer contents to 1024 bytes.",0
Mac dtruss: Adds proper formatting for tracing posix_spawn,0.31611717,1744: Overhaul build and project systems and drop Mac/POSIX code,"Dtruss so far has had no direct support for tracing posix_spawn, so just fell back to printing 3 integer arguments, which isn't terribly useful. The function has 6 arguments, so this change causes all of them to be saved until return and printed. The second argument (arg1) is the string of the executable file's path; this needs to be copied from usermem on syscall entry as copyinstr sometimes seems to fail in the return probe. The first argument (arg0) is a pointer to a memory location to which the created process's PID will be written, so we need to read the PID from usermem in order to print it.",0
Mac dtruss: Fixes tracing of execve() syscall,0.307997,1669: Docs: more troubleshooting and FAQs,"dtruss was written for Solaris and last updated for an ancient version of macOS. (then Mac OS X) Somewhere along the way, tracing for execve()Â got broken - the printed PID was wrong, and printing the executable's path did not work. The reason for the former is unclear, in the return probe the pid simply evaluates to 0. That just seems to be a kernel quirk. By saving the correct value in a thread-local variable on syscall entry, we can print that on return. The executable path can't be printed as the string resides in user space memory, and after execve() returns, the whole userspace process has been replaced. So again the solution is to save the syscall argument on :entry for :return to print it.",0
Mac dtruss: Adds support for running commands as non-root,0.24103051,1740: Skip launching UI if running unattended,"The existing dtruss script suffered the significant flaw that commands/processes launched via the dtruss command line could only be run as root as dtruss itself could only be run as root. This change allows the dtruss script itself to be run as non-root when passing a command by explicitly invoking dtrace using sudo. Furthermore the command is launched via a subshell, not by dtrace, and thus runs in the context of the dtruss script, not sudo's. To ensure no syscalls are missed by dtrace, the subshell process is started in a suspended state and resumed by the dtrace:::BEGIN action. The main 2 regressions caused by this change are:  * dtruss will not exit when the traced command finishes.  * If launching dtrace fails, the suspended subshell sticks around. Both are fairly minor and will be fixed in a future change.",0
"Mac: Adds dtruss script from macOS, plus license & 3rd party notice",0.36593926,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,dtruss script is from Apple's dtrace-285.200.15 source bundle at https://opensource.apple.com/source/dtrace/dtrace-284.200.15/DTTk/dtruss.auto.html,0
Added CanDownloadNewestVersionFailsIfDirectoryIsMissing unit test,0.3839966,1697: Fix functional tests to skip around ProjFS issue,,0
Fixed existing .NET Core unit tests,0.4571552,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Merge pull request #733 from nickgra/FixVersionNumber,0.5653395,1676: Update Git to v2.27.0.vfs.1.0,Mac: Support Version Number overrides,0
Code cleanup,0.41354048,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Adjust ACLs for Upgrader's Tools directory,0.4620657,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
Configure ACLs when creating upgrader download directory,0.4533506,- Properly reacquire credentials during nuget upgrader,,0
Stop MetaPackage installer from walking entire /Volumes hierarchy,0.47117245,- The installer now unmounts and remounts existing repos automatically,,0
Update BuildGVFSForMac.sh to set GVFSVersion,0.605169,The gvfs upgrade command is deprecated. Future upgrades will require using winget or installing directly from the releases page.,"Currently, we don't have a solution for controlling the GVFSVersion on MacOS. Windows supports this by taking the version as an argument to the build script which gets passed to MSBuild. Our PreBuild infrastructure is different on MacOS, but we can use the same idea to have GenerateCommonAssemblyVersion.sh update the GVFS.props as well as generate the CommonAssemblyVersion.cs file.",0
Allow non-elevated writes in the upgrader logs directory,0.40024638,- Properly reacquire credentials during nuget upgrader,,0
Remove existing rules from GVFS ProgramData directory,0.4520073,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
Merge pull request #729 from jamill/nuget_upgrader_install_fix,0.5584351,- Upgrade supports NuGet feeds as a distribution source.,Fixup NuGetUpgrader - install necessary NuGet dlls,0
Fixup NuGetUpgrader - install necessary NuGet dlls,0.5869573,- Properly reacquire credentials during nuget upgrader,,0
Merge pull request #728 [features/upgrade_extensibility] Restrict ACLs on VFS4G ProgramData and update verbs as needed,0.5043001,Bug Fix: Fixes a bug with gvfs upgrade that causes versions v1.0.20112.1 from upgrading from private feeds.,[features/upgrade_extensibility] Restrict ACLs on VFS4G ProgramData and update verbs as needed,0
Switch from giving Everyone read access to Users,0.3028644,Includes fixes to config settings for internal users only,,0
Restrict ACLs on VFS4G ProgramData and update verbs as needed,0.3349626,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,,0
ProductUpgrader: add empty constructor for mocking,0.45908642,1672: ProductUpgrader: be extra careful about a copy loop,,0
Introduce an upgrader based on NuGet packages,0.7362503,- Upgrade supports NuGet feeds as a distribution source.,"Implement an upgrade mechanism that makes the upgrade logic more flexible to enable customized steps to be run during an upgrade. Organizations might have specific requirements and need custom steps to deploy VFSForGit upgrades. This introduces the NuGet upgrader, which allows for generalized upgrade packages. The upgrade package is distributed via NuGet feeds as a NuGet package. The package includes details on how to install itself, allowing organizations the ability to control the VFSForGit upgrade.",1
Move DeleteAllInstallerDownloads into ProductUpgrader,0.502923,1746: Delete custom upgrader,,0
Create common ProductUpgrader class,0.5522049,1672: ProductUpgrader: be extra careful about a copy loop,"Define a common base class for different Upgrader implementations. This is preparation to support multiple Upgrader implementations. This will define a common API for components to work against to run any Upgrader, while also putting common functionality into a shared base class.",0
UpgradeOrchestrator: tweak tracing,0.45078623,- Fixes a copy failure when copying the upgrade tool to its temporary location.,,0
Merge pull request #724 Fix removal from modified paths when path should not be removed,0.5405742,1685: minor path comparison fixup in ProductUpgrader,Fix removal from modified paths when path should not be removed,0
Check modified paths for path before adding to newly created list,0.29944083,1685: minor path comparison fixup in ProductUpgrader,,0
Add test for when modified paths gets deleted when it shouldn't,0.32069278,Git commands are now allowed to delete an empty directory,,0
Merge pull request #714 from Create combined VFSForGit & Git installer,0.633999,1676: Update Git to v2.27.0.vfs.1.0,GVFS.Installer.Mac project will now build an additional Meta package installer. This installer will contain both VFSForGit Mac installer and Git installer in a single package. The existing VFSForGit installer will continue to be produced.,0
Addressing various coding style code review comments,0.28872812,General improvements:,,0
Ignoring GitSsl tests on non-dotnet core targets,0.47728127,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
Create combined VFSForGit & Git installer,0.66543216,"- VFS for Git will check the GitHub releases for the configured ring and prompt occasionally when running Git commands in a VFS for Git repository. To configure your ring, use the new gvfs config verb, like:",GVFS.Installer.Mac project will now build an additional Meta package installer. This installer will contain both VFSForGit Mac installer and Git installer in a single package. The existing VFSForGit installer will continue to be produced.,0
Adjusting code to work on netstandard20,0.3212032,1732: Use one NuGet feed,,0
Merge pull request #708 from jeschu1/kext_unit_test,0.4425908,Pull Requests,First Kext Unit Tests as POC,0
Cleanup Test Infrastructure,0.37320262,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Merge pull request #682 from mjcheetham/outofproc-trace-listener,0.44007844,Pull Requests,Add out-of-proc telemetry daemon event listener,0
Merge branch 'master' into outofproc-trace-listener,0.3659128,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!",,0
Break a test,0.28674296,1697: Fix functional tests to skip around ProjFS issue,,0
Add Test for new kext unit testing Framework,0.38361648,1697: Fix functional tests to skip around ProjFS issue,,0
Prompt before performing sudo gem install,0.40199327,- The installer now unmounts and remounts existing repos automatically,,0
Mac kext unit testing: Removed the need for explicit testable symbol list,0.46111846,1697: Fix functional tests to skip around ProjFS issue,"Using an exports list in the test bundle itself makes dead code stripping work, so the kext-in-userspace can be a static library and doesn't itself need an exports list. This means we don't have to keep adding new functions we want to test to a symbol list. This change also moves the testability macro to the common header file and adds one for static functions (non-inline), which is tested on yet another function from KauthHandler.cpp. In Progress",0
Merge pull request #681 from Verify Installer signature before launching,0.45125687,Pull Requests,"Goal Verify code signature of downloaded upgrade installer exes before launching it. Implementation Signature verification: At a high level, the upgrader reads the certificate contained in the signed installer. It then tries to build the certificate chain. If it succeeds, then the exe is considered valid and upgrader goes on to verify that the certificate CN name matches expected values (""Microsoft Corporation"" for VFSForGit and ""Johannes Schindelin"" for Git). Installer is launched only when signature verification succeeds. To prevent an attacker from modifying installer exe while signature verification is going on, upgrader holds an open reference to the exe that is later released.",0
Verify Installer signature before launching,0.38049418,Update NuGet upgrader with new Microsoft package signing certificate,GitHubUpgrader.RunInstaller() method now locks the downloaded asset installer path (by opening a file handle to it) and verifies the authenticode signature of installer exe. There is additional check done for the name of the issuer of the Authenticode certificate. Installer is launched only when signature verification succeeds. The installer file lock is released after installer run finishes. Also added UT to verify signature check failures are handled properly.,0
Prototyping testing the unmodified kext in userspace via a dylib,0.34268668,1697: Fix functional tests to skip around ProjFS issue,,0
output unit tests to .xml,0.2777861,1697: Fix functional tests to skip around ProjFS issue,,0
Dispose previous invoker at beginning of setup to avoid timing bugs,0.32979012,- Improved reliability of how the installer upgrades from non-inboxed to inboxed ProjFS.,,0
Make unit tests more thread-safe,0.38699695,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #710 from jamill/file_system,0.43054652,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git",File system common methods,0
PhysicalFileSystem: remove unused contant,0.37752882,1730: Fix an issue with FastFetch when deleting files,,0
PhysicalFileSystem: add filesystem methods to common location,0.35543078,Adds additional logging for folder and file placeholder creation.,"These filesystem methods are used in the Upgraders, but are generally useful. Move / add them to common location so they can be reused.",0
Remove var,0.24189697,1689: Make delete docs more verbose,,0
First Kext Unit Tests as POC,0.41345024,1697: Fix functional tests to skip around ProjFS issue,,0
Add unit tests for EventListener; fix TryRecordMessage,0.30682,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #693 from jamill/github_upgrader_remount_flag,0.5433468,1676: Update Git to v2.27.0.vfs.1.0,GitHubUpgrader: Use REMOUNTREPOS flag instead of MOUNTREPOS,0
GitHubUpgrader: Use REMOUNTREPOS flag instead of MOUNTREPOS,0.56043786,- The installer now unmounts and remounts existing repos automatically,VFSForGit Setup is looking for REMOUNTREPOS instead of MOUNTREPOS.,0
Merge pull request #684 from Adding dry-run and no-verify,0.49169266,Pull Requests,"Goal Create a --dry-run upgrade arg that will help VFS4Git Developers to run gvfs upgrade without actually affecting the state of their PC. New --no-verify upgrade arg to prevent code signature verification of installers and Nuget packages. Feature details Dry run - Behaves like a regular gvfs upgrade --confirm command, except that the downloaded installer exe's will not be run. No verify - This is arg is enabled but not implemented right now.",0
review comments,0.29947466,General Improvements,,0
Rename LibGit2RepoPool to LibGit2RepoInvoker,0.40129423,1652: RepoRegistry: ignore non-existent repos,Check for active libgit2 repos during packfile maintenance step,0
Log when a listener has recovered and remove from the failed list,0.3260186,- Added better diagnostic info in the GVFS logs when there are network errors,Log when an EventListener has recovered from a previous failure to all the other listeners. Also remove some usages of var.,0
Merge pull request #670 from changeworld/patch-2,0.5367111,Pull Requests,Update Readme to inform users to clone with HTTPS,0
Merge pull request #689 from Auto-load PrjFS kext & gvfs bin load error fix,0.5829361,- Better errors around ProjFS installation issues.,"Auto-load PrjFS kext Now PrjFS kext will get installed in the standard kernel extensions directory, this will let the Operating System find it and autoload it.  gvfs bin load error fix Installing libPrjFSLib.dylib in /usr/local/lib directory; this helps fix the issue where some of the vfsforgit binaries fail to launch bcoz of missing libraries in standard lib search paths. Added a basic un-installer The un-installer unloads PrjFS Kext, deletes vfsforgit binaries and symbolic links. The un-installer does not un-mount any mounted repositories. To un-install run uninstall_vfsforgit.sh from Terminal. It will ask you for Admin password.",0
"Auto-load PrjFS kext, gvfs bin load error fix & uninstaller.",0.58700657,- Better errors around ProjFS installation issues.," Now PrjFS kext will get installed in the standard kernel extensions directory as well, this will let the Operating System find it and autoload it. 2. Added a link to /usr/local/vfsforgit/prjfs/libPrjFSLib.dylib in /usr/local/lib directory; this helps fix the issue where some of the vfsforgit binaries fail to launch bcoz of missing libraries in standard lib search paths. 3. A basic vfsforgit uninstaller.",0
GVFS Upgrader: update UX of dry-run and confirm arguments,0.65688765,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]","Based on feedback:   - dry-run and confirm are not compatible arguments   - If dry-run is specified, then we should launch the upgrader tool with appropriate arguments",0
Log EventListerer failures to all other listeners,0.28125274,- Added better diagnostic info in the GVFS logs when there are network errors,"Attempt to log that a EventListener has failed to record a message to all other, non-failing EventListeners at most once. This can be useful for detecting and diagnosing cases when the new TelemetryDaemonEL fails to communicate with the telemetry service/daemon when we expect it to succeed otherwise. Also remove the unused ETW properties that we were sending to the telemetry service/daemon.",0
Merge pull request #695 GitMaintenanceStep: inject the dependence on git process ids,0.597048,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"In the GitMaintenanceStep, we had a method ""RunningGitProcessIds()"" that used the Process API to check running Git processes. This can cause unit tests to fail on a dev machine if they are running Git commands (which may be due to background activity on a VFS mount). Inject a new GitProcessChecker to the maintenance step, and use that in unit tests to insert the answer we want. We can now check that we do not advance when there are git processes running.",0
Adding dry-run and no-verify.,0.48118666,- Disable commit-graph verify for performance concerns,"Dry run - All pre-checks will be performed, but pre-check failures are ignored. Upgrade checks over the network will be performed but no installer files will be downloaded. No upgrade installers will be launched either. User gets to see the progress messaging and logs as if an actual installer was run. No verify - This is not used right now.",0
GitMaintenanceStep: inject the dependence on git process ids,0.54994893,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"In the GitMaintenanceStep, we had a method ""RunningGitProcessIds()"" that used the Process API to check running Git processes. This can cause unit tests to fail on a dev machine if they are running Git commands (which may be due to background activity on a VFS mount). Inject a new GitProcessChecker to the maintenance step, and use that in unit tests to insert the answer we want. We can now check that we do not advance when there are git processes running.",0
Reflect comment,0.17631634,General Improvements,refs: https://github.com/Microsoft/VFSForGit/pull/670#discussion_r248044521 Co-Authored-By: changeworld changeworld@users.noreply.github.com,0
Merge pull request #692 from jamill/windows_build_script_tweak,0.42901063,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,Windows build: Only consider dev 15 build tooling,0
Windows build: Only consider dev 15 build tooling,0.43799436,The build system was rewritten from scratch to simplify the process and use a more recent version of .NET.,"The windows build script looks for installed versions of Visual Studio to find msbuild and related tooling. The structure of where this tooling is located has changed in VS 2019, which causes issues when attempting to run the BuildGVFSForWindows.bat script when VS 2019 is installed. This change addresses that issue by only considering VS 2017 when searching installed build tools.",0
Address PR feedback and comments,0.4141743,Release Notes," Move to using a concrete class rather than a Dictionary<,> to define   the telemetry daemon message format. Allow the platforms to create 0..* telemetry listeners to be attached   to the tracer. This means we can hide some of the platform-specific   configuration of the TelemetryDaemonEventListerer in the platform   code. Remove the 'telemetry pipe name' from the public interface of the   GVFSPlatform type. Remove InProc from some of the tracer method names (to match the   InProcEventListener -> EventListener rename).",0
Adding UnitTests to GitSsl and making it testable,0.36667055,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
Add out-of-proc telemetry daemon event listener,0.27260038,1740: Skip launching UI if running unattended,"Add a new telemetry event listener which sends JSON messages to a named pipe for out-of-proc dispatch to ETW/AI. The new listener can exist alongside any existing 'platform-specific' telemetry listeners (such as the ETW listener that is in-proc). Events/messages sent by the listener are 'fire-and-forget'; we do not retry and we do not wait any length of time for the pipe to be ready. The rationale here is that we do not want to introduce delay to the execution of the application for only telemetry events. Also if the current system does not have anyone listening on the telemetry named pipe then every message would delay the application execution by the pipe connection timeout(!) We continue to guard the telemetry listener's activation on the presence of the gvfs.telemetry-id global configuration entry, just like the existing in-proc ETW provider. The only difference is that now we don't care what the value of that config entry is, just that it is set. (The in-proc ETW listener uses the value for the ETW iKey which is stored in the daemon's logic instead now.)",0
readme: update path for PrjFS project,0.5812749,1664: Update USN journal entries for projected folders,,0
Merge pull request #637 from pmj/mac-kext-log-daemon,0.43137503,Pull Requests,Implementation of a new Mac kext log daemon which submits the kext's log messages to the system-wide os_log facility.,0
Mac PrjFS: New kext logging daemon,0.42471212,- Better errors around ProjFS installation issues.,"This adds a new executable target, PrjFSKextLogDaemon to the Xcode project. Similar to prjfs-log, it watches for a PrjFS kernel service, connects and begins logging any log messages from the kext. Unlike prjfs-log, they are sent to the macOS unified logging system (os_log) which will archive them for retrieval. The tool is intended to run as a launch daemon using the provided launchd plist.",0
Mac PrjFS user space: Report connection errors in service watch callback function.,0.5060247,- Added better diagnostic info in the GVFS logs when there are network errors,This allows each client of the API to do its own logging & recovery.,0
Mac PrjFS userlib: Code reuse improvements.,0.48403227,1744: Overhaul build and project systems and drop Mac/POSIX code," The functionality for ClearMachNotification()Â is used in more than one place, so this moves the function to the shared file and adds it to the header. Watching for service termination will be useful for the logging daemon, so thatâ€™s moved to the shared file too.",0
Mac kext: Removal of some obsolete code,0.5514861,1744: Overhaul build and project systems and drop Mac/POSIX code,"We neither have a kernel control socket, nor do we attempt to use os_log directly from the kext anymore.",0
Merge pull request #679 from pmj/new-xcodeproj-deployment-target,0.4774673,1706: Update Git to include GCM Core update,Mac: Sets deployment target to macOS 10.13 for all targets & sets indentation rules in Xcode project.,0
"Throwing InvalidRepoExcpetion, when ssl-related bool git config keys have non-bool values. Handling InvalidRepoException in CloneVerb.",0.42159984,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
Various code review fixes,0.62984806,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Moving certificate password loading to GitSsl class and other minor refacotrings,0.50903946,This includes the Git Credential Manager Core v2.0.394.50751.,,0
Substituting a var with explicit variable type,0.16630152,Major Changes,,0
"Making GitSsl non-disposable, to avoid IDisposable explosion. Addressing StyleCop issues",0.5477934,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index",,0
"Refactoring certificate loading into different methods, when loading from file and from store. Adding filtering and ordering, when loading from store",0.28661162,1711 [HOTFIX] Fix upgrader's expectation of a single certificate,,0
Renaming GitSsl properties as per code review suggestions,0.41785878,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Renaming LoadCertificate to GetCertificate,0.37379363,1711 [HOTFIX] Fix upgrader's expectation of a single certificate,,0
Refactoring GitSslSettings to be GitSsl and handle all the certificate loading. Extracting interaction with GitSsl from HttpRequestor to GitAuthentication,0.4789829,This includes the Git Credential Manager Core v2.0.394.50751.,,0
More StyleCop fixes,0.43986443,Bug fixes:,,0
"Adding log messages, when certificate, or its password",0.3431601,1710: Add new Microsoft certificate thumbprint,,0
Renaming GitConfigConstants for SSL,0.4741457,- Updated Git for a security issue.,,0
Fixing StyleCop issues,0.2869499,1685: minor path comparison fixup in ProductUpgrader,,0
Using git config setting http.sslVerify to enable or disable client and server certificate verification,0.49437663,This includes the Git Credential Manager Core v2.0.394.50751.,,0
"Fixing GitAuthenticationTests, adding test to verify GitSslSettings is populated correctly",0.51923966,- Consume new GCM to fix git credential erase behavior,,0
Addressing StyleCop errors,0.30881444,1741: Fix winget tag specification,,0
Moving SslSettings to GitAuthentication class,0.49315986,This includes the Git Credential Manager Core v2.0.394.50751.,,0
Addressing minor code review comments,0.26281968,General improvements:,,0
Fixing spacing,0.2796117,Bug fixes:,,0
Load SSL certificate according to git config,0.49020278,This includes the Git Credential Manager Core v2.0.394.50751.,,0
Merge pull request #675 from New UpgradeOrchestrator UT,0.542575,Pull Requests,"Goal of the new TestFixture  Verify UpgradeOrchestrator works works as expected with the new IProductUpgrader interface.  Test and also demonstrate state transitions inside UpgradeOrchestrator.  Implementation details This PR is based on this prototype PR. At a high level, it creates a Moq Mock instance of IProductUpgrader interface. Initializes UpgradeOrchestrator with the Moq upgrader instance. Then drives the orchestrator through simulated error scenarios and verifies it behaves as expected.",0
Merge pull request #678 from nickgra/FixLoadScript,0.45518488,Pull Requests,Update paths that refer to kext that were missed as part of refactor,0
UpgradeOrchestrator tests with generalized Upgrader,0.46989888,1746: Delete custom upgrader,"New UT for UpgradeOrchestrator using Mock IProductUpgrader instance. The goal is to make sure that UpgradeOrchestrator behaves well with the new IProductUpgrader interface. This adds to the existing UpgradeOrchestrator tests, which test the control flow and messaging. The new tests use Moq framework..",0
Merge pull request #677 Remove useless tracing and useless code,0.44509718,Pull Requests,"The OnGetFileStream() method is a very busy area of code when hydrating a repo. Don't bog it down with useless tracing that doesn't help anything. While exploring the code base for this excessive tracing, I found some code that can be safely deleted because it isn't used by anything.",0
Remove unnecessary parameter,0.28979257,1746: Delete custom upgrader,,0
Removing unused code,0.369866,1703: Delete all macOS projects,,0
Remove useless tracing in hot virtualization path,0.3459632,Improves the rate of .gvfsCache cleanup.,"When hydrating a file, we create a new activity for no reason. This event gets logged to telemetry, and that is wasting a lot of resources for something we are not actually reading. The errors and warnings are important, but the activity is not.",0
Use a single libgit2repo,0.37532756,1652: RepoRegistry: ignore non-existent repos,,0
Merge pull request #643 from pmj/kext-log-io-errors,0.49786294,Pull Requests,Mac kext: log more I/O errors,0
Mac kext: New error logging macros which wrap vnode property query & log,0.4781012,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Mac kext/native lib: Explicitly set indentation rules in Xcode project.,0.30743966,1744: Overhaul build and project systems and drop Mac/POSIX code,This avoids accidentally using the user's global indentation preferences.,0
"Mac kext: Adds logging for any unexpected, non-fatal errors.",0.43027604,- Added better diagnostic info in the GVFS logs when there are network errors,Return value checks are added for most vnode I/O calls which were thus far lacking them; these and any other previously ignored error conditions are logged.,0
Mac kext: Whitespace fix (code formatting),0.2713148,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Mac kext: Sets deployment target to macOS 10.13 for all targets,0.33974606,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,"The deployment target was only explicitly set to 10.13 for PrjFSLib, this sets it on the whole project and un-sets it in the PrjFSLib target so it inherits the project settings.",0
Set '-p:CopyPrjFS=true' during publish so the dylib gets copied into /Publish,0.3828361,1664: Update USN journal entries for projected folders,,0
Update path to built kext in LoadPrjFSKext.sh,0.3300629,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #676 from nickgra/PrjFSRefactor,0.48838612,Pull Requests,Refactor PrjFS.xcworkspace into PrjFS.xcodeproj,0
Merge pull request #673 Add ParallelHydrationTests,0.4610381,Pull Requests,"I was surprised to not find a functional test that does at least a basic level of stress testing file hydration. This test hydrates every file in the functional test enlistment across many threads, and then checks that each hydration succeeded. By sending either a path (success) or exception message (failure) we can see if there are any problems in any of the threads. If there is a problem in multiple threads, then we will only see one failure. If it takes longer than 5 seconds (on average) to read a file, then the test will fail, but my run took 35 seconds to hydrate the full list, giving plenty of time. During development, I had listed the files starting at the wrong commit, and so got a ""file missing"" error that was properly reported by the test framework. The logs look horrible, since the other reads were still trying to schedule work but a blocking collection was marked for completion due to the test unmounting the repo. Unfortunately, this does not find the bug from #655, but still improves coverage.",0
ParallelHydrationTests: Remove problematic paths used for other tests,0.42459866,1697: Fix functional tests to skip around ProjFS issue,,0
PowerShellRunner: List the path name that failed to hydrate,0.49121577,1658: ProjFSFilter: Be more robust to missing PowerShell,,0
Force checking out the commit used for the file listing,0.50723636,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,,0
Refactor PrjFS.xcworkspace into PrjFS.xcodeproj,0.43453133,1744: Overhaul build and project systems and drop Mac/POSIX code,"Our current system of having an .xcworkspace and separate .xcodeproj's that are stitched together with a scheme is inflexible when adding new targets that we want to build. Let's fix this by stitching them into a new .xcodeproj that has a aggregate target.  Fold both .xcodeprojs of PrjFS.xcworkspace into one .xcodeproj. This new .xcodeproj has a target for the kext, lib and logger with a Build All target for build scripts/ease of use. Update header paths for the new structure and update build scripts to handle the new workflow.",0
Merge pull request #614 from jamill/mac_build_tweaks,0.49158004,Pull Requests,Improve dev inner loop by enabling .NET SDK projects to build with dotnet CLI,0
GVFS.UnitTests: enable running tests with dotnet test,0.49457586,Instructions for installing and using GVFS are available at https://github.com/Microsoft/GVFS,"Tweak GVFS.UnitTests.csproj to work with the dotnet test command. The following scenario should work: Running the command ""dotnet test"" on the GVFS.UnitTest project should build   and run the assocated unit tests. Several changes are required to enable this scenario: 1) Do not Generate program file Our test project generates its own executable, which conflict with the default configuration of the vstest framework for netcoreapps. According to the links below, netcoreapps require a Program.cs, which is not usually included in test projects. Because of this, vstest implicity  adds this file for dotnetcore apps, which is conflicting with the explicitly included Program.cs we define. The suggested fix is to supress the automatic injection of the entry point via the ""GenerateProgramFile"" property. Links: https://github.com/Microsoft/vstest/issues/636 https://github.com/Microsoft/vstest/issues/608 2) Add PackageReference to Microsoft.NET.Test.SDK This is required for dotnet test to discover tests 3) Add PackageReference to NUnit3TestAdapter This is required to integrate NUnit tests with the test discovery / execution framework.",0
GVFS.Platform.Mac: optionally copy PrjFS native lib,0.52474856,GVFS is now available as a binary installer,"Teach GVFS.Platform.Mac to only copy libPrjFSLib if explicitly directed to, and have the BuildGVFSForMac build script specify the necessary argument. This change is to allow developers to build the GVFS.Platform.Mac project using msbuild on the command line and enable the use of ""dotnet build"" and ""dotnet test"" commands. The current build setup assumes that libPrjFSLib has been built and exists, and always attempts to copy it to the final BuildOutput directory. However, this native project is not directly built by the msbuild system, which relies on the BuildGVFSForMac build script to make sure it is built as expected. This causes problems with building the GVFS.Platform.Mac project directly. It also prevents us from running the unit tests without also building the native project.",0
GVFS.Platform.Mac: tweak csproj to always define GVFS version,0.5066396,Bug Fix: Fixes a bug with gvfs upgrade that causes versions v1.0.20112.1 from upgrading from private feeds.,"The GVFSVersion property was only defined for a subset of build configurations, caused other build configurations to fail. This caused the ""dotnet build"" command (without specifying other properties) to fail. While we may not want to support all build configurations, the build does not need to fail due to this missing property. This change defines the GVFSVersion property for all build configurations in the GVFS.Platform.Mac csproj.",0
Add ParallelHydrationTests,0.29624355,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #662 Update Git to include multi-pack-index expire fix and trace2 v3,0.5925411,1737: Update Git to v2.32.0,"  PR 107 in microsoft/git includes a fix for the way we permute the set of packs during a git multi-pack-index expire command. Specifically, this fixes an issue when we expire packs and add packs to the multi-pack-index at the same time (and the order of those packs).   PR 100 in microsoft/git includes updates to trace2. ",0
Merge pull request #672 Safe changes to LibGit2Repo,0.5350804,1737: Update Git to v2.32.0,"  Change the native method we call when disposing a repo from git_tree_free to git_repository_free.   Delete unused method for getting a blob size.   These were safe changes made as part of #655, but were reverted in #667 due to issues with the pool changes.",0
Merge pull request #628 Upgrade refactoring to enable Nuget upgrades,0.60046196,- Upgrade supports NuGet feeds as a distribution source.,"Refactor VFS4Git upgrade logic to support upgrade extensibility This is the first PR of a series of changes to enable upgrade extensibility. In this one, UpgradeOrchestrator and ProductUpgrader are refactored so it becomes easy to incorporate Nuget upgrader in an upcoming PR. In this PR:   Create a common interface for upgraders to implement (IProductUpgrader). IProductUpgrader encapsulates the API that components need to implement to download upgrade packages from specific feeds. A feed can be a GitHub release or a NuGet feed, for examples.   UpgradeOrchestrator, which contains the logic to drive the upgrade process (including querying for updates, unmounting / remounting repositories, and orchestrating the upgrade process) works against the IProductUpgrader interface. This means the orchestration is agnostic to the specifics of where the upgrade packages are downloaded from and how they are installed.   The existing ProductUpgrader class was renamed to GitHubUpgrader, as this component works against GitHub Releases.   GitHubUpgrader implements IProductUpgrader interface.   In an upcoming PR, a NugetUpgrader component (that also implements IProductUpgrader will be created. This component will know how to download and install upgrade packages from a NuGet feed.   ProductUpgrader implements a factory method that creates an IProductUpgrader instance. It can be GithubUpgrader (orNugetUpgrader in an upcoming PR) based on Local GVFS Configuration.   gvfs upgrade using existing Github/release upgrade works. UT also work.   End-to-End The features/upgrade_extensibility branch contains a preview of the end-to-end functionality. It includes a rough version of the upgrader that works with a NuGet feed. It can be used as a guide to see how we envision other upgraders to plug into the scaffolding being built in this PR.",0
Delete unused code in LibGit2Repo,0.41276398,1652: RepoRegistry: ignore non-existent repos,,0
Use 'git_repository_free' instead of 'git_tree_free',0.6076271,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",,0
Merge pull request #667 Revert #655 Dispose of unused LibGit2Repos,0.53674835,1652: RepoRegistry: ignore non-existent repos,"We just yesterday got the large repo build perf tests running again, but then they started failing after merging #655. Running a large repo build test on this branch succeeded, so we should revert and figure out what went wrong.",0
Update Git to include trace2 V3,0.59571403,1737: Update Git to v2.32.0,,0
Add note,0.42038628,Release Notes,,0
Refactoring needed to incorporate Nuget Upgrader,0.6251552,- Properly reacquire credentials during nuget upgrader,"Created new IProductUpgrader interface and a new Factory class ProductUpgraderFactory to create IProductUpgrader instances. Renamed old ProductUpgrader to GitHubUpgrader. GitHubUpgrader implements IProductUpgrader interface and contains all of the old functionality  in ProductUpgrader. Also renamed related Unit test classes (UpgradeOrchestratorTests to UpgradeOrchestratorWithGitHubUpgraderTests, MockProductUpgrader to MockGitHubUpgrader). Updated GVFS.Service, UpgradeVerb and UpgradeOrchestrator (upgrader tool) to use the new Factory class and IProductUpgrader instances. Also updated a few UT classes and did minor code cleanups. In an upcoming PR Nuget upgrader will be incorporated as a IProductUpgrader.",0
Revert #655 Dispose of unused LibGit2Repos,0.4744632,1652: RepoRegistry: ignore non-existent repos,,0
Update Git to include fix for midx expire,0.5535997,1647: Fix commit-graph expiration,,0
Merge pull request #655 Dispose of unused LibGit2Repos,0.5128449,1652: RepoRegistry: ignore non-existent repos,"The LibGit2RepoPool stores a collection of LibGit2Repo objects, which are our way of interacting with the native libgit2 library to discover object existence and local blob sizes. We currently create a list of these objects and don't dispose of them until we unmount. This has some strange side-effects:   libgit2 doesn't use the multi-pack-index, so it creates handles    to all of the .idx files, and sometimes the .pack files.   Since libgit2 has hold of these handles, the packfile maintenance    step cannot delete those files, and hence causes a problem when    that runs in the background. We have ways to clean up afterwards.   There are potentially other problems with the approach, such as ""how does libgit2 re-check the list of packfiles?"" It is possible (I have yet to verify) that libgit2 is stuck with its initial list of packfiles and hence a long-running mount process would actually be missing a lot of objects that are otherwise present via prefetch packs. The solution presented here is to dispose of these objects on a regular cadence, assuming no one has interacted with the pool in a while. Using the Timer, we can adjust the dueTime to delay the disposal action. We can now also add repos back to the pool as necessary.",0
Test allocating beyond the size limit,0.33679223,1697: Fix functional tests to skip around ProjFS issue,,0
Use bounded-size blocking collection,0.27016485,"- ""Sparse"" push algorithm should improve performance of pushes where only a small cone of a repository is modified.",,0
Merge pull request #658 Verify commit-graph and multi-pack-index after writing,0.6651324,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,"Run the git commit-graph verify and git multi-pack-index verify commands after any command that would change those files. If these fail, then delete the corrupt file and rewrite. We've had issues with users data in the past, and this gives us a way to automatically detect and repair these scenarios. The immediate rewrite should work since we will regenerate from the other Git data. Issues we've seen in the past are related to trusting the content in these files and carrying that data forward to future versions of the file.",0
Expand delay in unit test,0.28794813,1697: Fix functional tests to skip around ProjFS issue,,0
Move rewrite methods to GitMaintenanceStep,0.4183252,- Built-in git rebase is on by default.,,0
Update LibGit2RepoPool to have no max size,0.3926785,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",The max size will be enforced by external worker thread limits. We can more easily track the number of active repos and reduce the complexity of the pool.,0
Fix unit tests to run with libgit2 repo check,0.4514274,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
Clean up PackfileMaintenanceStep around verify results,0.42928436,* git multi-pack-index verify would run slowly if the objects directory had more than 2048 packfiles.,,0
Verify and rewrite during PackfileMaintenanceStep,0.41112015,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,,0
Verify and rewrite during PostFetchStep,0.3351056,- Disable commit-graph verify for performance concerns,,0
Verify files after writing them,0.43121698,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,,0
Merge pull request #660: Rename VSTS to Azure DevOps in Readme,0.49978313,- A couple of fixes for using VS Code on top of VFS for Git.,,0
Rename old service name,0.26822338,Please see the full change log.,,0
Add number of waiting threads to avoid deadlock,0.25903705,1745: do not exit early if no blobs found for a period when prefetching,,0
Update pool logic to avoid issues with PackfileMaintenanceStep,0.41874874,1675: PreCommandHook: don't lock pack-objects,,0
Add unit tests for LibGit2RepoPool,0.34593552,1697: Fix functional tests to skip around ProjFS issue,,0
Several renamings in LibGit2RepoPool,0.2941517,1717 [HOTFIX] Update Git to remove ODB string check,,0
Bind to correct method to free LibGit2 repos,0.4864818,1652: RepoRegistry: ignore non-existent repos,,0
Remove unused size method from LibGit2Repo,0.43660703,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",,0
LibGit2RepoPool: Dispose of unused LibGit2Repos,0.39968824,1652: RepoRegistry: ignore non-existent repos,"The LibGit2RepoPool stores a collection of LibGit2Repo objects, which are our way of interacting with the native libgit2 library to discover object existence and local blob sizes. We currently create a list of these objects and don't dispose of them until we unmount. This has some strange side-effects:   libgit2 doesn't use the multi-pack-index, so it creates handles    to all of the .idx files, and sometimes the .pack files.   Since libgit2 has hold of these handles, the packfile maintenance    step cannot delete those files, and hence causes a problem when    that runs in the background. We have ways to clean up afterwards.   There are potentially other problems with the approach, such as ""how does libgit2 re-check the list of packfiles?"" It is possible (I have yet to verify) that libgit2 is stuck with its initial list of packfiles and hence a long-running mount process would actually be missing a lot of objects that are otherwise present via prefetch packs. The solution presented here is to dispose of these objects on a regular cadence, assuming no one has interacted with the pool in a while. Using the Timer, we can adjust the dueTime to delay the disposal action. We can now also add repos back to the pool as necessary.",0
Merge pull request #657 GitMaintenanceScheduler: Remove PackfileMaintenanceStep,0.4929477,1706: Update Git to include GCM Core update,"The PackfileMaintenanceStep introduced an issue on the perf machine during CI builds, so pull it out of the scheduler until we fullly understand what happened and have a fix prepared. While in the scheduler, I noticed that the non-prefetch maintenance was not running when we are not using a cache server. Fix that so those users can still benefit from the maintenance.",0
GitMaintenanceScheduler: Remove PackfileMaintenanceStep,0.43582726,1717 [HOTFIX] Update Git to remove ODB string check,"The PackfileMaintenanceStep introduced an issue on the perf machine during CI builds, so pull it out of the scheduler until we fullly understand what happened and have a fix prepared. While in the scheduler, I noticed that the non-prefetch maintenance was not running when we are not using a cache server. Fix that so those users can still benefit from the maintenance.",0
Merge pull request #654 Add error message to output when call to gvfs/config endpoint fails,0.6355878,- Added better diagnostic info in the GVFS logs when there are network errors,Add error message to output when call to gvfs/config endpoint fails,0
Merge pull request #625: remove trailing whitespace,0.3850912,1717 [HOTFIX] Update Git to remove ODB string check,Remove trailing whitespace and enforce StyleCop rule SA1028,0
Introduce EditorConfig to help define consistent coding style,0.28708997,Includes fixes to config settings for internal users only,"EditorConfig is meant to help define and maintain consistent coding style across different editors and IDEs. A description for EditorConfig can be found at: https://editorconfig.org Visual Studio comes with native support for EditorConfig. https://docs.microsoft.com/en-us/visualstudio/ide/create-portable-custom-editor-options?view=vs-2017 VS Code doesn't currently support editorconfig out of the box, but it can be enabled with a plugin. EditorConfig.org lists the following plugin: https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig",0
Remove trailing whitespace and enforce StyleCop rule SA1028,0.21795866,1741: Fix winget tag specification,Clean up existing instances of trailing whitespace in our codebase and stop suppressing StyleCop rule SA1028 which enforces no trailing whitespace: https://github.com/DotNetAnalyzers/StyleCopAnalyzers/blob/master/documentation/SA1028.md,0
Add error message to output when call to gvfs/config endpoint fails,0.687394,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Merge pull request #635 PackfileMaintenanceStep,0.5048815,Pull Requests,"Create a new maintenance step for cleaning up the packfiles in the shared object cache. This is done in two steps:   git multi-pack-index expire: This deletes the pack-files whose objects appear in newer pack-files. The multi-pack-index prevents git from looking at these packs. Rewrites the multi-pack-index to no longer refer to these (deleted) packs.   git multi-pack-index repack --batch-size=<size> inspects packs covered by the multi-pack-index in modified-time order (ascending). Greedily selects a batch of packs whose file sizes are all less than ""size"", but that sum up to at least ""size"". Then generate a new pack-file containing the objects that are uniquely referenced by the multi-pack-index.   See this PR in microsoft/git for details of the git implementation. There are some important details:   The expire command will not delete packs that are marked with a .keep file. So, we can keep our most-recent prefetch pack around by writing a .keep file. This avoids any change to the logic for the most-recent good prefetch timestamp.   The expire command frequently fails to actually delete .idx files in a VFS for Git repo. This is due to something holding a handle to the files, as later we are able to delete them; we've seen this problem before with scripts that try to clean up the pack directory. We clean up .idx files that are not paired with a .pack after we run the expire step. This can generate warnings in the multi-pack-index write commands as it tries to add the packs based on their .idx files. The commands succeed, however.   According to the git pack-objects documentation, we should set the pack.window and pack.depth config settings to zero to avoid delta calculations. This saves significant computation time when our packs contain blobs, as the deltification algorithm can be very slow. If we were packing only commits and trees, the problem is not as significant. It is important that we don't set this globally, that way we actually compute deltas on push. Instead, just set the settings using the -c mechanism in Git. ",0
Update Git to include expire/repack subcommand,0.4958578,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",,0
PhysicalFileSystem.TryWriteAllText,0.3275562,- Multiple mount process reliability bugs have been squashed.,,0
Add multi-pack-index expire/repack maintenance step,0.4645133,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",,0
Merge pull request #645 from nickgra/FFSymLink,0.49694544,Pull Requests,Enable FastFetch to lay out symlinks correctly,0
Log filemode in eventmetadata,0.37795135,Adds additional logging for folder and file placeholder creation.,,0
Merge pull request #640 from jeschu1/looseobjects3,0.5131582,Pull Requests,LooseObjectsStep (Part 2),0
Eliminate member variable,0.22044477,1746: Delete custom upgrader,,0
PR Feedback 3,0.42923746,General improvements:,,0
Merge pull request #644 Update Git to include commit-graph BUG statement,0.67945915,1647: Fix commit-graph expiration,This prevents writing bad data to the commit-graph when the list of commits to write is corrupted in-memory.,0
Merge pull request #641 from pmj/vnode-leak-fix,0.5040724,1736: Update Git to v2.31.1.vfs.0.3,Mac kext: Fix for vnode leak causing shutdown/reboot hang and fix for memory leak,0
Clean up exception handling and rename variables now that this has been validated.,0.31124148,- Fixed several incorrect interactions with credentials,,0
Cheap symlink() implementation in NativeUnixMethods.cs,0.34565654,- Gracefully handle a missing shared object cache pack directory.,,0
Fix Functional Tests,0.6517341,1697: Fix functional tests to skip around ProjFS issue,,0
Update Git to include commit-graph BUG statement,0.70224386,1647: Fix commit-graph expiration,,1
PR Feedback2,0.37671554,General Improvements,,0
Update pack limits/cadence to optmial values found in testing,0.32814237,1697: Fix functional tests to skip around ProjFS issue,,0
Make Unit Test Paths Cross-Platform,0.367612,1697: Fix functional tests to skip around ProjFS issue,,0
PR Feedback 1,0.4241699,General improvements:,,0
Mac kext: Fix for provider user client methods being unnecessarily public.,0.35203484,- Fixed several incorrect interactions with credentials,"The external method functions need not be public in the provider user client class; this moves the only reference to them to be a static member of the class instead of a free constant, which allows us to mark the functions as private.",0
Mac kext: Fix for vnode leak on kext unload.,0.3909104,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,"When the kext is unloaded, all its objects in the IORegistry are terminate()d; for IOUserClient subclasses, this means that clientClose() is not called. For the provider user clients, this meant that they were not deregistered as active providers from the virtualization root list. This change fixes that by performing the deregistration on stop().",0
Mac kext: Fixes virtualization root array memory leak,0.3935263,- No-op gvfs prefetch --hydrate performance is dramatically improved,"The memory for the array of virtualization roots was not being freed on kext unload, this change fixes that. It also adds an array memory freeing helper function.",0
LooseObjectsStep (Part 2),0.40597346,1675: PreCommandHook: don't lock pack-objects, Pack loose objects into a Packfile,0
Merge pull request #639 from nickgra/VSIDEFix,0.52358186,- A couple of fixes for using VS Code on top of VFS for Git.,Fix VS IDE Builds post FastFetch and Versioning rework,0
Merge pull request #605 from jeschu1/newcleanupjob2,0.47896656,Pull Requests,Loose Object Cleanup Step (Round 2),0
Update PreBuild to pass Configuration into RestorePackages.bat so we can restore from within the VS IDE. Also fix a missing build dependency of PreBuild on GVFS.Hooks.Mac.,0.49814653,- A couple of fixes for using VS Code on top of VFS for Git.,,0
Merge pull request #632 from nickgra/versioncleanup,0.5461595,Pull Requests,Clean up Versioning and AssemblyInfo for .NET Core Projects,0
Minor PR Feedback,0.41595402,General improvements:,,0
Clean up all uses of hard coded versions in FunctionalTests projects and add new lines to the end of all new AssemblyInfo files.,0.53551793,1697: Fix functional tests to skip around ProjFS issue,,0
Move FunctionalTests.LockHolder to the unified version number.,0.5325372,1697: Fix functional tests to skip around ProjFS issue,,0
Unify CommonAssemblyInfo usage by pulling it all into GVFS.cs.props,0.47132587,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,,0
Add missed CommonAssemblyVersion to Virtualization and bump copyright string to 2019.,0.53038627,Previous builds were not including fully-signed DLLs. This is now fixed.,,0
Generate CommonAssemblyVersion.cs file on MacOS and update all SDK style projects to consume it.,0.47681898,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
PR cleanup for LooseObjects,0.3453089,1675: PreCommandHook: don't lock pack-objects,,0
Merge pull request #616 Update Git to include sparse push algorithm,0.6031287,"- ""Sparse"" push algorithm should improve performance of pushes where only a small cone of a repository is modified.",See this PR in microsoft/git for the changes here. Should speed up 'git push' by a significant amount. Also includes Git for Windows v2.20.1(1).,0
Loose Object Cleanup Step,0.38895622,1675: PreCommandHook: don't lock pack-objects, We call prune-packed to remove loose objects that are already in pack-files Dehydrate has been overloaded to run the new step using the internal flag,0
Update Git to include sparse push algorithm,0.69006443,"- ""Sparse"" push algorithm should improve performance of pushes where only a small cone of a repository is modified.",,0
Merge pull request #626: CI: Publish a mac build drop and consume it for functional test runs,0.5106889,1744: Overhaul build and project systems and drop Mac/POSIX code,Publish a mac build drop and consume it for functional test runs,0
Update Git to v2.20.1.vfs.1.1,0.83015025,1736: Update Git to v2.31.1.vfs.0.3,,1
Merge pull request #588 Allow --files-list option for prefetch,0.59477794,- gvfs prefetch learned how to take --files-list.,"This PR addresses #580 and adds --files-list option to prefetch verb. It also adds a magic file name, to allow passing in both --files-list and --folders-list via stdin.",0
Merge branch 'master' into fetchFilesFromList,0.3802994,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",,0
Merge pull request #496 from nickgra/fastfetchPort,0.47029787,Pull Requests,Stand up FastFetch on MacOS,0
Merge pull request #627 from jamill/git_for_vs2019,0.53785187,1663: Update Git to v2.27.0,Configure Visual Studio 2019 to use expected version of Git,0
Be consistent with the name TryStatFileAndUpdateIndex for platform specific methods in FastFetch and address other PR feedback,0.57906824,A case where FastFetch would not download a small number of files has been fixed.,,0
Register git for VFS as the git Visual Studio 2019 uses,0.66174716,- A couple of fixes for using VS Code on top of VFS for Git.,Set registry key that Visual Studio 2019 uses to set path to git.exe so it uses the expected version of git.,0
Publish a mac build drop and consume it for functional test runs,0.48047447,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Merge pull request #472 from jamill/fast_fetch_functional_tests,0.48764682,1697: Fix functional tests to skip around ProjFS issue,Add functional tests for LsTree parsing issue,0
Add functional tests for LsTree parsing issue,0.4165945,1697: Fix functional tests to skip around ProjFS issue,,0
Cleanup and functional test improvements,0.52826107,1697: Fix functional tests to skip around ProjFS issue,,0
"Renaming FileListFile -> FilesListFile, adding new properties to metadata",0.27718723,1664: Update USN journal entries for projected folders,,0
Fixing help text for PrefetchVerb,0.5166981,1745: do not exit early if no blobs found for a period when prefetching,,0
Merge pull request #620 Add unit tests for EpochConverter,0.3992436,Pull Requests,"We need EpochConverter to talk to the cache servers, and we are adding more dependencies on it with the maintenance steps. Add unit-level tests to ensure it is working correctly.",0
Address PR feedback and clean up error handling.,0.50086576,- Other perf and reliability fixes.,,0
Merge pull request #619 Remove parameterization from GitBlockCommandsTests,0.5028744,This includes the Git 2.30.2 security fix (CVE-2021-21300).,Remove parameterization from GitBlockCommandsTests,0
Merge pull request #608 Mac: Cleanup while investigating converting files to full,0.46896124,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!",Mac: Cleanup while investigating converting files to full,0
Add unit tests for EpochConverter,0.32990268,1697: Fix functional tests to skip around ProjFS issue,"We need EpochConverter to talk to the cache servers, and we are adding more dependencies on it with the maintenance steps. Add unit-level tests to ensure it is working correctly.",0
Merge pull request #615 Update Git to include builtin rebase perf fix,0.5449802,1676: Update Git to v2.27.0.vfs.1.0,"Includes changes from microsoft/git PR 94 to fix a perf regression in builtin rebase. Re-enables builtin rebase by default. The performance regression was from an extra index read/write. With the fix, we save two seconds from before in our perf tests.",0
Remove parameterization from GitBlockCommands,0.46255964,1717 [HOTFIX] Update Git to remove ODB string check,,0
Clean up use of platform specific code,0.55650073,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Merge pull request #618 from benpeart/git-block-commands-tests,0.48499024,Pull Requests,Update the GitBlockCommandsTests,0
Update Git to include builtin rebase perf fix,0.6584291,- Built-in git rebase is on by default.,,0
Update the GitBlockCommandsTests,0.48907763,This includes the Git 2.30.2 security fix (CVE-2021-21300).,Simplify and remove duplicate test cases for checking that unsupported git commands are blocked in VFSForGit repos. Signed-off-by: Ben Peart benpeart@microsoft.com,0
Merge pull request #597 from benpeart/block-commands,0.45210385,Pull Requests,stop blocking unsupported git commands,0
Merge pull request #610 from benpeart/reset.quiet,0.43851858,Pull Requests,Enable reset.quiet optimization in VFSForGit repos,0
stop blocking unsupported git commands,0.5625841,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.","Now that git has learned to block unsupported commands on VFS4G repos, we can remove that logic from the pre-command hook. Signed-off-by: Ben Peart benpeart@microsoft.com",0
Enable reset.quiet optimization in VFSForGit repos,0.5958096,- VFS for Git will performance maintenance in the background. This release will pack loose objects in .gvfsCache into packfiles. ,Update VFSForGit to use git build v2.20.0.vfs.1.1 that contains fixes for bad interactions between reset.quiet and the post-indexchanged hook. Set the reset.quiet setting in GVFSVerb:TrySetRequiredGitConfigSettings and ControlGitRepo:Initialize to take advantage of the performance improvements to 'git reset' in 2.20.0. Signed-off-by: Ben Peart benpeart@microsoft.com,0
Addressing code review comments regarding argument order and passing by name,0.20529532,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index",,0
Merge pull request #600 Update Git to v2.20.0.vfs.1.1,0.77012295,1676: Update Git to v2.27.0.vfs.1.0,Includes v2.20.0.windows.1. It also disables reset.quiet (correctness issue) and rebase.useBuiltin (performance issue).,1
Remove unneeded code to strip dev/ino/uid/gid from 'git ls-files --debug' code,0.47899997,Git commands are now allowed to delete an empty directory,,0
Load the correct stat implementation per platform. Needs further cleanup,0.31811702,1674: Config: disable status.submoduleSummary,,0
First steps towards moving to using native stat for index generation on Unix OSes,0.4572938,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index",,0
Merge branch 'fastfetchPort' of https://github.com/nickgra/VFSForGit into fastfetchPort,0.62918854,1736: Update Git to v2.31.1.vfs.0.3,,0
Merge pull request #613 from nickgra/TestResultGitIgnore,0.5190194,Pull Requests,Update gitignore for new TestResult.xml filenames,0
Additional cleanup of PrjFSLib.cpp,0.5472964,- Better errors around ProjFS installation issues.,,0
Update gitignore for new TestResult filenames,0.44705793,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Undo PlatformLoader change,0.34268922,1746: Delete custom upgrader,,0
Use legacy rebase,0.455773,- Built-in git rebase is on by default.,,0
Merge pull request #604 Pass ITracer to background process launching to log errors,0.44869748,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,Pass ITracer to background process launching to log errors,0
Merge pull request #602 Mac: Skip vnode operations that have the KAUTH_VNODE_ACCESS bit set,0.39657292,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,Mac: Skip vnode operations that have the KAUTH_VNODE_ACCESS bit set,0
Mac: Cleanup while investigating converting files to full,0.35118607,"A background task will now compress and deduplicate the pack-file data in the shared object cache, resulting in more sustainable disk usage",,0
Pass ITracer to background process launching to log errors,0.2738983,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,,0
Merge pull request #590 Set core.filemode according to platform,0.44308773,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",Allow core.filemode to be configured by platform,0
Explicitly set result for access checks and add profiling,0.32823816,1697: Fix functional tests to skip around ProjFS issue,,0
Update Git to vfs-2.20.0,0.8300704,1736: Update Git to v2.31.1.vfs.0.3,,1
Use ushort for the mode in ChangeMode methods,0.20768872,1674: Config: disable status.submoduleSummary,,0
Merge pull request #568 Use GetProcessById if OpenProcess handle is invalid,0.43597454,1658: ProjFSFilter: Be more robust to missing PowerShell,Use GetProcessById if OpenProcess handle is invalid,0
Address PR feedback. Rename NativeMacMethods to NativeUnixMethods while we're here,0.38613546,Initial Mac platform native notifications,,0
Add unit tests for the GVFSLock class,0.43628228,1697: Fix functional tests to skip around ProjFS issue,,0
Add flag to indicate if GetProcessById should used,0.32208657,1658: ProjFSFilter: Be more robust to missing PowerShell,,0
Add method that is only for getting the external lock holder,0.34968185,1675: PreCommandHook: don't lock pack-objects,,0
Fallback to slow method of getting process,0.35142562,Performance Improvements,,0
Fix download cleanup issue caught by Functional test,0.5463036,1697: Fix functional tests to skip around ProjFS issue,"When pre-checks fail, service was not cleaning up the upgrade downloads directory. This issue was caught by FT in CI build nodes, which don't have ProjFS inboxed causing pre-check to fail. Updated service to do the cleanup even when pre-check or download tasks fail.",0
Skip vnode operations that have the KAUTH_VNODE_ACCESS bit set,0.297986,- Disable commit-graph verify for performance concerns,,0
Fix Stylecop issues that snuck in after rebase and add some debugging statements,0.36238343,1685: minor path comparison fixup in ProductUpgrader,,0
Set core.filemode based on support,0.29998538,1674: Config: disable status.submoduleSummary,,0
Add test for filemode git behavior,0.51237786,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",,0
Fix two issues to enable the last two functional tests.,0.5953181,1697: Fix functional tests to skip around ProjFS issue," - When writing out a file, use the truncate flag so we don't overwrite the existing file and leave existing content if the new data size is shorter than the previous  - When comparing the index generated by FastFetch with an index created by 'git status' via 'ls-files --debug', remove the lines that contain dev, ino, uid and gid. We set these to 0 when writing out the index in FastFetch, which historically worked fine on Windows, but MacOS will set these to a proper, non 0 value when writing out the Index.",0
Pull all platform specific code into FastFetch's directory. Refactor PrefetchLibGit2 and move it into FastFetch. Rename PrefetchLibGit2Repo -> FastFetchLibGit2Repo,0.5060626,A case where FastFetch would not download a small number of files has been fixed.,,0
Address more PR feedback,0.4283814,General improvements:,,0
Address more PR feedback for consistency. Break apart PlatformLoader to,0.37642744,- Improved reliability of how the installer upgrades from non-inboxed to inboxed ProjFS.,separate the FileSystemVirtualizer (which requires a reference to GVFS.Virtualization) from the PlatformLoader.,0
Address PR feedback.,0.39103657,General improvements:,Notably: * Move to a class for tracking the tuple of Path and Mode * Reduce amount of duplicated test code in cleaning up after functional tests,0
Update diffhelper to properly track modes and wire it through to the mac platform,0.43197432,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Update FastFetch Functional Tests to run on MacOS and update the build script to find FastFetch in its new published location.,0.6214509,A case where FastFetch would not download a small number of files has been fixed.,,0
Enable FastFetch to be published on Windows as part of our build script.,0.62268937,A case where FastFetch would not download a small number of files has been fixed.,,0
Update project dependencies to prevent references to the new .NET Core,0.43987542,The build system was rewritten from scratch to simplify the process and use a more recent version of .NET.,FastFetch from .NET Framework projects,0
Package restoration has been broken for a while since in,0.39868832,1668: ProductUPgradeTimer: remove unacceptable Environment.Exit(),"RestorePacakges.bat, we only restored two of our .NET Standard projects. We should restore the entire .sln with .NET Core's dotnet command and pass in the correct package directory as we do on MacOS. Before these changes, .NET Core/Standard projects would have their packages restored into the user's home folder/.nuget. Since FastFetch was .NET Framework up until now, we never had issues with LibGit2Sharp not being present.",0
Refactor native calls out of PrefetchLibGit2Repo into platform specific,0.5223923,- No-op gvfs prefetch --hydrate performance is dramatically improved,functions.,0
Merge pull request #540: Start the move to yaml pipelines.,0.48722324,Pull Requests,,0
Merge pull request #572 from jamill/stylecopanalyzer,0.41409016,Pull Requests,Move to Roslyn-based StyleCopAnalyzer,0
Enlistment -> drop,0.35302797,* gvfs upgrade could fail if its background processes were launched in an existing enlistment.,PR feedback,0
Initial yaml for Azure Pipelines,0.35236797,  - Now scopes credential.useHttpPath to just dev.azure.com hostname,,0
Create build drops on Windows,0.43120137,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Move TreatWarningsAsErrors setting to GVFS.cs.props,0.50784063,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Fix StyleCop violations in PrefetchStep.cs and treat warnings as errors,0.4095258,1745: do not exit early if no blobs found for a period when prefetching,,0
Add StyleCop Analyzer,0.21058288,1666: Docs: start basic template,"Add the recommended StyleCop component as a Roslyn analyzer. This version of StyleCop has a couple of benefits over the msbuild version:   In addition to compile time checks, it will check for issues as you    type.   This version is supported in .NET Core and Standard projects   This version is being maintanied   This change attempted to preserve the existing rules for this project, but there are some differences in behavior between the new and legacy versions of StyleCop. I added the StyleCop Analyzer with the default configuration and went through the list of violations. For rules that we never followed, I added exceptions to GVFS.ruleset. For violations of rules that looked like they should have been flagged, I went and made code changes to fix the violation. The custom ruleset (GVFS.ruleset) does not include any of the basic rules for static code analysis. Statis code analysis had to be performed manually, and does not apply to .NET Core or Standard projects. As these rules appeared to not be widely used previously (we did not manually run static code analysis), and does not apply to the newer version of the framework, I decided to not keep them.",0
Mac projects should treat warnings as errors,0.40142664,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Remove Existing StyleCop NuGet packages,0.43161178,1703: Delete all macOS projects,,0
REmoving stdin option from FastFetch,0.54171574,A case where FastFetch would not download a small number of files has been fixed.,,0
Adding the stdin option to fastfetch to stay consistent,0.54899704,A case where FastFetch would not download a small number of files has been fixed.,,0
Downloaded Installers of previous versions should not trigger upgrade reminders,0.46883568,- The installer now unmounts and remounts existing repos automatically,"GVFS.Service does its periodic upgrade check. When it finds that the current version is up-to-date, it deletes the previously downloaded releases. In between the user may see reminder messaging while running git commands. User manually runs gvfs upgrade. When gvfs cli finds that the current version is up-to-date it deletes the un-needed release downloads. User would no longer see reminders.",0
Merge pull request #546 from pmj/perf-trace-histogram,0.44591182,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,"Mac kext: This change adds an array of buckets for timing ranges to each perf counter, which allows us to create a histogram and visualise the distribution of samples.",0
Adding --stdin-files-list and --stdin-folders-list flags,0.35251307,Adds additional logging for folder and file placeholder creation.,,0
Merge pull request #594 from jamill/build_fix,0.5015807,Pull Requests,Fix issue building VFS for Git inside of Visual Studio,0
Mac kext: Moves the perf tracing histogram log2 to a helper function,0.34512913,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,The code for the existing integer base-2 logarithm calculation wasnâ€™t entirely clear to follow. Moving it to an appropriately named helper function with a comment for explanation should help with that.,0
Merge pull request #585: Clean up some Mac TODOs,0.496701,Pull Requests,,0
Fix issue building GVFS inside of Visual Studio,0.65032995,1679: BuildGVFSForWindows.bat: use nuget on PATH,"When building inside of Visual Studio, the application manifest for GVFS.Service.exe.manifest is not created correctly in GVFS.PreBuild.csproj. It appears the cause of this issue is that you cannot use Item metadata from an ItemDefinitionGroup: Item metadata from an ItemGroup is not useful in an   ItemDefinitionGroup metadata declaration because ItemDefinitionGroup   elements are processed before ItemGroup elements. https://docs.microsoft.com/en-us/visualstudio/msbuild/item-definitions?view=vs-2017",0
Back to upper case since it works fine and keeps it consistent,0.29370528,Please see the full change log.,,0
Some unit test cleanup that helped me investigate the failures I was seeing,0.4953166,1697: Fix functional tests to skip around ProjFS issue,,0
"Store passed in flags, and renamed one to make it clearer",0.2960343,- Improvements to compact and maintain the ModifiedPaths.dat database to help mitigate the problem of command perf degrading over time in an enlistment.,,0
Gather all of the under construction flags into one class,0.21227458,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",,0
Mac: Adds histogram buckets to perf tracing in kext & output,0.364213,Perf improvements:,"Each time interval sample is now placed into one of the buckets in the PrjFSPerfCounterResult. The buckets represent log2-scale ranges of interval times. In the log output, the buckets are turned into a Unicode bar chart histogram to visualise the distribution of runtimes.",0
Mac kext: allow large perf tracing counter data structure,0.37433046,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,If a struct argument to an IOUserClient external method grows too large (typically >= 8KiB) the argument will be passed along as a memory descriptor. This change handles that case for  exporting the perf tracing data structure to user space.,0
Fix inverted checks,0.27765924,- Fixed several incorrect interactions with credentials,,0
Added specific flag for kernel logs,0.40645096,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Removed unnecessary under construction check for connecting to the mount process's pipe,0.52521074,- Multiple mount process reliability bugs have been squashed.,,0
Got rid of unnecessary under construction check,0.3467052,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Clean up hooksPath required by GitHooksLoader,0.48270094,1717 [HOTFIX] Update Git to remove ODB string check,,0
Create specific flag for ConfigVerb,0.36600336,Includes fixes to config settings for internal users only,,0
Remove under construction checks that are no longer needed,0.32749024,1717 [HOTFIX] Update Git to remove ODB string check,,0
Merge pull request #586 GitMaintenanceQueue: fix null queue behavior,0.4610661,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.","I saw a broken unit test build in #581, but it wasn't due to a change there. It was due to an incorrect handling of a null member in GitMaintenanceQueue and how it returned true if the blocking collection was null. If the timing is just right, that value wasn't null and the output was false. Fix this by doing the right thing: return false when the collection is null, and change the test to expect this.",0
Merge pull request #581 from jeschu1/fix,0.5207352,Pull Requests,Fix config lookup,0
GitMaintenanceQueue: fix null queue behavior,0.43085912,- Consume new GCM to fix git credential erase behavior,,0
Fix GetId Lookup and Add Unit Tests,0.31308392,1697: Fix functional tests to skip around ProjFS issue,,0
Fixing Windows build error,0.5160994,1679: BuildGVFSForWindows.bat: use nuget on PATH,,0
Adding --files-list option to PrefetchVerb. Allowing ot specify &1 for reading from stdin,0.6295918,- gvfs prefetch learned how to take --files-list.,,0
Clean up some Mac TODOs,0.4265633,1703: Delete all macOS projects,,0
Merge pull request #566 from pmj/prjfs-log-reconnect,0.46209902,Pull Requests,The prjfs-log tool on the Mac now can handle kext unload and reload by registering for service matching notifications.,0
Merge pull request #576 from pmj/fix-namedstream-io-errors,0.4422937,Pull Requests,This change in the Mac kext prevents I/O errors that were caused by erroneously operating on named file stream vnodes in the fileop handler. We now operate on the underlying real file's vnode instead.,0
Merge pull request #545 from pmj/kext-review-fixes,0.46496975,Pull Requests,Some bug fixes following a security-focused review of the code:  Stricter thread safety in our user client classes. Hardening GetRelativePath() against edge cases and removing an easy-to-provoke assert() and thus KP in it. Simplified some old logging code with equivalent helper macros we have since added.,0
Mac kext: minor tweaks to root rename detection code based on review notes,0.34466416,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Mac: Log error when failing to connect to kernel service,0.42212325,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Mac prjfs-log: Flush stdout after each batch of log messages.,0.32684118,1664: Update USN journal entries for projected folders,"When redirecting output to a file, this avoids buffered messages going missing.",0
Mac: Changes prjfs-log tool to handle kext unload/reload,0.38489246,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"Instead of searching for the PrjFS IOKit service once on startup, prjfs-log now registers for matching notifications. This means that if there is no PrjFS service running (the kext isn't loaded), it will sit and wait for it to turn up. Likewise, if the kext is unloaded, the logging infrastructure for that instance is cleanly torn down. The notification system continues to look out for new instances of the service, so when the kext is reloaded, logging immediately resumes. New messages are logged to indicate starting/stopping logging kext messages from a specific instance of the service.",0
Mac kext: Small change to UseMainForkIfNamedStream helper,0.3569421,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,"This removes the currently-unused functionality for releasing the incoming vnode if necessary, and makes the putVnodeWhenDone parameter a true output (as documented) by always updating its value.",0
Mac kext: Avoid working on file stream vnodes in fileop handler,0.31368786,- gvfs prefetch learned how to take --files-list.," Named file streams are not files themselves do not have file attributes, so attempting to do so on that type of vnode will fail. In the vnode listener, we've already been checking for this edge case, but the fileop handler thus far has not checked for file forks, and we were getting errors in the KAUTH_FILEOP_CLOSE events. This change moves the named stream check logic into a helper function which we can use from both vnode and fileop handlers. As this affects whether vnodes need to be released, I've unified the logic for this across the entire fileop handler. Named forks canâ€™t be renamed or hard linked, so we donâ€™t expect to get those events for such vnodes, and we donâ€™t need to defend against that case there.",0
Merge pull request #578 Fix bad test by fixing maintenance step lock string,0.50418615,Pull Requests,"The test PrefetchVerbWithoutSharedCacheTests.PrefetchCommitsToEmptyCache() only runs with the full test suite, not the PR test suite. This was not run during #493, and hence broke the CI build immediately after. The fix is a simple constant string change.",0
Fix bad test by fixing maintenance step lock string,0.45503187,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #570 from jeschu1/addversion,0.53855604,Pull Requests,Add Version to Heartbeat,0
Merge pull request #575 from benpeart/use-git-2-20-optimizations,0.54464734,1694: Update Git to v2.29.0.,Update git settings to enable optimizations in git 2.20,0
Update git settings to enable optimizations in git 2.20,0.5809196,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.","git 2.20 has some optimizations that will significantly help performance in GVFS repros.  Turn these options on by default in gvfs repros: Set 'checkout.optimizeNewBranch=true' to enable optimized 'checkout -b' Set 'index.threads=true' to enable multi-threaded index reads Set 'reset.quiet=true' to speed up 'git reset "" The associated patches in git are: commit fa655d8411cc2d7ffcf898e53a1493c737d7de68 Author: Ben Peart Ben.Peart@microsoft.com checkout: optimize ""git checkout -b <new_branch>""  commit 2a9dedef2ef76916be4a314a7e739f253eaf05db Author: Jonathan Nieder jrnieder@gmail.com index: make index.threads=true enable ieot and eoie  commit 4c3abd0551d8ff1c280de2bc53d6a7657b053d33 Author: Ben Peart benpeart@microsoft.com reset: add new reset.quiet config setting  Signed-off-by: Ben Peart benpeart@microsoft.com",0
Merge pull request #493: Refactor post-fetch job and background prefetch into GitMaintenanceSteps,0.5372095,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.","The post-fetch job and background prefetch features used different mechanisms to run in the background. Let's unify these as much as possible, and create a framework for more background actions to happen with minimal interruption. Most of the logic happens in GitMaintenanceStep, which does the following:  Takes a new ""object cache lock"" to prevent other cleanup steps from running. This can be ignored for user-initiated prefetches (by setting RequireCacheLock to false). The RunGitCommand method safely runs an action on a GitProcess, allowing that process to be halted by the Stop() method.  The actions in these cleanup steps are best-effort: if we can't get the object cache lock, then we don't run the step. Reoccurring cleanup steps are initiated by the GitMaintenanceScheduler. This is currently only the background prefetch step. The GitMaintenanceQueue receives cleanup steps and runs them in a background thread until the queue is empty (or receives a Stop() request). It is responsible for checking if the filesystem is ready for the cleanup actions.",0
Add Version to Heartbeat,0.34102142,1726: Config: commitGraph.generationVersion=1,,0
Small cleanups,0.52114224,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Mac kext: Write canonical root path to user client registry entry,0.26072618,1664: Update USN journal entries for projected folders,This is helpful for diagnostic purposes.,0
Mac kext: Obtain canonical path for virtualization root on registration,0.29949418,"- VFS for Git will check the GitHub releases for the configured ring and prompt occasionally when running Git commands in a VFS for Git repository. To configure your ring, use the new gvfs config verb, like:","Instead of storing the user-provided path with each virtualization root, obtain the path via vn_getpath() once we have the root vnode. This should resolve any discrepancies between the root path and paths to files within the root, which will be obtained using vn_getpath() too.",0
Mac kext: Minor logging improvements,0.3908307,Adds additional logging for folder and file placeholder creation.," Message response type is an unvalidated integer, so we should log if itâ€™s out of range. Replaces an instance of logging which explicitly gets a vnode path using vn_getpath() with the KextLog_FileInfo() macro created for that purpose. Also uses the macro for a similar code path where the path would be useful but was previously not logged.",0
Mac kext: Tightening up string handling for relative paths,0.3491545,Large improvements to git checkout performance when there are many folder placeholders.,"It is possible that the GetRelativePath() function is called with a root path that is not actually a parent path of the absolute path. As this would lead to a buffer overrun if the root path was longer than the absolute path, we had an assert â€œdefendingâ€ against that case. As itâ€™s currently possible to provoke this case from user space, the assert is not a great defence as asserts will KP, so this is a potential DoS vulnerability. Even if the lengths arenâ€™t a security issue, returning â€œte/pathâ€ as the result of GetRelativePath() called with â€œ/an/absolute/pathâ€ and a root of â€œ/some/pathâ€ doesnâ€™t really make any sense. This change makes the length sanity check â€œsoftâ€ (return nullptr) and checks whether root really is a true parent of path. This includes detecting that â€œ/an/aâ€ is not in fact a parent of â€œ/an/absolute/pathâ€ although it is a string prefix of it.",0
Mac kext: user client thread safety improvements,0.33347487,- Better recovery from a process that terminates without releasing the GVFS lock.,,0
Make GitMaintenanceScheduler a bit more generic,0.4168866,- Consume new GCM to fix git credential erase behavior,,0
Use IsAddingCompleted instead of a cancellation token,0.30477104,  - Now approves credentials on authentication success,,0
Resolve conflict with FileSystemCallbacks,0.46974164,- Gracefully handle a missing shared object cache pack directory.,,0
Merge pull request #567 from nickgra/pkillFunctionalTests,0.41873273,Pull Requests,Mac: Kill any git/gvfs processes when cleaning up after Functional Tests,0
Clean up any processes that could be left hanging after the functional tests run as we do on Windows,0.45349002,1697: Fix functional tests to skip around ProjFS issue,,0
maintenance steps: several cleanups,0.54931164,Background tasks run with lower priority to address user feedback on maintenance job performance.,TelemetryKey -> Area Extra metadata checks InProcessMount only knows about scheduler Use CompleteAdding() String and method style cleanups,0
Merge pull request #532 from jeschu1/startedbytelemetry2,0.44261914,Pull Requests,Allow multiple internal mount parameters,0
Cleanup -> Maintenance,0.6137547,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Allow multiple internal mount parameters,0.3644306,- Multiple mount process reliability bugs have been squashed.,,0
Merge pull request #461 Post index changed hook,0.52771956,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",Post index changed hook,0
Update git version to release with post index changed hook,0.66709304,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Remove wait for index parsing to start,0.41526306,"* Sped up GVFS's parsing of the git index, shaving off 2-3 seconds for a large index file",,0
Update method name to UpdateProjection,0.349318,1664: Update USN journal entries for projected folders,,0
Rename property used when index is changed,0.32021707,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Rename and some cleanup when index changes,0.31215835,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Update git version and rename flag to SkipWorktreeBitsUpdated,0.5363757,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",,0
Update error message in PostIndexChanged to match check,0.3233636,1717 [HOTFIX] Update Git to remove ODB string check,,0
Rename Hooks for HookData list to NativeHooks,0.24922985,1738: Bumping version of update-winget action,,0
Call AllowIndexToBeParsed in the TryReleaseExternalLock method,0.2705251,1740: Skip launching UI if running unattended,,0
Rename externalLockReleaseRequested to parseIndexRequested,0.3026504,1675: PreCommandHook: don't lock pack-objects,,0
Rename parameters of OnIndexFileChanged to match context,0.25984406,"* Sped up GVFS's parsing of the git index, shaving off 2-3 seconds for a large index file",,0
Update some naming for post index changed hook,0.40430182,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Rename method to CheckLockWhenIndexChanged,0.29420266,1675: PreCommandHook: don't lock pack-objects,,0
Fix update-index tests,0.44774985,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Turn on rebase conflict tests for Mac,0.48999852,- Built-in git rebase is on by default.,,0
Update dependencies for the PostIndexChangedHook,0.37576932,1738: Bumping version of update-winget action,,0
Keep the update placeholder errors and display at the end,0.48645562,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Add PostIndexChangedHook to Xcode scheme,0.29393142,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Don't build GVFS.PostIndexChangedHook.Windows on Mac,0.5373544,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,,0
Add dependency on GVFS.PostIndexChangedHook to the GVFS.SignFiles project,0.6411952,1683: GVFS.SignFiles.csproj: include more DLLs for signing,,0
Add tests for commands when files are hydrated,0.298507,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Update to git version that has the post-indexChanged hook,0.7307757,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,1
Add PostIndexChangedHook project and install,0.32996643,- Improved reliability of how the installer upgrades from non-inboxed to inboxed ProjFS.,,0
Add named pipe message for post index changed,0.3266052,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Add new hook for post index changed,0.42869624,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Merge pull request #553 Update git version to 2.19.1.gvfs.1.7.g43ac102,0.708287,1676: Update Git to v2.27.0.vfs.1.0,Update git version to 2.19.1.gvfs.1.7.g43ac102,1
Merge pull request #557: Mac: Give an error message on CLI when the kext is not loaded,0.4090968,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
Merge pull request #552: Early exit a noop blob prefetch,0.6433363,1745: do not exit early if no blobs found for a period when prefetching,,0
Merge pull request #536 from jeschu1/enlistmentinfo,0.47343707,Pull Requests,Add DiskInfo to HeartBeat,0
Stop the queue during unit tests,0.32424262,1697: Fix functional tests to skip around ProjFS issue,,0
Add DiskInfo to HeartBeat,0.23133534,1745: do not exit early if no blobs found for a period when prefetching,,0
Update to use a blocking queue ,0.30707404,  - Break down update placeholders timings so we can see where time is spend during checkout.,"Thanks, Jessica!",0
"Give an error message on CLI when the kext is not loaded, rather than just failing to connect to the mount process",0.38200414,- Multiple mount process reliability bugs have been squashed.,,0
Fix typo,0.3062365,1741: Fix winget tag specification,,0
Better logging and other cleanup,0.49098545,Performance Improvements,,0
gvfs config - error out while reading missing key,0.5587944,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",gvfs config now treats an attempt to read a unknown key as error and exits with GenericError code. No error message is printed. Fixes #402 Comparing gvfs config behavior vs git config.,0
GitClenupStep: Fix Race Condition,0.51966214,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.",,0
Add a functional test covering noop prefetch,0.4816553,1745: do not exit early if no blobs found for a period when prefetching,,0
Don't spend time authenticating if we're going to noop,0.3796646,  - Now erases credentials on authentication failure,,0
Update to use a blocking queue,0.30707404,  - Break down update placeholders timings so we can see where time is spend during checkout.,,0
Update git version to 2.19.1.gvfs.1.7.g43ac102,0.7610512,1676: Update Git to v2.27.0.vfs.1.0,,1
"On a successful blob prefetch, save the parameters used. If the next prefetch has the same params, early exit.",0.80401284,1745: do not exit early if no blobs found for a period when prefetching,,1
Merge pull request #548: Prefetch code cleanup,0.484095,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index",,0
More rename cleanup,0.30801484,General improvements:,,0
Fix StyleCop issues,0.28923064,Bug fixes:,,0
Add comments describing how the prefetch stages interact,0.53833556,1745: do not exit early if no blobs found for a period when prefetching,,0
Renamed prefetch jobs to pipeline stages,0.48065907,1745: do not exit early if no blobs found for a period when prefetching,,0
Moved fastfetch-specific extension methods,0.5396258,A case where FastFetch would not download a small number of files has been fixed.,,0
Deleted unused classes and moved another fastfetch-specific class,0.5588027,1730: Fix an issue with FastFetch when deleting files,,0
"Make the object cache lock optional, specifically so user-initiated prefetches don't require the lock",0.4886706,1745: do not exit early if no blobs found for a period when prefetching,,0
"Move files that are general to git, not specific to prefetch",0.49792022,"- VFS for Git will prefetch commits and trees from a cache server in the background on a schedule, to improve the speed of user-initiated fetches, pulls, and pushes",,0
Move fastfetch-specific files,0.59794456,1730: Fix an issue with FastFetch when deleting files,,0
VFSForGit reminds of updates when there is none,0.64045227,"VFS for Git will check in the background for an available upgrade. If one is available, a message will be shown periodically to the user in the post-command hook to run gvfs upgrade to install the new version."," GVFS.Service does its periodic upgrade check. When it finds that the current version is up-to-date, it deletes the previously downloaded releases. In between the user may see reminder messaging while running git commands. User manually runs gvfs upgrade. When gvfs cli finds that the current version is up-to-date it deletes the un-needed release downloads. User would no longer see reminders.  Fixes #502",0
Functional test: add check that tmp_* files and multi-pack-index.lock are deleted,0.47091818,* git multi-pack-index verify would run slowly if the objects directory had more than 2048 packfiles.,,0
GitCleanupStepTests,0.50802743,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",,0
GitCleanupQueueTests,0.5566555,1717 [HOTFIX] Update Git to remove ODB string check,,0
Inject a GitProcess into GitObjects.TryDownloadPrefetchPacks() to allow the PrefetchStep to be interruptible,0.49709946,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.",,0
Delete tmp_ files on prefetch,0.46202755,1730: Fix an issue with FastFetch when deleting files,,0
Only schedule PrefetchStep when in attended mode and using a cache server,0.52231705,1745: do not exit early if no blobs found for a period when prefetching,,0
Catch and log the exceptions thrown by Thread.Start(),0.22737283,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Refactor post-fetch job and background prefetch into GitCleanuSteps controlled by GitCleanupQueue and GitCleanupScheduler,0.504341,"- VFS for Git will prefetch commits and trees from a cache server in the background on a schedule, to improve the speed of user-initiated fetches, pulls, and pushes",,0
Fix a NullReferenceException in MockTracer,0.34259725,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #538 from jeschu1/pipewarning,0.47892067,Pull Requests,ReadMessage IOException should be a warning,0
ReadMessage IOException should be a warning,0.34447575,- Multiple mount process reliability bugs have been squashed.,This can happen when user ctrl-c's on a command,0
Merge pull request #510 from jeschu1/telemetryrepair,0.44357318,Pull Requests,Add EnlistmentId to RepairVerb,0
Add EnlistmentId to RepairVerb,0.4277367,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,If we can read the enlismentId from the config file we will add it to telemetry.,0
Upgrade reminder causes functional test failure,0.4839549,1697: Fix functional tests to skip around ProjFS issue,When git is run against an enlistment it ignores reminder messaging. Updated ProductUpgradeReminder to remind everytime. This is only to verify all Git tests get to see the reminder message and are able to successfully ignore it. Incorporated review comments. Fixes #428,0
Merge pull request #469 from jeschu1/WriteFileTelemetryFix,0.44427997,Pull Requests,WriteFile: Fix Logging,0
Merge pull request #478: Better git config handling when warnings are present.,0.62138295,This includes the Git 2.30.2 security fix (CVE-2021-21300).,Ignore non-zero exit codes when calling git config and all lines on stderr are prefixed 'warning',0
Finish cleaning up last calls to config that don't handle warnings correctly,0.39440158,1674: Config: disable status.submoduleSummary,,0
"Merge pull request #448: Mac: Clean up kext perf tracing patterns, and a significant perf fix",0.475013,Perf improvements:,,0
Accept a default for GitProcess.ConfigResult.TryParseAsString(),0.45308688,1717 [HOTFIX] Update Git to remove ODB string check,,0
Patch up consumer of TryGetFromConfig,0.39993787,Includes fixes to config settings for internal users only,,0
Introduce GitProcess.ConfigResult to encapsulate how to parse the output of a call to git config,0.45326704,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index",,0
Only fail config reads that have both non-warning output on stderr and non-zero return codes,0.30826655,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,,0
Teach GitProcess.Result how to tell if stderr was all warnings,0.43982404,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
Use ExitCodeIsSuccess instead of !ExitCodeIsFailure for readability,0.28049242,1745: do not exit early if no blobs found for a period when prefetching,,0
Rename GitProcess.Result.HasErrors to GitProcess.Result.ExitCodeIsFailure,0.49881983,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
Fix for perf tracing integer overflow regression,0.46835703,Perf improvements:,"The interval variable is of type uint64_t, so the expression interval * interval also evaluates to a value of type uint64_t, meaning the result of the multiplication will be truncated if interval is 1llu << 32 or greater, regardless of the fact that the result is stored in a variable of type __uint128_t. Casting one side of the multiplication to the larger type fixes the problem.",0
Measure the time spent within VirtualizationRoot_FindForVnode,0.2818927,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
Each tracer instance is now enabled or not based on a sampling rate (currently set at 1%),0.30662516,We have new documentation including a new troubleshooting guide!,,0
Added perf samples to the file op path,0.53411615,Perf improvements:,,0
"Only find the virtualization root if we know we need to interact with the provider. This results in a dramatic perf improvement because the majority of events, even within a virtualization root, are on already-hydrated files.",0.413603,- No-op gvfs prefetch --hydrate performance is dramatically improved,,0
Created a pattern for measuring hierarchical samples of where time is being spent in the kext,0.298278,  - Break down update placeholders timings so we can see where time is spend during checkout.,,0
Basic Mac Installer for VFSForGit,0.66593,GVFS is now available as a binary installer,"Split GVFS.Installer project into two - GVFS.Installer.Mac and GVFS.Installer.Windows. Running the Mac buildscript - BuildGVFSForMac.sh creates the Mac installer in build output directory of GVFS.Installer.Mac project. Mac installer installs vfsforgit assemblies inside /usr/local/vfsforgit directory. PrjFS binaries (lib, kext and log tool) get installed in /usr/local/vfsforgit/prjfs directory. resolves #393",0
Service should no check for upgrades when unattended,0.48545682,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,GVFS.Service - dont schedule upgrade check timer when running in un-attended mode. Fixes #495,0
Merge pull request #501 from pmj/abort-pending-dead-provider-events,0.47451437,Pull Requests,Mac kext: Abort events awaiting response when their provider disconnects,0
Service not to upgrade check when unattended,0.49069923,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,GVFS.Service - dont schedule upgrade check timer when running in un-attended mode. Also made upgrade timer IDisposable. Fixes #495,0
Git hooks to show no upgrade reminder when running un-attended,0.5549655,"VFS for Git will check in the background for an available upgrade. If one is available, a message will be shown periodically to the user in the post-command hook to run gvfs upgrade to install the new version.", Dont try to trigger reminder messaging when running in unattended mode. GVFS Hooks already check for un-attended mode. Re-using this to suppress upgrade reminder notification. Fixes #494,0
Mac kext: Change message field & enum value names to be more descriptive,0.2728358,Initial Mac platform native notifications,"As the â€œabortedâ€ outcome due to a disconnecting provider is not actually a response from the provider itself, it makes more sense to talk about â€œresultsâ€ than â€œresponses.â€",0
Mac kext: Rework TrySendRequestAndWaitForResponse shutdown/error handling,0.29490912,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Mac kext: Outstanding message comment & code formatting cleanup.,0.3630333,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Mac kext: A more meaningful name for lock protecting virtualization roots,0.45302933,- Better recovery from a process that terminates without releasing the GVFS lock.,,0
"Mac kext: Reverts addition of mutex sleep API, reuse existing Sleep()",0.28039292,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,"This reverts the previously added Mutex_Sleep() function for waiting for an event while a Mutex is held, and instead adds that functionality to the existing Sleep()Â function by allowing an optional Mutex pointer to be passed to it.",0
Mac kext: Abort events awaiting response when their provider disconnects,0.33227158,1740: Skip launching UI if running unattended," The virtualization root handle for the responsible provider is stored in the outstanding message struct. When a provider disconnects, all events pending responses from that provider are marked as aborted, and the corresponding waiting threads are resumed. This prevents deadlocks. Additionally, incoming responses from providers are now checked to match the expected root handle in the outstanding message.",0
Mac kext: adds RWLock_DropExclusiveToShared wrapper function,0.26980805,1675: PreCommandHook: don't lock pack-objects,This allows atomically degrading an exclusive lock to a shared one without completely unlocking in between. (I.e. no thread can acquire the lock for writing in the interim.),0
"Mac kext: fixes theoretical KP, moves message sleeping into mutex",0.26780578,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,"  When attempting to send a request to a provider while shutting down the kext, there could be a theoretical nullptr dereference, due to the pending message data structure not being added to the list, an attempt subsequently being made to remove it from that list. The condition has been changed to directly exit the function at that point instead.   In order to ensure that outstanding messages have been safely aborted, the lock should be held when reading the messageâ€™s receivedResponse field. This necessitates the thread sleep to interact with the mutex: only drop the lock for the duration of the sleep.   To facilitate item 2, a new Mutex_Sleep() wrapper function has been added which calls down to the appropriate kernel mutex function.",0
Merge pull request #505 from jeschu1/streamnotreadable,0.45048517,Pull Requests,Check CanRead before constructing StreamReader,0
Dont try to trigger reminder messaging when running in unattended mode.,0.44120425,1740: Skip launching UI if running unattended,Fixes #494,0
WriteFile: Fix Logging,0.44167602,Adds additional logging for folder and file placeholder creation.,FileClose replaces ResultExtensions.HResultFromNtStatus.FileClosed as an expected condition,0
Check CanRead before constructing StreamReader,0.20884833,1732: Use one NuGet feed, if Stream is not readable an exception will be thrown by the StreamReader constructor,0
Merge pull request #465 Mac: Support 'gvfs diagnose' verb,0.6068795,- Added better diagnostic info in the GVFS logs when there are network errors,Mac: Support 'gvfs diagnose' verb,0
PR Feedback and fix compilation issues,0.5188243,Bug fixes:,,0
"Add IsSocket and IsExecutable to platform filesystem, fix Windows build break",0.47079504,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Merge pull request #477 Easy fixes for 'git push' performance,0.69273245,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!","This PR does two things that are super-easy fixes for improving 'git push' performance.  Set pack.useBitmaps to false on mount time. Update Git to Git-2.19.1.gvfs.1.3.ge56ee8b, which includes a change to stop checking ambiguous refs during 'git pack-objects'. This reduces possibly thousands of file reads of the form:  .git/<oid> .git/refs/<oid> .git/refs/tags/<oid> .git/refs/heads/<oid> .git/refs/remotes/<oid> .git/refs/remotes/<oid>/HEAD By setting the config value, we don't perform these file checks for the object ids that are passed into stdin. For (1), this PR sets pack.useBitmaps to false for VFS for Git enlistments. This config value defaults to true, and during git pack-objects we check for the existence of a .bitmap file for every packfile, even those covered by the multi-pack-index. Each of these checks took 2-3 seconds on my small test. I hope to get better numbers before merging, but want to see our scale tests.",0
Update Git to Git-2.19.1.gvfs.1.3.ge56ee8b,0.82170004,1676: Update Git to v2.27.0.vfs.1.0,,1
Merge pull request #468 from jeschu1/telemetry2,0.4672045,Pull Requests,TryPrefetchCommitsAndTrees downgraded to Warning,0
Merge pull request #470 from jeschu1/CacheToWarning,0.505984,Pull Requests,TryDeleteStatusCacheFile as Warning,0
GVFSVerb: Turn off pack.useBitmaps,0.5502323,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
Merge pull request #441 from jamill/fast_fetch_parsing_fix,0.39613408,"* Sped up GVFS's parsing of the git index, shaving off 2-3 seconds for a large index file",FastFetch: properly handle items with special tokens in path,0
TryDeleteStatusCacheFile as warning,0.49058276,- Gracefully handle a missing shared object cache pack directory.,This is an expected condition that happens when status is being read to and removed at the same time.   This will self heal but we want to keep a warning to know how often it happens.,0
TryPrefetchCommitsAndTrees downgraded to Warning,0.38646424,1747: UpgradeVerb: write deprecation notice,"This can worsen performance, but will not stop mount from working.  Hence this error has been downgraded to a warning.",0
First round of changes for PR feedback,0.46927834,General improvements:,,0
Merge pull request #466: Add Scripts/Mac/CI/CreateBuildDrop.sh,0.5170301,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Create a script to create a build drop to enable running functional tests on boxes that didn't build the product.,0
Add a script used by the CI to create a build drop for running functional tests on other machines,0.31595716,1697: Fix functional tests to skip around ProjFS issue,,0
Mac: Support 'gvfs diagnose' verb,0.6087813,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Merge pull request #462 PrefetchVerbTests: Remove commit-graph check,0.6274223,1647: Fix commit-graph expiration,"In the EnlistmentPerFixture.PrefetchVerbTests class, we have the same PostFetchJobShouldComplete() method as we do in the version without a shared cache, except that none of our tests in the class actually trigger a commit-graph write. The commit-graph write requires a prefetch that downloads a new prefetch packfile, while the multi-pack-index is rewritten on every prefetch (in case a non-prefetch packfile was added). We don't write the commit-graph on clone because we need a full enlistment to guarantee missing object downloads. Somehow, these test succeed in the full test suite, but do not succeed when only the one class is run. This caused some pain for someone stepping through the tests in a debugger. Instead of removing the commit-graph check, instead see if the commit-graph file exists before calling git commit-graph read. This allows us to still check that the commit-graph file exists and is in good condition (when it exists).",0
PrefetchVerbTests: Remove commit-graph check,0.7036277,- Disable commit-graph verify for performance concerns,"In the EnlistmentPerFixture.PrefetchVerbTests class, we have the same PostFetchJobShouldComplete() method as we do in the version without a shared cache, except that none of our tests in the class actually trigger a commit-graph write. The commit-graph write requires a prefetch that downloads a new prefetch packfile, while the multi-pack-index is rewritten on every prefetch (in case a non-prefetch packfile was added). We don't write the commit-graph on clone because we need a full enlistment to guarantee missing object downloads. Somehow, these test succeed in the full test suite, but do not succeed when only the one class is run. This caused some pain for someone stepping through the tests in a debugger. Instead of removing the commit-graph check, instead see if the commit-graph file exists before calling git commit-graph read. This allows us to still check that the commit-graph file exists and is in good condition (when it exists). The multi-pack-index is guaranteed to exist after every post-fetch job.",1
Merge pull request #447 Add ability to specify an iKey for the ETW listener,0.36745685,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,Add ability to specify an iKey for the ETW listener,0
Merge pull request #460 from nickgra/deletePATInPrep,0.48618656,1689: Make delete docs more verbose,Mac: Handle setting the PAT in PrepFunctionalTests.sh correctly after a kernel panic,0
"Before putting a PAT on the keychain in PrepFunctionalTests.sh, try removing the old one first if it wasn't properly cleaned up (likely in the case of a panic)",0.40912244,1697: Fix functional tests to skip around ProjFS issue,,0
Use explicit class declarations instead of an anonymous class for payload,0.26263475,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Merge pull request #456 Mac: Disable StatusTests.MoveFileIntoDotGitDirectory,0.4616155,This includes the Git 2.30.2 security fix (CVE-2021-21300).,Mac: Disable StatusTests.MoveFileIntoDotGitDirectory,0
Merge pull request #451 from nickgra/fileopAttributesPanic,0.5061324,Pull Requests,Mac: Don't assert/panic when we fail to read attributes during a FileOp operation,0
Merge pull request #455 Disable Native_ProjFS_MoveFile_PartialToOutside functional test,0.6157758,1697: Fix functional tests to skip around ProjFS issue,Disable Native_ProjFS_MoveFile_PartialToOutside functional test,0
Mac: Disable StatusTests.MoveFileIntoDotGitDirectory,0.40982842,1674: Config: disable status.submoduleSummary,,0
Address PR feedback,0.36100137,General improvements:,,0
Disable Native_ProjFS_MoveFile_PartialToOutside functional test,0.64913934,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #437 from jeschu1/virtualrepoready,0.44692627,Pull Requests,Telemetry: Record when a mount succesfully starts,0
Disable panic in fileop handler,0.39335066,1730: Fix an issue with FastFetch when deleting files,,0
Telemetry: Record when a mount succesfully starts,0.42869136,- Multiple mount process reliability bugs have been squashed.,,0
Merge pull request #445 Mac: Run GitRepoTests with and without validating the working directory during setup,0.5201473,Git commands are now allowed to delete an empty directory,Mac: Run GitRepoTests with and without validating the working directory during setup,0
"Add path helper method, only run with both validation options when running the full suite of tests",0.32642457,1697: Fix functional tests to skip around ProjFS issue,,0
Add ability to specify an iKey for the ETW listener,0.21077466,Upgrade supports an anonymous endpoint to decouple rollouts to different engineering systems.,,0
Clean up NUnit source parameterization,0.2862138,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Enable HashObjectTests and RmTests on Mac,0.35001117,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Merge pull request #439 from nickgra/downloadDylib,0.49074012,Pull Requests,Mac: Consume libSharedDataQueue.dylib,0
Merge pull request #434 Update Readme.md,0.6844596,1750: Update Readme.md,Update Readme.md,0
FastFetch: properly handle items with special tokens in path,0.5515498,A case where FastFetch would not download a small number of files has been fixed.,"FastFetch does not correctly handle paths with certain text. For example, if a file includes the string "" tree "", then FastFetch will consider this a tree entry, and will create a directory for it. This change it to only look at the type field from ls-tree when determining the type of entry.",0
Address PR feedback on naming,0.36904323,General improvements:,,0
Mac: Run GitCommandsTests with and without validating the working directory during setup,0.55244434,Git commands are now allowed to delete an empty directory,,0
Merge pull request #408 Add untracked files from reset mixed to ModifiedPaths.dat,0.4485155,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles",Add untracked files from reset mixed to ModifiedPaths.dat,0
Consume libSharedDataQueue.dylib by downloading it as a NuGet package. Add this new script to PrepFunctionalTests.sh to ensure everyone is on a healthy version of the library.,0.41057342,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #415 from jeschu1/warn_instead,0.5153458,Pull Requests,Mount: Remove unnecessary tracing,0
Merge pull request #429 from pmj/ioshareddataqueue-workaround-dylib,0.41846496,Pull Requests,Mac PrjFSLib: Use IOSharedDataQueue workaround library if available,0
Mac PrjFSLib: Use IOSharedDataQueue workaround library if available,0.381711,Switched over to use the Windows Projected File System (ProjFS) optional feature on RS4 and later. ProjFS is the new name for the GvFlt driver and its associated user mode library.,"This allows PrjFSLib and the prjfs-log tool to use alternate versions of the IODataQueueDequeue() and IODataQueuePeek() functions from a dylib on OS versions where the built-in functions are buggy. On affected versions, a library ""libSharedDataQueue.dylib"" is loaded if available, and its implementations of the aforementioned functions are used for the message and kext logging queues instead of the ones supplied by the OS's IOKit.framework.",0
Merge pull request #418 Mac: Do not panic when file attributes cannot be read during vnode callback,0.48448986,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,Mac: Do not panic when file attributes cannot be read during vnode callback,0
Deny I/O when file attribute read fails,0.26844043,- Better recovery from a process that terminates without releasing the GVFS lock.,,0
Assert that file attribute read does not fail in FileOp events,0.3083611,1697: Fix functional tests to skip around ProjFS issue,,0
Mac: Skip events when file attributes cannot be read,0.3031893,Adds additional logging for folder and file placeholder creation.,,0
Use DataSources.AllBools in unit tests,0.34030467,1697: Fix functional tests to skip around ProjFS issue,,0
Merge remote-tracking branch 'msft/master' into reset_mixed_untracked_placeholders,0.37639344,1717 [HOTFIX] Update Git to remove ODB string check,,0
Merge pull request #435: Move build dependencies feed,0.5288014,Pull Requests,,0
Use StringBuilder in BG task and update unit tests,0.27627793,1697: Fix functional tests to skip around ProjFS issue,,0
PerfProfiling should not initialize GVFSPlatform twice,0.47113752,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
Migrate nuget feeds,0.72942334,- Upgrade supports NuGet feeds as a distribution source.,,1
Merge pull request #430 from nickgra/objectArrays4NUnit,0.39392132,Pull Requests,Mac: Revisit DiffHelperTests parameterization to follow NUnit documentation.,0
Merge pull request #427: Modify PrepFunctionalTests.sh to work out of the output directories,0.5149046,1697: Fix functional tests to skip around ProjFS issue,,0
Implement a generic bool array for use with parameterized TestFixtures.,0.4117764,1697: Fix functional tests to skip around ProjFS issue,,0
StyleCop fixes,0.44483525,Bug fixes:,,0
PR Feedback: Use different GitIndexEntry methods when building new projections and running background tasks,0.49204922,"* Better memory management in git, creating a savings of up to half a second on commands that parse the index",,0
Relocated Git installer to BuildOuptut,0.50563604,- The installer now unmounts and remounts existing repos automatically,,0
Merge pull request #424 from pmj/fix-null-vfs-context,0.5466949,1736: Update Git to v2.31.1.vfs.0.3,Mac kext: Nullability annotation and cleanup of VFS context function parameters,0
Mac kext: Removes unused vfs_context_t parameter,0.4237383,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"The Vnode_ReadXattr() helper function had an unused context parameter, to which we were passing a nullptr in one instance. This would have been incorrect had the parameter been used, but really the parameter should be removed.",0
Mac kext: Adds nullability attributes to pointer-typed function parameters.,0.30072767,1744: Overhaul build and project systems and drop Mac/POSIX code,"The clang compiler supports _Nonnull and _Nullable annotations as an extension to the C & C++ type systems, and  will warn if a NULL value is passed to a function expecting a strictly non-null pointer. This further increases the number of programming errors caught by the type checker. The change adds nullability attributes on all parameters of vfs_context_t type, as there are some instances where a nullptr is used (as it turns out, incorrectly) as VFS context. As soon as there is a nullability specifier on one parameter declaration in a header file, clang warns about non-annotated parameters in the same file, so all pointer parameters have been annotated in headers that use vfs_context_t.",0
Merge pull request #425 GitProcess: return true when process is null,0.46555722,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"In #420, we changed how we stopped the background process. However, there was a gap: if the Process was null, then we returned false, causing extra error messages. This fixes that problem and avoids the noise in the logs on unmount.",0
Modify PrepFunctionalTests.sh to work out of the publish directory,0.41162845,1697: Fix functional tests to skip around ProjFS issue,,0
GitProcessTests: add simple unit test,0.4250335,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
Mount: Remove tracing on TryAttach,0.44573796,- Multiple mount process reliability bugs have been squashed.,Allow the caller to determine how to handle the error.  This is because a command line error may fail due to permissions and be retried successfully by the service.,0
Merge pull request #422 PostFetchJob: Delete stale .lock files,0.44826746,Pull Requests,"Before writing commit-graph or multi-pack-index, delete the .lock file that prevents Git from writing to those files. This will unblock users who have a stale .lock file from a previous early termination (BSOD, process kill due to unmount, etc.). If the Git commands are terminating due to legitimate problems, then their logs will be filled with the correct error instead of a message about a .lock file preventing the write. Both of these commands are maintenance commands that users should not be writing on their own, and we do them under our own file- based lock.",0
Prefetch Tests: Add test for .lock files,0.4982466,1745: do not exit early if no blobs found for a period when prefetching,,0
GitProcess: return true when process is null,0.43382344,- git status now supports an option to avoid doing its ahead/behind calculations. This allows the user to decide if they want to skip that overhead if all they care about is the status of the working directory.,,0
PostFetchJob: Delete stale .lock files,0.4952895,1730: Fix an issue with FastFetch when deleting files,"Before writing commit-graph or multi-pack-index, delete the .lock file that prevents Git from writing to those files. This will unblock users who have a stale .lock file from a previous early termination (BSOD, process kill due to unmount, etc.). If the Git commands are terminating due to legitimate problems, then their logs will be filled with the correct error instead of a message about a .lock file preventing the write. Both of these commands are maintenance commands that users should not be writing on their own, and we do them under our own file- based lock.",0
Merge pull request #420 PostFetchJob: Kill running Git process when unmounting,0.63136846,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"The post-fetch job runs up to two Git commands: 'git multi-pack-index write' and 'git commit-graph write'. These can each take up to 30s depending on the amount of work to do. When we unmount, we want to ensure these prcoesses terminate. Before, we were aborting the post-fetch job thread. This is not cross-platform compliant. The new approach is to store a GitProcess object and pass a Kill signal to that process during unmount. Watch that call for some possible exceptions. Also, add an additional processLock to GitProcess that holds around our state changes for the process (starting or killing the process) so we don't race by killing a process before it starts and have it start anyway. As part of revealing this GitProcess to the necessary layer, I pulled the implementation of TryWriteMultiPackIndex out of the GitObjects class. The test suite was previously exercising this code path during the functional tests, as the functional tests frequently ran faster than the background Git processes. That should give some good data on how this works. Resolves #409",0
PostFetchJob: Kill running Git process when unmounting,0.57696724,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"The post-fetch job runs up to two Git commands: 'git multi-pack-index write' and 'git commit-graph write'. These can each take up to 30s depending on the amount of work to do. When we unmount, we want to ensure these prcoesses terminate. Before, we were aborting the post-fetch job thread. This is not cross-platform compliant. The new approach is to store a GitProcess object and pass a Kill signal to that process during unmount. There are a few race conditions around this being null, so we guard against some using try/catch blocks. This may be a direction for future improvement. The test suite was previously exercising this code path during the functional tests, as the functional tests frequently ran faster than the background Git processes. That should give some good data on how this works.",0
Merge pull request #421: Centralize special Mac paths in InitializeEnviroment.sh,0.39028388,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Also update ModifedPaths for update-index command,0.42881203,1664: Update USN journal entries for projected folders,,0
Centralize spcial Mac paths in InitializeEnviroment.sh,0.23610038,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Add additional logging,0.4666205,Adds additional logging for folder and file placeholder creation.,,0
Cleanup for PR comments,0.320506,1689: Make delete docs more verbose,,0
Eliminate LazyPath race condition by not using them on BG task thread,0.34646124,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Merge pull request #406: Remove most relative paths from Windows scripts,0.42342666,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Merge pull request #412 from nickgra/prefetchSkipSymlinks,0.4674319,Pull Requests,Mac: Ignore symlinks when 'prefetch --hydrate'-ing,0
Ignore symlinks when 'prefetch --hydrate'-ing. Update ParseFromLsTreeLine to detect a mode of 120000 which indicates a symlink.,0.56498814,- No-op gvfs prefetch --hydrate performance is dramatically improved,,0
Make Windows scripts init the environment,0.3227635,1740: Skip launching UI if running unattended,,0
Remove *DevService.bat scripts,0.39727753,1703: Delete all macOS projects,,0
Move init script,0.27927762,1740: Skip launching UI if running unattended,,0
Remove convenience macros from init,0.31478006,1740: Skip launching UI if running unattended,,0
"Allow running from devenv prompts, put nuget on the path",0.5400289,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Just test for the agent flag being set to something,0.30980876,1740: Skip launching UI if running unattended,,0
Trim down the list of macros and allow running specific functional tests,0.4088628,1697: Fix functional tests to skip around ProjFS issue,,0
Fix casing in EnsureVFSDevShell.bat,0.4589282,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Add functional test the fails on Windows without fix,0.51680136,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #417: Fix nuget repositoryPath to work on all platforms,0.52067316,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Fix repositoryPath to work on all platforms,0.42116645,1685: minor path comparison fixup in ProductUpgrader,,0
Fix another Windows build break,0.45516834,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Fix build break on Windows,0.4963244,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
PR Feedback: Cleanup and ensure paths correct on all platforms,0.4816059,1685: minor path comparison fixup in ProductUpgrader,,0
GVFS ConfigVerb - support for listing & CRUD,0.5465419,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]", Updated gvfs config verb to support CRUD and List operations on settings. Usage gvfs config [ --list | --delete ]  ,0
Merge pull request #296 Update multi-pack-index to use upstream version,0.52431345,"* Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles","Resolves #294. Update GitForWindows to use upstream multi-pack-index code instead of our private version. See the PR in Microsoft/git for more info on the Git change (and don't merge this until that is final). This does the following:  Update the command-line interactions that update the multi-pack-index. On mount, launch the post-fetch background job to ensure a multi-pack-index is calculated. (Very low cost if it already exists.) Since we have the multi-pack-index in more cases than before, we discover that we need to delete the multi-pack-index when deleting bad pack-files during prefetch. Since we trigger the post-fetch job on every mount, we now need to purposefully care about platform before shutting down the background thread. More work is required and tracked by #409.",0
Don't use .NET Core specific Remove,0.3593619,1746: Delete custom upgrader,,0
Add untracked files from reset mixed to ModifiedPaths.dat,0.33869913,1664: Update USN journal entries for projected folders,,0
Use IsUnderConstruction to avoid threadabort on mac,0.3235626,1675: PreCommandHook: don't lock pack-objects,,0
Added OneTimeSetup method to clear all FunctionalTest configs before starting the tests,0.5060426,1697: Fix functional tests to skip around ProjFS issue,Added test-method to test read of a single setting (vs list). Cleanups - removed spacing around curly braces,0
CommitPrefetcher: Delete MIDX when deleting bad packs,0.46699357,- Commit-graph and multi-pack-index are validated after writing to eliminate corruption scenarios,,0
Merge pull request #399 from nickgra/closefds,0.47745246,Pull Requests,Mac: Close file descriptors when 'prefetch --hydrate'-ing,0
Close file descriptors when done with them as part of prefetch --hydrate,0.5436467,1745: do not exit early if no blobs found for a period when prefetching,Unload the kext before installing Git to avoid a kernel panic on build agents,0
Merge pull request #247: Enable anonymous access,0.5392048,- VFS for Git now supports anonymous access for public repositories.,,0
Enforce running init before other scripts. Remove relative paths from scripts.,0.34797123,1740: Skip launching UI if running unattended,,0
Create init scripts to set up dev environment in cmd/ps,0.28008986,1740: Skip launching UI if running unattended,,0
Cleanup ConfigVerb- removed multiple returns with nested if else.,0.3448418,Includes fixes to config settings for internal users only,Rephrased delete help text ConfigVerbTests - Delete functional test config settings before starting the tests. Removed GVFSProcess.RunConfigVerb() method. Display actionable error message when user specifies no config option Made ConfigVerbTests parallelizable,0
Set httpStatus to 200 in the success case,0.33839652,- Fix backoff on cache server size endpoint 404.,,0
Removed invalid exception,0.37374562,1668: ProductUPgradeTimer: remove unacceptable Environment.Exit(),,0
"Don't allow switching between anonymous/authenticated, and treat empty creds as error",0.48804832,  - Now erases credentials on authentication failure,,0
"Fixed failing dehydrate scenario, reduced tracing chatter",0.35707265,1745: do not exit early if no blobs found for a period when prefetching,,0
Cleaned up logging and don't report an error on a failed anonymous query,0.2801291,- Added better diagnostic info in the GVFS logs when there are network errors,,0
Fail to initialize if there were unrelated errors during the anonymous auth attempt,0.422131,- Fixed several incorrect interactions with credentials,,0
Fix up FastFetch to initialize auth before making any queries,0.5045632,A case where FastFetch would not download a small number of files has been fixed.,,0
Require an auth instance to be initialized before it can be used,0.44895655,  - Now erases credentials on authentication failure,,0
Pass the exisitng auth instance through to the constructor of Enlistment rather than swapping it out afterwards,0.32159683,  - Now erases credentials on authentication failure,,0
Add a single-step Initialize method,0.22493953,1740: Skip launching UI if running unattended,,0
Fixed up another entry point that requires auth,0.4644081,- Fixed several incorrect interactions with credentials,,0
Allow a verb to pass along its auth instance to another verb that it is executing,0.43570614,  - Now approves credentials on authentication success,,0
Attempt an anonymous query before requesting an auth token,0.3689515,  - Now approves credentials on authentication success,,0
Refactor to use a common authentication method,0.421951,  - Now approves credentials on authentication success,,0
Update GitForWindows version to include new MIDX code,0.54957867,1706: Update Git to include GCM Core update,,0
"Run post-fetch job immediately on ""gvfs mount"" to ensure users have an up-to-date multi-pack-index file",0.5632524,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Use 'multi-pack-index' builtin instead of 'midx' to match upstream implementation,0.5298087,- We have moved MIDX computation to a post-fetch thread. This should save blocking time per prefetch that downloads a packfile from the cache server.,,0
Ignore .vscode directory,0.4750764,- A couple of fixes for using VS Code on top of VFS for Git.,,0
Merge pull request #401 Add WaitForBackgroundOperations call with checking modified paths,0.44431576,Pull Requests,Add WaitForBackgroundOperations call with checking modified paths Fixes #379,0
Replaced CommandLineParser's Param set with our own option set check.,0.37109175,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated","Code cleanups - replaced text with const strings in Functional test, removed redundant code in Functional test.",0
Merge pull request #394 Mac: Update and delete placeholder functions should check if file is still a placeholder,0.60697293,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",Mac: Update and delete placeholder functions should check if file is still a placeholder,0
Use common method for getting the modified paths contents,0.29382282,1664: Update USN journal entries for projected folders,,0
Move validation of background operations completing to common location,0.44327354,Background tasks run with lower priority to address user feedback on maintenance job performance.,,0
Add WaitForBackgroundOperations call with checking modified paths,0.34228182,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",,0
"incorporating review comments - removed hard coded config file path, replaced WindowsOnly test category with MacTODO.M4",0.38673687,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Functional test to verify that CommandLineParser throws error when mutually exclusive command line options are specified Updated alphabetical ordering of ConfigVerb in gvfs help output,0
PR Feedback: Cleanup comments,0.39312363,General improvements:,,0
Merge pull request #384: Include UTC offset in log timestamp.,0.7496096,- Log files now include UTC offset.,,1
Mac: Update and delete placeholder functions should check if file is still a placeholder,0.5590447,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
incorporating review comments. Removed tracer. Style cleanups.,0.47165197,General improvements:,adding l option for --list adding d option to --delete adding Functional tests,0
Merge pull request #357 Mac: New folder notifications,0.45026135,Initial Mac platform native notifications,Mac: New folder notifications,0
Additional cleanup for PR feedback,0.41263506,General improvements:,,0
Merge pull request #372 from nickgra/realPrefetchHydrate,0.48610342,Pull Requests,Mac: Turn on 'gvfs prefetch --hydrate',0
Turn on 'gvfs prefetch --hydrate' on MacOS by providing a native OS implementation.,0.75825465,- No-op gvfs prefetch --hydrate performance is dramatically improved,,1
Cleanup for PR feedback,0.34725934,Release Notes,,0
Use a consistent date/time format for logging,0.5657394,- Log files now include UTC offset.,,0
Merge pull request #373 Update Git to include tracing and fix for untracked files,0.53955257,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"Update the package for GitForWindows to include tracing information. Includes the following Git PRs:  36 Avoid sane_execvp in git rebase and git stash 34 Add Trace2 regions to 'pack-objects' 28 Trace2 base plus GVFS extensions 33 virtualfilesystem: check if directory is included 31 Revert ""gvfs: add a perf test for reading the index"" 32 compat/poll: prepare for targeting Windows Vista 22 Enable the filesystem cache (fscache) in refresh_index() 27 virtualfilesystem: fix bug with symlinks being ignored 23 Unpack trees with cache tree gvfs 15 virtualfilesystem: don't run the virtual file system hook if the index has been redirected Includes Git 2.19.0.  This also includes VFS for Git updates from Kevin Willford's work: Fix missing untracked files when created in subfolder Add to the test to create multiple level of folders and files in those folder to make sure they show up as untracked files. Update the git for windows version that has the fix. Fixes #358",0
Merge pull request #362 from kewillford/check_ignore,0.45602208,Pull Requests,Add check-ignore and check-attr to commands not needing lock,0
GVFS.props: use release build with rebase fix,0.5597114,1736: Update Git to v2.31.1.vfs.0.3,,0
Merge pull request #375 from nickgra/ProfilingBuild,0.46362752,Pull Requests,Mac: Update build scripts to handle new Profiling configuration,0
Fix commands that need additional parameters with stdin,0.27015078,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Address PR feedback and update MirrorProvider script too,0.40875357,Pull Requests,,0
Add try/catch/finally for the task running git command with stdin,0.4198677,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",,0
Merge kewillford/untracked_missing,0.24337979,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",,0
Update git for windows version,0.7006673,Comes with Git for Windows 2.28.0,,1
Add test that adds untracked file in new folder 2 levels deep,0.2817812,* git multi-pack-index verify would run slowly if the objects directory had more than 2048 packfiles.,,0
Add tests for creating placeholders,0.33520675,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Update GitForWindows to include tracing,0.49490467,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,,0
Merge pull request #368 Mac: Handle projection changes where git deletes folders that are still in the projection,0.5345106,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",Mac: Handle projection changes where git deletes folders that are still in the projection,0
Add additional functional test and update PrjFS_WritePlaceholderDirectory to return a more specific error message,0.60375094,1697: Fix functional tests to skip around ProjFS issue,,0
Fix StyleCop issue,0.24807635,1741: Fix winget tag specification,,0
Add check-ignore and check-mailmap to commands that do not lock,0.32050574,1675: PreCommandHook: don't lock pack-objects,,0
Mac: Handle projection changes where git deletes folders that are still in the projection,0.53046036,Git commands are now allowed to delete an empty directory,,0
Update build scripts to handle new Profiling configuration,0.39496115,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Move call to pop,0.20897478,1735: Bumping winget action version,,0
Revert whitespace change,0.2839821,See the full change log,,0
UpgradeVerb cleanups for release,0.517791,- Fixes a copy failure when copying the upgrade tool to its temporary location., Removed wildcard matching while searching for downloaded installers Updated FileBasedDictionary to support custom Key Comparators to enable case-insensitive lookups Fixed partial failure in build caused by UninstallGVFS.bat script. Updated TryGetVersion in GitProcess to accept git path as input argument.,0
Cleanups - made InstallerExtension strings const. Renamed InstallerExtension accessor to GetInstallerExtension.,0.40116,- The installer now unmounts and remounts existing repos automatically,,0
"Notify provider of new ancestor folders, enable more tests, support git creating folder",0.5561651,Large improvements to git checkout performance when there are many folder placeholders.,,0
"Cleanup - Use Enlistment.GitBinPath when available, rather than invoking Platform.",0.4959824,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,"Updated GVFSHooksPlatforms to return string for InstallerExtensions, bcoz neither Mac nor Windows release ship with multiple installer extensions.",0
Enable additional functional tests,0.5601513,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #350 Windows: Add delay and retry to attributes check in ExpandedFileAttributesAreUpdated,0.38267562,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",Windows: Add delay and retry to attributes check in ExpandedFileAttributesAreUpdated,0
Mac: New folder notifications,0.48929358,Initial Mac platform native notifications,,0
Avoiding possible redundant initialisation of ConcurrentDictionary in FileBasedDictionary class.,0.3613214,"A background task will now compress and deduplicate the pack-file data in the shared object cache, resulting in more sustainable disk usage",,0
Merge pull request #353: Make GVFS.Upgrader rely on GVFS.cs.props,0.63169295,Bug Fix: Fixes a bug with gvfs upgrade that causes versions v1.0.20112.1 from upgrading from private feeds.,Make GVFS.Upgrader rely on GVFS.cs.props to fix incremental build issue and remove the need to manually specify the OutputPath.,0
Merge pull request #326 GitProcess: allow GIT_TRACE to point to full path,0.603948,This includes the Git 2.30.2 security fix (CVE-2021-21300).,"The GIT_TRACE variable can be helpful for diagnosing problems during Git commands. However, there are many places in VFS for Git that require parsing the Git output. Using GIT_TRACE=1 sends the output to stdout, which messes up this parsing. In the past, we have blocked that variable for this reason. It would still be helpful to allow logging the trace output. Git allows a fully-qualified path as the value of GIT_TRACE and will append to that file instead. This is how we would like users to use GIT_TRACE when investigating issues. Unblock that type of setting. Resolves #276",0
Switch from FileAttributeRecallOnOpen to FileAttributeRecallOnDataAccess,0.2970124,Adds additional logging for folder and file placeholder creation.,,0
GitProcess: allow GIT_TRACE to point to full path,0.512993,Git commands are now allowed to delete an empty directory,,0
Merge pull request #335 from jeschu1/repair_functional_tests,0.5730124,1697: Fix functional tests to skip around ProjFS issue,Repair Functional Tests: test for confirm on and off,0
Make GVFS.Upgrader rely on GVFS.cs.props to fix incremental build issue,0.6156002,"gvfs config upgrade.ring [""fast"", ""slow"", ""none""]",,0
Merge pull request #352 from pmj/fileops-on-allowed-filesystems,0.45631987,"Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git",Mac kext: Adds check to only handle fileops on allowed filesystems,0
Merge pull request #281 from pmj/performance-tracing,0.4992494,Pull Requests,Mac: a performance tracing mechanism for the kext,0
Mac kext: Adds check to only handle fileops on allowed filesystems,0.3517275,- gvfs prefetch learned how to take --files-list.,"The vnode handler was already performing this check, but the fileop handler previously skipped it. This is part 1 of a fix for KP bug report #340.",0
Mac kext: New Profiling(Release) build configuration based on Release,0.44314364,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Mac kext: Conditionally enable performance tracing.,0.3549741,- Disable commit-graph verify for performance concerns,,0
Mac kext: Placement of profiling probes throughout the vnode listener,0.32250947,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,"Using the previously created profiling mechanism, this adds various measurement points to the vnode scope listener handler, and the relevant strings to the user space extraction tool.",0
Mac kext: Incorporates code review style feedback,0.30906254,1744: Overhaul build and project systems and drop Mac/POSIX code,"In the review, it was pointed out we should be using nullptr instead of 0 for default function argument values which were copied from the declaration of the function being overridden in the log user client. The same is true for the provider user client, so this fixes it there too.",0
Mac kext: Scoped timing wrapper and user client for extracting profile data,0.32088232,Performance Improvements,"This adds a scoped time measurement class with splits. Probes are defined in an enum. When a ProfileSample instance is created, the Mach absolute time is taken, and when it is destroyed, another time stamp is taken, and the interval recorded with the sample aggregation probe ID specified during construction. Additionally, split time samples can be taken. The number of samples, total runtime, sum of squares, minimum, and maximum values are recorded. From these, mean and standard deviation can be derived. An external method for extracting the profiling data from the kernel has been added to the logging user client class. The simple log tool has been extended to fetch and dump this data to stdout every 15 seconds.",0
Merge pull request #322 from pmj/virt-root-refactor,0.43214744,Pull Requests,Mac kext: Virtualisation root refactoring & array resizing,0
Use Refresh rather than creating a new FileInfo,0.34023428,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Windows: Add delay and retry to attributes check in ExpandedFileAttributesAreUpdated,0.3096256,"* The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated",,0
Upgrade verb for manually installing new product release,0.49144602,- Upgrade supports NuGet feeds as a distribution source.," GVFS.Service checks for upgrade availability periodically. When a new release is available it will be downloaded in the background. GVFS Git Hooks will remind user to install the upgrade. GVFS Upgrade [--confirm] verb will enable user to manually trigger installation of the upgrade release. Use gvfs config command to specify an upgrade ring. Example: gvfs config upgrade.ring ""Fast"". New GVFS name format for GVFS installer VFSGit.. Unit test cases. Functional test for upgrade reminder messaging.",0
Merge pull request #343: Fix handling of multiple sequential messages,0.4003585,Pull Requests,Simplify the logic for NamedPipeStreamReader and fix handling of multiple sequential messages,0
Merge pull request #339: Pass all required components to vswhere in BuildGVFSForWindows.bat,0.64715123,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Select installation of VS that can build the project on Windows.,0.45020723,1679: BuildGVFSForWindows.bat: use nuget on PATH, Pass all required components to vswhere in BuildGVFSForWindows.bat. Remove unnecessary component from Readme.md.,0
Mac kext: Dynamically alloc virtualisation root array & resize when full.,0.3504791,- gvfs prefetch learned how to take --files-list.,,0
"Mac kext: Use only VirtualizationRoot handles, not direct pointers",0.29151052,- gvfs prefetch learned how to take --files-list.,"This change moves the VirtualizationRoot structure definition out of the header file, and unifies the API to only use integer handles, which internally are array indices for non-negative values, and negative values from an enum of special cases. Where indices were previously used outside the VirtualizationRoot implementation functions, the terminology has been changed to ""handles."" An immediate advantage of the move away from pointers is an improvement in the ability to control thread safety of the root structures; additionally, unlike pointers, handles remain valid outside of held locks, so in a follow-on change, we can reallocate the array for resizing.",0
Mac kext: Adds typed array memory allocation function.,0.28658015,- Improved the memory usage during MIDX computation.,,0
Mac kext: Enables warning for shadowed variables.,0.31163627,1675: PreCommandHook: don't lock pack-objects,"Shadowing variables frequently is a source of bugs, so this enables the corresponding compiler warning.",0
Mac kext: Replaces some C-style casts with C++ style.,0.4234587,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Mac kext: Handle named streams,0.31967288,  - Correlate trace2 stream with VFS for Git stream with the Git session ID.,"Occasionally, the vnode auth handler is called on a vnode representing a named stream/named fork. (Typically, the resource fork.) Forks donâ€™t have their own xattrs, etc. so some of the logic we apply fails. We donâ€™t care specifically about named forks, so treat any access to them as an access to the main file instead. Note: we need to balance the vnode_getparent() call with vnode_put()",0
Simplify NamedPipeStreamReader logic,0.20151263,1732: Use one NuGet feed,"The existing NamedPipe protocol expected that the sender of a message would wait for a response from the receiver before sending another message. It did not allow for multiple messages to be sent without the client responding.  However, this is not a correct assumption, as there is at least 1 place where a component will send multiple messages without waiting for a response from the receiver (#333). This change updates the NamedPipeStreamReader to handle multiple messages sent sequentially, and simplifies the overall logic in the process. Tests are also included which exhibit this behavior.",0
Merge pull request #344 Mac: Update MoveAndOverwriteFile to use native API,0.4099291,Pull Requests,Mac: Update MoveAndOverwriteFile to use native API,0
Merge pull request #287 from kyle-rader/chore/add-mac-build-steps,0.5245514,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Add Mac OS build setup steps,0
Merge pull request #334 Mac: Prevent double hydration and directory expansion,0.49401337,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Mac: Prevent double hydration and directory expansion,0
Merge pull request #336 SecondCloneSucceedsWithMissingTrees: Attempt 2,0.4937357,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.","The previous approach to this test relied on deleting packfiles from the shared object cache. That failed on Windows because the .idx files have restrictive permissions that cause the delete to fail. Instead, use the loose object downloads to hydrate the commit and root tree for the WellKnownBranch and then do a clone pointing at that branch. This should trigger the failure case. Resolves #330",0
Mac: Update MoveAndOverwriteFile to use native API,0.37672642,1664: Update USN journal entries for projected folders,,0
Remove autogenerated Xcode comment,0.36135364,1746: Delete custom upgrader,,0
SharedCacheTests: Update WellKnownCommitSha,0.3930338,1750: Update Readme.md,"This doesn't match, as we expect it to!",0
SecondCloneSucceedsWithMissingTrees: Attempt 2,0.28906852,1685: minor path comparison fixup in ProductUpgrader,"The previous approach to this test relied on deleting packfiles from the shared object cache. That failed on Windows because the .idx files have restrictive permissions that cause the delete to fail. Instead, use the loose object downloads to hydrate the commit and root tree for the WellKnownBranch and then do a clone pointing at that branch. This should trigger the failure case.",0
Add original description on NamedPipe protocol,0.28346086,1741: Fix winget tag specification,,0
More grammar resolutions,0.41943538,General improvements:,,0
More style fixes,0.5238202,Bug fixes:,,0
Fix Spelling,0.32441154,General Improvements,,0
Update grammar issues,0.41809624,1685: minor path comparison fixup in ProductUpgrader,,0
Simplify steps language,0.26220772,- Improved the memory usage during MIDX computation.,,0
Style updates,0.41089904,Major Changes,,0
Grammar,0.22035542,General Improvements,,0
Remove deprecated java hack for git-credential-manager,0.6562561,This includes the Git Credential Manager Core v2.0.394.50751.,,0
Remove steps covered by the prep script,0.23281878,1746: Delete custom upgrader,,0
Update mac os build subtitle,0.3666243,Update components included with internal distribution,,0
Add initial set of build steps for Mac OS,0.4966285,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
Add Mac Setup instructions needed for building on Mac,0.48382363,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
PR Feedback: Use fsid&inode instead of path as key in mutex map,0.34100294,1730: Fix an issue with FastFetch when deleting files,,0
Repair Functional Tests: test for confirm on and off,0.4329302,Other bug fixes for reliability,Enrich existing tests to include confirm off,0
Merge pull request #329 from jeschu1/cacheserverurl,0.46913373,Pull Requests,"Show ""None"" message in diagnose instead of invalid url",0
Merge pull request #327 from jeschu1/repourl_fix,0.5313936,1737: Update Git to v2.32.0,Use correct repoUrl for credential,0
Fixing a typo,0.3129062,1741: Fix winget tag specification,,0
Incorporating suggestions from test feedback.,0.41519147,"Other bug fixes, engineering improvements, and test reliability fixes.","- Display nag only 10% of the times a git command is run - Removed ""Run gvfs upgrade..."" from the reminder notification message. - Use ITracer.StartActivity for method tracing. - Service Verb redirects list of repos that failed to mount to stderr. - Upgrader tool reads stderr and displays the list on Console. - New console message displayed after launching installer advising user to not run gvfs, git commands until installation has finished. - Added a new Console message to let user know upgrade completed successfully - inserted blank line before final instruction to run gvfs upgrade --confirm command - Early exit when no upgrade or invalid upgade ring is set - Upgrade verb crash fix on Mac. - Early exit when upgrade is not installable and gvfs upgrade --confirm is run",0
Merge pull request #331 Remove SharedCacheTests.SecondCloneSucceedsWithMissingTrees,0.46859312,1736: Update Git to v2.31.1.vfs.0.3,"This test attempted to cover a rare scenario, but is flaky due to something holding a handle on the pack-files we are trying to delete. The test did these things:  Clone in enlistment1. Delete all packfiles. Download the tip commit and root tree as loose objects. Clone in enlistment2, hitting the new retry logic.  However, the pack-file delete can fail due to something holding on to the packfiles. This failed on one PR build already. Stop it from failing on others.",0
Mac: Prevent double hydration and directory expansion,0.3956743,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Fix diagnose message for cache server,0.5783548,- Fix backoff on cache server size endpoint 404.,"If not cache server is present display ""None""",0
Remove SharedCacheTests.SecondCloneSucceedsWithMissingTrees,0.38957804,- Gracefully handle a missing shared object cache pack directory.,"This test attempted to cover a rare scenario, but is flaky due to something holding a handle on the pack-files we are trying to delete.",0
Use correct repoUrl for credential,0.44762814,  - Now scopes credential.useHttpPath to just dev.azure.com hostname,This change allows us to reinitialize the GitProces with valid repository information information and pass it correctly to the credential call.,0
Merge pull request #313 CloneVerb: Force download of commit and trees on failed initial checkout,0.4871025,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.","On Clone, we need to create the .git/index file during a checkout, which requires having all trees reachable from the root tree of the tip commit. To ensure we have all of the objects, we call TryDownloadCommit(). However, this method doesn't actually try downloading a pack of trees if we already have the commit and root tree. Due to the shared object cache, we may have these objects for a few reasons:  A recent fetch included a ref update that points to that commit, and we downloaded the commit and tree as loose objects. A background prefetch downloaded a prefetch pack containing that commit and tree, but some of the reachable trees are missing due to clock skew between cache servers.  This fixes the issue by forcibly downloading the packfile if the checkout fails and trying again. Resolves #306.",0
Merge pull request #324 Windows: Use a faster comparison when enumeration filter strings don't have wildcards,0.40273178,1658: ProjFSFilter: Be more robust to missing PowerShell,Windows: Use a faster comparison when enumeration filter strings don't have wildcards,0
SharedCacheTests: add test for multi-enlistment checkout failures,0.31245744,- Improvements to compact and maintain the ModifiedPaths.dat database to help mitigate the problem of command perf degrading over time in an enlistment.,,0
Variable renaming,0.21442504,Major Changes,,0
Merge pull request #325 Mac: Update MirrorProvider to support symbolic links,0.47536823,1736: Update Git to v2.31.1.vfs.0.3,Mac: Update MirrorProvider to support symbolic links,0
Mac: Update MirrorProvider to support symbolic links,0.38266236,1714: Update Git to include LFS security release,,0
Merge pull request #308 Remove the entries with parent folders in the modified paths database when mounting,0.4429263,1664: Update USN journal entries for projected folders,Compress the entries in the modified paths database when mounting,0
Windows: Use a faster comparison when enumeration filter strings don't have wildcards,0.31001276,1658: ProjFSFilter: Be more robust to missing PowerShell,,0
Merge pull request #298 Mac: Support projecting symbolic links,0.47890255,1744: Overhaul build and project systems and drop Mac/POSIX code,Mac: Support projecting symbolic links,0
Change to use ContainsParentDirectory for removing modified paths,0.3917119,Git commands are now allowed to delete an empty directory,,0
Merge remote-tracking branch 'msft/master' into mac_symlink_support,0.37814063,1714: Update Git to include LFS security release,,0
Add more tests for modified paths,0.39183804,1685: minor path comparison fixup in ProductUpgrader,,0
Rename method and use Split method for building parent paths,0.22865891,1685: minor path comparison fixup in ProductUpgrader,,0
Move code to remove modified path entries to the TryStart method,0.32909822,- Gracefully handle a missing shared object cache pack directory.,,0
Use better names in the modified paths test,0.44157344,1685: minor path comparison fixup in ProductUpgrader,,0
Fix test for modified paths that was broken,0.50168335,1685: minor path comparison fixup in ProductUpgrader,,0
Compress the entries in the modified paths database when mounting,0.41788095,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",This will search the modified paths for a parent folder and if one exists it will remove the entry from the modified paths list,0
Merge pull request #314 Check modified paths for parent directories before adding,0.46177042,Large improvements to git checkout performance when there are many folder placeholders.,Check modified paths for parent directories before adding,0
Make FileTypeAndMode an internal struct and fix StyleCop unit test issue,0.3133042,1697: Fix functional tests to skip around ProjFS issue,,0
Make checks on the modified paths be more strict,0.45655203,1685: minor path comparison fixup in ProductUpgrader,,0
Clean up MacFileSystemVirtualizerTests,0.40053812,1697: Fix functional tests to skip around ProjFS issue,,0
Fix functional test failures due to change in ModifiedPathsShouldContain behavior,0.58819395,1697: Fix functional tests to skip around ProjFS issue,,0
Cleanup ContainsParentDirectory and add checks in tests for unexpected paths,0.40770033,- Gracefully handle a missing shared object cache pack directory.,,0
Fix .NET Framework compilation issue,0.5180609,The build system was rewritten from scratch to simplify the process and use a more recent version of .NET.,,0
Enhance SymbolicLinkTests and fix bug in ModifiedPathsShouldContain,0.5148941,1697: Fix functional tests to skip around ProjFS issue,,0
CloneVerb: Force download of commit and trees on failed initial checkout,0.42781994,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
PR Feedback: Eliminate masking and simplify FileTypeAndMode,0.3631281,Adds additional logging for folder and file placeholder creation.,,0
Merge pull request #301 from jeschu1/add_config,0.47081578,Pull Requests,Set config to useHttpPath=true,0
Merge pull request #318 from jrbriggs/fix-badges,0.43881226,1647: Fix commit-graph expiration,Fix large repo and mac build badges,0
Fix large repo and mac build badges,0.4737218,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",Links were broken when a project was renamed in Azure DevOps.,0
Clean up std namespace usage,0.27877042,- Gracefully handle a missing shared object cache pack directory.,,0
Merge pull request #272 Recursively expand directories before delete and enable folder rename functional tests,0.46293673,1697: Fix functional tests to skip around ProjFS issue,Recursively expand directories before delete and enable folder rename functional tests,0
PR Feedback: Remove explicit std namespace usage,0.29161188,1744: Overhaul build and project systems and drop Mac/POSIX code,,0
PR Feedback: Code cleanup,0.49475685,General improvements:,,0
Fix test the will no longer have child entries of a folder in the modified paths,0.36307928,1685: minor path comparison fixup in ProductUpgrader,,0
Check modified paths for parent directories before adding,0.3383174,Large improvements to git checkout performance when there are many folder placeholders.,,0
Set config to useHttpPath=true,0.46091163,  - Now scopes credential.useHttpPath to just dev.azure.com hostname,"Hostname is no longer sufficent for VSTS authentication. VSTS now requires dev.azure.com/account to determine the tenant. By setting useHttpPath, credential managers will get the path which contains the account as the first parameter. They can then use this information for auth appropriately.",0
Merge pull request #310 Add wait for background operations to complete in modified paths test,0.40965927,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",Add wait for background operations to complete in modified paths test,0
PR Feedback: Cleanup and flag link as in root,0.39744434,1689: Make delete docs more verbose,,0
Add wait for background operations to complete in modified paths test,0.34269902,"- VFS for Git will pre-calculate status in the background in response to changes in the workdir, to improve the speed of user-initiated statuses.",,0
Merge pull request #307: Fix a flaky test involving the background prefetch thread ,0.51363206,1745: do not exit early if no blobs found for a period when prefetching,"The functional test PrefetchCleansUpStalePrefetchLock intends to check the multi-pack-index and commit-graph are completely written after a prefetch. However, this can fail if the test is faster than the background thread in the mount process. This change introduces a 500ms pause in the test to ensure we give adequate time to the mount process before verifying the background thread did its work.",0
Merge remote-tracking branch 'msft/master' into mac_expand_b4_delete,0.36207783,1703: Delete all macOS projects,,0
Merge pull request #299: Fix typo in ServiceVerb help text,0.4155913,1750: Update Readme.md,,0
Merge pull request #207 Remove temp paths from ModifiedPathsDatabase,0.47832316,1717 [HOTFIX] Update Git to remove ODB string check,Remove temp paths from ModifiedPathsDatabase,0
Fix a flaky test involving the background prefetch thread,0.53006285,1745: do not exit early if no blobs found for a period when prefetching,,0
Add new unit and functional tests,0.48281595,1697: Fix functional tests to skip around ProjFS issue,,0
Fix test that moved new folder outside the repo,0.45745873,Git commands are now allowed to delete an empty directory,,0
Fix case only folder rename test,0.26439953,1685: minor path comparison fixup in ProductUpgrader,,0
Add comment explaining only one of predelete or delete should be queued,0.4696015,1689: Make delete docs more verbose,,0
Add PreDelete handler in BG operation to handle Mac,0.35580865,1689: Make delete docs more verbose,,0
Remove extra return statments and adding to new paths during rename,0.2879405,1685: minor path comparison fixup in ProductUpgrader,,0
Fix broken tests for cleaning modified paths,0.53220755,1685: minor path comparison fixup in ProductUpgrader,,0
Simplify checking the newly created files and removing from modified paths,0.35484302,Large improvements to git checkout performance when there are many folder placeholders.,,0
Fix broken tests,0.49251017,1697: Fix functional tests to skip around ProjFS issue,,0
Add null check when creating trace metadata using and exception,0.25211698,Adds additional logging for folder and file placeholder creation.,,0
Handle cleaning up modified paths when a folder is renamed,0.37715796,1664: Update USN journal entries for projected folders,,0
Add handling of rename of files for modified paths cleanup,0.3891402,Adds additional logging for folder and file placeholder creation.,,0
Handle the file system callbacks to track created then deleted files,0.4635726,Adds additional logging for folder and file placeholder creation.,,0
Add TryRemove method to the ModifiedPathsDatabase,0.35769296,1730: Fix an issue with FastFetch when deleting files,,0
Add tests for removing entries from the modified files database,0.3742098,1689: Make delete docs more verbose,,0
trivial: Fix a typo in error messages,0.38585505,Other bug fixes for reliability,,0
Add symlink projection code,0.46224177,1664: Update USN journal entries for projected folders,,0
Merge pull request #280 Catch and log exceptions thrown by TryPrepareFolderForCallbacks,0.45266366,Pull Requests,Catch and log exceptions thrown by TryPrepareFolderForCallbacks,0
Track both file type and file mode,0.37792397,Adds additional logging for folder and file placeholder creation.,,0
PR Feedback: Move delete action check and use a queue for processing directories,0.53569865,1689: Make delete docs more verbose,,0
PR Feedback: Move exception handling into TryPrepareFolderForCallbacks,0.4042496,Other bug fixes for reliability,,0
Merge pull request #259: Tweak NamedPipe protocol (fix #142),0.36514962,1663: Update Git to v2.27.0,Tweak Named pipe protocol,0
Add automated tests around NamedPipeStream protocol,0.33857334,1697: Fix functional tests to skip around ProjFS issue,,0
Tweak the protocol GVFS used to communicate over named pipes,0.46905342,"* The client will now also query the /gvfs/sizes endpoint on a cache server that implements that endpoint, reducing the latency on those requests even further","GVFS currently sends a text based data across a named pipe with lines / messages separated by newline characters. This prohibits sending messages that include a newline as part of the message content. The main current manifestation of this problem is that GVFS does not handle git command lines that contain a newline character. There is another problem that GVFS needs to send paths across the named pipe (for ModifiedPathsList queries), and these paths can include newline characters on certain filesystems (macOS, Linux). Additionally, the protocol that GVFS uses to communicate across the named pipe is currently not consistent. It usually uses a text based stream, but for the ModifiedPathsList response, it uses null bytes to seperate entries in a list. To address these issues, this change tweaks the protocol used to communicate via the named pipe to use the 0x3 byte to indicate the end of a line / message (this is the End of text ASCII code).",0
Tests demonstrating issue with newline in Git commands,0.4702981,This includes the Git 2.30.2 security fix (CVE-2021-21300).,,0
Merge pull request #288 from nickgra/mirrorProviderReadOnly,0.53000724,1663: Update Git to v2.27.0,Allow MirrorProvider to handle/hydrate Read only files in the mirrored path,0
Handle read only files when hydrating with the mirror provider by only requesting Read access,0.33540455,- VFS for Git now supports anonymous access for public repositories.,,0
Merge pull request #270. Mac: Fix missing files due to auth cache,0.51713514,- Updated Git for a security issue.,,0
Catch exceptions one level higher,0.15787587,Other bug fixes for reliability,,0
Merge pull request #279 Make LaunchPrefetchJobIfIdle thread safe and update it to exit when unhandled exceptions occur,0.42297485,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,Make LaunchPrefetchJobIfIdle thread safe and update it to exit when unhandled exceptions occur,0
Catch and log exceptions thrown by ConvertDirectoryToVirtualizationRoot,0.34693295,Adds additional logging for folder and file placeholder creation.,,0
Fix unit test bug,0.44057077,1697: Fix functional tests to skip around ProjFS issue,,0
Make LaunchPrefetchJobIfIdle thread safe,0.35868353,1740: Skip launching UI if running unattended,,0
Merge pull request #266 fUpdate PowerShellRunner to support hard link creation and enable more functional tests on Mac,0.5251845,1658: ProjFSFilter: Be more robust to missing PowerShell,Update PowerShellRunner to support hard link creation and enable more functional tests on Mac,0
Add comment,0.25052175,New features:,,0
Merge remote-tracking branch 'msft/master' into powershell_hardlink_and_more_mac_tests,0.41825,1658: ProjFSFilter: Be more robust to missing PowerShell,,0
Temporary fix: look up vnode path earlier in callback,0.38473973,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,,0
Merge pull request #261 Clean up code that was referring to sparse-check our always_exclude,0.37777138,1717 [HOTFIX] Update Git to remove ODB string check,Clean up code that was referring to sparse-check our always_exclude,0
Remove setting skip worktree bit,0.29220718,1674: Config: disable status.submoduleSummary,,0
Fix tests that still need a sparse-checkout to test upgrades,0.54034144,1697: Fix functional tests to skip around ProjFS issue,,0
Recursively expand directories before rename and enable folder rename functional tests,0.32086343,1697: Fix functional tests to skip around ProjFS issue,,0
Fix AddStageTests on Windows,0.43412715,1697: Fix functional tests to skip around ProjFS issue,,0
Set the auth cache TTL to 0 when registering a virtualization root,0.33656102,  - Now scopes credential.useHttpPath to just dev.azure.com hostname,,0
Remove unused using statements,0.34788862,1689: Make delete docs more verbose,,0
Remove SupportsHardlinkCreation and update SystemIORunner to PInvoke to native hard link API,0.37868035,Previous builds were not including fully-signed DLLs. This is now fixed.,,0
Merge pull request #265 Update readme to include additional build badges,0.51990163,1733: Update Git to include 2.31.1,Update readme to include additional build badges,0
Merge pull request #267 Mac: Prevent deletes of the index by non-git processes and enable related functional tests,0.5424221,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",Mac: Prevent deletes of the index by non-git processes and enable related functional tests,0
Add message to check in MoveFileShouldFail,0.32426527,Adds additional logging for folder and file placeholder creation.,,0
Changes for PR Feedback,0.44079864,General improvements:,,0
Re-enable all tests that are failing due to auth cache issues,0.4281259,  - Now erases credentials on authentication failure,,0
Merge pull request #258 Remove Windows specific code from UpdatePlaceholderTests and enable tests on Mac,0.40115535,1697: Fix functional tests to skip around ProjFS issue,Remove Windows specific code from UpdatePlaceholderTests and enable tests on Mac,0
Add build badges for Large Repo Build and branch specific links,0.45571333,Git: Includes incremental commit graph,,0
Clean up code that was referring to sparse-check our always_exclude,0.30537033,1675: PreCommandHook: don't lock pack-objects,,0
Mac: Prevent deletes of the index by non-git processes and enable related functional tests,0.5145298,"- Post-index-change hook will help ensure consistency between Git and VFS for Git's reckoning of the state of the repository, and eliminate a class of bugs.",,0
Add comment to DeleteFileThenCheckout,0.53184533,1689: Make delete docs more verbose,,0
Update PowerShellRunner to support creating hardlinks,0.5058683,1658: ProjFSFilter: Be more robust to missing PowerShell,,0
Enable CheckoutTests.CheckoutBranchThatHasFolderShouldGetDeleted,0.31120285,1697: Fix functional tests to skip around ProjFS issue,,0
Enable RebaseTests,0.50138855,- Built-in git rebase is on by default.,,0
Update readme to include additional build badges,0.4890108,1750: Update Readme.md,,0
Merge pull request #260 Don't update ModifiedPaths.dat for hard links created outside of repo,0.46825078,1676: Update Git to v2.27.0.vfs.1.0,Don't update ModifiedPaths.dat for hard links created outside of repo,0
PR Feedback: Move Windows specific UpdatePlaceholderTests tests into their own class,0.38835824,1697: Fix functional tests to skip around ProjFS issue,,0
Don't update ModifiedPaths.dat for hardlinks created outside of repo,0.3938688,1664: Update USN journal entries for projected folders,,0
Enable UpdatePlaceholderTests on Mac,0.41088203,- Fixed an issue where some concurrent updates to the placeholder database would fail,,0
Merge pull request #239 Mac: Support projection changes that add new files and delete folder,0.56414735,1664: Update USN journal entries for projected folders,Mac: Support projection changes that add new files and delete folder,0
PR Feedback: Cleanup DiskLayoutUpgradeTests,0.43686804,1697: Fix functional tests to skip around ProjFS issue,,0
Changes for next round of PR feedback,0.4711736,General improvements:,,0
Mark PrefetchVerbTests.cs as NonParallelizable,0.490048,1745: do not exit early if no blobs found for a period when prefetching,,0
Rename addToUpdatePlaceholders,0.2929883,Adds additional logging for folder and file placeholder creation.,,0
Use ConcurrentBag when updating projection on Windows,0.3828487,1664: Update USN journal entries for projected folders,,0
Merge pull request #253. Fix console logging typo in MirrorProvider.,0.45971602,1694: Update Git to v2.29.0.,,0
Add named constant for new line separator in FileBasedCollection,0.26150134,Adds additional logging for folder and file placeholder creation.,,0
Changes for first round of PR feedback,0.4422583,General improvements:,,0
Fix console logging typo in MirrorProvider,0.3704146,1726: Config: commitGraph.generationVersion=1,,0
Merge pull request #244: Fixed a bug that was preventing clone from running prefetch and mount on MacOS,0.5664451,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,,0
Add NeedsCachePoisonFix test category,0.3430387,- Gracefully handle a missing shared object cache pack directory.,,0
Increase maximum number of roots to 128,0.19363832,1683: GVFS.SignFiles.csproj: include more DLLs for signing,,0
"Plumb the internal service name to all GVFS verbs. Otherwise automount during clone talks to the installed service, not the test instance.",0.43206158,The gvfs upgrade command is deprecated. Future upgrades will require using winget or installing directly from the releases page.,,0
Code cleanup and add comments,0.40512595,General improvements:,,0
Enable ResetHardTests,0.331683,- Built-in git rebase is on by default.,,0
Enable a subset of the SharedCacheTests,0.3241459,Includes fixes to config settings for internal users only,,0
Allow the prefetch tests to skip prefetch during clone,0.52778834,1745: do not exit early if no blobs found for a period when prefetching,,0
"Don't pass --no-mount and --no-prefetch flags to clone, because it can hide bugs",0.48310447,- gvfs prefetch learned how to take --files-list.,,0
Enable more functional tests,0.5681724,1697: Fix functional tests to skip around ProjFS issue,,0
No longer need to handle ObjectDisposedException on Windows,0.2696191,- Gracefully handle a missing shared object cache pack directory.,,0
Clarify a warning message that gets logged during prefetch if the mount process is not running,0.5754403,1745: do not exit early if no blobs found for a period when prefetching,,0
Early exit if the named pipe is already disposed,0.3327513,1745: do not exit early if no blobs found for a period when prefetching,,0
Throw if a message is written to a disposed tracer,0.24370873,1745: do not exit early if no blobs found for a period when prefetching,,0
Enable additional tests in CheckoutTests,0.3893291,1697: Fix functional tests to skip around ProjFS issue,,0
Enable most reset soft functional tests,0.4669413,1697: Fix functional tests to skip around ProjFS issue,,0
Fix compilation error on Windows,0.44053057,1679: BuildGVFSForWindows.bat: use nuget on PATH,,0
Mac: Support projection changes that add new files and delete folder,0.57226294,1664: Update USN journal entries for projected folders,,0
Merge pull request #220 Mac: Support basic projection changes and re-categorize functional tests,0.55938447,1697: Fix functional tests to skip around ProjFS issue,Mac: Support basic projection changes and re-categorize functional tests,0
Fix warning that breaks Release build,0.5089407,1747: UpgradeVerb: write deprecation notice,,0
"More changes for PR feedback, and fix erroneous logging in kext",0.4555334,Other bug fixes for reliability,,0
Fix fileSystemCallbacks bug in UpdatePlaceholderIfNeeded unit test,0.48721236,1697: Fix functional tests to skip around ProjFS issue,,0
Exclude Categories.MacTODO.FailsOnBuildAgent tests on Mac,0.3869312,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Create FailsOnBuildAgent category and tag EditFileNeedingUtf8Encoding with that category,0.31410995,1741: Fix winget tag specification,,0
Merge pull request #218 Add EnlistmentId and MountId to ETW data for correlation,0.48359084,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,When matching up data with ETW event there is an EnlistmentId and mountId that it tied to data about the enlistment and the mounted process. Other events are not tied to this data so when an exception happens getting the mount data that corresponds to it is not directly correlated. This adds the EnlistmentId and MountId to the ETW data so that the data can be correlated.,0
Fix failing functional test,0.6076255,1697: Fix functional tests to skip around ProjFS issue,,0
Add enlistment id and mount id to data for ETW,0.46857703,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,,0
Fix StyleCop errors,0.30235088,1741: Fix winget tag specification,,0
Mac: Support basic projection changes and re-categorize functional tests,0.53204125,1697: Fix functional tests to skip around ProjFS issue,,0
Merge pull request #217: RepoRegistry: Properly log error from TryGetNormalizedPath,0.47437096,1685: minor path comparison fixup in ProductUpgrader,"While investigating a user issue with auto mount registration, I noticed that their logs contained a failure from TryGetNormalizedPath, but did not log the error message. Add that message to the logs so we can properly diagnose the issue. Further, the 'normalizedEnlistmentRootPath' parameter becomes null, so do not add it to the dictionary in that case. Instead, it should be logged by the RelatedWarning. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
RepoRegistry: Properly log error from TryGetNormalizedPath,0.4121495,- Gracefully handle a missing shared object cache pack directory.,"While investigating a user issue with auto mount registration, I noticed that their logs contained a failure from TryGetNormalizedPath, but did not log the error message. Add that message to the logs so we can properly diagnose the issue. Further, the 'normalizedEnlistmentRootPath' parameter becomes null, so do not add it to the dictionary in that case. Instead, it should be logged by the RelatedWarning. Signed-off-by: Derrick Stolee dstolee@microsoft.com",0
Merge pull request #213 Add Mac specific FileBasedLock implementation,0.42469758,1744: Overhaul build and project systems and drop Mac/POSIX code,Add Mac specific FileBasedLock implementation,0
Remove code for writing signature,0.36105263,1683: GVFS.SignFiles.csproj: include more DLLs for signing,,0
PR #212: Added a multithreaded hydration functional test,0.43157852,1697: Fix functional tests to skip around ProjFS issue,,0
Cleanup and changes for PR feedback,0.47232318,General improvements:,,0
Mark the new test as Windows-only,0.3210664,1697: Fix functional tests to skip around ProjFS issue,,0
Initial MacFileBasedLock implementation,0.38723883,Initial Mac platform native notifications,,0
Fix spacing,0.2916623,Bug fixes:,,0
Added a multithreaded functional test that currently fails on Mac by attempting to concurrently read a previously unhydrated file from several threads,0.4698131,1697: Fix functional tests to skip around ProjFS issue,,0
"More cleanup, switch from interface to abstract class",0.32328075,General improvements:,,0
Rename FileBasedLock.cs to WindowsFileBasedLock.cs and move to Windows platform folder,0.45901603,1678: BuildGVFSForWindows.bat: use nuget on PATH when possible,,0
Cleanup FileBasedLock and make it Windows specific,0.36219776,1730: Fix an issue with FastFetch when deleting files,,0
Merge pull request #208 Update to ProjFS version 2018.823.1,0.62006116,- Better errors around ProjFS installation issues.,Update to ProjFS version 2018.823.1,0
Merge pull request #203 Hardlink notifications on Mac & Windows and rename notifications on Mac,0.39714068,Initial Mac platform native notifications,Hardlink notifications on Mac & Windows and rename notifications on Mac,0
Updated to ProjFS package version 2018.823.1,0.73552185,- Better errors around ProjFS installation issues.,,1
More cleanup for PR comments,0.33976153,1689: Make delete docs more verbose,,0
PR Feedback: Code cleanup and test fixes,0.5651492,"Other bug fixes, engineering improvements, and test reliability fixes.",,0
Register for HardLinkCreated on Windows,0.31045896,1710: Add new Microsoft certificate thumbprint,,0
Cleanup after rebasing,0.31591588,- Built-in git rebase is on by default.,,0
Add hardlink creation functional tests,0.48268583,1697: Fix functional tests to skip around ProjFS issue,,0
Update Windows code to handle hardlink creation,0.370664,- Gracefully handle a missing shared object cache pack directory.,,0
Update MirrorProvider for hardlink notification,0.39339393,- Upgrade supports NuGet feeds as a distribution source.,,0
Mac: Hardlink created notification,0.42431062,Initial Mac platform native notifications,,0
Update MirrorProvider for rename notification,0.3610102,- Upgrade supports NuGet feeds as a distribution source.,,0
Mac: Add file renamed notification,0.4143499,Initial Mac platform native notifications,,0
Merge pull request #191 Mac: New file created notification,0.4848947,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Mac: New file created notification,0
Convert tabs to spaces,0.14115697,Major Changes,,0
PR Feeback: Remove HasAncestorFlaggedAsInRoot and add TODO,0.3733194,- Fix backoff on cache server size endpoint 404.,,0
Merge pull request #199: Update name of file that indicates installation version,0.47112417,1676: Update Git to v2.27.0.vfs.1.0,Update name of file that indicates installation version,0
Update name of file created by installer to indicate installation version,0.32229778,- The installer now unmounts and remounts existing repos automatically,Update name of file that GVFS installer creates when an on disk version 16 capable installation is first installed.,0
Merge pull request #166 Update git version to 2.18.0.gvfs.1.26.gf61ade4,0.7651093,1676: Update Git to v2.27.0.vfs.1.0,Update git version to 2.18.0.gvfs.1.26.gf61ade4,1
Merge pull request #186 from kyle-rader/bug/fastfetch-force-checkout-test-failure,0.5704232,A case where FastFetch would not download a small number of files has been fixed.,This fixes #185,0
Remove assertions hidden within runFastFetch method,0.5036092,1730: Fix an issue with FastFetch when deleting files,,0
Remove extra assertion for expected error,0.31332356,1697: Fix functional tests to skip around ProjFS issue,,0
Use ShouldBe... syntax,0.22940601,1741: Fix winget tag specification,,0
Add expect error assertions,0.36140803,1697: Fix functional tests to skip around ProjFS issue,,0
Fix style,0.32071733,Major Changes,,0
Enable runFastFetch to expect an error,0.4964248,A case where FastFetch would not download a small number of files has been fixed.,,0
Update MirrorProvider,0.41672584,- Upgrade supports NuGet feeds as a distribution source.,,0
Mac: New file notifications,0.5079435,Initial Mac platform native notifications,,0
Merge pull request #177 from pmj/mac-kext-log-improvements,0.46417975,Pull Requests,Mac kext logging: Make time stamps more human readable,0
Mac kext logging: Make time stamps more human readable,0.5195503,- Log files now include UTC offset.,"This changes the prjfs-log tool to print log time stamps in seconds (with millisecond precision) since the start of the log rather than outputting the raw Mach absolute time stamp, which has fairly arbitrary and non-human-readable units.",0
Merge pull request #181 Mac: Add PreDelete Notification,0.5113171,1689: Make delete docs more verbose,Mac: Add PreDelete Notification,0
Merge branch 'master' into users/wilbaker/pre_delete_notification,0.36580765,1689: Make delete docs more verbose,,0
Merge pull request #188: Extract the logic to schedule post-prefetch job to its own function,0.45513856,1745: do not exit early if no blobs found for a period when prefetching,,0
Remove elses when checking for delete in HandleVnodeOperation,0.43756384,1689: Make delete docs more verbose,,0
Fix failing functional tests,0.6387887,1697: Fix functional tests to skip around ProjFS issue,,0
Extract the logic to schedule post-prefetch job to its own function.,0.53201056,1745: do not exit early if no blobs found for a period when prefetching,,0
Add logging to KauthHandler_HandleKernelMessageResponse,0.3350467,  - Now approves credentials on authentication success,,0
Merge pull request #184: Centralize business logic for starting background prefetch.,0.53373605,1745: do not exit early if no blobs found for a period when prefetching,Move the check for unattended enlistment from InProcessMount to BackgroundPrefetcher.,0
Move newline into ModifiedPathsShouldNotContain,0.35697663,1685: minor path comparison fixup in ProductUpgrader,,0
Fix notification registration in MirrorProvider,0.34042493,1652: RepoRegistry: ignore non-existent repos,,0
Centralize business logic for starting background prefetch.,0.49542782,1745: do not exit early if no blobs found for a period when prefetching,Move the check for unattended enlistment from InProcessMount to BackgroundPrefetcher.,0
"Reduce scope of changes to be specific to PreDelete, update MirrorProvider",0.36386818,1689: Make delete docs more verbose,,0
Merge pull request #172: GitStatusCache: fix race condition in test setup,0.52002454,1694: Update Git to v2.29.0.,GitStatusCache: fix race condition in test setup,0
GitStatusCache: fix race condition in test setup,0.4864897,- Added a new volume-wide cache for downloaded git objects that is shared amongst multiple repos. Only newly created repos will use the new cache location. Existing clones will continue to use their own private cache.,"This is to fix an issue that happened (intermittently) in the functional tests. There is a race condition where the test is attempting to delete the status cache file, but the status cache might not have been generated for the test repository. To fix this, the test setup will wait for the initial status cache to be generated, so it can proceed from a known state.",0
Merge pull request #159 from kyle-rader/feature/fast-fetch-force-flag,0.4465003,"* Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it.",This adds a --force-checkout option when using FastFetch. This will cause FastFetch to treat the repo as if it had just been initialized meaning new folders can be fetched after the initial FastFetch is run. You can effectively grow the number of folders a FastFetched repo has. This is required for boot-strapping scenarios where the set of desired folders to fetch must be dynamically computed after an initial fast fetch.,0
Update comments and help text,0.3805472,Release Notes,,0
Rename force to force-checkout and pull into FastFetch CheckoutJob,0.3816762,1730: Fix an issue with FastFetch when deleting files,,0
Simplify help text for force flag,0.3549479,1689: Make delete docs more verbose,,0
Add --force flag to fast fetch (apply patch from VSTS work),0.50712657,A case where FastFetch would not download a small number of files has been fixed.,,0
Merge pull request #167 from nickgra/gitprbuild,0.5646019,1663: Update Git to v2.27.0,Fix parsing of GVFS-aware Git version numbers that contain - (for PR validation builds) Correct regex used to match GVFS-aware Git package to actually match the NuGet spec for what defines a package. See https://docs.microsoft.com/en-us/nuget/reference/package-versioning,0
Mac: Add PreDelete Notification,0.42611182,Initial Mac platform native notifications,,0
Merge branch 'master' into gitprbuild,0.41573855,"- Upgraded to Git 2.19. This version brings with it improvements to unpack_trees to speed up checkout, merge, reset, and rebase.",,0
Merge pull request #179 Fix test reliability issues with checks in GetObjectRoot,0.5244441,1697: Fix functional tests to skip around ProjFS issue,Fix test reliability issues with checks in GetObjectRoot,0
Fix StyleCop error,0.27567124,1741: Fix winget tag specification,,0
Simplify checks in GetObjectRoot,0.2520727,* git multi-pack-index verify would run slowly if the objects directory had more than 2048 packfiles.,,0
Merge branch 'master' into users/wilbaker/get_object_root_reliability_fix,0.4034095,1694: Update Git to v2.29.0.,,0
Merge PR #173: Add FileOp specific ShouldHandleFileOpEvent helper to kext,0.39567563,Adds additional logging for folder and file placeholder creation.,Add FileOp specific ShouldHandleFileOpEvent helper to kext,0
Fix test reliability issues with checks in GetObjectRoot,0.46296906,1697: Fix functional tests to skip around ProjFS issue,,0
Merge branch 'master' into users/wilbaker/kext_should_handle_cleanup,0.38481855,"The merge strategy default is changed from recursive to ort which should present significant performance improvements for commands such as git merge, git rebase, and git cherry-pick. Huge thanks to external contributor @newren for creating this new merge strategy!",,0
Remove unused local variable,0.26481342,1746: Delete custom upgrader,,0
Rework Git version parsing into a single script,0.47989386,"* Sped up GVFS's parsing of the git index, shaving off 2-3 seconds for a large index file",,0
Add build badges for Windows and Mac CI builds,0.41551775,"A new config setting allows updating USN journals, which is needed when using BuildXL with VFS for Git.",Add build badge for Windows and Mac CI builds PR #171,0
Add build badge for Windows and Mac CI builds,0.39225522,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,,0
Add FileOp specific ShouldHandleFileOpEvent helper to kext,0.33879638,Adds additional logging for folder and file placeholder creation.,,0
Merge pull request #157: Fix issues that lead to problems with unmounting a repository,0.54440725,1676: Update Git to v2.27.0.vfs.1.0,"Fix the following issues that contributed to functional test instability: 1) GVFS lock acquisition code was not correctly reporting whether it actually acquired the GVFS lock. This lead to commands that depended on acquiring the GVFS lock, or the GVFS lock being available, running, even though the lock was not available. 2) Additionally, when unmounting a repository, GVFS partially shutdown the FileSystemVirtualizer before the GitStatusCache. As the GitStatusCache depends on the FileSystemVirtualizer, we shutdown the GitStatusCache before components it depends on.",0
GVFSLock.Shared: correctly report whether lock was acquired,0.5415993,- Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock,"This fixes a bug in TryAcquireGVFSLockForProcess where it does not correctly report whether it was able to acquire the GVFS lock. In cases where this method retries to acquire the lock, it would report success, even if it was not able to acquire the lock. This could lead to problems where commands that depended on the GVFS could run, even if it did not actually have the lock.",0
Shutdown GitStatusCache before components it depends on,0.46730128,- Added a new volume-wide cache for downloaded git objects that is shared amongst multiple repos. Only newly created repos will use the new cache location. Existing clones will continue to use their own private cache.,"Tweak the order that components are shutdown, to shutdown the GitStatusCache before other components that it depends on. This is to prevent problems that might arise from a component being disabled that GitStatusCache depends on.",0
Merge pull request #165: VirtualFileSystemHook: ensure string is properly null terminated,0.50756603,- Fixed a bug that would cause VFS for Git mount process to shut down if it receives out-of-order ProjFS callbacks.,VirtualFileSystemHook: ensure string is properly null terminated,0
VirtualFileSystemHook: ensure string is properly null terminated,0.3678686,Adds additional logging for folder and file placeholder creation.,"When the VirtualFileSystem hook receives an error reading data from GVFS over a named pipe, it will include the pipe message in the error message. The pipe message is not necassarily null terminated, so we need to append a null terminating character before passing it to string formatting functions that expect a null terminated string. This change makes sure the message is null terminated.",0
Correct regex used to match GVFS-aware Git package to actually match the NuGet spec for what defines a package,0.5237698,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
Merge pull request #154 from nickgra/java8Fix,0.47491542,Pull Requests,Properly work around Mac GCM issues when the system Java is 8 (or below).,0
Merge pull request #160 from sanoursa/copyright,0.45743275,Pull Requests,Remove incorrect file header,0
Merge pull request #163 from derrickstolee/bug162,0.49932343,1647: Fix commit-graph expiration,ObjectPool: Create Pool Size of 100 instead of throwing on 0,0
Merge pull request #158 from sanoursa/log-improvements,0.49564597,Pull Requests,Mac: prjfs-log improvements,0
Update git version to 2.18.0.gvfs.1.26.gf61ade4,0.83955413,1676: Update Git to v2.27.0.vfs.1.0,This updates the git version to 2.18.0 which includes changes to the rename detection to use config setting which was previously turned off with a patch in git.,1
Assert that a 0 input size creates a positive pool size,0.18707234,"- ""Sparse"" push algorithm should improve performance of pushes where only a small cone of a repository is modified.",,0
Do not fail on small pools,0.2834021,Other bug fixes for reliability,,0
Print the timestamp in the message rather than the current time,0.34679502,- Log files now include UTC offset.,,0
Merge pull request #153 from kewillford/fix_mac_functionaltests,0.48793152,1697: Fix functional tests to skip around ProjFS issue,Use the test repo PAT set by the build,0
Merge pull request #156 from wilbaker/users/wilbaker/mac_file_modified_notification,0.43365812,- Fixed an issue on Mac where files were not being hydrated when signed as part of a build,Mac: File modified notifications,0
Remove incorrect file header,0.30645582,1730: Fix an issue with FastFetch when deleting files,,0
Revert unintended change,0.3746605,See the full change log,,0
Revert unnecessary changes,0.44328284,Major Changes,,0
"Log improvements: build everything under one target, added utility for expanding action bitfield, print line number and timestamp, avoid perf hit of kprintf",0.38080224,Perf improvements:,,0
Use the test repo PAT set by the build,0.43114215,- Built-in git rebase is on by default.,,0
Properly error out in PrepFunctionalTests.sh if GVFS-aware Git hasn't been downloaded yet,0.6667973,* Improve error message from gvfs upgrade if the Git installation could not be found.,,0
Remove TODOs,0.37332407,1689: Make delete docs more verbose,,0
Properly work around Mac GCM issues when the system Java is 8 (or below),0.42912394,- Consume new GCM to fix git credential erase behavior,,0
Mac: File modified notifications,0.4173963,Initial Mac platform native notifications,,0
Changes since the last update,0.654929,See the full change log,Update SHA values in functional tests to work against test repo Install GVFS-Aware Git on MacOS (without standing up PreBuild) Only start the background prefetch if the operation would use a cache server Prevent NullReferenceException during enumeration callbacks Update GVFS VC Runtime platform and remove .NET 3.5 dependency Fix build error on VS2017 Update 8 Merge features/status_cache to master,0
Changed included in this update:,0.65371,Please see the full change log.,"Handle IOExceptions when setting Console.InputEncoding Only add to the projection if the index entry has the skipworktree bit and is Update Git for Windows for status cache fixes Stand up script to enable Mac functional tests to run as a build definition Native hooks on Mac Update the readme to indicate the rename is in progress Remove GC.Collect, update allocation strategy, and add logging for index parsing Update to ProjFS version 2018.719.1 Remove the string split from upgrading to modified paths Update git for windows with version that uses new msys2 runtime add utility method to convert from Windows to Unix paths Run prefetch in the background Update to ProjFS version 2018.706.1 Tweak logic for determining the current test directory Update GVFS.Hooks to work on Mac, install GVFS.Hooks on Mac, and fix clone+mount with GVFS aware Git Fixes incremental builds when changing props files in GVFS.Build",0
Merge pull request #138 from sanoursa/readme-rename,0.47735485,1750: Update Readme.md,Update the readme to indicate the rename is in progress,0
Update the readme to indicate the rename is in progress,0.49550807,1750: Update Readme.md,,0
General improvements:,1.0000002,General improvements:,"- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter. - We have started porting parts of the product to .NET Standard. - Updated Git for a security issue. - Better errors around ProjFS installation issues. - Fix backoff on cache server size endpoint 404. - GVFS has a better icon. - Improved reliability of how the installer upgrades from non-inboxed to inboxed ProjFS. - Better recovery from a process that terminates without releasing the GVFS lock. - Gracefully handle a missing shared object cache pack directory. Performance improvements: - We have moved MIDX computation to a post-fetch thread. This should save blocking time per prefetch that downloads a packfile from the cache server. - We have enabled the generation of the serialized commit graph in the post-fetch thread. This should provide across-the-board perf wins in any command that walks many commits. - Improved the memory usage during MIDX computation. - Further optimizations to GVFS's index parsing, saving time on commands that need to reproject (like checkout). - Use commit graph generation numbers during force push, saving time on force pushes.",1
Major updates:,0.99999994,Major updates:,"* Switched over to use the Windows Projected File System (ProjFS) optional feature on RS4 and later. ProjFS is the new name for the GvFlt driver and its associated user mode library. * The local file size cache was migrated from ESENT to SQLite * Git commands are now allowed to delete an empty directory * Many other reliability improvements in interactions between GVFS and the file system, and between GVFS and git Perf improvements: * Better memory management in git, creating a savings of up to half a second on commands that parse the index * Added a new mutli-pack index file to git, allowing it to become much more efficient at finding an object when there are a large number of local packfiles * Added a git config setting to disable the calculations for detecting force pushes during 'git fetch' and 'git pull'. That calculation can take 10's of seconds on a large graph, and users can now opt out of it. * Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files * The post-command step to update placeholder files now batches its size requests to the server, resulting in significant speedups in situations where many placeholder files needed to be updated * The client will now also query the /gvfs/sizes endpoint on a cache server that implements that endpoint, reducing the latency on those requests even further * Sped up GVFS's parsing of the git index, shaving off 2-3 seconds for a large index file",1
New features:,1.0000001,New features:,"- Added a new volume-wide cache for downloaded git objects that is shared amongst multiple repos. Only newly created repos will use the new cache location. Existing clones will continue to use their own private cache. - The installer now unmounts and remounts existing repos automatically - GVFS no longer forces an antivirus exclusion. This was a relic from long ago when the gvflt driver and the Defender driver used to interfere with each other, but antivirus is no longer GVFS's concern. - Added better diagnostic info in the GVFS logs when there are network errors - git status now supports an option to avoid doing its ahead/behind calculations. This allows the user to decide if they want to skip that overhead if all they care about is the status of the working directory. Bug fixes: - Lots of bug fixes to make GVFS's file writes (e.g. to its database files) more reliable, even in the face of power loss - GVFS can now recover from corrupted git object files (e.g. caused by a torn write), by re-downloading them whenever git asks for an object. The assumption is that git would not be asking GVFS for it if the object was valid. - Fixed an annoying bug where a Ctrl+C'd git process could leak a GVFS lock",1
Updated Readme.md with installation instructions,0.7348766,1750: Update Readme.md,,1
New features and bug fixes:,0.8080248,New features:,- 'gvfs prefetch' can now hydrate files as it downloads their blobs - Added a new 'gvfs service' verb for interacting with the GVFS.Service to mount/unmount all repos - Reduced the perf overhead of GvFlt notifications for handle creation - Treat 'git stage' the same as 'git add' - Gather object and packfile counts in 'gvfs diagnose' to help with perf investigations,1
Perf improvements and bug fixes:,0.8505184,Perf improvements:,"- Clean up tracing to clearly indicate errors - Added an unattended mode for use in labs - Replace most ESENT databases with our own FileBasedCollection - Updated always_exclude to track individual files, not folders - Added new gvfs commands for managing cache servers - Integrated GvFlt perf improvements, including a negative path cache - Added ability to prefetch files - Miscellaneous other bug fixes",1
Reliability update:,0.7129406,Other bug fixes for reliability,- Improved handling of IO timeouts - Made it easier to discover and configure cache servers - Improved reliability of GVFS.Service - More repair options - Many other perf and bug fixes,1
Automount and other updates:,0.5078937,- Multiple mount process reliability bugs have been squashed.,- Added a Windows service that performs automount after a reboot - No more 'git.exe cat-file' background processes - Downloaded Git objects are now written to a cache in the .gvfs folder - Bug fixes and perf improvements,0
Merge pull request #40 from jeremyepling/update-gvflt-eula,0.45956945,1736: Update Git to v2.31.1.vfs.0.3,Update GvFlt_EULA.docx to markdown format,0
Updated the GvFlt_EULA link,0.43172705,- We have improved how GVFS handles enlistments in junctions and mapped to a drive letter.,,0
Update GvFlt_EULA.docx to markdown format,0.29624772,1666: Docs: start basic template,,0
O(modified),0.322233,General Improvements,"We now only add files that have actually been modified into the sparse-checkout, meaning git operations no longer get linearly slower as you read more files in the repo.",0
"Bug fixes, better tools support",0.65727997,Other bug fixes for reliability,Includes the following changes:  Added always_exclude file to re-enable usage of exclude and core.excludesFile Use --git-pid arg in hooks Flush gvflt logs Issue a warning instead of an error when unable to update Defender exclusions Index cleanup in fastfetch,0
Update with latest GVFS code.,0.7219162,Bug Fix: Fixes a bug with gvfs upgrade that causes versions v1.0.20112.1 from upgrading from private feeds.,Some notable changes in this update * GVFS now projects the .git\index rather than the HEAD commit * Made some minor updates to the GVFS protocol * There is a new dehydrate verb that will dehydrate all files in the src folder * Lots of perf improvements * Some locale-related bug fixes * Improved behavior for the GVFS lock * GVFS is now more robust with respect to git environment variables * Better logging,1
Merge pull request #23 from claycephas/protocolformatting,0.43620732,Pull Requests,Table formatting polish,0
Table formatting polish,0.1719142,Perf improvements:,,0
Merge pull request #19 from bbodenmiller/patch-1,0.49735236,Pull Requests,improve readme formatting,0
improve readme formatting,0.39225978,1750: Update Readme.md,,0
Merge pull request #16 from rootulp/patch-1,0.53667694,Pull Requests,README: use inline code blocks and etc.,0
README: use inline code blocks and etc.,0.33033347,1666: Docs: start basic template,,0
Merge pull request #3 from kevin-david/patch-1,0.56256497,Pull Requests,Protocol.md: fix a few markdown issues,0
Protocol.md: fix a few silly markdown issues,0.37172532,1669: Docs: more troubleshooting and FAQs,,0
Current snapshot of GVFS,0.5566522,"* Due to the transition to SQLite, the file sizes cache can now live in the volume-wide .gvfsCache folder and be shared by multiple repos, causing fewer round trips to the server while enumerating files",,0
