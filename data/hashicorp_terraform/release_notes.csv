Index,Release Note
1,"1.4.6 (April 26, 2023)
BUG FIXES

Fix bug when rendering plans that include null strings. (#33029)
Fix bug when rendering plans that include unknown values in maps. (#33029)
Fix bug where the plan would render twice when using older versions of TFE as a backend. (#33018)
Fix bug where sensitive and unknown metadata was not being propagated to dynamic types while rendering plans. (#33057)
Fix bug where sensitive metadata from the schema was not being included in the terraform show -json output. (#33059)
Fix bug where computed attributes were not being rendered with the # forces replacement suffix. (#33065)
"
2,"1.4.5 (April 12, 2023)

Revert change from [#32892] due to an upstream crash.
Fix planned destroy value which would cause terraform_data to fail when being replaced with create_before_destroy (#32988)
"
3,"This is a development snapshot for the forthcoming v1.5.0 release, built from Terraform's main branch. These release packages are for early testing only and are not suitable for production use.
The following is the v1.5.0 changelog so far, at the time of this snapshot:
UPGRADE NOTES:

This is the last version of Terraform for which macOS 10.13 High Sierra or 10.14 Mojave are officially supported. Future Terraform versions may not function correctly on these older versions of macOS.
This is the last version of Terraform for which Windows 7, 8, Server 2008, and Server 2012 are supported by Terraform's main implementation language, Go. We already ended explicit support for versions earlier than Windows 10 in Terraform v0.15.0, but future Terraform versions may malfunction in more significant ways on these older Windows versions.

On Linux (and some other non-macOS Unix platforms we don't officially support), Terraform will now notice the trust-ad option in /etc/resolv.conf and, if set, will set the ""authentic data"" option in outgoing DNS requests in order to better match the behavior of the GNU libc resolver.
Terraform does not pay any attention to the corresponding option in responses, but some DNSSEC-aware recursive resolvers return different responses when the request option isn't set. This should therefore avoid some potential situations where a DNS request from Terraform might get a different response than a similar request from other software on your system.


NEW FEATURES:


check blocks for validating infrastructure: Module and configuration authors can now write independent check blocks within their configuration to validate assertions about their infrastructure.
The new independent check blocks must specify at least one assert block, but possibly many, each one with a condition expression and an error_message expression matching the existing Custom Condition Checks. 
Additionally, check blocks can optionally load a scoped data source. Scoped data sources match the existing data sources with the exception that they can only be referenced from within their check block.
Unlike the existing precondition and postcondition blocks, Terraform will not halt execution should the scoped data block fail or error or if any of the assertions fail. 
This allows practitioners to continually validate the state of their infrastructure outside the usual lifecycle management cycle. 


ENHANCEMENTS:

Terraform CLI's local operations mode will now attempt to persist state snapshots to the state storage backend periodically during the apply step, thereby reducing the window for lost data if the Terraform process is aborted unexpectedly. [GH-32680]
If Terraform CLI receives SIGINT (or its equivalent on non-Unix platforms) during the apply step then it will immediately try to persist the latest state snapshot to the state storage backend, with the assumption that a graceful shutdown request often typically followed by a hard abort some time later if the graceful shutdown doesn't complete fast enough. [GH-32680]

BUG FIXES:

terraform init: Fixed crash with invalid blank module name. [GH-32781]
"
4,"1.4.4 (March 30, 2023)
Due to an incident while migrating build systems for the 1.4.3 release where 
CGO_ENABLED=0 was not set, we are rebuilding that version as 1.4.4 with the 
flag set. No other changes have been made between 1.4.3 and 1.4.4."
5,"1.4.3 (March 30, 2023)
BUG FIXES:
* Prevent sensitive values in non-root module outputs from marking the entire output as sensitive [GH-32891]
* Fix the handling of planned data source objects when storing a failed plan [GH-32876]
* Don't fail during plan generation when targeting prevents resources with schema changes from performing a state upgrade [GH-32900]
* Skip planned changes in sensitive marks when the changed attribute is discarded by the provider [GH-32892]"
6,"1.4.2 (March 16, 2023)
BUG FIXES:

Fix bug in which certain uses of setproduct caused Terraform to crash (#32860)
Fix bug in which some provider plans were not being calculated correctly, leading to an ""invalid plan"" error (#32860)
"
7,"1.4.1 (March 15, 2023)
BUG FIXES:

Enables overriding modules that have the depends_on attribute set, while still preventing the depends_on attribute itself from being overridden. (#32796)
terraform providers mirror: when a dependency lock file is present, mirror the resolved providers versions, not the latest available based on configuration. (#32749)
Fixed module downloads from S3 URLs when using AWS IAM roles for service accounts (IRSA). (#32700)
hcl: Fix a crash in Terraform when attempting to apply defaults into an incompatible type. (#32775)
Prevent panic when creating a plan which errors before the planning process has begun. (#32818)
Fix the plan renderer skipping the ""no changes"" messages when there are no-op outputs within the plan. (#32820)
Prevent panic when rendering null nested primitive values in a state output. (#32840)
Warn when an invalid path is specified in TF_CLI_CONFIG_FILE (#32846)
"
8,"1.4.0 (March 08, 2023)
UPGRADE NOTES:

config: The textencodebase64 function when called with encoding ""GB18030"" will now encode the euro symbol € as the two-byte sequence 0xA2,0xE3, as required by the GB18030 standard, before applying base64 encoding.
config: The textencodebase64 function when called with encoding ""GBK"" or ""CP936"" will now encode the euro symbol € as the single byte 0x80 before applying base64 encoding. This matches the behavior of the Windows API when encoding to this Windows-specific character encoding.

terraform init: When interpreting the hostname portion of a provider source address or the address of a module in a module registry, Terraform will now use non-transitional IDNA2008 mapping rules instead of the transitional mapping rules previously used.
This matches a change to the WHATWG URL spec's rules for interpreting non-ASCII domain names which is being gradually adopted by web browsers. Terraform aims to follow the interpretation of hostnames used by web browsers for consistency. For some hostnames containing non-ASCII characters this may cause Terraform to now request a different ""punycode"" hostname when resolving.
* terraform init will now ignore entries in the optional global provider cache directory unless they match a checksum already tracked in the current configuration's dependency lock file. This therefore avoids the long-standing problem that when installing a new provider for the first time from the cache we can't determine the full set of checksums to include in the lock file. Once the lock file has been updated to include a checksum covering the item in the global cache, Terraform will then use the cache entry for subsequent installation of the same provider package. There is an interim CLI configuration opt-out for those who rely on the previous incorrect behavior. (#32129)
* The Terraform plan renderer has been completely rewritten to aid with future Terraform Cloud integration. Users should not see any material change in the plan output between 1.3 and 1.4. If you notice any significant differences, or if Terraform fails to plan successfully due to rendering problems, please open a bug report issue.


BUG FIXES:

The module installer will now record in its manifest a correct module source URL after normalization when the URL given as input contains both a query string portion and a subdirectory portion. Terraform itself doesn't currently make use of this information and so this is just a cosmetic fix to make the recorded metadata more correct. (#31636)
config: The yamldecode function now correctly handles entirely-nil YAML documents. Previously it would incorrectly return an unknown value instead of a null value. It will now return a null value as documented. (#32151)
Ensure correct ordering between data sources and the deletion of managed resource dependencies. (#32209)
Fix Terraform creating objects that should not exist in variables that specify default attributes in optional objects. (#32178)
Fix several Terraform crashes that are caused by HCL creating objects that should not exist in variables that specify default attributes in optional objects within collections. (#32178)
Fix inconsistent behaviour in empty vs null collections. (#32178)
terraform workspace now returns a non-zero exit when given an invalid argument (#31318)
Terraform would always plan changes when using a nested set attribute (#32536)
Terraform can now better detect when complex optional+computed object attributes are removed from configuration (#32551)
A new methodology for planning set elements can now better detect optional+computed changes within sets (#32563)
Fix state locking and releasing messages when in -json mode, messages will now be written in JSON format (#32451)

ENHANCEMENTS:

terraform plan can now store a plan file even when encountering errors, which can later be inspected to help identify the source of the failures (#32395)
terraform_data is a new builtin managed resource type, which can replace the use of null_resource, and can store data of any type (#31757)
terraform init will now ignore entries in the optional global provider cache directory unless they match a checksum already tracked in the current configuration's dependency lock file. This therefore avoids the long-standing problem that when installing a new provider for the first time from the cache we can't determine the full set of checksums to include in the lock file. Once the lock file has been updated to include a checksum covering the item in the global cache, Terraform will then use the cache entry for subsequent installation of the same provider package. There is an interim CLI configuration opt-out for those who rely on the previous incorrect behavior. (#32129)
Interactive input for sensitive variables is now masked in the UI (#29520)
A new -or-create flag was added to terraform workspace select, to aid in creating workspaces in automated situations (#31633)
A new command was added for exporting Terraform function signatures in machine-readable format: terraform metadata functions -json (#32487)
The ""Failed to install provider"" error message now includes the reason a provider could not be installed. (#31898)
backend/gcs: Add kms_encryption_key argument, to allow encryption of state files using Cloud KMS keys. (#24967)
backend/gcs: Add storage_custom_endpoint argument, to allow communication with the backend via a Private Service Connect endpoint. (#28856)
backend/gcs: Update documentation for usage of gcs with terraform_remote_state (#32065)
backend/gcs: Update storage package to v1.28.0 (#29656)
When removing a workspace from the cloud backend terraform workspace delete will use Terraform Cloud's Safe Delete API if the -force flag is not provided. (#31949)
backend/oss: More robustly handle endpoint retrieval error (#32295)
local-exec provisioner: Added quiet argument. If quiet is set to true, Terraform will not print the entire command to stdout during plan. (#32116)
backend/http: Add support for mTLS authentication. (#31699)
cloud: Add support for using the generic hostname localterraform.com in module and provider sources as a substitute for the currently configured cloud backend hostname. This enhancement was also applied to the remote backend.
terraform show will now print an explanation when called on a Terraform workspace with empty state detailing why no resources are shown. (#32629)
backend/gcs: Added support for GOOGLE_BACKEND_IMPERSONATE_SERVICE_ACCOUNT env var to allow impersonating a different service account when GOOGLE_IMPERSONATE_SERVICE_ACCOUNT is configured for the GCP provider. (#32557)
backend/cos: Add support for the assume_role authentication method with the tencentcloud provider. This can be configured via the Terraform config or environment variables.
backend/cos: Add support for the security_token authentication method with the tencentcloud provider. This can be configured via the Terraform config or environment variables.

EXPERIMENTS:


Since its introduction the yamlencode function's documentation carried a warning that it was experimental. This predated our more formalized idea of language experiments and so wasn't guarded by an explicit opt-in, but the intention was to allow for small adjustments to its behavior if we learned it was producing invalid YAML in some cases, due to the relative complexity of the YAML specification.
From Terraform v1.4 onwards, yamlencode is no longer documented as experimental and is now subject to the Terraform v1.x Compatibility Promises. There are no changes to its previous behavior in v1.3 and so no special action is required when upgrading.

"
9,"1.4.0 (Unreleased)
UPGRADE NOTES:

config: The textencodebase64 function when called with encoding ""GB18030"" will now encode the euro symbol € as the two-byte sequence 0xA2,0xE3, as required by the GB18030 standard, before applying base64 encoding.
config: The textencodebase64 function when called with encoding ""GBK"" or ""CP936"" will now encode the euro symbol € as the single byte 0x80 before applying base64 encoding. This matches the behavior of the Windows API when encoding to this Windows-specific character encoding.

terraform init: When interpreting the hostname portion of a provider source address or the address of a module in a module registry, Terraform will now use non-transitional IDNA2008 mapping rules instead of the transitional mapping rules previously used.
This matches a change to the WHATWG URL spec's rules for interpreting non-ASCII domain names which is being gradually adopted by web browsers. Terraform aims to follow the interpretation of hostnames used by web browsers for consistency. For some hostnames containing non-ASCII characters this may cause Terraform to now request a different ""punycode"" hostname when resolving.
* terraform init will now ignore entries in the optional global provider cache directory unless they match a checksum already tracked in the current configuration's dependency lock file. This therefore avoids the long-standing problem that when installing a new provider for the first time from the cache we can't determine the full set of checksums to include in the lock file. Once the lock file has been updated to include a checksum covering the item in the global cache, Terraform will then use the cache entry for subsequent installation of the same provider package. There is an interim CLI configuration opt-out for those who rely on the previous incorrect behavior. (#32129)
* The Terraform plan renderer has been completely rewritten to aid with future Terraform Cloud integration. Users should not see any material change in the plan output between 1.3 and 1.4. If you notice any significant differences, or if Terraform fails to plan successfully due to rendering problems, please open a bug report issue.


BUG FIXES:

The module installer will now record in its manifest a correct module source URL after normalization when the URL given as input contains both a query string portion and a subdirectory portion. Terraform itself doesn't currently make use of this information and so this is just a cosmetic fix to make the recorded metadata more correct. (#31636)
config: The yamldecode function now correctly handles entirely-nil YAML documents. Previously it would incorrectly return an unknown value instead of a null value. It will now return a null value as documented. (#32151)
Ensure correct ordering between data sources and the deletion of managed resource dependencies. (#32209)
Fix Terraform creating objects that should not exist in variables that specify default attributes in optional objects. (#32178)
Fix several Terraform crashes that are caused by HCL creating objects that should not exist in variables that specify default attributes in optional objects within collections. (#32178)
Fix inconsistent behaviour in empty vs null collections. (#32178)
terraform workspace now returns a non-zero exit when given an invalid argument (#31318)
Terraform would always plan changes when using a nested set attribute (#32536)
Terraform can now better detect when complex optional+computed object attributes are removed from configuration (#32551)
A new methodology for planning set elements can now better detect optional+computed changes within sets (#32563)
Fix state locking and releasing messages when in -json mode, messages will now be written in JSON format (#32451)

ENHANCEMENTS:

terraform plan can now store a plan file even when encountering errors, which can later be inspected to help identify the source of the failures (#32395)
terraform_data is a new builtin managed resource type, which can replace the use of null_resource, and can store data of any type (#31757)
terraform init will now ignore entries in the optional global provider cache directory unless they match a checksum already tracked in the current configuration's dependency lock file. This therefore avoids the long-standing problem that when installing a new provider for the first time from the cache we can't determine the full set of checksums to include in the lock file. Once the lock file has been updated to include a checksum covering the item in the global cache, Terraform will then use the cache entry for subsequent installation of the same provider package. There is an interim CLI configuration opt-out for those who rely on the previous incorrect behavior. (#32129)
Interactive input for sensitive variables is now masked in the UI (#29520)
A new -or-create flag was added to terraform workspace select, to aid in creating workspaces in automated situations (#31633)
A new command was added for exporting Terraform function signatures in machine-readable format: terraform metadata functions -json (#32487)
The ""Failed to install provider"" error message now includes the reason a provider could not be installed. (#31898)
backend/gcs: Add kms_encryption_key argument, to allow encryption of state files using Cloud KMS keys. (#24967)
backend/gcs: Add storage_custom_endpoint argument, to allow communication with the backend via a Private Service Connect endpoint. (#28856)
backend/gcs: Update documentation for usage of gcs with terraform_remote_state (#32065)
backend/gcs: Update storage package to v1.28.0 (#29656)
When removing a workspace from the cloud backend terraform workspace delete will use Terraform Cloud's Safe Delete API if the -force flag is not provided. (#31949)
backend/oss: More robustly handle endpoint retrieval error (#32295)
local-exec provisioner: Added quiet argument. If quiet is set to true, Terraform will not print the entire command to stdout during plan. (#32116)
backend/http: Add support for mTLS authentication. (#31699)
cloud: Add support for using the generic hostname localterraform.com in module and provider sources as a substitute for the currently configured cloud backend hostname. This enhancement was also applied to the remote backend.
terraform show will now print an explanation when called on a Terraform workspace with empty state detailing why no resources are shown. (#32629)
backend/gcs: Added support for GOOGLE_BACKEND_IMPERSONATE_SERVICE_ACCOUNT env var to allow impersonating a different service account when GOOGLE_IMPERSONATE_SERVICE_ACCOUNT is configured for the GCP provider. (#32557)
backend/cos: Add support for the assume_role authentication method with the tencentcloud provider. This can be configured via the Terraform config or environment variables.
backend/cos: Add support for the security_token authentication method with the tencentcloud provider. This can be configured via the Terraform config or environment variables.

EXPERIMENTS:


Since its introduction the yamlencode function's documentation carried a warning that it was experimental. This predated our more formalized idea of language experiments and so wasn't guarded by an explicit opt-in, but the intention was to allow for small adjustments to its behavior if we learned it was producing invalid YAML in some cases, due to the relative complexity of the YAML specification.
From Terraform v1.4 onwards, yamlencode is no longer documented as experimental and is now subject to the Terraform v1.x Compatibility Promises. There are no changes to its previous behavior in v1.3 and so no special action is required when upgrading.

"
10,"1.4.0 (Unreleased)
UPGRADE NOTES:

config: The textencodebase64 function when called with encoding ""GB18030"" will now encode the euro symbol € as the two-byte sequence 0xA2,0xE3, as required by the GB18030 standard, before applying base64 encoding.
config: The textencodebase64 function when called with encoding ""GBK"" or ""CP936"" will now encode the euro symbol € as the single byte 0x80 before applying base64 encoding. This matches the behavior of the Windows API when encoding to this Windows-specific character encoding.

terraform init: When interpreting the hostname portion of a provider source address or the address of a module in a module registry, Terraform will now use non-transitional IDNA2008 mapping rules instead of the transitional mapping rules previously used.
This matches a change to the WHATWG URL spec's rules for interpreting non-ASCII domain names which is being gradually adopted by web browsers. Terraform aims to follow the interpretation of hostnames used by web browsers for consistency. For some hostnames containing non-ASCII characters this may cause Terraform to now request a different ""punycode"" hostname when resolving.
- The Terraform plan renderer has been completely rewritten to aid with future Terraform Cloud integration. Users should not see any material change in the plan output between 1.3 and 1.4. Users are encouraged to file reports if they notice material differences, or encounter any bugs or panics during their normal execution of Terraform.
The diff computation and the rendering are now split into separate packages, while previously the rendering was handled as the diff was computed. Going forward, making small changes to the format of the plan will be easier and introducing new types of renderer will be simplified.


BUG FIXES:

The module installer will now record in its manifest a correct module source URL after normalization when the URL given as input contains both a query string portion and a subdirectory portion. Terraform itself doesn't currently make use of this information and so this is just a cosmetic fix to make the recorded metadata more correct. (#31636)
config: The yamldecode function now correctly handles entirely-nil YAML documents. Previously it would incorrectly return an unknown value instead of a null value. It will now return a null value as documented. (#32151)
Ensure correct ordering between data sources and the deletion of managed resource dependencies. (#32209)
Fix Terraform creating objects that should not exist in variables that specify default attributes in optional objects. (#32178)
Fix several Terraform crashes that are caused by HCL creating objects that should not exist in variables that specify default attributes in optional objects within collections. (#32178)
Fix inconsistent behaviour in empty vs null collections. (#32178)
terraform workspace now returns a non-zero exit when given an invalid argument (#31318)
Terraform would always plan changes when using a nested set attribute (#32536)
Terraform can now better detect when complex optional+computed object attributes are removed from configuration (#32551)
A new methodology for planning set elements can now better detect optional+computed changes within sets (#32563)
Fix state locking and releasing messages when in -json mode, messages will now be written in JSON format (#32451)

ENHANCEMENTS:

terraform plan can now store a plan file even when encountering errors, which can later be inspected to help identify the source of the failures (#32395)
terraform_data is a new builtin managed resource type, which can replace the use of null_resource, and can store data of any type (#31757)
terraform init will now ignore entries in the optional global provider cache directory unless they match a checksum already tracked in the current configuration's dependency lock file. This therefore avoids the long-standing problem that when installing a new provider for the first time from the cache we can't determine the full set of checksums to include in the lock file. Once the lock file has been updated to include a checksum covering the item in the global cache, Terraform will then use the cache entry for subsequent installation of the same provider package. There is an interim CLI configuration opt-out for those who rely on the previous incorrect behavior. (#32129)
Interactive input for sensitive variables is now masked in the UI (#29520)
A new -or-create flag was added to terraform workspace select, to aid in creating workspaces in automated situations (#31633)
A new command was added for exporting Terraform function signatures in machine-readable format: terraform metadata functions -json (#32487)
The ""Failed to install provider"" error message now includes the reason a provider could not be installed. (#31898)
backend/gcs: Add kms_encryption_key argument, to allow encryption of state files using Cloud KMS keys. (#24967)
backend/gcs: Add storage_custom_endpoint argument, to allow communication with the backend via a Private Service Connect endpoint. (#28856)
backend/gcs: Update documentation for usage of gcs with terraform_remote_state (#32065)
backend/gcs: Update storage package to v1.28.0 (#29656)
When removing a workspace from the cloud backend terraform workspace delete will use Terraform Cloud's Safe Delete API if the -force flag is not provided. (#31949)
backend/oss: More robustly handle endpoint retrieval error (#32295)
local-exec provisioner: Added quiet argument. If quiet is set to true, Terraform will not print the entire command to stdout during plan. (#32116)
backend/http: Add support for mTLS authentication. (#31699)
cloud: Add support for using the generic hostname localterraform.com in module and provider sources as a substitute for the currently configured cloud backend hostname. This enhancement was also applied to the remote backend.
terraform show will now print an explanation when called on a Terraform workspace with empty state detailing why no resources are shown. (#32629)
backend/gcs: Added support for GOOGLE_BACKEND_IMPERSONATE_SERVICE_ACCOUNT env var to allow impersonating a different service account when GOOGLE_IMPERSONATE_SERVICE_ACCOUNT is configured for the GCP provider. (#32557)
backend/cos: Add support for the assume_role authentication method with the tencentcloud provider. This can be configured via the Terraform config or environment variables.
backend/cos: Add support for the security_token authentication method with the tencentcloud provider. This can be configured via the Terraform config or environment variables.

EXPERIMENTS:


Since its introduction the yamlencode function's documentation carried a warning that it was experimental. This predated our more formalized idea of language experiments and so wasn't guarded by an explicit opt-in, but the intention was to allow for small adjustments to its behavior if we learned it was producing invalid YAML in some cases, due to the relative complexity of the YAML specification.
From Terraform v1.4 onwards, yamlencode is no longer documented as experimental and is now subject to the Terraform v1.x Compatibility Promises. There are no changes to its previous behavior in v1.3 and so no special action is required when upgrading.

"
11,"1.3.9 (February 15, 2023)
BUG FIXES:

Fix crash when planning to remove already-deposed resource instances. (#32663)
"
12,"1.4.0 (Unreleased)
UPGRADE NOTES:

config: The textencodebase64 function when called with encoding ""GB18030"" will now encode the euro symbol € as the two-byte sequence 0xA2,0xE3, as required by the GB18030 standard, before applying base64 encoding.
config: The textencodebase64 function when called with encoding ""GBK"" or ""CP936"" will now encode the euro symbol € as the single byte 0x80 before applying base64 encoding. This matches the behavior of the Windows API when encoding to this Windows-specific character encoding.

terraform init: When interpreting the hostname portion of a provider source address or the address of a module in a module registry, Terraform will now use non-transitional IDNA2008 mapping rules instead of the transitional mapping rules previously used.
This matches a change to the WHATWG URL spec's rules for interpreting non-ASCII domain names which is being gradually adopted by web browsers. Terraform aims to follow the interpretation of hostnames used by web browsers for consistency. For some hostnames containing non-ASCII characters this may cause Terraform to now request a different ""punycode"" hostname when resolving.
- The Terraform plan renderer has been completely rewritten to aid with future Terraform Cloud integration. Users should not see any material change in the plan output between 1.3 and 1.4. Users are encouraged to file reports if they notice material differences, or encounter any bugs or panics during their normal execution of Terraform.
The diff computation and the rendering are now split into separate packages, while previously the rendering was handled as the diff was computed. Going forward, making small changes to the format of the plan will be easier and introducing new types of renderer will be simplified.


BUG FIXES:

The module installer will now record in its manifest a correct module source URL after normalization when the URL given as input contains both a query string portion and a subdirectory portion. Terraform itself doesn't currently make use of this information and so this is just a cosmetic fix to make the recorded metadata more correct. (#31636)
config: The yamldecode function now correctly handles entirely-nil YAML documents. Previously it would incorrectly return an unknown value instead of a null value. It will now return a null value as documented. (#32151)
Ensure correct ordering between data sources and the deletion of managed resource dependencies. (#32209)
Fix Terraform creating objects that should not exist in variables that specify default attributes in optional objects. (#32178)
Fix several Terraform crashes that are caused by HCL creating objects that should not exist in variables that specify default attributes in optional objects within collections. (#32178)
Fix inconsistent behaviour in empty vs null collections. (#32178)
terraform workspace now returns a non-zero exit when given an invalid argument (#31318)
Terraform would always plan changes when using a nested set attribute (#32536)
Terraform can now better detect when complex optional+computed object attributes are removed from configuration (#32551)
A new methodology for planning set elements can now better detect optional+computed changes within sets (#32563)
Fix state locking and releasing messages when in -json mode, messages will now be written in JSON format (#32451)

ENHANCEMENTS:

terraform plan can now store a plan file even when encountering errors, which can later be inspected to help identify the source of the failures (#32395)
terraform_data is a new builtin managed resource type, which can replace the use of null_resource, and can store data of any type (#31757)
terraform init will now ignore entries in the optional global provider cache directory unless they match a checksum already tracked in the current configuration's dependency lock file. This therefore avoids the long-standing problem that when installing a new provider for the first time from the cache we can't determine the full set of checksums to include in the lock file. Once the lock file has been updated to include a checksum covering the item in the global cache, Terraform will then use the cache entry for subsequent installation of the same provider package. There is an interim CLI configuration opt-out for those who rely on the previous incorrect behavior. (#32129)
Interactive input for sensitive variables is now masked in the UI (#29520)
A new -or-create flag was added to terraform workspace select, to aid in creating workspaces in automated situations (#31633)
The ""Failed to install provider"" error message now includes the reason a provider could not be installed. (#31898)
backend/gcs: Add kms_encryption_key argument, to allow encryption of state files using Cloud KMS keys. (#24967)
backend/gcs: Add storage_custom_endpoint argument, to allow communication with the backend via a Private Service Connect endpoint. (#28856)
backend/gcs: Update documentation for usage of gcs with terraform_remote_state (#32065)
backed/gcs: Update storage package to v1.28.0 (#29656)
When removing a workspace from the cloud backend terraform workspace delete will use Terraform Cloud's Safe Delete API if the -force flag is not provided. (#31949)
backend/oss: More robustly handle endpoint retrieval error (#32295)
local-exec provisioner: Added quiet argument. If quiet is set to true, Terraform will not print the entire command to stdout during plan. (#32116)
backend/http: Add support for mTLS authentication. (#31699)
cloud: Add support for using the generic hostname localterraform.com in module and provider sources as a substitute for the currently configured cloud backend hostname. This enhancement was also applied to the remote backend.
terraform show will now print an explanation when called on a Terraform workspace with empty state detailing why no resources are shown. (#32629)

EXPERIMENTS:


Since its introduction the yamlencode function's documentation carried a warning that it was experimental. This predated our more formalized idea of language experiments and so wasn't guarded by an explicit opt-in, but the intention was to allow for small adjustments to its behavior if we learned it was producing invalid YAML in some cases, due to the relative complexity of the YAML specification.
From Terraform v1.4 onwards, yamlencode is no longer documented as experimental and is now subject to the Terraform v1.x Compatibility Promises. There are no changes to its previous behavior in v1.3 and so no special action is required when upgrading.

"
13,"1.3.8 (February 09, 2023)
BUG FIXES:

Fixed a rare bug causing inaccurate before_sensitive / after_sensitive annotations in JSON plan output for deeply nested structures. This was only observed in the wild on the rancher/rancher2 provider, and resulted in glitched display in Terraform Cloud's structured plan log view. (#32543)
A variable only referenced by an output precondition error_message may be missing during evaluation (#32464)
Removing a NestingSingle block from configuration results in an invalid plan (#32463)
Null module outputs could be dropped, causing evaluation errors when referring to those module attributes (#32583)
Fix terraform crash when applying defaults into a collection with dynamic type constraint. (#32454)
Updated to newer github.com/mitchellh/cli version, in turn bringing in updates for several indirect dependencies with known security issues. (#32609)
Fix case where the first plan to use a new remote state could be applied twice, corrupting the state (#32614)
"
14,"1.3.7 (January 04, 2023)
BUG FIXES:

Fix exact version constraint parsing for modules using prerelease versions (#32377)
Prevent panic when a provider returns a null block value during refresh which is used as configuration via ignore_changes (#32428)
"
15,"1.4.0 (Unreleased)
UPGRADE NOTES:

config: The textencodebase64 function when called with encoding ""GB18030"" will now encode the euro symbol € as the two-byte sequence 0xA2,0xE3, as required by the GB18030 standard, before applying base64 encoding.
config: The textencodebase64 function when called with encoding ""GBK"" or ""CP936"" will now encode the euro symbol € as the single byte 0x80 before applying base64 encoding. This matches the behavior of the Windows API when encoding to this Windows-specific character encoding.

terraform init: When interpreting the hostname portion of a provider source address or the address of a module in a module registry, Terraform will now use non-transitional IDNA2008 mapping rules instead of the transitional mapping rules previously used.
This matches a change to the WHATWG URL spec's rules for interpreting non-ASCII domain names which is being gradually adopted by web browsers. Terraform aims to follow the interpretation of hostnames used by web browsers for consistency. For some hostnames containing non-ASCII characters this may cause Terraform to now request a different ""punycode"" hostname when resolving.


BUG FIXES:

The module installer will now record in its manifest a correct module source URL after normalization when the URL given as input contains both a query string portion and a subdirectory portion. Terraform itself doesn't currently make use of this information and so this is just a cosmetic fix to make the recorded metadata more correct. (#31636)
config: The yamldecode function now correctly handles entirely-nil YAML documents. Previously it would incorrectly return an unknown value instead of a null value. It will now return a null value as documented. (#32151)
Ensure correct ordering between data sources and the deletion of managed resource dependencies. (#32209)
Fix Terraform creating objects that should not exist in variables that specify default attributes in optional objects. (#32178)
Fix several Terraform crashes that are caused by HCL creating objects that should not exist in variables that specify default attributes in optional objects within collections. (#32178)
Fix inconsistent behaviour in empty vs null collections. (#32178)

ENHANCEMENTS:

terraform init will now ignore entries in the optional global provider cache directory unless they match a checksum already tracked in the current configuration's dependency lock file. This therefore avoids the long-standing problem that when installing a new provider for the first time from the cache we can't determine the full set of checksums to include in the lock file. Once the lock file has been updated to include a checksum covering the item in the global cache, Terraform will then use the cache entry for subsequent installation of the same provider package. (#32129)
The ""Failed to install provider"" error message now includes the reason a provider could not be installed. (#31898)
backend/gcs: Add kms_encryption_key argument, to allow encryption of state files using Cloud KMS keys. (#24967)
backend/gcs: Add storage_custom_endpoint argument, to allow communication with the backend via a Private Service Connect endpoint. (#28856)
backend/gcs: Update documentation for usage of gcs with terraform_remote_state (#32065)
backed/gcs: Update storage package to v1.28.0 (#29656)
When removing a workspace from the cloud backend terraform workspace delete will use Terraform Cloud's Safe Delete API if the -force flag is not provided. (#31949)
backend/oss: More robustly handle endpoint retrieval error (#32295)

EXPERIMENTS:


Since its introduction the yamlencode function's documentation carried a warning that it was experimental. This predated our more formalized idea of language experiments and so wasn't guarded by an explicit opt-in, but the intention was to allow for small adjustments to its behavior if we learned it was producing invalid YAML in some cases, due to the relative complexity of the YAML specification.
From Terraform v1.4 onwards, yamlencode is no longer documented as experimental and is now subject to the Terraform v1.x Compatibility Promises. There are no changes to its previous behavior in v1.3 and so no special action is required when upgrading.

"
16,"1.3.6 (November 30, 2022)
BUG FIXES:

Terraform could crash if an orphaned resource instance was deleted externally and had condition checks in the configuration (#32246)
Module output changes were being removed and re-added to the stored plan, impacting performance with large numbers of outputs (#32307)
"
17,"1.3.5 (November 17, 2022)
BUG FIXES:

Prevent crash while serializing the plan for an empty destroy operation (#32207)
Allow a destroy plan to refresh instances while taking into account that some may no longer exist (#32208)
Fix Terraform creating objects that should not exist in variables that specify default attributes in optional objects. (#32178)
Fix several Terraform crashes that are caused by HCL creating objects that should not exist in variables that specify default attributes in optional objects within collections. (#32178)
Fix inconsistent behaviour in empty vs null collections. (#32178)
Prevent file uploads from creating unneeded temporary files when the payload size is known (#32206)
Nested attributes marked sensitive by schema no longer reveal sub-attributes in the plan diff (#32004)
Nested attributes now more consistently display when they become unknown or null values in the plan diff (#32004)
Sensitive values are now always displayed as (sensitive value) instead of sometimes as (sensitive) [GH32004]
"
18,"1.4.0 (Unreleased)
BUG FIXES:

The module installer will now record in its manifest a correct module source URL after normalization when the URL given as input contains both a query string portion and a subdirectory portion. Terraform itself doesn't currently make use of this information and so this is just a cosmetic fix to make the recorded metadata more correct. (#31636)

ENHANCEMENTS:

terraform init will now ignore entries in the optional global provider cache directory unless they match a checksum already tracked in the current configuration's dependency lock file. This therefore avoids the long-standing problem that when installing a new provider for the first time from the cache we can't determine the full set of checksums to include in the lock file. Once the lock file has been updated to include a checksum covering the item in the global cache, Terraform will then use the cache entry for subsequent installation of the same provider package. (#32129)
The ""Failed to install provider"" error message now includes the reason a provider could not be installed. (#31898)
backend/gcs: Add kms_encryption_key argument, to allow encryption of state files using Cloud KMS keys. (#24967)
backend/gcs: Add storage_custom_endpoint argument, to allow communication with the backend via a Private Service Connect endpoint. (#28856)
backend/gcs: Update documentation for usage of gcs with terraform_remote_state (#32065)

EXPERIMENTS:


Since its introduction the yamlencode function's documentation carried a warning that it was experimental. This predated our more formalized idea of language experiments and so wasn't guarded by an explicit opt-in, but the intention was to allow for small adjustments to its behavior if we learned it was producing invalid YAML in some cases, due to the relative complexity of the YAML specification.
From Terraform v1.4 onwards, yamlencode is no longer documented as experimental and is now subject to the Terraform v1.x Compatibility Promises. There are no changes to its previous behavior in v1.3 and so no special action is required when upgrading.

"
19,"1.3.4 (November 02, 2022)
BUG FIXES:

Fix invalid refresh-only plan caused by data sources being deferred to apply (#32111)
Optimize the handling of condition checks during apply to prevent performance regressions with large numbers of instances (#32123)
Output preconditions should not be evaluated during destroy (#32051)
Fix crash from console when outputs contain preconditions (#32051)
Destroy with no state would still attempt to evaluate some values (#32051)
Prevent unnecessary evaluation and planning of resources during the pre-destroy refresh (#32051)
AzureRM Backend: support for generic OIDC authentication via the oidc_token and oidc_token_file_path properties (#31966)
Input and Module Variables: Convert variable types before attempting to apply default values. (#32027)
When installing remote module packages delivered in tar format, Terraform now limits the tar header block size to 1MiB to avoid unbounded memory usage for maliciously-crafted module packages. (#32135)
Terraform will now reject excessively-complex regular expression patterns passed to the regex, regexall, and replace functions, to avoid unbounded memory usage for maliciously-crafted patterns. This change should not affect any reasonable patterns intended for practical use. (#32135)
Terraform on Windows now rejects invalid environment variables whose values contain the NUL character when propagating environment variables to a child process such as a provider plugin. Previously Terraform would incorrectly treat that character as a separator between two separate environment variables. (#32135)
"
20,"1.3.3 (October 19, 2022)
BUG FIXES:

Fix error when removing a resource from configuration which has according to the provider has already been deleted. (#31850)
Fix error when setting empty collections into variables with collections of nested objects with default values. (#32033)
"
21,"1.3.2 (October 06, 2022)
BUG FIXES:

Fixed a crash caused by Terraform incorrectly re-registering output value preconditions during the apply phase (rather than just reusing the already-planned checks from the plan phase). (#31890)
Prevent errors when the provider reports that a deposed instance no longer exists (#31902)
Using ignore_changes = all could cause persistent diffs with legacy providers (#31914)
Fix cycles when resource dependencies cross over between independent provider configurations (#31917)
Improve handling of missing resource instances during import (#31878)
"
22,"1.3.1 (September 28, 2022)
NOTE:
* On darwin/amd64 and darwin/arm64 architectures, terraform binaries are now built with CGO enabled. This should not have any user-facing impact, except in cases where the pure Go DNS resolver causes problems on recent versions of macOS: using CGO may mitigate these issues. Please see the upstream bug https://github.com/golang/go/issues/52839 for more details.
BUG FIXES:

Fixed a crash when using objects with optional attributes and default values in collections, most visible with nested modules. (#31847)
Prevent cycles in some situations where a provider depends on resources in the configuration which are participating in planned changes. (#31857)
Fixed an error when attempting to destroy a configuration where resources do not exist in the state. (#31858)
Data sources which cannot be read during will no longer prevent the state from being serialized. (#31871)
Fixed a crash which occured when a resource with a precondition and/or a postcondition appeared inside a module with two or more instances. (#31860)
"
23,"1.3.0 (September 21, 2022)
NEW FEATURES:


Optional attributes for object type constraints: When declaring an input variable whose type constraint includes an object type, you can now declare individual attributes as optional, and specify a default value to use if the caller doesn't set it. For example:
terraform
variable ""with_optional_attribute"" {
  type = object({
    a = string                # a required attribute
    b = optional(string)      # an optional attribute
    c = optional(number, 127) # an optional attribute with a default value
  })
}
Assigning { a = ""foo"" } to this variable will result in the value { a = ""foo"", b = null, c = 127 }.


Added functions: startswith and endswith allow you to check whether a given string has a specified prefix or suffix. (#31220)


UPGRADE NOTES:

terraform show -json: Output changes now include more detail about the unknown-ness of the planned value. Previously, a planned output would be marked as either fully known or partially unknown, with the after_unknown field having value false or true respectively. Now outputs correctly expose the full structure of unknownness for complex values, allowing consumers of the JSON output format to determine which values in a collection are known only after apply.
terraform import: The -allow-missing-config has been removed, and at least an empty configuration block must exist to import a resource.
Consumers of the JSON output format expecting on the after_unknown field to be only false or true should be updated to support the change representation described in the documentation, and as was already used for resource changes. (#31235)

AzureRM Backend: This release concludes the deprecation cycle started in Terraform v1.1 for the azurerm backend's support of ""ADAL"" authentication. This backend now supports only ""MSAL"" (Microsoft Graph) authentication.
This follows from Microsoft's own deprecation of Azure AD Graph, and so you must follow the migration instructions presented in that Azure documentation to adopt Microsoft Graph and then change your backend configuration to use MSAL authentication before upgrading to Terraform v1.3.
* When making requests to HTTPS servers, Terraform will now reject invalid handshakes that have duplicate extensions, as required by RFC 5246 section 7.4.1.4 and RFC 8446 section 4.2. This may cause new errors when interacting with existing buggy or misconfigured TLS servers, but should not affect correct servers.
This only applies to requests made directly by Terraform CLI, such as provider installation and remote state storage. Terraform providers are separate programs which decide their own policy for handling of TLS handshakes.
* The following backends, which were deprecated in v1.2.3, have now been removed: artifactory, etcd, etcdv3, manta, swift. The legacy backend name azure has also been removed, because the current Azure backend is named azurerm. (#31711)


ENHANCEMENTS:

config: Optional attributes for object type constraints, as described under new features above. (#31154)
config: New built-in function timecmp allows determining the ordering relationship between two timestamps while taking potentially-different UTC offsets into account. (#31687)
config: When reporting an error message related to a function call, Terraform will now include contextual information about the signature of the function that was being called, as an aid to understanding why the call might have failed. (#31299)
config: When reporting an error or warning message that isn't caused by values being unknown or marked as sensitive, Terraform will no longer mention any values having those characteristics in the contextual information presented alongside the error. Terraform will still return this information for the small subset of error messages that are specifically about unknown values or sensitive values being invalid in certain contexts. (#31299)
config: moved blocks can now describe resources moving to and from modules in separate module packages. (#31556)
terraform fmt now accepts multiple target paths, allowing formatting of several individual files at once. (#31687)
terraform init: provider installation errors now mention which host Terraform was downloading from (#31524)
CLI: Terraform will report more explicitly when it is proposing to delete an object due to it having moved to a resource instance that is not currently declared in the configuration. (#31695)
CLI: When showing the progress of a remote operation running in Terraform Cloud, Terraform CLI will include information about pre-plan run tasks (#31617)
The AzureRM Backend now only supports MSAL (and Microsoft Graph) and no longer makes use of ADAL (and Azure Active Directory Graph) for authentication (#31070)
The COS backend now supports global acceleration. (#31425)
provider plugin protocol: The Terraform CLI now calls PlanResourceChange for compatible providers when destroying resource instances. (#31179)
As an implementation detail of the Terraform Cloud integration, Terraform CLI will now capture and upload the JSON integration format for state along with any newly-recorded state snapshots, which then in turn allows Terraform Cloud to provide that information to API-based external integrations. (#31698)

BUG FIXES:

config: Terraform was not previously evaluating preconditions and postconditions during the apply phase for resource instances that didn't have any changes pending, which was incorrect because the outcome of a condition can potentially be affected by changes to other objects in the configuration. Terraform will now always check the conditions for every resource instance included in a plan during the apply phase, even for resource instances that have ""no-op"" changes. This means that some failures that would previously have been detected only by a subsequent run will now be detected during the same run that caused them, thereby giving the feedback at the appropriate time. (#31491)
terraform show -json: Fixed missing markers for unknown values in the encoding of partially unknown tuples and sets. (#31236)
terraform output CLI help documentation is now more consistent with web-based documentation. (#29354)
terraform init: Error messages now handle the situation where the underlying HTTP client library does not indicate a hostname for a failed request. (#31542)
terraform init: Don't panic if a child module contains a resource with a syntactically-invalid resource type name. (#31573)
CLI: The representation of destroying already-null output values in a destroy plan will no longer report them as being deleted, which avoids reporting the deletion of an output value that was already absent. (#31471)
terraform import: Better handling of resources or modules that use for_each, and situations where data resources are needed to complete the operation. (#31283)

EXPERIMENTS:


This release concludes the module_variable_optional_attrs experiment, which started in Terraform v0.14.0. The final design of the optional attributes feature is similar to the experimental form in the previous releases, but with two major differences:

The optional function-like modifier for declaring an optional attribute now accepts an optional second argument for specifying a default value to use when the attribute isn't set by the caller. If not specified, the default value is a null value of the appropriate type as before.
The built-in defaults function, previously used to meet the use-case of replacing null values with default values, will not graduate to stable and has been removed. Use the second argument of optional inline in your type constraint to declare default values instead.

If you have any experimental modules that were participating in this experiment, you will need to remove the experiment opt-in and adopt the new syntax for declaring default values in order to migrate your existing module to the stablized version of this feature. If you are writing a shared module for others to use, we recommend declaring that your module requires Terraform v1.3.0 or later to give specific feedback when using the new feature on older Terraform versions, in place of the previous declaration to use the experimental form of this feature:
hcl
terraform {
  required_version = "">= 1.3.0""
}

"
24,"1.3.0 (Unreleased)
NEW FEATURES:


Optional attributes for object type constraints: When declaring an input variable whose type constraint includes an object type, you can now declare individual attributes as optional, and specify a default value to use if the caller doesn't set it. For example:
terraform
variable ""with_optional_attribute"" {
  type = object({
    a = string                # a required attribute
    b = optional(string)      # an optional attribute
    c = optional(number, 127) # an optional attribute with a default value
  })
}
Assigning { a = ""foo"" } to this variable will result in the value { a = ""foo"", b = null, c = 127 }.


Added functions: startswith and endswith allow you to check whether a given string has a specified prefix or suffix. (#31220)


UPGRADE NOTES:

terraform show -json: Output changes now include more detail about the unknown-ness of the planned value. Previously, a planned output would be marked as either fully known or partially unknown, with the after_unknown field having value false or true respectively. Now outputs correctly expose the full structure of unknownness for complex values, allowing consumers of the JSON output format to determine which values in a collection are known only after apply.
terraform import: The -allow-missing-config has been removed, and at least an empty configuration block must exist to import a resource.
Consumers of the JSON output format expecting on the after_unknown field to be only false or true should be updated to support the change representation described in the documentation, and as was already used for resource changes. (#31235)

AzureRM Backend: This release concludes the deprecation cycle started in Terraform v1.1 for the azurerm backend's support of ""ADAL"" authentication. This backend now supports only ""MSAL"" (Microsoft Graph) authentication.
This follows from Microsoft's own deprecation of Azure AD Graph, and so you must follow the migration instructions presented in that Azure documentation to adopt Microsoft Graph and then change your backend configuration to use MSAL authentication before upgrading to Terraform v1.3.
* When making requests to HTTPS servers, Terraform will now reject invalid handshakes that have duplicate extensions, as required by RFC 5246 section 7.4.1.4 and RFC 8446 section 4.2. This may cause new errors when interacting with existing buggy or misconfigured TLS servers, but should not affect correct servers.
This only applies to requests made directly by Terraform CLI, such as provider installation and remote state storage. Terraform providers are separate programs which decide their own policy for handling of TLS handshakes.
* The following backends, which were deprecated in v1.2.3, have now been removed: artifactory, etcd, etcdv3, manta, swift. The legacy backend name azure has also been removed, because the current Azure backend is named azurerm. [#31711] 


ENHANCEMENTS:

config: Optional attributes for object type constraints, as described under new features above. (#31154)
config: New built-in function timecmp allows determining the ordering relationship between two timestamps while taking potentially-different UTC offsets into account. (#31687)
config: When reporting an error message related to a function call, Terraform will now include contextual information about the signature of the function that was being called, as an aid to understanding why the call might have failed. (#31299)
config: When reporting an error or warning message that isn't caused by values being unknown or marked as sensitive, Terraform will no longer mention any values having those characteristics in the contextual information presented alongside the error. Terraform will still return this information for the small subset of error messages that are specifically about unknown values or sensitive values being invalid in certain contexts. (#31299)
config: moved blocks can now describe resources moving to and from modules in separate module packages. (#31556)
terraform fmt now accepts multiple target paths, allowing formatting of several individual files at once. (#31687)
terraform init: provider installation errors now mention which host Terraform was downloading from (#31524)
CLI: Terraform will report more explicitly when it is proposing to delete an object due to it having moved to a resource instance that is not currently declared in the configuration. (#31695)
CLI: When showing the progress of a remote operation running in Terraform Cloud, Terraform CLI will include information about pre-plan run tasks (#31617)
The AzureRM Backend now only supports MSAL (and Microsoft Graph) and no longer makes use of ADAL (and Azure Active Directory Graph) for authentication (#31070)
The COS backend now supports global acceleration. (#31425)
provider plugin protocol: The Terraform CLI now calls PlanResourceChange for compatible providers when destroying resource instances. (#31179)
As an implementation detail of the Terraform Cloud integration, Terraform CLI will now capture and upload the JSON integration format for state along with any newly-recorded state snapshots, which then in turn allows Terraform Cloud to provide that information to API-based external integrations. (#31698)

BUG FIXES:

config: Terraform was not previously evaluating preconditions and postconditions during the apply phase for resource instances that didn't have any changes pending, which was incorrect because the outcome of a condition can potentially be affected by changes to other objects in the configuration. Terraform will now always check the conditions for every resource instance included in a plan during the apply phase, even for resource instances that have ""no-op"" changes. This means that some failures that would previously have been detected only by a subsequent run will now be detected during the same run that caused them, thereby giving the feedback at the appropriate time. (#31491)
terraform show -json: Fixed missing markers for unknown values in the encoding of partially unknown tuples and sets. (#31236)
terraform output CLI help documentation is now more consistent with web-based documentation. (#29354)
terraform init: Error messages now handle the situation where the underlying HTTP client library does not indicate a hostname for a failed request. (#31542)
terraform init: Don't panic if a child module contains a resource with a syntactically-invalid resource type name. (#31573)
CLI: The representation of destroying already-null output values in a destroy plan will no longer report them as being deleted, which avoids reporting the deletion of an output value that was already absent. (#31471)
terraform import: Better handling of resources or modules that use for_each, and situations where data resources are needed to complete the operation. (#31283)

EXPERIMENTS:


This release concludes the module_variable_optional_attrs experiment, which started in Terraform v0.14.0. The final design of the optional attributes feature is similar to the experimental form in the previous releases, but with two major differences:

The optional function-like modifier for declaring an optional attribute now accepts an optional second argument for specifying a default value to use when the attribute isn't set by the caller. If not specified, the default value is a null value of the appropriate type as before.
The built-in defaults function, previously used to meet the use-case of replacing null values with default values, will not graduate to stable and has been removed. Use the second argument of optional inline in your type constraint to declare default values instead.

If you have any experimental modules that were participating in this experiment, you will need to remove the experiment opt-in and adopt the new syntax for declaring default values in order to migrate your existing module to the stablized version of this feature. If you are writing a shared module for others to use, we recommend declaring that your module requires Terraform v1.3.0 or later to give specific feedback when using the new feature on older Terraform versions, in place of the previous declaration to use the experimental form of this feature:
hcl
terraform {
  required_version = "">= 1.3.0""
}

"
25,"1.2.9 (September 07, 2022)
ENHANCEMENTS:

terraform init: add link to documentation when a checksum is missing from the lock file. (#31726)
"
26,"1.3.0 (Unreleased)
NEW FEATURES:


Optional attributes for object type constraints: When declaring an input variable whose type constraint includes an object type, you can now declare individual attributes as optional, and specify a default value to use if the caller doesn't set it. For example:
terraform
variable ""with_optional_attribute"" {
  type = object({
    a = string                # a required attribute
    b = optional(string)      # an optional attribute
    c = optional(number, 127) # an optional attribute with a default value
  })
}
Assigning { a = ""foo"" } to this variable will result in the value { a = ""foo"", b = null, c = 127 }.


Added functions: startswith and endswith allow you to check whether a given string has a specified prefix or suffix. (#31220)


UPGRADE NOTES:

terraform show -json: Output changes now include more detail about the unknown-ness of the planned value. Previously, a planned output would be marked as either fully known or partially unknown, with the after_unknown field having value false or true respectively. Now outputs correctly expose the full structure of unknownness for complex values, allowing consumers of the JSON output format to determine which values in a collection are known only after apply.
terraform import: The -allow-missing-config has been removed, and at least an empty configuration block must exist to import a resource.
Consumers of the JSON output format expecting on the after_unknown field to be only false or true should be updated to support the change representation described in the documentation, and as was already used for resource changes. (#31235)

AzureRM Backend: This release concludes the deprecation cycle started in Terraform v1.1 for the azurerm backend's support of ""ADAL"" authentication. This backend now supports only ""MSAL"" (Microsoft Graph) authentication.
This follows from Microsoft's own deprecation of Azure AD Graph, and so you must follow the migration instructions presented in that Azure documentation to adopt Microsoft Graph and then change your backend configuration to use MSAL authentication before upgrading to Terraform v1.3.
* When making requests to HTTPS servers, Terraform will now reject invalid handshakes that have duplicate extensions, as required by RFC 5246 section 7.4.1.4 and RFC 8446 section 4.2. This may cause new errors when interacting with existing buggy or misconfigured TLS servers, but should not affect correct servers.
This only applies to requests made directly by Terraform CLI, such as provider installation and remote state storage. Terraform providers are separate programs which decide their own policy for handling of TLS handshakes.
* The following backends, which were deprecated in v1.2.3, have now been removed: artifactory, etcd, etcdv3, manta, swift. The azure backend name has been removed: please use the name azurerm for this backend. [#31711] 


ENHANCEMENTS:

config: Optional attributes for object type constraints, as described under new features above. (#31154)
config: New built-in function timecmp allows determining the ordering relationship between two timestamps while taking potentially-different UTC offsets into account. (#31687)
terraform fmt now accepts multiple target paths, allowing formatting of several individual files at once. (#31687)
When reporting an error message related to a function call, Terraform will now include contextual information about the signature of the function that was being called, as an aid to understanding why the call might have failed. (#31299)
When reporting an error or warning message that isn't caused by values being unknown or marked as sensitive, Terraform will no longer mention any values having those characteristics in the contextual information presented alongside the error. Terraform will still return this information for the small subset of error messages that are specifically about unknown values or sensitive values being invalid in certain contexts. (#31299)
The Terraform CLI now calls PlanResourceChange for compatible providers when destroying resource instances. (#31179)
The AzureRM Backend now only supports MSAL (and Microsoft Graph) and no longer makes use of ADAL (and Azure Active Directory Graph) for authentication (#31070)
The COS backend now supports global acceleration. (#31425)
providercache: include host in provider installation error (#31524)
refactoring: moved blocks can now be used to move resources to and from external modules (#31556)
refactoring/plans: Terraform will now indicate when the deletion of a resource is due to moving a resource to a target not in configuration. This information is also available as a ResourceInstanceActionReason in the planproto. (#31695)
When showing the progress of a remote operation running in Terraform Cloud, Terraform CLI will include information about pre-plan run tasks (#31617)
Terraform now sends the JSON state representation to the Cloud backend (when available) (#31698)

BUG FIXES:

config: Terraform was not previously evaluating preconditions and postconditions during the apply phase for resource instances that didn't have any changes pending, which was incorrect because the outcome of a condition can potentially be affected by changes to other objects in the configuration. Terraform will now always check the conditions for every resource instance included in a plan during the apply phase, even for resource instances that have ""no-op"" changes. This means that some failures that would previously have been detected only by a subsequent run will now be detected during the same run that caused them, thereby giving the feedback at the appropriate time. (#31491)
terraform show -json: Fixed missing unknown markers in the encoding of partially unknown tuples and sets. (#31236)
terraform output CLI help documentation is now more consistent with web-based documentation. (#29354)
getproviders: account for occasionally missing Host header in errors (#31542)
core: Do not create ""delete"" changes for nonexistent outputs (#31471)
configload: validate implied provider names in submodules to avoid crash (#31573)
core: import fails when resources or modules are expanded with for each, or input from data sources is required (#31283)

EXPERIMENTS:


This release concludes the module_variable_optional_attrs experiment, which started in Terraform v0.14.0. The final design of the optional attributes feature is similar to the experimental form in the previous releases, but with two major differences:

The optional function-like modifier for declaring an optional attribute now accepts an optional second argument for specifying a default value to use when the attribute isn't set by the caller. If not specified, the default value is a null value of the appropriate type as before.
The built-in defaults function, previously used to meet the use-case of replacing null values with default values, will not graduate to stable and has been removed. Use the second argument of optional inline in your type constraint to declare default values instead.

If you have any experimental modules that were participating in this experiment, you will need to remove the experiment opt-in and adopt the new syntax for declaring default values in order to migrate your existing module to the stablized version of this feature. If you are writing a shared module for others to use, we recommend declaring that your module requires Terraform v1.3.0 or later to give specific feedback when using the new feature on older Terraform versions, in place of the previous declaration to use the experimental form of this feature:
hcl
terraform {
  required_version = "">= 1.3.0""
}

"
27,"1.2.8 (August 24, 2022)
BUG FIXES:

config: The flatten function will no longer panic if given a null value that has been explicitly converted to or implicitly inferred as having a list, set, or tuple type. Previously Terraform would panic in such a situation because it tried to ""flatten"" the contents of the null value into the result, which is impossible. (#31675)
config: The tolist, toset, and tomap functions, and various automatic conversions that include similar logic, will no longer panic when asked to infer an element type that is convertable from both a tuple type and a list type whose element type is not yet known. (#31675)
"
28,"1.3.0 (Unreleased)
NEW FEATURES:


Optional attributes for object type constraints: When declaring an input variable whose type constraint includes an object type, you can now declare individual attributes as optional, and specify a default value to use if the caller doesn't set it. For example:
terraform
variable ""with_optional_attribute"" {
  type = object({
    a = string                # a required attribute
    b = optional(string)      # an optional attribute
    c = optional(number, 127) # an optional attribute with a default value
  })
}
Assigning { a = ""foo"" } to this variable will result in the value { a = ""foo"", b = null, c = 127 }.


Added functions: startswith and endswith allow you to check whether a given string has a specified prefix or suffix. (#31220)


UPGRADE NOTES:

terraform show -json: Output changes now include more detail about the unknown-ness of the planned value. Previously, a planned output would be marked as either fully known or partially unknown, with the after_unknown field having value false or true respectively. Now outputs correctly expose the full structure of unknownness for complex values, allowing consumers of the JSON output format to determine which values in a collection are known only after apply.

terraform import: The -allow-missing-config has been removed, and at least an empty configuration block must exist to import a resource.
Consumers of the JSON output format expecting on the after_unknown field to be only false or true should be updated to support the change representation described in the documentation, and as was already used for resource changes. (#31235)


ENHANCEMENTS:

config: Optional attributes for object type constraints, as described under new features above. (#31154)
terraform fmt now accepts multiple target paths, allowing formatting of several individual files at once. (#28191)
When reporting an error message related to a function call, Terraform will now include contextual information about the signature of the function that was being called, as an aid to understanding why the call might have failed. (#31299)
When reporting an error or warning message that isn't caused by values being unknown or marked as sensitive, Terraform will no longer mention any values having those characteristics in the contextual information presented alongside the error. Terraform will still return this information for the small subset of error messages that are specifically about unknown values or sensitive values being invalid in certain contexts. (#31299)
The Terraform CLI now calls PlanResourceChange for compatible providers when destroying resource instances. (#31179)
The AzureRM Backend now only supports MSAL (and Microsoft Graph) and no longer makes use of ADAL (and Azure Active Directory Graph) for authentication (#31070)
The COS backend now supports global acceleration. (#31425)
providercache: include host in provider installation error (#31524)
refactoring: moved blocks can now be used to move resources to and from external modules (#31556)

BUG FIXES:

config: Terraform was not previously evaluating preconditions and postconditions during the apply phase for resource instances that didn't have any changes pending, which was incorrect because the outcome of a condition can potentially be affected by changes to other objects in the configuration. Terraform will now always check the conditions for every resource instance included in a plan during the apply phase, even for resource instances that have ""no-op"" changes. This means that some failures that would previously have been detected only by a subsequent run will now be detected during the same run that caused them, thereby giving the feedback at the appropriate time. (#31491)
terraform show -json: Fixed missing unknown markers in the encoding of partially unknown tuples and sets. (#31236)
terraform output CLI help documentation is now more consistent with web-based documentation. (#29354)
getproviders: account for occasionally missing Host header in errors (#31542)
core: Do not create ""delete"" changes for nonexistent outputs (#31471)
configload: validate implied provider names in submodules to avoid crash (#31573)
core: import fails when resources or modules are expanded with for each, or input from data sources is required (#31283)

EXPERIMENTS:


This release concludes the module_variable_optional_attrs experiment, which started in Terraform v0.14.0. The final design of the optional attributes feature is similar to the experimental form in the previous releases, but with two major differences:

The optional function-like modifier for declaring an optional attribute now accepts an optional second argument for specifying a default value to use when the attribute isn't set by the caller. If not specified, the default value is a null value of the appropriate type as before.
The built-in defaults function, previously used to meet the use-case of replacing null values with default values, will not graduate to stable and has been removed. Use the second argument of optional inline in your type constraint to declare default values instead.

If you have any experimental modules that were participating in this experiment, you will need to remove the experiment opt-in and adopt the new syntax for declaring default values in order to migrate your existing module to the stablized version of this feature. If you are writing a shared module for others to use, we recommend declaring that your module requires Terraform v1.3.0 or later to give specific feedback when using the new feature on older Terraform versions, in place of the previous declaration to use the experimental form of this feature:
hcl
terraform {
  required_version = "">= 1.3.0""
}

"
29,"1.2.7 (August 10, 2022)
ENHANCEMENTS:

config: Check for direct references to deprecated computed attributes. (#31576)

BUG FIXES:

config: Fix an crash if a submodule contains a resource whose implied provider local name contains invalid characters, by adding additional validation rules to turn it into a real error. (#31573)
core: Fix some handling of provider schema attributes which use the newer ""structural typing"" mechanism introduced with protocol version 6, and therefore with the new Terraform Plugin Framework (#31532)
command: Add missing output text for applyable refresh plans. (#31469)
"
30,"1.3.0 (Unreleased)
NEW FEATURES:


Optional attributes for object type constraints: When declaring an input variable whose type constraint includes an object type, you can now declare individual attributes as optional, and specify a default value to use if the caller doesn't set it. For example:
terraform
variable ""with_optional_attribute"" {
  type = object({
    a = string                # a required attribute
    b = optional(string)      # an optional attribute
    c = optional(number, 127) # an optional attribute with a default value
  })
}
Assigning { a = ""foo"" } to this variable will result in the value { a = ""foo"", b = null, c = 127 }.


Added functions: startswith and endswith allow you to check whether a given string has a specified prefix or suffix. (#31220)


UPGRADE NOTES:


terraform show -json: Output changes now include more detail about the unknown-ness of the planned value. Previously, a planned output would be marked as either fully known or partially unknown, with the after_unknown field having value false or true respectively. Now outputs correctly expose the full structure of unknownness for complex values, allowing consumers of the JSON output format to determine which values in a collection are known only after apply.
Consumers of the JSON output format expecting on the after_unknown field to be only false or true should be updated to support the change representation described in the documentation, and as was already used for resource changes. (#31235)


ENHANCEMENTS:

config: Optional attributes for object type constraints, as described under new features above. (#31154)
When reporting an error message related to a function call, Terraform will now include contextual information about the signature of the function that was being called, as an aid to understanding why the call might have failed. (#31299)
When reporting an error or warning message that isn't caused by values being unknown or marked as sensitive, Terraform will no longer mention any values having those characteristics in the contextual information presented alongside the error. Terraform will still return this information for the small subset of error messages that are specifically about unknown values or sensitive values being invalid in certain contexts. (#31299)
The Terraform CLI now calls PlanResourceChange for compatible providers when destroying resource instances. (#31179)
The AzureRM Backend now only supports MSAL (and Microsoft Graph) and no longer makes use of ADAL (and Azure Active Directory Graph) for authentication (#31070)
The COS backend now supports global acceleration. (#31425)
providercache: include host in provider installation error (#31524)

BUG FIXES:

config: Terraform was not previously evaluating preconditions and postconditions during the apply phase for resource instances that didn't have any changes pending, which was incorrect because the outcome of a condition can potentially be affected by changes to other objects in the configuration. Terraform will now always check the conditions for every resource instance included in a plan during the apply phase, even for resource instances that have ""no-op"" changes. This means that some failures that would previously have been detected only by a subsequent run will now be detected during the same run that caused them, thereby giving the feedback at the appropriate time. (#31491)
terraform show -json: Fixed missing unknown markers in the encoding of partially unknown tuples and sets. (#31236)
terraform output CLI help documentation is now more consistent with web-based documentation. (#29354)
getproviders: account for occasionally missing Host header in errors (#31542)
core: Do not create ""delete"" changes for nonexistent outputs (#31471)

EXPERIMENTS:


This release concludes the module_variable_optional_attrs experiment, which started in Terraform v0.14.0. The final design of the optional attributes feature is similar to the experimental form in the previous releases, but with two major differences:

The optional function-like modifier for declaring an optional attribute now accepts an optional second argument for specifying a default value to use when the attribute isn't set by the caller. If not specified, the default value is a null value of the appropriate type as before.
The built-in defaults function, previously used to meet the use-case of replacing null values with default values, will not graduate to stable and has been removed. Use the second argument of optional inline in your type constraint to declare default values instead.

If you have any experimental modules that were participating in this experiment, you will need to remove the experiment opt-in and adopt the new syntax for declaring default values in order to migrate your existing module to the stablized version of this feature. If you are writing a shared module for others to use, we recommend declaring that your module requires Terraform v1.3.0 or later to give specific feedback when using the new feature on older Terraform versions, in place of the previous declaration to use the experimental form of this feature:
hcl
terraform {
  required_version = "">= 1.3.0""
}

"
31,"1.2.6 (July 27, 2022)
ENHANCEMENTS:

Add a warning and guidance when terraform init fails to fully populate the .terraform.lock.hcl file. (#31399)
Add a direct link to the relevant documentation when terraform init fails on missing checksums. (#31408)

BUG FIXES:

Fix panic on terraform show when state file is invalid or unavailable. (#31444)
Fix terraform providers lock command failing on missing checksums. (#31389)
Some combinations of move block operations would be executed in the wrong order (#31499)
Don't attribute an error to the provider when a computed attribute is listed in ignore_changes (#31509)
"
32,"1.2.5 (July 13, 2022)
BUG FIXES:

Report correct error message when a prerelease field is included in the required_version global constraint. (#31331)
Fix case when extra blank lines were inserted into the plan for unchanged blocks. (#31330)
"
33,"1.3.0 (Unreleased)
NEW FEATURES:


Optional attributes for object type constraints: When declaring an input variable whose type constraint includes an object type, you can now declare individual attributes as optional, and specify a default value to use if the caller doesn't set it. For example:
terraform
variable ""with_optional_attribute"" {
  type = object({
    a = string                # a required attribute
    b = optional(string)      # an optional attribute
    c = optional(number, 127) # an optional attribute with a default value
  })
}
Assigning { a = ""foo"" } to this variable will result in the value { a = ""foo"", b = null, c = 127 }.


UPGRADE NOTES:


terraform show -json: Output changes now include more detail about the unknown-ness of the planned value. Previously, a planned output would be marked as either fully known or partially unknown, with the after_unknown field having value false or true respectively. Now outputs correctly expose the full structure of unknownness for complex values, allowing consumers of the JSON output format to determine which values in a collection are known only after apply.
Consumers of the JSON output format expecting on the after_unknown field to be only false or true should be updated to support the change representation described in the documentation, and as was already used for resource changes. (#31235)


ENHANCEMENTS:

config: Optional attributes for object type constraints, as described under new features above. (#31154)
When reporting an error message related to a function call, Terraform will now include contextual information about the signature of the function that was being called, as an aid to understanding why the call might have failed. (#31299)
When reporting an error or warning message that isn't caused by values being unknown or marked as sensitive, Terraform will no longer mention any values having those characteristics in the contextual information presented alongside the error. Terraform will still return this information for the small subset of error messages that are specifically about unknown values or sensitive values being invalid in certain contexts. (#31299)
The Terraform CLI now calls PlanResourceChange for compatible providers when destroying resource instances. (#31179)

BUG FIXES:

Made terraform output CLI help documentation consistent with web-based documentation. (#29354)
terraform show -json: Fixed missing unknown markers in the encoding of partially unknown tuples and sets. (#31236)

EXPERIMENTS:


This release concludes the module_variable_optional_attrs experiment, which started in Terraform v0.14.0. The final design of the optional attributes feature is similar to the experimental form in the previous releases, but with two major differences:

The optional function-like modifier for declaring an optional attribute now accepts an optional second argument for specifying a default value to use when the attribute isn't set by the caller. If not specified, the default value is a null value of the appropriate type as before.
The built-in defaults function, previously used to meet the use-case of replacing null values with default values, will not graduate to stable and has been removed. Use the second argument of optional inline in your type constraint to declare default values instead.

If you have any experimental modules that were participating in this experiment, you will need to remove the experiment opt-in and adopt the new syntax for declaring default values in order to migrate your existing module to the stablized version of this feature. If you are writing a shared module for others to use, we recommend declaring that your module requires Terraform v1.3.0 or later to give specific feedback when using the new feature on older Terraform versions, in place of the previous declaration to use the experimental form of this feature:
hcl
terraform {
  required_version = "">= 1.3.0""
}

"
34,"1.2.4 (June 29, 2022)
ENHANCEMENTS:

Improved validation of required_providers to prevent single providers from being required with multiple names. (#31218)
Improved plan performance by optimizing addrs.Module.String for allocations. (#31293)

BUG FIXES:

backend/http: Fixed bug where the HTTP backend would fail to retry acquiring the state lock and ignored the -lock-timeout flag. (#31256)
Fix crash if a precondition or postcondition block omitted the required condition argument. (#31290)
"
35,"1.3.0 (Unreleased)
NEW FEATURES:


Optional attributes for object type constraints: When declaring an input variable whose type constraint includes an object type, you can now declare individual attributes as optional, and specify a default value to use if the caller doesn't set it. For example:
terraform
variable ""with_optional_attribute"" {
  type = object({
    a = string                # a required attribute
    b = optional(string)      # an optional attribute
    c = optional(number, 127) # an optional attribute with a default value
  })
}
Assigning { a = ""foo"" } to this variable will result in the value { a = ""foo"", b = null, c = 127 }.


UPGRADE NOTES:


terraform show -json: Output changes now include more detail about the unknown-ness of the planned value. Previously, a planned output would be marked as either fully known or partially unknown, with the after_unknown field having value false or true respectively. Now outputs correctly expose the full structure of unknownness for complex values, allowing consumers of the JSON output format to determine which values in a collection are known only after apply.
Consumers of the JSON output format expecting on the after_unknown field to be only false or true should be updated to support the change representation described in the documentation, and as was already used for resource changes. (#31235)


ENHANCEMENTS:

config: Optional attributes for object type constraints, as described under new features above. (#31154)

BUG FIXES:

Made terraform output CLI help documentation consistent with web-based documentation. (#29354)
terraform show -json: Fixed missing unknown markers in the encoding of partially unknown tuples and sets. (#31236)

EXPERIMENTS:


This release concludes the module_variable_optional_attrs experiment, which started in Terraform v0.14.0. The final design of the optional attributes feature is similar to the experimental form in the previous releases, but with two major differences:

The optional function-like modifier for declaring an optional attribute now accepts an optional second argument for specifying a default value to use when the attribute isn't set by the caller. If not specified, the default value is a null value of the appropriate type as before.
The built-in defaults function, previously used to meet the use-case of replacing null values with default values, will not graduate to stable and has been removed. Use the second argument of optional inline in your type constraint to declare default values instead.

If you have any experimental modules that were participating in this experiment, you will need to remove the experiment opt-in and adopt the new syntax for declaring default values in order to migrate your existing module to the stablized version of this feature.

"
36,"1.2.3 (June 15, 2022)
UPGRADE NOTES:

The following remote state backends are now marked as deprecated, and are
  planned to be removed in a future Terraform release. These backends have
  been unmaintained since before Terraform v1.0, and may contain known bugs,
  outdated packages, or security vulnerabilities.
artifactory
etcd
etcdv3
manta
swift

BUG FIXES:

Missing check for error diagnostics in GetProviderSchema could result in panic (#31184)
Module registries returning X-Terraform-Get locations with no URL would error with ""no getter available for X-Terraform-Get source protocol"" (#31237)
Fix crash from concurrent operation on shared set of resource instance dependencies (#31246)
backend/cos: tencentcloud-terraform-lock tag was not removed in all cases (#31223)
"
37,"1.3.0 (Unreleased)
UPGRADE NOTES:


Module variable type constraints now support an optional() modifier for object attribute types. Optional attributes may be omitted from the variable value, and will be replaced by a default value (or null if no default is specified). For example:
terraform
variable ""with_optional_attribute"" {
  type = object({
    a = string                # a required attribute
    b = optional(string)      # an optional attribute
    c = optional(number, 127) # an optional attribute with default value
  })
}


Assigning { a = ""foo"" } to this variable will result in the value { a = ""foo"", b = null, c = 127 }.
This functionality was introduced as an experiment in Terraform 0.14. This release removes the experimental `defaults` function. ([#31154](https://github.com/hashicorp/terraform/issues/31154))

BUG FIXES:

Made terraform output CLI help documentation consistent with web-based documentation (#29354)
"
38,"1.2.2 (June 01, 2022)
ENHANCEMENTS:

Invalid -var arguments with spaces between the name and value now have an improved error message (#30985)

BUG FIXES:

Terraform now hides invalid input values for sensitive root module variables when generating error diagnostics (#30552)
Fixed crash on CLI autocomplete (#31160)
The ""Configuration contains unknown values"" error message now includes attribute paths (#31111)
"
39,"1.2.1 (May 23, 2022)
BUG FIXES:

SSH provisioner connections fail when using signed ed25519 keys (#31092)
Crash with invalid module source (#31060)
Incorrect ""Module is incompatible with count, for_each, and depends_on"" error when a provider is nested within a module along with a sub-module using count or for_each (#31091)
"
40,"1.2.0 (May 18, 2022)
UPGRADE NOTES:


If you use the third-party credentials helper plugin terraform-credentials-env, you should disable it as part of upgrading to Terraform v1.2 because similar functionality is now built in to Terraform itself.
The new behavior supports the same environment variable naming scheme but has a difference in priority order from the credentials helper: TF_TOKEN_... environment variables will now take priority over credentials blocks in CLI configuration and credentials stored automatically by terraform login, which is not true for credentials provided by any credentials helper plugin. If you see Terraform using different credentials after upgrading, check to make sure you do not specify credentials for the same host in multiple locations.
If you use the credentials helper in conjunction with the hashicorp/tfe Terraform provider to manage Terraform Cloud or Terraform Enterprise objects with Terraform, you should also upgrade to version 0.31 of that provider, which added the corresponding built-in support for these environment variables.
* The official Linux packages for the v1.2 series now require Linux kernel version 2.6.32 or later.
* When making outgoing HTTPS or other TLS connections as a client, Terraform now requires the server to support TLS v1.2. TLS v1.0 and v1.1 are no longer supported. Any safely up-to-date server should support TLS 1.2, and mainstream web browsers have required it since 2020.
* When making outgoing HTTPS or other TLS connections as a client, Terraform will no longer accept CA certificates signed using the SHA-1 hash function. Publicly trusted Certificate Authorities have not issued SHA-1 certificates since 2015.


(Note: the changes to Terraform's requirements when interacting with TLS servers apply only to requests made by Terraform CLI itself, such as provider/module installation and state storage requests. Terraform provider plugins include their own TLS clients which may have different requirements, and may add new requirements in their own releases, independently of Terraform CLI changes.)
NEW FEATURES:

precondition and postcondition check blocks for resources, data sources, and module output values: module authors can now document assumptions and assertions about configuration and state values. If these conditions are not met, Terraform will report a custom error message to the user and halt further execution.
replace_triggered_by is a new lifecycle argument for managed resources which triggers replacement of an object based on changes to an upstream dependency.
You can now specify credentials for Terraform-native services using an environment variable named as TF_TOKEN_ followed by an encoded version of the hostname. For example, Terraform will use variable TF_TOKEN_app_terraform_io as a bearer token for requests to ""app.terraform.io"", for the Terraform Cloud integration and private registry requests.

ENHANCEMENTS:

When showing a plan, Terraform CLI will now only show ""Changes outside of Terraform"" if they relate to resources and resource attributes that contributed to the changes Terraform is proposing to make. (#30486)
Error messages for preconditions, postconditions, and custom variable validations are now evaluated as expressions, allowing interpolation of relevant values into the output. (#30613)
When showing the progress of a remote operation running in Terraform Cloud, Terraform CLI will include information about post-plan run tasks. (#30141)
Terraform will now show a slightly different note in the plan output if a data resource read is deferred to the apply step due to it depending on a managed resource that has changes pending. (#30971)
The ""Invalid for_each argument"" error message for unknown maps/sets now includes an additional paragraph to try to help the user notice they can move apply-time values into the map values instead of the map keys, and thus avoid the problem without resorting to -target. (#30327)
There are some small improvements to the error and warning messages Terraform will emit in the case of invalid provider configuration passing between modules. There are no changes to which situations will produce errors and warnings, but the messages now include additional information intended to clarify what problem Terraform is describing and how to address it. (#30639)
The environment variables TF_CLOUD_ORGANIZATION and TF_CLOUD_HOSTNAME now serve as fallbacks for the arguments of the same name inside a cloud block configuring integration with Terraform Cloud.
The environment variable TF_WORKSPACE will now additionally serve as an implicit configuration of a single selected workspace on Terraform Cloud if (and only if) the cloud block does not include an explicit workspaces configuration.
The AzureRM Backend now defaults to using MSAL (and Microsoft Graph) rather than ADAL (and Azure Active Directory Graph) for authentication. (#30891)
The AzureRM Backend now supports authenticating as a service principal using OpenID Connect. (#30936)
When running on macOS, Terraform will now use platform APIs to validate certificates presented by TLS (HTTPS) servers. This may change exactly which root certificates Terraform will accept as valid. (#30768)
Show remote host in error message for clarity when installation of provider fails (#30810)
Terraform now prints a warning when adding an attribute to ignore_changes that is managed only by the provider. Specifying non-configurable attributes in ignore_changes has no effect because ignore_changes tells Terraform to ignore future changes made in the configuration. (#30517)
terraform show -json now includes exact type information for output values. (#30945)
The ssh provisioner connection now supports SSH over HTTP proxy. (#30274)


The SSH client for provisioners now supports newer key algorithms, allowing it to connect to servers running more recent versions of OpenSSH. (#30962)



BUG FIXES:

Terraform now handles type constraints, nullability, and custom variable validation properly for root module variables. Previously there was an order of operations problem where the nullability and custom variable validation were checked too early, prior to dealing with the type constraints, and thus that logic could potentially ""see"" an incorrectly-typed value in spite of the type constraint, leading to incorrect errors. (#29959)
When reporting a type mismatch between the true and false results of a conditional expression when both results are of the same structural type kind (object/tuple, or a collection thereof), Terraform will no longer return a confusing message like ""the types are object and object, respectively"", and will instead attempt to explain how the two structural types differ. (#30920)
Applying the various type conversion functions like tostring, tonumber, etc to null will now return a null value of the intended type. For example, tostring(null) converts from a null value of an unknown type to a null value of string type. Terraform can often handle such conversions automatically when needed, but explicit annotations like this can help Terraform to understand author intent when inferring type conversions for complex-typed values. (#30879)
Terraform now returns an error when cidrnetmask() is called with an IPv6 address, as it was previously documented to do. IPv6 standards do not preserve the ""netmask"" syntax sometimes used for IPv4 network configuration; use CIDR prefix syntax instead. (#30703)
When performing advanced state management with the terraform state commands, Terraform now checks the required_version field in the configuration before proceeding. (#30511)
When rendering a diff, Terraform now quotes the name of any object attribute whose string representation is not a valid identifier. (#30766)
Terraform will now prioritize local terraform variables over remote terraform variables in operations such as import, plan, refresh and apply for workspaces in local execution mode. This behavior applies to both remote backend and the cloud integration configuration. (#29972)
terraform show -json: JSON plan output now correctly maps aliased providers to their configurations, and includes the full provider source address alongside the short provider name. (#30138)
The local token configuration in the cloud and remote backend now has higher priority than a token specified in a credentials block in the CLI configuration. (#30664) 
The cloud integration now gracefully exits when -input=false and an operation requires some user input.
Terraform will now reliably detect an inteerruptiong (e.g. Ctrl+C) during planning for terraform apply -auto-approve. Previously there was a window of time where interruption would cancel the plan step but not prevent Terraform from proceeding to the apply step. (#30979)
Terraform will no longer crash if a provider fails to return a schema. (#30987)
"
41,"1.2.0-rc2 (Unreleased)
UPGRADE NOTES:

The official Linux packages for the v1.2 series now require Linux kernel version 2.6.32 or later.
When making outgoing HTTPS or other TLS connections as a client, Terraform now requires the server to support TLS v1.2. TLS v1.0 and v1.1 are no longer supported. Any safely up-to-date server should support TLS 1.2, and mainstream web browsers have required it since 2020.

When making outgoing HTTPS or other TLS connections as a client, Terraform will no longer accept CA certificates signed using the SHA-1 hash function. Publicly trusted Certificate Authorities have not issued SHA-1 certificates since 2015.
(Note: the changes to Terraform's requirements when interacting with TLS servers apply only to requests made by Terraform CLI itself, such as provider/module installation and state storage requests. Terraform provider plugins include their own TLS clients which may have different requirements, and may add new requirements in their own releases, independently of Terraform CLI changes.)
* If you use the third-party credentials helper plugin terraform-credentials-env, you should disable it as part of upgrading to Terraform v1.2 because similar functionality is now built in to Terraform itself.
The new behavior supports the same environment variable naming scheme but has a difference in priority order from the credentials helper: TF_TOKEN_... environment variables will now take priority over credentials blocks in CLI configuration and credentials stored automatically by terraform login, which is not true for credentials provided by any credentials helper plugin. If you see Terraform using different credentials after upgrading, check to make sure you do not specify credentials for the same host in multiple locations.
If you use the credentials helper in conjunction with the hashicorp/tfe Terraform provider to manage Terraform Cloud or Terraform Enterprise objects with Terraform, you should also upgrade to version 0.31 of that provider, which added the corresponding built-in support for these environment variables.


NEW FEATURES:

precondition and postcondition check blocks for resources, data sources, and module output values: module authors can now document assumptions and assertions about configuration and state values. If these conditions are not met, Terraform will report a custom error message to the user and halt further evaluation.
You may specify remote network service credentials using an environment variable named after the host name with a TF_TOKEN_ prefix. For example, the value of a variable named TF_TOKEN_app_terraform_io will be used as a bearer authorization token when the CLI makes service requests to the host name ""app.terraform.io"".
replace_triggered_by is a new lifecycle argument which allows one to configure the replacement of a resource based on changes in a dependency.

ENHANCEMENTS:

The ""Invalid for_each argument"" error message for unknown maps/sets now includes an additional paragraph to try to help the user notice they can move apply-time values into the map values instead of the map keys, and thus avoid the problem without resorting to -target. (#30327)
When showing the progress of a remote operation running in Terraform Cloud, Terraform CLI will include information about post-plan run tasks. (#30141)
Error messages for preconditions, postconditions, and custom variable validations are now evaluated as expressions, allowing interpolation of relevant values into the output. (#30613)
There are some small improvements to the error and warning messages Terraform will emit in the case of invalid provider configuration passing between modules. There are no changes to which situations will produce errors and warnings, but the messages now include additional information intended to clarify what problem Terraform is describing and how to address it. (#30639)
When running terraform plan, only show external changes which may have contributed to the current plan (#30486)
Terraform will now show a slightly different note in the plan output if a data resource read is deferred to the apply step due to it depending on a managed resource that has changes pending. (#30971)
Add TF_CLOUD_ORGANIZATION environment variable fallback for organization in the cloud configuration
Add TF_CLOUD_HOSTNAME environment variable fallback for hostname in the cloud configuration
TF_WORKSPACE can now be used to configure the workspaces attribute in your cloud configuration
When running on macOS, Terraform will now use platform APIs to validate certificates presented by TLS (HTTPS) servers. This may change exactly which root certificates Terraform will accept as valid. (#30768)
The AzureRM Backend now defaults to using MSAL (and Microsoft Graph) rather than ADAL (and Azure Active Directory Graph) for authentication. (#30891)
The AzureRM Backend now supports authenticating as a service principal using OpenID Connect. (#30936)
Show remote host in error message for clarity when installation of provider fails (#30810)
Terraform now prints a warning when adding an attribute to ignore_changes that is managed only by the provider (non-optional computed attribute). (#30517)
JSON plan and state output now includes exact type representations for output values. (#30945)
The ssh provisioner connection now supports SSH over HTTP proxy. (#30274)

BUG FIXES:

Terraform now handles type constraints, nullability, and custom variable validation properly for root module variables. Previously there was an order of operations problem where the nullability and custom variable validation were checked too early, prior to dealing with the type constraints, and thus that logic could potentially ""see"" an incorrectly-typed value in spite of the type constraint, leading to incorrect errors. (#29959)
Applying the various type conversion functions like tostring, tonumber, etc to null will now return a null value of the intended type. For example, tostring(null) converts from a null value of an unknown type to a null value of string type. Terraform can often handle such conversions automatically when needed, but explicit annotations like this can help Terraform to understand author intent when inferring type conversions for complex-typed values. (#30879)
When reporting a type mismatch between the true and false results of a conditional expression when both results are of the same structural type kind (object/tuple, or a collection thereof), Terraform will no longer return a confusing message like ""the types are object and object, respectively"", and will instead attempt to explain how the two structural types differ. (#30920)
Terraform now outputs an error when cidrnetmask() is called with an IPv6 address, as it was previously documented to do. (#30703)
When performing advanced state management with the terraform state commands, Terraform now checks the required_version field in the configuration before proceeding. (#30511)
When rendering a diff, Terraform now quotes the name of any object attribute whose string representation is not a valid identifier. (#30766)
Terraform will prioritize local terraform variables over remote terraform variables in operations such as import, plan, refresh and apply for workspaces in local execution mode. This behavior applies to both remote backend and the cloud integration configuration. (#29972)
terraform show -json: JSON plan output now correctly maps aliased providers to their configurations, and includes the full provider source address alongside the short provider name. (#30138)
The local token configuration in the cloud and remote backend now has higher priority than the token specified in a CLI configuration. (#30664) 
The cloud integration now gracefully exits when -input=false and an operation requires some user input.
The ssh client for provisioners is updated to use newer key algorithms, allowing it to connect to more recent versions of openssh servers (#30962)
A cancellation in the CLI may not be caught when using -auto-approve, causing unintended changes to be applied (#30979)
A provider failing to return a schema could result in a panic (#30987)
"
42,"1.2.0-rc1 (Unreleased)
UPGRADE NOTES:

The official Linux packages for the v1.2 series now require Linux kernel version 2.6.32 or later.
When making outgoing HTTPS or other TLS connections as a client, Terraform now requires the server to support TLS v1.2. TLS v1.0 and v1.1 are no longer supported. Any safely up-to-date server should support TLS 1.2, and mainstream web browsers have required it since 2020.

When making outgoing HTTPS or other TLS connections as a client, Terraform will no longer accept CA certificates signed using the SHA-1 hash function. Publicly trusted Certificate Authorities have not issued SHA-1 certificates since 2015.
(Note: the changes to Terraform's requirements when interacting with TLS servers apply only to requests made by Terraform CLI itself, such as provider/module installation and state storage requests. Terraform provider plugins include their own TLS clients which may have different requirements, and may add new requirements in their own releases, independently of Terraform CLI changes.)
* If you use the third-party credentials helper plugin terraform-credentials-env, you should disable it as part of upgrading to Terraform v1.2 because similar functionality is now built in to Terraform itself.
The new behavior supports the same environment variable naming scheme but has a difference in priority order from the credentials helper: TF_TOKEN_... environment variables will now take priority over credentials blocks in CLI configuration and credentials stored automatically by terraform login, which is not true for credentials provided by any credentials helper plugin. If you see Terraform using different credentials after upgrading, check to make sure you do not specify credentials for the same host in multiple locations.
If you use the credentials helper in conjunction with the hashicorp/tfe Terraform provider to manage Terraform Cloud or Terraform Enterprise objects with Terraform, you should also upgrade to version 0.31 of that provider, which added the corresponding built-in support for these environment variables.


NEW FEATURES:

precondition and postcondition check blocks for resources, data sources, and module output values: module authors can now document assumptions and assertions about configuration and state values. If these conditions are not met, Terraform will report a custom error message to the user and halt further evaluation.
You may specify remote network service credentials using an environment variable named after the host name with a TF_TOKEN_ prefix. For example, the value of a variable named TF_TOKEN_app_terraform_io will be used as a bearer authorization token when the CLI makes service requests to the host name ""app.terraform.io"".
replace_triggered_by is a new lifecycle argument which allows one to configure the replacement of a resource based on changes in a dependency.

ENHANCEMENTS:

The ""Invalid for_each argument"" error message for unknown maps/sets now includes an additional paragraph to try to help the user notice they can move apply-time values into the map values instead of the map keys, and thus avoid the problem without resorting to -target. (#30327)
When showing the progress of a remote operation running in Terraform Cloud, Terraform CLI will include information about post-plan run tasks. (#30141)
Error messages for preconditions, postconditions, and custom variable validations are now evaluated as expressions, allowing interpolation of relevant values into the output. (#30613)
There are some small improvements to the error and warning messages Terraform will emit in the case of invalid provider configuration passing between modules. There are no changes to which situations will produce errors and warnings, but the messages now include additional information intended to clarify what problem Terraform is describing and how to address it. (#30639)
When running terraform plan, only show external changes which may have contributed to the current plan (#30486)
Add TF_CLOUD_ORGANIZATION environment variable fallback for organization in the cloud configuration
Add TF_CLOUD_HOSTNAME environment variable fallback for hostname in the cloud configuration
TF_WORKSPACE can now be used to configure the workspaces attribute in your cloud configuration
When running on macOS, Terraform will now use platform APIs to validate certificates presented by TLS (HTTPS) servers. This may change exactly which root certificates Terraform will accept as valid. (#30768)
The AzureRM Backend now defaults to using MSAL (and Microsoft Graph) rather than ADAL (and Azure Active Directory Graph) for authentication. (#30891)
The AzureRM Backend now supports authenticating as a service principal using OpenID Connect. (#30936)
Show remote host in error message for clarity when installation of provider fails (#30810)
Terraform now prints a warning when adding an attribute to ignore_changes that is managed only by the provider (non-optional computed attribute). (#30517)
JSON plan and state output now includes exact type representations for output values. (#30945)
The ssh provisioner connection now supports SSH over HTTP proxy. (#30274)

BUG FIXES:

Terraform now handles type constraints, nullability, and custom variable validation properly for root module variables. Previously there was an order of operations problem where the nullability and custom variable validation were checked too early, prior to dealing with the type constraints, and thus that logic could potentially ""see"" an incorrectly-typed value in spite of the type constraint, leading to incorrect errors. (#29959)
Applying the various type conversion functions like tostring, tonumber, etc to null will now return a null value of the intended type. For example, tostring(null) converts from a null value of an unknown type to a null value of string type. Terraform can often handle such conversions automatically when needed, but explicit annotations like this can help Terraform to understand author intent when inferring type conversions for complex-typed values. (#30879)
When reporting a type mismatch between the true and false results of a conditional expression when both results are of the same structural type kind (object/tuple, or a collection thereof), Terraform will no longer return a confusing message like ""the types are object and object, respectively"", and will instead attempt to explain how the two structural types differ. (#30920)
Terraform now outputs an error when cidrnetmask() is called with an IPv6 address, as it was previously documented to do. (#30703)
When performing advanced state management with the terraform state commands, Terraform now checks the required_version field in the configuration before proceeding. (#30511)
When rendering a diff, Terraform now quotes the name of any object attribute whose string representation is not a valid identifier. (#30766)
Terraform will prioritize local terraform variables over remote terraform variables in operations such as import, plan, refresh and apply for workspaces in local execution mode. This behavior applies to both remote backend and the cloud integration configuration. (#29972)
terraform show -json: JSON plan output now correctly maps aliased providers to their configurations, and includes the full provider source address alongside the short provider name. (#30138)
The local token configuration in the cloud and remote backend now has higher priority than the token specified in a CLI configuration. (#30664) 
The cloud integration now gracefully exits when -input=false and an operation requires some user input.
The ssh client for provisioners is updated to use newer key algorithms, allowing it to connect to more recent versions of openssh servers (#30962)
A cancellation in the CLI may not be caught when using -auto-approve, causing unintended changes to be applied (#30979)
A provider failing to return a schema could result in a panic (#30987)
"
43,"1.2.0 (Unreleased)
UPGRADE NOTES:

The official Linux packages for the v1.2 series now require Linux kernel version 2.6.32 or later.
When making outgoing HTTPS or other TLS connections as a client, Terraform now requires the server to support TLS v1.2. TLS v1.0 and v1.1 are no longer supported. Any safely up-to-date server should support TLS 1.2, and mainstream web browsers have required it since 2020.

When making outgoing HTTPS or other TLS connections as a client, Terraform will no longer accept CA certificates signed using the SHA-1 hash function. Publicly trusted Certificate Authorities have not issued SHA-1 certificates since 2015.
(Note: the changes to Terraform's requirements when interacting with TLS servers apply only to requests made by Terraform CLI itself, such as provider/module installation and state storage requests. Terraform provider plugins include their own TLS clients which may have different requirements, and may add new requirements in their own releases, independently of Terraform CLI changes.)
* If you use the third-party credentials helper plugin terraform-credentials-env, you should disable it as part of upgrading to Terraform v1.2 because similar functionality is now built in to Terraform itself.
The new behavior supports the same environment variable naming scheme but has a difference in priority order from the credentials helper: TF_TOKEN_... environment variables will now take priority over credentials blocks in CLI configuration and credentials stored automatically by terraform login, which is not true for credentials provided by any credentials helper plugin. If you see Terraform using different credentials after upgrading, check to make sure you do not specify credentials for the same host in multiple locations.
If you use the credentials helper in conjunction with the hashicorp/tfe Terraform provider to manage Terraform Cloud or Terraform Enterprise objects with Terraform, you should also upgrade to version 0.31 of that provider, which added the corresponding built-in support for these environment variables.


NEW FEATURES:

precondition and postcondition check blocks for resources, data sources, and module output values: module authors can now document assumptions and assertions about configuration and state values. If these conditions are not met, Terraform will report a custom error message to the user and halt further evaluation.
You may specify remote network service credentials using an environment variable named after the host name with a TF_TOKEN_ prefix. For example, the value of a variable named TF_TOKEN_app_terraform_io will be used as a bearer authorization token when the CLI makes service requests to the host name ""app.terraform.io"".
replace_triggered_by is a new lifecycle argument which allows one to configure the replacement of a resource based on changes in a dependency.

ENHANCEMENTS:

The ""Invalid for_each argument"" error message for unknown maps/sets now includes an additional paragraph to try to help the user notice they can move apply-time values into the map values instead of the map keys, and thus avoid the problem without resorting to -target. (#30327)
When showing the progress of a remote operation running in Terraform Cloud, Terraform CLI will include information about post-plan run tasks. (#30141)
Error messages for preconditions, postconditions, and custom variable validations are now evaluated as expressions, allowing interpolation of relevant values into the output. (#30613)
There are some small improvements to the error and warning messages Terraform will emit in the case of invalid provider configuration passing between modules. There are no changes to which situations will produce errors and warnings, but the messages now include additional information intended to clarify what problem Terraform is describing and how to address it. (#30639)
When running terraform plan, only show external changes which may have contributed to the current plan (#30486)
Add TF_CLOUD_ORGANIZATION environment variable fallback for organization in the cloud configuration
Add TF_CLOUD_HOSTNAME environment variable fallback for hostname in the cloud configuration
TF_WORKSPACE can now be used to configure the workspaces attribute in your cloud configuration
When running on macOS, Terraform will now use platform APIs to validate certificates presented by TLS (HTTPS) servers. This may change exactly which root certificates Terraform will accept as valid. (#30768)
The AzureRM Backend now defaults to using MSAL (and Microsoft Graph) rather than ADAL (and Azure Active Directory Graph) for authentication. (#30891)
The AzureRM Backend now supports authenticating as a service principal using OpenID Connect. (#30936)
Show remote host in error message for clarity when installation of provider fails (#30810)
Terraform now prints a warning when adding an attribute to ignore_changes that is managed only by the provider (non-optional computed attribute). (#30517)
JSON plan and state output now includes exact type representations for output values. (#30945)

BUG FIXES:

Terraform now handles type constraints, nullability, and custom variable validation properly for root module variables. Previously there was an order of operations problem where the nullability and custom variable validation were checked too early, prior to dealing with the type constraints, and thus that logic could potentially ""see"" an incorrectly-typed value in spite of the type constraint, leading to incorrect errors. (#29959)
Applying the various type conversion functions like tostring, tonumber, etc to null will now return a null value of the intended type. For example, tostring(null) converts from a null value of an unknown type to a null value of string type. Terraform can often handle such conversions automatically when needed, but explicit annotations like this can help Terraform to understand author intent when inferring type conversions for complex-typed values. (#30879)
When reporting a type mismatch between the true and false results of a conditional expression when both results are of the same structural type kind (object/tuple, or a collection thereof), Terraform will no longer return a confusing message like ""the types are object and object, respectively"", and will instead attempt to explain how the two structural types differ. (#30920)
Terraform now outputs an error when cidrnetmask() is called with an IPv6 address, as it was previously documented to do. (#30703)
When performing advanced state management with the terraform state commands, Terraform now checks the required_version field in the configuration before proceeding. (#30511)
When rendering a diff, Terraform now quotes the name of any object attribute whose string representation is not a valid identifier. (#30766)
Terraform will prioritize local terraform variables over remote terraform variables in operations such as import, plan, refresh and apply for workspaces in local execution mode. This behavior applies to both remote backend and the cloud integration configuration. (#29972)
terraform show -json: JSON plan output now correctly maps aliased providers to their configurations, and includes the full provider source address alongside the short provider name. (#30138)
The local token configuration in the cloud and remote backend now has higher priority than the token specified in a CLI configuration. (#30664) 
The cloud integration now gracefully exits when -input=false and an operation requires some user input.
"
44,"1.1.9 (April 20, 2022)
BUG FIXES:

cli: Fix crash when using sensitive values in sets. (#30825)
cli: Fix double-quoted map keys when rendering a diff. (#30855)
core: Prevent errors when handling a data source with incompatible schema changes (#30830)

ENHANCEMENTS:
* cli: Terraform now supports run tasks, a Terraform Cloud integration for executing remote operations, for the post plan stage of a run."
45,"1.2.0 (Unreleased)
UPGRADE NOTES:

The official Linux packages for the v1.2 series now require Linux kernel version 2.6.32 or later.
When making outgoing HTTPS or other TLS connections as a client, Terraform now requires the server to support TLS v1.2. TLS v1.0 and v1.1 are no longer supported. Any safely up-to-date server should support TLS 1.2, and mainstream web browsers have required it since 2020.
When making outgoing HTTPS or other TLS connections as a client, Terraform will no longer accept CA certificates signed using the SHA-1 hash function. Publicly trusted Certificate Authorities have not issued SHA-1 certificates since 2015.

(Note: the changes to Terraform's requirements when interacting with TLS servers apply only to requests made by Terraform CLI itself, such as provider/module installation and state storage requests. Terraform provider plugins include their own TLS clients which may have different requirements, and may add new requirements in their own releases, independently of Terraform CLI changes.)
NEW FEATURES:

precondition and postcondition check blocks for resources, data sources, and module output values: module authors can now document assumptions and assertions about configuration and state values. If these conditions are not met, Terraform will report a custom error message to the user and halt further evaluation.
Terraform now supports run tasks, a Terraform Cloud integration for executing remote operations, for the post plan stage of a run.

ENHANCEMENTS:

The ""Invalid for_each argument"" error message for unknown maps/sets now includes an additional paragraph to try to help the user notice they can move apply-time values into the map values instead of the map keys, and thus avoid the problem without resorting to -target. (#30327)
When showing the progress of a remote operation running in Terraform Cloud, Terraform CLI will include information about post-plan run tasks. (#30141)
Error messages for preconditions, postconditions, and custom variable validations are now evaluated as expressions, allowing interpolation of relevant values into the output. (#30613)
There are some small improvements to the error and warning messages Terraform will emit in the case of invalid provider configuration passing between modules. There are no changes to which situations will produce errors and warnings, but the messages now include additional information intended to clarify what problem Terraform is describing and how to address it. (#30639)
When running terraform plan, only show external changes which may have contributed to the current plan (#30486)
Add TF_ORGANIZATION environment variable fallback for organization in the cloud configuration
Add TF_HOSTNAME environment variable fallback for hostname in the cloud configuration
When running on macOS, Terraform will now use platform APIs to validate certificates presented by TLS (HTTPS) servers. This may change exactly which root certificates Terraform will accept as valid. (#30768)

BUG FIXES:

Terraform now handles type constraints, nullability, and custom variable validation properly for root module variables. Previously there was an order of operations problem where the nullability and custom variable validation were checked too early, prior to dealing with the type constraints, and thus that logic could potentially ""see"" an incorrectly-typed value in spite of the type constraint, leading to incorrect errors. (#29959)
terraform show -json: JSON plan output now correctly maps aliased providers to their configurations, and includes the full provider source address alongside the short provider name. (#30138)
Terraform now prints a warning when adding an attribute to ignore_changes that is managed only by the provider (non-optional computed attribute). (#30517)
Terraform will prioritize local terraform variables over remote terraform variables in operations such as import, plan, refresh and apply for workspaces in local execution mode. This behavior applies to both remote backend and the cloud integration configuration. (#29972)
Terraform now outputs an error when cidrnetmask() is called with an IPv6 address. (#30703)
When performing advanced state management with the terraform state commands, Terraform now checks the required_version field in the configuration before proceeding. (#30511)
When rendering a diff, Terraform now quotes the name of any object attribute whose string representation is not a valid identifier. (#30766)

UPGRADE NOTES:

The Terraform Cloud integration relies on the Go-TFE SDK. Terraform has upgraded this dependency to use its new major version 1.0 [#30626]. Go-TFE v1.0.0 CHANGELOG.
"
46,"1.1.8 (April 07, 2022)
BUG FIXES:

cli: Fix missing identifying attributes (e.g. ""id"", ""name"") when displaying plan diffs with nested objects. (#30685)
functions: Fix error when sum() function is called with a collection of string-encoded numbers, such as sum([""1"", ""2"", ""3""]). (#30684)
When rendering a diff, Terraform now quotes the name of any object attribute whose string representation is not a valid identifier. (#30766)
Terraform will no longer crash in the terraform apply phase if an error occurs during backend configuration. (#30780)
"
47,"1.2.0 (Unreleased)
NEW FEATURES:

precondition and postcondition check blocks for resources, data sources, and module output values: module authors can now document assumptions and assertions about configuration and state values. If these conditions are not met, Terraform will report a custom error message to the user and halt further evaluation.
Terraform now supports run tasks, a Terraform Cloud integration for executing remote operations, for the post plan stage of a run.

ENHANCEMENTS:

The ""Invalid for_each argument"" error message for unknown maps/sets now includes an additional paragraph to try to help the user notice they can move apply-time values into the map values instead of the map keys, and thus avoid the problem without resorting to -target. (#30327)
When showing the progress of a remote operation running in Terraform Cloud, Terraform CLI will include information about post-plan run tasks. (#30141)
Error messages for preconditions, postconditions, and custom variable validations are now evaluated as expressions, allowing interpolation of relevant values into the output. (#30613)
There are some small improvements to the error and warning messages Terraform will emit in the case of invalid provider configuration passing between modules. There are no changes to which situations will produce errors and warnings, but the messages now include additional information intended to clarify what problem Terraform is describing and how to address it. (#30639)
When running terraform plan, only show external changes which may have contributed to the current plan (#30486)

BUG FIXES:

Terraform now handles type constraints, nullability, and custom variable validation properly for root module variables. Previously there was an order of operations problem where the nullability and custom variable validation were checked too early, prior to dealing with the type constraints, and thus that logic could potentially ""see"" an incorrectly-typed value in spite of the type constraint, leading to incorrect errors. (#29959)
terraform show -json: JSON plan output now correctly maps aliased providers to their configurations, and includes the full provider source address alongside the short provider name. (#30138)
Terraform now prints a warning when adding an attribute to ignore_changes that is managed only by the provider (non-optional computed attribute). (#30517)
Terraform will prioritize local terraform variables over remote terraform variables in operations such as import, plan, refresh and apply for workspaces in local execution mode. This behavior applies to both remote backend and the cloud integration configuration. (#29972)
Terraform now outputs an error when cidrnetmask() is called with an IPv6 address. (#30703)

UPGRADE NOTES:

The Terraform Cloud integration relies on the Go-TFE SDK. Terraform has upgraded this dependency to use its new major version 1.0 [#30626]. Go-TFE v1.0.0 CHANGELOG.
"
48,"1.1.7 (March 02, 2022)
BUG FIXES:

terraform show -json: Improve performance for deeply-nested object values. The previous implementation was accidentally quadratic, which could result in very long execution time for generating JSON plans, and timeouts on Terraform Cloud and Terraform Enterprise. (#30561)
cloud: Update go-slug for terraform.tfstate exclusion to prevent a user from getting an error
    after migrating state to TFC.
"
49,"1.1.6 (February 16, 2022)
BUG FIXES:

cli: Prevent complex uses of the console-only type function. This function may only be used at the top level of console expressions, to display the type of a given value. Attempting to use this function in complex expressions will now display a diagnostic error instead of crashing. (#30476)
terraform state mv: Will now correctly exit with error code 1 when the specified resources cannot be found in state. Previously Terraform would display appropriate diagnostic errors, but exit successfully. (#29365)
"
50,"1.1.5 (February 02, 2022)
ENHANCEMENTS:

backend/s3: Update AWS SDK to allow the use of the ap-southeast-3 region (#30363)

BUG FIXES:

cli: Fix crash when using autocomplete with long commands, such as terraform workspace select (#30193)
"
51,"1.1.4 (January 19, 2022)
BUG FIXES:

config: Non-nullable variables with null inputs were not given default values when checking validation statements (#30330)
config: Terraform will no longer incorrectly report ""Cross-package move statement"" when an external package has changed a resource from no count to using count, or vice-versa. (#30333)
"
52,"1.1.3 (January 06, 2022)
BUG FIXES:

terraform init: Will now remove from the dependency lock file entries for providers not used in the current configuration. Previously it would leave formerly-used providers behind in the lock file, leading to ""missing or corrupted provider plugins"" errors when other commands verified the consistency of the installed plugins against the locked plugins. (#30192)
config: Fix panic when encountering an invalid provider block within a module (#30095)
config: Fix cycle error when the index of a module containing move statements is changed (#30232)
config: Fix inconsistent ordering with nested move operations (#30253)
config: Fix moved block refactoring to include nested modules (#30233)
functions: Redact sensitive values from function call error messages (#30067)
terraform show: Disable plan state lineage checks, ensuring that we can show plan files which were generated against non-default state files (#30205)
"
53,"1.1.2 (December 17, 2021)
If you are using Terraform CLI v1.1.0 or v1.1.1, please upgrade to this new version as soon as possible.
Terraform CLI v1.1.0 and v1.1.1 both have a bug where a failure to construct the apply-time graph can cause Terraform to incorrectly report success and save an empty state, effectively ""forgetting"" all existing infrastructure. Although configurations that already worked on previous releases should not encounter this problem, it's possible that incorrect future configuration changes would trigger this behavior during the apply step.
BUG FIXES:

config: Fix panic when using -target in combination with moved blocks within modules (#30189)
core: Fix condition which could lead to an empty state being written when there is a failure building the apply graph (#30199)
"
54,"1.1.1 (December 15, 2021)
If you are using Terraform CLI v1.1.0 or v1.1.1, please upgrade to the latest version as soon as possible.
Terraform CLI v1.1.0 and v1.1.1 both have a bug where a failure to construct the apply-time graph can cause Terraform to incorrectly report success and save an empty state, effectively ""forgetting"" all existing infrastructure. Although configurations that already worked on previous releases should not encounter this problem, it's possible that incorrect future configuration changes would trigger this behavior during the apply step.

BUG FIXES:

core: Fix crash with orphaned module instance due to changed count or for_each value (#30151)
core: Fix regression where some expressions failed during validation when referencing resources expanded with count or for_each (#30171)
"
55,"1.1.0 (December 08, 2021)
If you are using Terraform CLI v1.1.0 or v1.1.1, please upgrade to the latest version as soon as possible.
Terraform CLI v1.1.0 and v1.1.1 both have a bug where a failure to construct the apply-time graph can cause Terraform to incorrectly report success and save an empty state, effectively ""forgetting"" all existing infrastructure. Although configurations that already worked on previous releases should not encounter this problem, it's possible that incorrect future configuration changes would trigger this behavior during the apply step.

Terraform v1.1.0 is a new minor release, containing some new features and some bug fixes whose scope was too large for inclusion in a patch release.
NEW FEATURES:


moved blocks for refactoring within modules: Module authors can now record in module source code whenever they've changed the address of a resource or resource instance, and then during planning Terraform will automatically migrate existing objects in the state to new addresses.
This therefore avoids the need for users of a shared module to manually run terraform state mv after upgrading to a version of the module, as long as the change is expressible as static configuration. However, terraform state mv will remain available for use in more complex migration situations that are not well-suited to declarative configuration.
* A new cloud block in the terraform settings block introduces a native Terraform Cloud integration for the CLI-driven run workflow.
The Cloud integration includes several enhancements, including per-run variable support using the -var flag, the ability to map Terraform Cloud workspaces to the current configuration via Workspace Tags, and an improved user experience for Terraform Cloud and Enterprise users with actionable error messages and prompts.
* terraform plan and terraform apply both now include additional annotations for resource instances planned for deletion to explain why Terraform has proposed that action.
For example, if you change the count argument for a resource to a lower number then Terraform will now mention that as part of proposing to destroy any existing objects that exceed the new count.


UPGRADE NOTES:
This release is covered by the Terraform v1.0 Compatibility Promises, but does include some changes permitted within those promises as described below.

Terraform on macOS now requires macOS 10.13 High Sierra or later; Older macOS versions are no longer supported.
The terraform graph command no longer supports -type=validate and -type=eval options. The validate graph is always the same as the plan graph anyway, and the ""eval"" graph was just an implementation detail of the terraform console command. The default behavior of creating a plan graph should be a reasonable replacement for both of the removed graph modes. (Please note that terraform graph is not covered by the Terraform v1.0 compatibility promises, because its behavior inherently exposes Terraform Core implementation details, so we recommend it only for interactive debugging tasks and not for use in automation.)

terraform apply with a previously-saved plan file will now verify that the provider plugin packages used to create the plan fully match the ones used during apply, using the same checksum scheme that Terraform normally uses for the dependency lock file. Previously Terraform was checking consistency of plugins from a plan file using a legacy mechanism which covered only the main plugin executable, not any other files that might be distributed alongside in the plugin package.
This additional check should not affect typical plugins that conform to the expectation that a plugin package's contents are immutable once released, but may affect a hypothetical in-house plugin that intentionally modifies extra files in its package directory somehow between plan and apply. If you have such a plugin, you'll need to change its approach to store those files in some other location separate from the package directory. This is a minor compatibility break motivated by increasing the assurance that plugins have not been inadvertently or maliciously modified between plan and apply.
* terraform state mv will now error when legacy -backup or -backup-out options are used without the -state option on non-local backends. These options operate on a local state file only. Previously, these options were accepted but ignored silently when used with non-local backends. 
* In the AzureRM backend, the new opt-in option use_microsoft_graph switches to using MSAL authentication tokens and Microsoft Graph rather than using ADAL tokens and Azure Active Directory Graph, which is now deprecated by Microsoft. The new mode will become the default in Terraform v1.2, so please plan to migrate to using this setting and test with your own Azure AD tenant prior to the Terraform v1.2 release.


ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)
config: Variables can now be declared as ""nullable"", which defines whether a variable can be null within a module. Setting nullable = false ensures that a variable value will never be null, and may instead take on the variable's default value if the caller sets it explicitly to null. (#29832)
terraform plan and terraform apply: When Terraform plans to destroy a resource instance due to it no longer being declared in the configuration, the proposed plan output will now include a note hinting at what situation prompted that proposal, so you can more easily see what configuration change might avoid the object being destroyed. (#29637)
terraform plan and terraform apply: Terraform will now report explicitly in the UI if it automatically moves a resource instance to a new address as a result of adding or removing the count argument from an existing resource. For example, if you previously had resource ""aws_subnet"" ""example"" without count, you might have aws_subnet.example already bound to a remote object in your state. If you add count = 1 to that resource then Terraform would previously silently rebind the object to aws_subnet.example[0] as part of planning, whereas now Terraform will mention that it did so explicitly in the plan description. (#29605)
terraform workspace delete: will now allow deleting a workspace whose state contains only data resource instances and output values, without running terraform destroy first. Previously the presence of data resources would require using -force to override the safety check guarding against accidentally forgetting about remote objects, but a data resource is not responsible for the management of its associated remote object(s) and so there's no reason to require explicit deletion. (#29754)
terraform validate: Terraform now uses precise type information for resources during config validation, allowing more problems to be caught that that step rather than only during the planning step. (#29862)
provisioner/remote-exec and provisioner/file: When using SSH agent authentication mode on Windows, Terraform can now detect and use the Windows 10 built-in OpenSSH Client's SSH Agent, when available, in addition to the existing support for the third-party solution Pageant that was already supported. (#29747)
cli: terraform state mv will now return an error for -backup or -backup-out options used without the -state option, unless the working directory is initialized to use the local backend. Previously Terraform would silently ignore those options, since they are applicable only to the local backend. (#27908)
terraform console: now has a new type() function, available only in the interactive console, for inspecting the exact type of a particular value as an aid to debugging. (#28501)

BUG FIXES:

config: ignore_changes = all now works in override files. (#29849)
config: Upgrading an unknown single value to a list using a splat expression now correctly returns an unknown value and type. Previously it would sometimes ""overpromise"" a particular return type, leading to an inconsistency error during the apply step. (#30062)
config: Terraform is now more precise in its detection of data resources that must be deferred to the apply step due to their depends_on arguments referring to not-yet-converged managed resources. (#29682)
config: ignore_changes can no longer cause a null map to be converted to an empty map, which would otherwise potentially cause surprising side-effects in provider logic. (#29928)
core: Provider configuration obtained from interactive prompts will now be merged properly with settings given in the configuration. Previously this merging was incorrect in some cases. (#29000)
terraform plan: Improved rendering of changes inside attributes that accept lists, sets, or maps of nested object types. (#29827, #29983, #29986)
terraform apply: Will no longer try to apply a stale plan that was generated against an originally-empty state. Previously this was an unintended exception to the rule that a plan can only be applied to the state snapshot it was generated against. (#29755)
terraform show -json: Attributes that are declared as using the legacy Attributes as Blocks behavior are now represented more faithfully in the JSON plan output. (#29522)
terraform init: Will now update the backend configuration hash value at a more approprimate time, to ensure properly restarting a backend migration process that failed on the first attempt. (#29860)
backend/oss: Flatten assume_role block arguments, so that they are more compatible with the terraform_remote_state data source. (#29307)
"
56,"1.1.0-rc1 (Unreleased)
UPGRADE NOTES:

Terraform on macOS now requires macOS 10.13 High Sierra or later; Older macOS versions are no longer supported.
The terraform graph command no longer supports -type=validate and -type=eval options. The validate graph is always the same as the plan graph anyway, and the ""eval"" graph was just an implementation detail of the terraform console command. The default behavior of creating a plan graph should be a reasonable replacement for both of the removed graph modes. (Please note that terraform graph is not covered by the Terraform v1.0 compatibility promises, because its behavior inherently exposes Terraform Core implementation details, so we recommend it only for interactive debugging tasks and not for use in automation.)

terraform apply with a previously-saved plan file will now verify that the provider plugin packages used to create the plan fully match the ones used during apply, using the same checksum scheme that Terraform normally uses for the dependency lock file. Previously Terraform was checking consistency of plugins from a plan file using a legacy mechanism which covered only the main plugin executable, not any other files that might be distributed alongside in the plugin package.
This additional check should not affect typical plugins that conform to the expectation that a plugin package's contents are immutable once released, but may affect a hypothetical in-house plugin that intentionally modifies extra files in its package directory somehow between plan and apply. If you have such a plugin, you'll need to change its approach to store those files in some other location separate from the package directory. This is a minor compatibility break motivated by increasing the assurance that plugins have not been inadvertently or maliciously modified between plan and apply.
* terraform state mv will now error when legacy -backup or -backup-out options are used without the -state option on non-local backends. These options operate on a local state file only. Previously, these options were accepted but ignored silently when used with non-local backends. 
* backend/azurerm: a new opt-in flag use_microsoft_graph is available which switches to using MSAL authentication tokens and Microsoft Graph rather than using ADAL tokens and Azure Active Directory Graph which is now deprecated by Microsoft. This functionality is disabled by default but will be enabled by default in a future version of Terraform. We encourage you to configure and test this setting with your own Azure AD tenant prior to Terraform 1.2. (#29968)


NEW FEATURES:


moved blocks for refactoring within modules: Module authors can now record in module source code whenever they've changed the address of a resource or resource instance, and then during planning Terraform will automatically migrate existing objects in the state to new addresses.
This therefore avoids the need for module users to manually run terraform state mv after upgrading to a newer module version, as long as the change is expressible as static configuration. However, terraform state mv remains available for use in more complex migration situations that are not well-suited to declarative configuration.
* A new cloud option in the terraform settings block adds a more native integration for Terraform Cloud and its CLI-driven run workflow. The Cloud integration includes several enhancements, including per-run variable support using the -var flag, the ability to map Terraform Cloud workspaces to the current configuration via Workspace Tags, and an improved user experience for Terraform Cloud/Enterprise users with actionable error messages and prompts. (#29826)
* terraform plan and terraform apply: When Terraform plans to destroy a resource instance due to it no longer being declared in the configuration, the proposed plan output will now include a note hinting at what situation prompted that proposal, so you can more easily see what configuration change might avoid the object being destroyed. (#29637)
* terraform plan and terraform apply: When Terraform automatically moves a singleton resource instance to index zero or vice-versa in response to adding or removing count, it'll report explicitly that it did so as part of the plan output. (#29605)
* config: a new type() function, available only in terraform console. (#28501)


ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)
config: A new variable attribute nullable, which defines whether a variable can be null within a module. Setting nullable to false ensures that a variable value will not be null, and that a non-null default is used when null is given as a module argument (#29832)
terraform plan and terraform apply: Terraform will now report explicitly in the UI if it automatically moves a resource instance to a new address as a result of adding or removing the count argument from an existing resource. For example, if you previously had resource ""aws_subnet"" ""example"" without count, you might have aws_subnet.example already bound to a remote object in your state. If you add count = 1 to that resource then Terraform would previously silently rebind the object to aws_subnet.example[0] as part of planning, whereas now Terraform will mention that it did so explicitly in the plan description. (#29605)
terraform workspace delete: will now allow deleting a workspace whose state contains only data resource instances and output values, without running terraform destroy first. Previously the presence of data resources would require using -force to override the safety check guarding against accidentally forgetting about remote objects, but a data resource is not responsible for the management of its associated remote object(s) anyway. (#29754)
provisioner/remote-exec and provisioner/file: When using SSH agent authentication mode on Windows, Terraform can now detect and use the Windows 10 built-in OpenSSH Client's SSH Agent, when available, in addition to the existing support for the third-party solution Pageant that was already supported. (#29747)
cli: terraform state mv will now error when legacy -backup or -backup-out options are used without the -state option on non-local backends (#27908)

BUG FIXES:

backend/oss: Flatten assume_role block attributes, so that they may be more easily represented in a compatible way with terraform_remote_state (#29307)
config: Fixed a bug in which ignore_changes = all would not work in override files (#29849)
config: Upgrading an unknown single value to a list using a splat expression must return an unknown value and type (#30062)
core: Use more precise typing information of resources during config validation (#29862)
core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
core: Reduce scope of dependencies that may defer reading of data sources when using depends_on or directly referencing managed resources (#29682)
core: ignore_changes could cause a null map to be converted to an empty map (#29928)
cli: Blocks using SchemaConfigModeAttr in the provider SDK can now represented in the plan json output (#29522)
cli: Prevent applying a stale planfile when there was no previous state (#29755)
cli: Improve list nested attribute rendering (#29827)
cli: Improve set nested attribute rendering (#29983)
cli: Improve map and single nested attribute rendering (#29986)
command: Fixed an issue where the backend cache hash value was being updated too early in backend initialization/migrate flows, causing situations where init would not properly restart a backend migration process if that process failed previously. (#29860)
"
57,"1.1.0 (Unreleased)
UPGRADE NOTES:

Terraform on macOS now requires macOS 10.13 High Sierra or later; Older macOS versions are no longer supported.
The terraform graph command no longer supports -type=validate and -type=eval options. The validate graph is always the same as the plan graph anyway, and the ""eval"" graph was just an implementation detail of the terraform console command. The default behavior of creating a plan graph should be a reasonable replacement for both of the removed graph modes. (Please note that terraform graph is not covered by the Terraform v1.0 compatibility promises, because its behavior inherently exposes Terraform Core implementation details, so we recommend it only for interactive debugging tasks and not for use in automation.)

terraform apply with a previously-saved plan file will now verify that the provider plugin packages used to create the plan fully match the ones used during apply, using the same checksum scheme that Terraform normally uses for the dependency lock file. Previously Terraform was checking consistency of plugins from a plan file using a legacy mechanism which covered only the main plugin executable, not any other files that might be distributed alongside in the plugin package.
This additional check should not affect typical plugins that conform to the expectation that a plugin package's contents are immutable once released, but may affect a hypothetical in-house plugin that intentionally modifies extra files in its package directory somehow between plan and apply. If you have such a plugin, you'll need to change its approach to store those files in some other location separate from the package directory. This is a minor compatibility break motivated by increasing the assurance that plugins have not been inadvertently or maliciously modified between plan and apply.
* terraform state mv will now error when legacy -backup or -backup-out options are used without the -state option on non-local backends. These options operate on a local state file only. Previously, these options were accepted but ignored silently when used with non-local backends. 
* backend/azurerm: a new opt-in flag use_microsoft_graph is available which switches to using MSAL authentication tokens and Microsoft Graph rather than using ADAL tokens and Azure Active Directory Graph which is now deprecated by Microsoft. This functionality is disabled by default but will be enabled by default in a future version of Terraform. We encourage you to configure and test this setting with your own Azure AD tenant prior to Terraform 1.2. (#29968)


NEW FEATURES:


moved blocks for refactoring within modules: Module authors can now record in module source code whenever they've changed the address of a resource or resource instance, and then during planning Terraform will automatically migrate existing objects in the state to new addresses.
This therefore avoids the need for module users to manually run terraform state mv after upgrading to a newer module version, as long as the change is expressible as static configuration. However, terraform state mv remains available for use in more complex migration situations that are not well-suited to declarative configuration.
* A new cloud option in the terraform settings block adds a more native integration for Terraform Cloud and its CLI-driven run workflow. The Cloud integration includes several enhancements, including per-run variable support using the -var flag, the ability to map Terraform Cloud workspaces to the current configuration via Workspace Tags, and an improved user experience for Terraform Cloud/Enterprise users with actionable error messages and prompts. (#29826)
* terraform plan and terraform apply: When Terraform plans to destroy a resource instance due to it no longer being declared in the configuration, the proposed plan output will now include a note hinting at what situation prompted that proposal, so you can more easily see what configuration change might avoid the object being destroyed. (#29637)
* terraform plan and terraform apply: When Terraform automatically moves a singleton resource instance to index zero or vice-versa in response to adding or removing count, it'll report explicitly that it did so as part of the plan output. (#29605)
* config: a new type() function, available only in terraform console. (#28501)


ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)
config: A new variable attribute nullable, which defines whether a variable can be null within a module. Setting nullable to false ensures that a variable value will not be null, and that a non-null default is used when null is given as a module argument (#29832)
terraform plan and terraform apply: Terraform will now report explicitly in the UI if it automatically moves a resource instance to a new address as a result of adding or removing the count argument from an existing resource. For example, if you previously had resource ""aws_subnet"" ""example"" without count, you might have aws_subnet.example already bound to a remote object in your state. If you add count = 1 to that resource then Terraform would previously silently rebind the object to aws_subnet.example[0] as part of planning, whereas now Terraform will mention that it did so explicitly in the plan description. (#29605)
terraform workspace delete: will now allow deleting a workspace whose state contains only data resource instances and output values, without running terraform destroy first. Previously the presence of data resources would require using -force to override the safety check guarding against accidentally forgetting about remote objects, but a data resource is not responsible for the management of its associated remote object(s) anyway. (#29754)
provisioner/remote-exec and provisioner/file: When using SSH agent authentication mode on Windows, Terraform can now detect and use the Windows 10 built-in OpenSSH Client's SSH Agent, when available, in addition to the existing support for the third-party solution Pageant that was already supported. (#29747)
cli: terraform state mv will now error when legacy -backup or -backup-out options are used without the -state option on non-local backends (#27908)

BUG FIXES:

backend/oss: Flatten assume_role block attributes, so that they may be more easily represented in a compatible way with terraform_remote_state (#29307)
config: Fixed a bug in which ignore_changes = all would not work in override files (#29849)
core: Use more precise typing information of resources during config validation (#29862)
core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
core: Reduce scope of dependencies that may defer reading of data sources when using depends_on or directly referencing managed resources (#29682)
core: ignore_changes could cause a null map to be converted to an empty map (#29928)
cli: Blocks using SchemaConfigModeAttr in the provider SDK can now represented in the plan json output (#29522)
cli: Prevent applying a stale planfile when there was no previous state (#29755)
cli: Improve list nested attribute rendering (#29827)
command: Fixed an issue where the backend cache hash value was being updated too early in backend initialization/migrate flows, causing situations where init would not properly restart a backend migration process if that process failed previously. (#29860)
"
58,"1.0.11 (November 10, 2021)
ENHANCEMENTS:

backend/oss: Added support for sts_endpoint (#29841)

BUG FIXES:

config: Fixed a bug in which ignore_changes = all would not work in override files (#29849)
config: Numbers are now compared for equality based on their protocol representation, eliminating unexpected changes due to small precision errors (#29864)
"
59,"1.1.0 (Unreleased)
UPGRADE NOTES:

Terraform on macOS now requires macOS 10.13 High Sierra or later; Older macOS versions are no longer supported.
The terraform graph command no longer supports -type=validate and -type=eval options. The validate graph is always the same as the plan graph anyway, and the ""eval"" graph was just an implementation detail of the terraform console command. The default behavior of creating a plan graph should be a reasonable replacement for both of the removed graph modes. (Please note that terraform graph is not covered by the Terraform v1.0 compatibility promises, because its behavior inherently exposes Terraform Core implementation details, so we recommend it only for interactive debugging tasks and not for use in automation.)

terraform apply with a previously-saved plan file will now verify that the provider plugin packages used to create the plan fully match the ones used during apply, using the same checksum scheme that Terraform normally uses for the dependency lock file. Previously Terraform was checking consistency of plugins from a plan file using a legacy mechanism which covered only the main plugin executable, not any other files that might be distributed alongside in the plugin package.
This additional check should not affect typical plugins that conform to the expectation that a plugin package's contents are immutable once released, but may affect a hypothetical in-house plugin that intentionally modifies extra files in its package directory somehow between plan and apply. If you have such a plugin, you'll need to change its approach to store those files in some other location separate from the package directory. This is a minor compatibility break motivated by increasing the assurance that plugins have not been inadvertently or maliciously modified between plan and apply.


NEW FEATURES:


moved blocks for refactoring within modules: Module authors can now record in module source code whenever they've changed the address of a resource or resource instance, and then during planning Terraform will automatically migrate existing objects in the state to new addresses.
This therefore avoids the need for module users to manually run terraform state mv after upgrading to a newer module version, as long as the change is expressible as static configuration. However, terraform state mv remains available for use in more complex migration situations that are not well-suited to declarative configuration.
* A new cloud option in the terraform settings block adds a more native integration for Terraform Cloud and its CLI-driven run workflow. The Cloud integration includes several enhancements, including per-run variable support using the -var flag, the ability to map Terraform Cloud workspaces to the current configuration via Workspace Tags, and an improved user experience for Terraform Cloud/Enterprise users with actionable error messages and prompts. (#29826)
* terraform plan and terraform apply: When Terraform plans to destroy a resource instance due to it no longer being declared in the configuration, the proposed plan output will now include a note hinting at what situation prompted that proposal, so you can more easily see what configuration change might avoid the object being destroyed. (#29637)
* terraform plan and terraform apply: When Terraform automatically moves a singleton resource instance to index zero or vice-versa in response to adding or removing count, it'll report explicitly that it did so as part of the plan output. (#29605)
* config: a new type() function, available only in terraform console. (#28501)


ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)
config: A new variable attribute nullable, which defines whether a variable can be null within a module. Setting nullable to false ensures that a variable value will not be null, and that a non-null default is used when null is given as a module argument (#29832)
terraform plan and terraform apply: Terraform will now report explicitly in the UI if it automatically moves a resource instance to a new address as a result of adding or removing the count argument from an existing resource. For example, if you previously had resource ""aws_subnet"" ""example"" without count, you might have aws_subnet.example already bound to a remote object in your state. If you add count = 1 to that resource then Terraform would previously silently rebind the object to aws_subnet.example[0] as part of planning, whereas now Terraform will mention that it did so explicitly in the plan description. (#29605)
terraform workspace delete: will now allow deleting a workspace whose state contains only data resource instances and output values, without running terraform destroy first. Previously the presence of data resources would require using -force to override the safety check guarding against accidentally forgetting about remote objects, but a data resource is not responsible for the management of its associated remote object(s) anyway. (#29754)
provisioner/remote-exec and provisioner/file: When using SSH agent authentication mode on Windows, Terraform can now detect and use the Windows 10 built-in OpenSSH Client's SSH Agent, when available, in addition to the existing support for the third-party solution Pageant that was already supported. (#29747)

BUG FIXES:

backend/oss: Flatten assume_role block attributes, so that they may be more easily represented in a compatible way with terraform_remote_state (#29307)
config: Fixed a bug in which ignore_changes = all would not work in override files (#29849)
core: Use more precise typing information of resources during config validation (#29862)
core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
core: Reduce scope of dependencies that may defer reading of data sources when using depends_on or directly referencing managed resources (#29682)
cli: Blocks using SchemaConfigModeAttr in the provider SDK can now represented in the plan json output (#29522)
cli: Prevent applying a stale planfile when there was no previous state (#29755)
cli: Improve list nested attribute rendering (#29827)
command: Fixed an issue where the backend cache hash value was being updated too early in backend initialization/migrate flows, causing situations where init would not properly restart a backend migration process if that process failed previously. (#29860)
"
60,"1.1.0 (Unreleased)
UPGRADE NOTES:

Terraform on macOS now requires macOS 10.13 High Sierra or later; Older macOS versions are no longer supported.
The terraform graph command no longer supports -type=validate and -type=eval options. The validate graph is always the same as the plan graph anyway, and the ""eval"" graph was just an implementation detail of the terraform console command. The default behavior of creating a plan graph should be a reasonable replacement for both of the removed graph modes. (Please note that terraform graph is not covered by the Terraform v1.0 compatibility promises, because its behavior inherently exposes Terraform Core implementation details, so we recommend it only for interactive debugging tasks and not for use in automation.)

terraform apply with a previously-saved plan file will now verify that the provider plugin packages used to create the plan fully match the ones used during apply, using the same checksum scheme that Terraform normally uses for the dependency lock file. Previously Terraform was checking consistency of plugins from a plan file using a legacy mechanism which covered only the main plugin executable, not any other files that might be distributed alongside in the plugin package.
This additional check should not affect typical plugins that conform to the expectation that a plugin package's contents are immutable once released, but may affect a hypothetical in-house plugin that intentionally modifies extra files in its package directory somehow between plan and apply. If you have such a plugin, you'll need to change its approach to store those files in some other location separate from the package directory. This is a minor compatibility break motivated by increasing the assurance that plugins have not been inadvertently or maliciously modified between plan and apply.


NEW FEATURES:

A new cloud option in the terraform settings block adds a more native integration for Terraform Cloud and its CLI-driven run workflow. The Cloud integration includes several enhancements, including per-run variable support using the -var flag, the ability to map Terraform Cloud workspaces to the current configuration via Workspace Tags, and an improved user experience for Terraform Cloud/Enterprise users with actionable error messages and prompts. (#29826)
terraform plan and terraform apply: When Terraform plans to destroy a resource instance due to it no longer being declared in the configuration, the proposed plan output will now include a note hinting at what situation prompted that proposal, so you can more easily see what configuration change might avoid the object being destroyed. (#29637)
terraform plan and terraform apply: When Terraform automatically moves a singleton resource instance to index zero or vice-versa in response to adding or removing count, it'll report explicitly that it did so as part of the plan output. (#29605)
config: a new type() function, available only in terraform console. (#28501)

ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)
terraform plan and terraform apply: Terraform will now report explicitly in the UI if it automatically moves a resource instance to a new address as a result of adding or removing the count argument from an existing resource. For example, if you previously had resource ""aws_subnet"" ""example"" without count, you might have aws_subnet.example already bound to a remote object in your state. If you add count = 1 to that resource then Terraform would previously silently rebind the object to aws_subnet.example[0] as part of planning, whereas now Terraform will mention that it did so explicitly in the plan description. (#29605)
terraform workspace delete: will now allow deleting a workspace whose state contains only data resource instances and output values, without running terraform destroy first. Previously the presence of data resources would require using -force to override the safety check guarding against accidentally forgetting about remote objects, but a data resource is not responsible for the management of its associated remote object(s) anyway. (#29754)
provisioner/remote-exec and provisioner/file: When using SSH agent authentication mode on Windows, Terraform can now detect and use the Windows 10 built-in OpenSSH Client's SSH Agent, when available, in addition to the existing support for the third-party solution Pageant that was already supported. (#29747)

BUG FIXES:

core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
core: Reduce scope of dependencies that may defer reading of data sources when using depends_on or directly referencing managed resources (#29682)
cli: Blocks using SchemaConfigModeAttr in the provider SDK can now represented in the plan json output (#29522)
cli: Prevent applying a stale planfile when there was no previous state (#29755)
"
61,"1.0.10 (October 28, 2021)
BUG FIXES:

backend/oss: Fix panic when there's an error looking up OSS endpoints (#29784)
backend/remote: Fix version check when migrating state (#29793)
cli: Restore -lock and -lock-timeout flags for the init command, which were removed in 0.15.0 (#29773)
cli: Fix bug where terraform init -input=false would hang waiting for user input to choose a workspace (#29805)
"
62,"1.1.0 (Unreleased)
UPGRADE NOTES:

Terraform on macOS now requires macOS 10.13 High Sierra or later; Older macOS versions are no longer supported.
The terraform graph command no longer supports -type=validate and -type=eval options. The validate graph is always the same as the plan graph anyway, and the ""eval"" graph was just an implementation detail of the terraform console command. The default behavior of creating a plan graph should be a reasonable replacement for both of the removed graph modes. (Please note that terraform graph is not covered by the Terraform v1.0 compatibility promises, because its behavior inherently exposes Terraform Core implementation details, so we recommend it only for interactive debugging tasks and not for use in automation.)

terraform apply with a previously-saved plan file will now verify that the provider plugin packages used to create the plan fully match the ones used during apply, using the same checksum scheme that Terraform normally uses for the dependency lock file. Previously Terraform was checking consistency of plugins from a plan file using a legacy mechanism which covered only the main plugin executable, not any other files that might be distributed alongside in the plugin package.
This additional check should not affect typical plugins that conform to the expectation that a plugin package's contents are immutable once released, but may affect a hypothetical in-house plugin that intentionally modifies extra files in its package directory somehow between plan and apply. If you have such a plugin, you'll need to change its approach to store those files in some other location separate from the package directory. This is a minor compatibility break motivated by increasing the assurance that plugins have not been inadvertently or maliciously modified between plan and apply.
* Earlier v1.1 alpha releases had an experimental new command terraform add. We've removed that feature and plan to reconsider it before offering an alternative in a later release.


NEW FEATURES:

terraform plan and terraform apply: When Terraform plans to destroy a resource instance due to it no longer being declared in the configuration, the proposed plan output will now include a note hinting at what situation prompted that proposal, so you can more easily see what configuration change might avoid the object being destroyed. (#29637)
terraform plan and terraform apply: When Terraform automatically moves a singleton resource instance to index zero or vice-versa in response to adding or removing count, it'll report explicitly that it did so as part of the plan output. (#29605)
config: a new type() function, available only in terraform console. (#28501)

ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)
terraform plan and terraform apply: Terraform will now report explicitly in the UI if it automatically moves a resource instance to a new address as a result of adding or removing the count argument from an existing resource. For example, if you previously had resource ""aws_subnet"" ""example"" without count, you might have aws_subnet.example already bound to a remote object in your state. If you add count = 1 to that resource then Terraform would previously silently rebind the object to aws_subnet.example[0] as part of planning, whereas now Terraform will mention that it did so explicitly in the plan description. (#29605)
terraform workspace delete: will now allow deleting a workspace whose state contains only data resource instances and output values, without running terraform destroy first. Previously the presence of data resources would require using -force to override the safety check guarding against accidentally forgetting about remote objects, but a data resource is not responsible for the management of its associated remote object(s) anyway. (#29754)
provisioner/remote-exec and provisioner/file: When using SSH agent authentication mode on Windows, Terraform can now detect and use the Windows 10 built-in OpenSSH Client's SSH Agent, when available, in addition to the existing support for the third-party solution Pageant that was already supported. (#29747)

BUG FIXES:

core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
core: Reduce scope of dependencies that may defer reading of data sources when using depends_on or directly referencing managed resources (#29682)
cli: Blocks using SchemaConfigModeAttr in the provider SDK can now represented in the plan json output (#29522)
cli: Prevent applying a stale planfile when there was no previous state (#29755)
"
63,"1.0.9 (October 13, 2021)
BUG FIXES:

core: Fix panic when planning new resources with nested object attributes (#29701)
core: Do not refresh deposed instances when the provider is not configured during destroy (#29720)
core: Prevent panic when encountering a missing change when destroying a resource (#29734)
"
64,"1.1.0 (Unreleased)
UPGRADE NOTES:

Terraform on macOS now requires macOS 10.13 High Sierra or later; Older macOS versions are no longer supported.
The terraform graph command no longer supports -type=validate and -type=eval options. The validate graph is always the same as the plan graph anyway, and the ""eval"" graph was just an implementation detail of the terraform console command. The default behavior of creating a plan graph should be a reasonable replacement for both of the removed graph modes. (Please note that terraform graph is not covered by the Terraform v1.0 compatibility promises, because its behavior inherently exposes Terraform Core implementation details, so we recommend it only for interactive debugging tasks and not for use in automation.)

terraform apply with a previously-saved plan file will now verify that the provider plugin packages used to create the plan fully match the ones used during apply, using the same checksum scheme that Terraform normally uses for the dependency lock file. Previously Terraform was checking consistency of plugins from a plan file using a legacy mechanism which covered only the main plugin executable, not any other files that might be distributed alongside in the plugin package.
This additional check should not affect typical plugins that conform to the expectation that a plugin package's contents are immutable once released, but may affect a hypothetical in-house plugin that intentionally modifies extra files in its package directory somehow between plan and apply. If you have such a plugin, you'll need to change its approach to store those files in some other location separate from the package directory. This is a minor compatibility break motivated by increasing the assurance that plugins have not been inadvertently or maliciously modified between plan and apply.


NEW FEATURES:

terraform plan and terraform apply: When Terraform plans to destroy a resource instance due to it no longer being declared in the configuration, the proposed plan output will now include a note hinting at what situation prompted that proposal, so you can more easily see what configuration change might avoid the object being destroyed. (#29637)
terraform plan and terraform apply: When Terraform automatically moves a singleton resource instance to index zero or vice-versa in response to adding or removing count, it'll report explicitly that it did so as part of the plan output. (#29605)
terraform add: The (currently-experimental) terraform add generates a starting point for a particular resource configuration. (#28874)
config: a new type() function, available only in terraform console. (#28501)

ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)
cli: Terraform will now report explicitly in the UI if it automatically moves a resource instance to a new address as a result of adding or removing the count argument from an existing resource. For example, if you previously had resource ""aws_subnet"" ""example"" without count, you might have aws_subnet.example already bound to a remote object in your state. If you add count = 1 to that resource then Terraform would previously silently rebind the object to aws_subnet.example[0] as part of planning, whereas now Terraform will mention that it did so explicitly in the plan description. (#29605)

BUG FIXES:

core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
cli: Blocks using SchemaConfigModeAttr in the provider SDK can now represented in the plan json output (#29522)
"
65,"1.0.8 (September 29, 2021)
BUG FIXES:

cli: Check required_version as early as possibly during init so that version incompatibility can be reported before errors about new syntax (#29665)
core: Don't plan to remove orphaned resource instances in refresh-only plans (#29640)
"
66,"1.1.0 (Unreleased)
UPGRADE NOTES:

Terraform on macOS now requires macOS 10.13 High Sierra or later; Older macOS versions are no longer supported.
The terraform graph command no longer supports -type=validate and -type=eval options. The validate graph is always the same as the plan graph anyway, and the ""eval"" graph was just an implementation detail of the terraform console command. The default behavior of creating a plan graph should be a reasonable replacement for both of the removed graph modes. (Please note that terraform graph is not covered by the Terraform v1.0 compatibility promises, because its behavior inherently exposes Terraform Core implementation details, so we recommend it only for interactive debugging tasks and not for use in automation.)

NEW FEATURES:

cli: The (currently-experimental) terraform add generates a starting point for a particular resource configuration. (#28874)
config: a new type() function, only available in terraform console (#28501)

ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)
cli: Terraform will now report explicitly in the UI if it automatically moves a resource instance to a new address as a result of adding or removing the count argument from an existing resource. For example, if you previously had resource ""aws_subnet"" ""example"" without count, you might have aws_subnet.example already bound to a remote object in your state. If you add count = 1 to that resource then Terraform would previously silently rebind the object to aws_subnet.example[0] as part of planning, whereas now Terraform will mention that it did so explicitly in the plan description. (#29605)

BUG FIXES:

core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
cli: Blocks using SchemaConfigModeAttr in the provider SDK can now represented in the plan json output (#29522)
"
67,"1.0.7 (September 15, 2021)
BUG FIXES:

core: Remove check for computed attributes which is no longer valid with optional structural attributes (#29563)
core: Prevent object types with optional attributes from being instantiated as concrete values, which can lead to failures in type comparison (#29559)
core: Empty containers in the configuration were not planned correctly when used with optional structural attributes (#29580)
"
68,"1.1.0 (Unreleased)
UPGRADE NOTES:

Terraform on macOS now requires macOS 10.13 High Sierra or later; Older macOS versions are no longer supported.
The terraform graph command no longer supports -type=validate and -type=eval options. The validate graph is always the same as the plan graph anyway, and the ""eval"" graph was just an implementation detail of the terraform console command. The default behavior of creating a plan graph should be a reasonable replacement for both of the removed graph modes. (Please note that terraform graph is not covered by the Terraform v1.0 compatibility promises, because its behavior inherently exposes Terraform Core implementation details, so we recommend it only for interactive debugging tasks and not for use in automation.)

NEW FEATURES:

cli: The (currently-experimental) terraform add generates a starting point for a particular resource configuration. (#28874)
config: a new type() function, only available in terraform console (#28501)

ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)

BUG FIXES:

core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
cli: Blocks using SchemaConfigModeAttr in the provider SDK can now represented in the plan json output (#29522)
"
69,"1.0.6 (September 03, 2021)
ENHANCEMENTS:

backend/s3: Improve SSO handling and add new endpoints in the AWS SDK (#29017)

BUG FIXES:

cli: Suppress confirmation prompt when initializing with the -force-copy flag and migrating state between multiple workspaces. (#29438)
cli: Update tencentcount dependency versions to fix errors when building from source (#29445)
core: Fix panic while handling computed attributes within nested objects, and improve plan validation for unknown values (#29482)
"
70,"1.0.5 (August 18, 2021)
BUG FIXES:

json-output: Add an output change summary message as part of the terraform plan -json structured logs, bringing this format into parity with the human-readable UI. (#29312)
core: Handle null nested single attribute values (#29411)
cli: Fix crash when planning a diff between null and empty sets in nested attributes (#29398)
cli: Fix crash when planning a new resource containing a set of nested object attributes (#29398)
cli: Fix crash when displaying a resource diff where a possibly identifying attribute is sensitive (#29397)
cli: Fix crash when a diff with unknown nested map attributes (#29410)
config: Fix handling of dynamically types arguments in formatlist, ensuring the correct resulting type. (#29408)
config: Floating point operations like floor and ceil can no longer mutate their arguments. (#29408)
"
71,"1.1.0 (Unreleased)
NEW FEATURES:

cli: terraform add generates resource configuration templates (#28874)
config: a new type() function, only available in terraform console (#28501)

ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)

BUG FIXES:

core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
"
72,"1.0.4 (August 04, 2021)
BUG FIXES:

backend/consul: Fix a bug where the state value may be too large for consul to accept (#28838)
cli: Fixed a crashing bug with some edge-cases when reporting syntax errors that happen to be reported at the position of a newline. (#29048)
"
73,"1.1.0 (Unreleased)
NEW FEATURES:

cli: terraform add generates resource configuration templates (#28874)
config: a new type() function, only available in terraform console (#28501)

ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)

BUG FIXES:

core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
cli: Fixed a crashing bug with some edge-cases when reporting syntax errors that happen to be reported at the position of a newline. (#29048)
"
74,"1.0.3 (July 21, 2021)
ENHANCEMENTS

terraform plan: The JSON logs (-json option) will now include resource_drift, showing changes detected outside of Terraform during the refresh step. (#29072)
core: The automatic provider installer will now accept providers that are recorded in their registry as using provider protocol version 6. (#29153)
backend/etcdv3: New argument max_request_bytes allows larger requests and for the client, to match the server request limit. (#28078)

BUG FIXES:

terraform plan: Will no longer panic when trying to render null maps. (#29207)
backend/pg: Prevent the creation of multiple workspaces with the same name. (#29157)
backend/oss: STS auth is now supported. (#29167)
config: Dynamic blocks with unknown for_each values were not being validated. Ensure block attributes are valid even when the block is unknown (#29208)
config: Unknown values in string templates could lose sensitivity, causing the planned change to be inaccurate (#29208)
"
75,"1.1.0 (Unreleased)
NEW FEATURES:

cli: terraform add generates resource configuration templates (#28874)
config: a new type() function, only available in terraform console (#28501)

ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)

BUG FIXES:

core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
cli: Fixed a crashing bug with some edge-cases when reporting syntax errors that happen to be reported at the position of a newline. (#29048)
"
76,"1.0.2 (July 07, 2021)
BUG FIXES:

terraform show: Fix crash when rendering JSON plan with sensitive values in state (#29049)
config: The floor and ceil functions no longer lower the precision of arguments to what would fit inside a 64-bit float, instead preserving precision in a similar way as most other arithmetic functions. (#29110)
config: The flatten function was incorrectly treating null values of an unknown type as if they were unknown values. Now it will treat them the same as any other non-list/non-tuple value, flattening them down into the result as-is. (#29110)
"
77,"1.1.0 (Unreleased)
NEW FEATURES:

cli: terraform add generates resource configuration templates (#28874)
config: a new type() function, only available in terraform console (#28501)

ENHANCEMENTS:

config: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)

BUG FIXES:

core: Fixed an issue where provider configuration input variables were not properly merging with values in configuration (#29000)
cli: Fixed a crashing bug with some edge-cases when reporting syntax errors that happen to be reported at the position of a newline. (#29048)
"
78,"1.0.1 (June 24, 2021)
ENHANCEMENTS:

json-output: The JSON plan output now indicates which state values are sensitive. (#28889)
cli: The darwin builds can now make use of the host DNS resolver, which will fix many network related issues on MacOS.

BUG FIXES:

backend/remote: Fix faulty Terraform Cloud version check when migrating state to the remote backend with multiple local workspaces (#28864)
cli: Fix crash with deposed instances in json plan output (#28922)
core: Fix crash when provider modifies and unknown block during plan (#28941)
core: Diagnostic context was missing for some errors when validating blocks (#28979)
core: Fix crash when calling setproduct with unknown values (#28984)
json-output: Fix an issue where the JSON configuration representation was missing fully-unwrapped references. (#28884)
json-output: Fix JSON plan resource drift to remove unchanged resources. (#28975)
"
79,"1.1.0 (Unreleased)
NEW FEATURES:

lang/funcs: add a new type() function, only available in terraform console (#28501)

ENHANCEMENTS:

configs: Terraform now checks the syntax of and normalizes module source addresses (the source argument in module blocks) during configuration decoding rather than only at module installation time. This is largely just an internal refactoring, but a visible benefit of this change is that the terraform init messages about module downloading will now show the canonical module package address Terraform is downloading from, after interpreting the special shorthands for common cases like GitHub URLs. (#28854)
command/show: The -json output now indicates which state values are sensitive. (#28889)

BUG FIXES:

command/show: Fix an issue where the json configuration representation was missing fully-unwrapped references. (#28884)
"
80,"1.0.0 (June 08, 2021)
Terraform v1.0 is an unusual release in that its primary focus is on stability, and it represents the culmination of several years of work in previous major releases to make sure that the Terraform language and internal architecture will be a suitable foundation for forthcoming additions that will remain backward compatible.
Terraform v1.0.0 intentionally has no significant changes compared to Terraform v0.15.5. You can consider the v1.0 series as a direct continuation of the v0.15 series; we do not intend to issue any further releases in the v0.15 series, because all of the v1.0 releases will be only minor updates to address bugs.
For all future minor releases with major version 1, we intend to preserve backward compatibility as described in detail in the Terraform v1.0 Compatibility Promises. The later Terraform v1.1.0 will, therefore, be the first minor release with new features that we will implement with consideration of those promises."
81,"0.15.5 (June 02, 2021)
BUG FIXES:

terraform plan and terraform apply: Don't show ""Objects have changed"" notification when the detected changes are only internal details related to legacy SDK quirks. (#28796)
core: Prevent crash during planning when encountering a deposed instance that has been removed from the configuration. (#28766)
core: Fix crash when rendering changes to deposed instances outside of Terraform. (#28796)
core: Restore a missing error when attempting to import a non-existent remote object. (#28808)
core: Fix bug where Terraform failed to release the state lock when applying a stale saved plan failed. (#28819)
"
82,"0.15.4 (May 19, 2021)
NEW FEATURES:


Noting changes made outside of Terraform: Terraform has always, by default, made a point during the planning operation of reading the current state of remote objects in order to detect any changes made outside of Terraform, to make sure the plan will take those into account.
Terraform will now report those detected changes as part of the plan result, in order to give additional context about the planned changes. We've often heard that people find it confusing when a plan includes a change that doesn't seem to be prompted by any recent change in the configuration, and so this feature is aiming to provide the previously-missing explanation for situations where Terraform is planning to undo a change.
It can also be useful just as general information when the change won't be undone by Terraform: if you've intentionally made a change outside of Terraform and mirrored that change in your configuration then Terraform will now confirm that it noticed the change you made and took it into account when planning.
By default this new output is for information only and doesn't change any behavior. If Terraform detects a change you were expecting then you don't need to take any additional action to respond to it. However, we've also added a new planning mode -refresh-only which allows you to explicitly plan and apply the action of writing those detected changes to the Terraform state, which serves as a plannable replacement for terraform refresh. We don't have any plans to remove the long-standing terraform refresh command, but we do recommend using terraform apply -refresh-only instead in most cases, because it will provide an opportunity to review what Terraform detected before updating the Terraform state.


UPGRADE NOTES:

This release adds some new reserved reference prefixes to make them available for later work. These are resource., template., arg., and lazy.. We don't expect these additions to cause problems for most existing configurations, but could cause a conflict if you are using a custom provider which has a resource type named exactly ""resource"", ""template"", ""arg"", or ""lazy"". In that unlikely event, you can escape references to resources of those types by adding a resource. prefix; for example, if you have a resource ""template"" ""foo"" then you can change references to it from template.foo to resource.template.foo in order to escape the new meaning.

ENHANCEMENTS:

config: The various functions that compute hashs of files on disk, like filesha256, will now stream the contents of the given file into the hash function in smaller chunks. Previously they would always read the entire file into memory before hashing it, due to following a similar implementation strategy as the file function. (#28681)
config: Some new escaping syntax which is not yet useful but will be part of the backward-compatibility story for certain future language editions. (#28709)
core: Rsource diagnostics are no longer lost on remote state storage fails (#28724)
core: Diagnostics from provisioner failures are now shown in CLI output (#28753)
terraform init: add a new -migrate-state flag instead of automatic state migration, to prevent failing when old backend config is not usable (#28718)
terraform plan and terraform apply: will now report any changes Terraform detects during the ""refresh"" phase for each managed object, providing confirmation that Terraform has seen those changes and, where appropriate, extra context to help understand the planned change actions that follow. (#28634)
terraform plan and terraform apply: now have a new option -refresh-only to activate the ""refresh only"" planning mode, which causes Terraform to ignore any changes suggested by the configuration but still detect any changes made outside of Terraform since the latest terraform apply. (#28634)
backend/gcs: Terraform Core now supports Workload Identity Federation. The federated JSON credentials must be loaded through the GOOGLE_APPLICATION_CREDENTIALS environment variable. This is also available in the Google Provider in versions newer than v3.61. (#28296)
backend/remote: supports several new CLI options when running plans and applies with Terraform Cloud: -refresh=false, -replace, and -refresh-only. (#28746)

BUG FIXES:

core: Fix sensitivity handling with plan values, which could cause the sensitive marks to be lost during apply leading to a perpetual diff (#28687)
core: Fix crash when specifying SSH bastion_port in a resource connection block (#28665)
core: Terraform will now upgrade and refresh (unless disabled) deposed objects during planning, in a similar manner as for objects that have been removed from the configuration. ""Deposed"" is how Terraform represents the situation where a create_before_destroy replacement failed to destroy the old object, in which case Terraform needs to track both the new and old objects until the old object is successfully deleted. Refreshing these during planning means that you can, if you wish, delete a ""deposed"" object manually outside of Terraform and then have Terraform detect that you've done so. (#28634)
config: Improve the sensitivity support for lookup and length functions, which were accidentally omitted from the larger update in 0.15.1 (#28509)
backend/gcs: Fixed a bug where service account impersonation didn't work if the original identity was another service account (#28139)
"
83,"0.15.3 (May 06, 2021)
ENHANCEMENTS:

terraform show: Add data to the JSON plan output describing which changes caused a resource to be replaced (#28608)

BUG FIXES:

terraform show: Fix crash for JSON plan output of new resources with sensitive attributes in nested blocks (#28624)
"
84,"0.15.2 (May 05, 2021)
ENHANCEMENTS:

terraform plan and terraform apply: Both now support a new planning option -replace=... which takes the address of a resource instance already tracked in the state and forces Terraform to upgrade either an update or no-op plan for that instance into a ""replace"" (either destroy-then-create or create-then-destroy depending on configuration), to allow replacing a degraded object with a new object of the same configuration in a single action and preview the effect of that before applying it.
terraform apply: Now has a -destroy option for symmetry with terraform plan -destroy, which makes terraform destroy effectively an alias for terraform apply -destroy. This change is only for consistency between terraform plan and terraform apply; there are no current plans to deprecate terraform destroy. (#28489)
core: Update HCL to allow better planning of dynamic blocks (#28424)
core: Unmark values when planning data sources (#28539)

BUG FIXES:

command/format: Fix various issues with nested-type attribute formatting (#28600)
core: Fix JSON plan output to add sensitivity data for provider-specified sensitive attribute values (#28523)
cli: Fix missing ""forces replacement"" UI for attribute changes which are marked as sensitive by the provider (#28583)
cli: Fix crash when rendering diagnostic caused by missing trailing quote (#28598)
functions: Fix crash when calling setproduct with one or more empty collections (#28607)
"
85,"0.15.1 (April 26, 2021)
ENHANCEMENTS:


config: Various Terraform language functions now have more precise inference rules for propagating the ""sensitive"" characteristic values.
The affected functions are chunklist, concat, flatten, keys, length, lookup, merge, setproduct, tolist, tomap, values, and zipmap. The details are a little different for each of these but the general idea is to, as far as possible, preserve the sensitive characteristic on individual element or attribute values in result structures rather than always conservatively applying sensitivity to the whole result.
The primary benefit of these improvements is that you can now use these functions as part of constructing maps for for_each in situations where the input collection is never sensitive but some of the elements/attributes inside might be. (#28446] [#28460)
* cli: Update the HashiCorp public key (#28505)
* cli: Diagnostic messages can now be annotated with resource and provider addresses. (#28275)
* cli: terraform login now has a new user experience for successful log-ins to Terraform Cloud and Terraform Enterprise. (#28487)
* core: Minor graph performance optimizations. (#28329)


BUG FIXES:

config: Fix validation error when passing providers from a non-default namespace into modules. (#28414)
cli: Fix missing colors and extraneous resource summary for plan/apply with the remote backend. (#28409)
cli: Diagnostics messages will only indicate that a referenced value is sensitive if that value is directly sensitive, as opposed to being a complex-typed value that contains a sensitive value. (#28442)
core: Don't trigger data source reads from changes in sibling module instances. (#28267)
core: Restore saved dependencies when a resource destroy operation fails. (#28317)
core: Fix crash when setting sensitive attributes to a sensitive value. (#28383)
core: Loosen output value sensitivity requirement for non-root modules. This means that modules which may receive sensitive values as input variables no longer need to mark all related outputs as sensitive. The requirement for root modules to specify the sensitive attribute for sensitive values remains, with an extended diagnostic message to explain why. (#28472)
provisioner: Fix panic with unexpected null values in provisioner configuration (#28457)
"
86,"0.14.11 (April 26, 2021)
ENHANCEMENTS:

cli: Update the HashiCorp public key (#28503)
"
87,"0.13.7 (April 26, 2021)
ENHANCEMENTS:

cli: Update the HashiCorp public key (#28500)
"
88,"0.12.31 (April 26, 2021)
ENHANCEMENTS:

cli: Update the HashiCorp public key (#28499)
"
89,"0.11.15 (April 26, 2021)
IMPROVEMENTS:

cli: Update the HashiCorp Public Key (#28498)
backend/http: New options for retries on outgoing requests. (#19702)
communicator/ssh: Keepalive support (#20437)
"
90,"0.15.0 (April 14, 2021)
UPGRADE NOTES AND BREAKING CHANGES:
The following is a summary of each of the changes in this release that might require special consideration when upgrading. Refer to the Terraform v0.15 upgrade guide for more details and recommended upgrade steps.


""Proxy configuration blocks"" (provider blocks with only alias set) in shared modules are now replaced with a more explicit configuration_aliases argument within the required_providers block. Some support for the old syntax is retained for backward compatibility, but we've added explicit error messages for situations where Terraform would previously silently misinterpret the purpose of an empty provider block. (#27739)


The list and map functions, both of which were deprecated since Terraform v0.12, are now removed. You can replace uses of these functions with tolist([...]) and tomap({...}) respectively. (#26818)


Terraform now requires UTF-8 character encoding and virtual terminal support when running on Windows. This unifies Terraform's terminal handling on Windows with that of other platforms, as per Microsoft recommendations. Terraform previously required these terminal features on all other platforms, and now requires them on Windows too.
UTF-8 and virtual terminal support were introduced across various Windows 10 updates, and so Terraform is no longer officially supported on the original release of Windows 10 or on Windows 8 and earlier. However, there are currently no technical measures to artificially prevent Terraform from running on these obsolete Windows releases, and so you may still be able to use Terraform v0.15 on older Windows versions if you either disable formatting (using the -no-color) option, or if you use a third-party terminal emulator package such as ConEmu, Cmder, or mintty.
We strongly encourage planning to migrate to a newer version of Windows rather than relying on these workarounds for the long term, because the Terraform team will test future releases only on up-to-date Windows 10 and can therefore not guarantee ongoing support for older versions.


Built-in vendor provisioners (chef, habitat, puppet, and salt-masterless) have been removed. (#26938)


Interrupting execution will now cause terraform to exit with a non-zero exit status. (#26738)


The trailing [DIR] argument to specify the working directory for various commands is no longer supported. Use the global -chdir option instead. (#27664)
For example, instead of terraform init infra, write terraform -chdir=infra init.
* The -lock and -lock-timeout options are no longer available on terraform init (#27464)


The -verify-plugins=false option is no longer available on terraform init. (Terraform now always verifies plugins.) (#27461)


The -get-plugins=false option is no longer available on terraform init. (Terraform now always installs plugins.) (#27463)


The -force option is no longer available on terraform destroy. Use -auto-approve instead (#27681)


The -var and -var-file options are no longer available on terraform validate. These were deprecated and have had no effect since Terraform v0.12. (#27906)


terraform version -json output no longer includes the (previously-unpopulated) ""revision"" property (#27484)


In the gcs backend the path config argument, which was deprecated since Terraform v0.11, is now removed. Use the prefix argument instead. (#26841)


The deprecated ignore_changes = [""*""] wildcard syntax is no longer supported. Use ignore_changes = all instead. (#27834)


Previously deprecated quoted variable type constraints are no longer supported. Follow the instructions in the error message to update your type signatures to be more explicit. For example, use map(string) instead of ""map"". (#27852)


Terraform will no longer make use of the HTTP_PROXY environment variable to determine proxy settings for connecting to HTTPS servers. You must always set HTTPS_PROXY if you intend to use a proxy to connect to an HTTPS server. (Note: This affects only connections made directly from Terraform CLI. Terraform providers are separate programs that make their own requests and may thus have different proxy configuration behaviors.)


Provider-defined sensitive attributes will now be redacted throughout the plan output. You may now see values redacted as (sensitive) that were previously visible, because sensitivity did not follow provider-defined sensitive attributes.
If you are transforming a value and wish to force it not to be sensitive, such as if you are transforming a value in such a way that removes the sensitive data, we recommend using the new nonsensitive function to hint Terraform that the result is not sensitive.


The atlas backend, which was deprecated since Terraform v0.12, is now removed. (#26651)


We've upgraded the underlying TLS and certificate-related libraries that Terraform uses when making HTTPS requests to remote systems. This includes the usual tweaks to preferences for different cryptographic algorithms during handshakes and also some slightly-stricter checking of certificate syntax. These changes should not cause problems for correctly-implemented HTTPS servers, but can sometimes cause unexpected behavior changes with servers or middleboxes that don't comply fully with the relevant specifications.


ENHANCEMENTS:

config: A required_providers entry can now contain configuration_aliases to declare additional configuration aliases names without requirring a configuration block (#27739)
config: Improved type inference for conditional expressions. (#28116)
config: Provider-defined sensitive attributes will now be redacted throughout the plan output. (#28036)
config: New function one for concisely converting a zero-or-one element list/set into a single value that might be null. (#27454)
config: New functions sensitive and nonsensitive allow module authors to explicitly override Terraform's default infererence of value sensitivity for situations where it's too conservative or not conservative enough. (#27341)
config: Terraform will now emit a warning if you declare a backend block in a non-root module. Terraform has always ignored such declarations, but previously did so silently. This is a warning rather than an error only because it is sometimes convenient to temporarily use a root module as if it were a child module in order to test or debug its behavior separately from its main backend. (#26954)
config: Removed warning about interpolation-only expressions being deprecated, because terraform fmt now automatically fixes most cases that the warning would previously highlight. We still recommend using simpler expressions where possible, but the deprecation warning had caused a common confusion in the community that the interpolation syntax is always deprecated, rather than only in the interpolation-only case. (#27835)
config: The family of error messages with the summary ""Invalid for_each argument"" will now include some additional context about which external values contributed to the result, making it easier to find the root cause of the error. (#26747)
config: Terraform now does text processing using the rules and tables defined for Unicode 13. Previous versions were using Unicode 12 rules.
terraform init: Will now make suggestions for possible providers on some registry failures, and generally remind of required_providers on all registry failures. (#28014)
terraform init: Provider installation will now only attempt to rewrite .terraform.lock.hcl if it would contain new information. (#28230)
terraform init: New -lockfile=readonly option, which suppresses writing changes to the dependency lock file. Any installed provider packages must already be recorded in the lock file, or initialization will fail. Use this if you are managing the lock file via a separate process and want to avoid adding new checksums for existing dependencies. (#27630)
terraform show: Improved performance when rendering large plans as JSON. (#27998)
terraform validate: The JSON output now includes a code snippet object for each diagnostic. If present, this object contains an excerpt of the source code which triggered the diagnostic, similar to what Terraform would include in human-oriented diagnostic messages. (#28057)
cli: Terraform now uses UTF-8 and full VT mode even when running on Windows. Previously Terraform was using the ""classic"" Windows console API, which was far more limited in what formatting sequences it supported and which characters it could render. (#27487)
cli: Improved support for Windows console UI on Windows 10, including bold colors and underline for HCL diagnostics. (#26588)
cli: Diagnostic messages now have a vertical line along their left margin, which we hope will achieve a better visual hierarchy for sighted users and thus make it easier to see where the errors and warnings start and end in relation to other content that might be printed alongside. (#27343)
cli: Typing an invalid top-level command, like terraform destory instead of destroy, will now print out a specific error message about the command being invalid, rather than just printing out the usual help directory. (#26967)
cli: Plugin crashes will now be reported with more detail, pointing out the plugin name and the method call along with the stack trace (#26694)
cli: Core and Provider logs can now be enabled separately for debugging, using TF_LOG_CORE and TF_LOG_PROVIDER (#26685)
backend/azurerm: Support for authenticating as AzureAD users/roles. (#28181)
backend/pg: Now allows locking of each workspace separately, whereas before the locks were global across all workspaces. (#26924)

BUG FIXES:

config: Fix multiple upstream crashes with optional attributes and sensitive values. (#28116)
config: Fix various panics in the experimental defaults function. (#27979, #28067)
config: Fix crash with resources which have sensitive iterable attributes. (#28245)
config: Fix crash when referencing resources with sensitive fields that may be unknown. (#28180)
terraform validate: Validation now ignores providers that lack configuration, which is useful for validating modules intended to be called from other modules which therefore don't include their own provider configurations. (#24896)
terraform fmt: Fix fmt output when unwrapping redundant multi-line string interpolations (#28202)
terraform console: expressions using path (path.root, path.module) now return the same result as they would in a configuration (#27263)
terraform show: Fix crash when rendering JSON plans containing iterable unknown values. (#28253)
terraform show: fix issue with child_modules not properly displaying in certain circumstances. (#27352)
terraform state list: fix bug where nested modules' resources were missing (#27268)
terraform state mv: fix display names in errors and improve error when failing to target a whole resource (#27482)
terraform taint: show resource name in -allow-missing warning (#27501)
terraform untaint: show resource name in -allow-missing warning (#27502)
cli: All commands will now exit with an error if unable to read input at an interactive prompt. For example, this may happen when running in a non-interactive environment but without -input=false. Previously Terraform would behave as if the user entered an empty string, which often led to confusing results. (#26509)
cli: TF_LOG levels other than trace will now work reliably. (#26632)
core: Fix crash when trying to create a destroy plan with -refresh=false. (#28272)
core: Extend the Terraform plan file format to include information about sensitivity and required-replace. This ensures that the output of terraform show saved.tfplan matches terraform plan, and sensitive values are elided. (#28201)
core: Ensure that stored dependencies are retained when a resource is removed entirely from the configuration, and create_before_destroy ordering is preserved. (#28228)
core: Resources removed from the configuration will now be destroyed before their dependencies are updated. (#28165)
core: Refresh data sources while creating a destroy plan, in case their results are important for destroy operations. (#27408)
core: Fix missing deposed object IDs in apply logs (#27796)
backend/azurerm: Fix nil pointer crashes with some state operations. (#28181, #26721)
backend/azure: Fix interactions between state reading, state creating, and locking. (#26561)

EXPERIMENTS:

provider_sensitive_attrs: This experiment has now concluded, and its functionality is now on by default. If you were previously participating in this experiment then you can remove the experiment opt-in with no other necessary configuration changes.
There is now a terraform test command, which is currently an experimental feature serving as part of the Module Testing Experiment. 
"
91,"0.15.0 (Unreleased)
BUG FIXES:

core: Fix crash when rendering JSON plans containing iterable unknown values (#28253)
"
92,"0.14.10 (April 07, 2021)
BUG FIXES:

cli: Only rewrite provider locks file if its contents has changed. (#28230)
"
93,"0.15.0-rc1 (Unreleased)
ENHANCEMENTS:

backend/azurerm: Dependency Update and Fixes (#28181)

BUG FIXES:

core: Fix crash when referencing resources with sensitive fields that may be unknown (#28180)
core: Fix crash with resources which have sensitive iterable attributes  (#28245)
core: Extend the Terraform plan file format to include information about sensitivity and required-replace. This ensures that the output of terraform show saved.tfplan matches terraform plan, and sensitive values are elided. (#28201)
core: Ensure that stored dependencies are retained when a resource is removed entirely from the configuration, and create_before_destroy ordering is preserved (#28228)
core: Resources removed from the configuration will now be destroyed before their dependencies are updated (#28165)
cli: Fix fmt output when unwrapping redundant multi-line string interpolations (#28202)
cli: Only rewrite provider locks file if its contents has changed. (#28230)
"
94,"0.14.9 (March 24, 2021)
BUG FIXES:

backend/remote: Fix error when migrating existing state to a new workspace on Terraform Cloud/Enterprise. (#28093)
"
95,"UPGRADE NOTES:
The output of terraform validate -json has been extended to include a code snippet object for each diagnostic. If present, this object contains an excerpt of the source code which triggered the diagnostic. Existing fields in the JSON output remain the same as before. (#28057)
ENHANCEMENTS:

config: Improved type inference in conditional statements (#28116)
config: provider-defined sensitive attributes redaction is no longer experimental, but default behavior (#28036)
config: New functions sensitive and nonsensitive allow module authors to explicitly override Terraform's default infererence of value sensitivity for situations where it's too conservative or not conservative enough. (#27341)
terraform init: Give suggestions for possible providers on some registry failures, and generally remind of required_providers on all registry failures (#28014)
terraform init: Add -lockfile=readonly flag, which suppresses writing changes to the dependency lock file. Depencies must be able to be verified against the read-only lock file, or initialization will fail. This is useful if you are managing the lock file in a separate process and want to avoid adding new hashes for existing dependencies. (#27630)
core: Reduce string allocations to improve execution time when rendering large plans as JSON (#27998)
backend/pg: allow locking of independent states (#26924)

BUG FIXES:

cli: Fix for missing configuration snippets in diagnostics, a bug introduced in 0.15.0-beta1 (#27944)
config: Fix multiple upstream crashes with optional attributes and sensitive values (#28116)
config: Fix panics in defaults caused by missing nested optional collection types, and mismatched primitive fallback types (#27979)
config: Fix panics in defaults caused by missing nested optional structural types, and corresponding missing defaults (#28067)
"
96,"BUG FIXES:

config: Update HCL package to fix panics when indexing using sensitive values (#28034)
core: Fix error when using sensitive values in provisioner configuration (#27819)
core: Fix empty diags not getting associated with source (#28029)
backend/remote: Fix non-functional -lock-timeout argument when using the remote backend with local operations (#27845)

ENHANCEMENTS:

config: Terraform now does text processing using the rules and tables defined for Unicode 13. Previous versions were using Unicode 12 rules (#28034)
"
97,"0.15.0-beta1 (Unreleased)
BREAKING CHANGES:

Empty provider configuration blocks should be removed from modules. If a configuration alias is required within the module, it can be defined using the configuration_aliases argument within required_providers. Existing module configurations which were accepted but could produce incorrect or undefined behavior may now return errors when loading the configuration. (#27739)
The list and map functions, both of which were deprecated since Terraform v0.12, are now removed. You can replace uses of these functions with tolist([...]) and tomap({...}) respectively. (#26818)

Terraform now requires UTF-8 character encoding and virtual terminal support when running on Windows. This unifies Terraform's terminal handling on Windows with that of other platforms, as per Microsoft recommendations. Terraform previously required these terminal features on all other platforms, and now requires them on Windows too.
UTF-8 and virtual terminal support were introduced across various Windows 10 updates, and so Terraform is no longer officially supported on the original release of Windows 10 or on Windows 8 and earlier. However, there are currently no technical measures to artificially prevent Terraform from running on these obsolete Windows releases, and so you may still be able to use Terraform v0.15 on older Windows versions if you either disable formatting (using the -no-color) option, or if you use a third-party terminal emulator package such as ConEmu, Cmder, or mintty.
We strongly encourage planning to migrate to a newer version of Windows rather than relying on these workarounds for the long term, because the Terraform team will test future releases only on up-to-date Windows 10 and can therefore not guarantee ongoing support for older versions.


Interrupting execution will now cause terraform to exit with a non-zero exit status. (#26738)


The trailing [DIR] argument to specify the working directory for various commands is no longer supported. Use the global -chdir option instead. (#27664)
For example, instead of terraform init infra, write terraform -chdir=infra init.
* The -lock and -lock-timeout options are no longer available on terraform init (#27464)
* The -verify-plugins=false option is no longer available on terraform init. (Terraform now always verifies plugins.) (#27461)
* The -get-plugins=false option is no longer available on terraform init. (Terraform now always installs plugins.) (#27463)
* The -force option is no longer available on terraform destroy. Use -auto-approve instead (#27681)
* The -var and -var-file options are no longer available on terraform validate. These had no effect and were deprecated. (#27906)
* terraform version -json output no longer includes the (previously-unpopulated) ""revision"" property (#27484)
* The atlas backend, which was deprecated since Terraform v0.12, is now removed. (#26651)
* In the gcs backend the path config argument, which was deprecated since Terraform v0.11, is now removed. Use the prefix argument instead. (#26841)
* The deprecated ignore_changes = [""*""] wildcard syntax will now error. Use = all instead. (#27834)
* Previously deprecated quoted type strings will now error rather than warn - follow the instructions in the error message to update your type signatures to be more explicit. For example, use map(string) instead of ""map"". (#27852)
* Terraform will no longer make use of the HTTP_PROXY environment variable to determine proxy settings for connecting to HTTPS servers. You must always set HTTPS_PROXY if you intend to use a proxy to connect to an HTTPS server. (Note: This affects only connections made directly from Terraform CLI. Terraform providers are separate programs that make their own requests and may thus have different proxy configuration behaviors.)
* We've upgraded the underlying TLS and certificate-related libraries that Terraform uses when making HTTPS requests to remote systems. This includes the usual tweaks to preferences for different cryptographic algorithms during handshakes and also some slightly-stricter checking of certificate syntax. These changes should not cause problems for correctly-implemented HTTPS servers, but can sometimes cause unexpected behavior changes with servers or middleboxes that don't comply fully with the relevant specifications.


ENHANCEMENTS:

backend/azurerm: updating the dependencies for the Azure Backend (#26721)
config: A required_providers entry can now contain configuration_aliases to declare additional configuration aliases names without requirring a configuration block (#27739)
config: Terraform will now emit a warning if you declare a backend block in a non-root module. Terraform has always ignored such declarations, but previously did so silently. This is a warning rather than an error only because it is sometimes convenient to temporarily use a root module as if it were a child module in order to test or debug its behavior separately from its main backend. (#26954)
config: Removed warning surrounding interpolation-only expressions - many of these are caught by fmt and we are removing the warning rather than upgrading it to an error (#27835)
config: Terraform now does text processing using the rules and tables defined for Unicode 13. Previous versions were using Unicode 12 rules.
cli: The family of error messages with the summary ""Invalid for_each argument"" will now include some additional context about which external values contributed to the result. (#26747)
cli: Terraform now uses UTF-8 and full VT mode even when running on Windows. Previously Terraform was using the ""classic"" Windows console API, which was far more limited in what formatting sequences it supported and which characters it could render. (#27487)
cli: Improved support for Windows console UI on Windows 10, including bold colors and underline for HCL diagnostics. (#26588)
cli: Diagnostic messages now have a vertical line along their left margin, which we hope will achieve a better visual hierarchy for sighted users and thus make it easier to see where the errors and warnings start and end in relation to other content that might be printed alongside. (#27343)
cli: Typing an invalid top-level command, like terraform destory instead of destroy, will now print out a specific error message about the command being invalid, rather than just printing out the usual help directory. (#26967)
cli: Plugin crashes will now be reported with more detail, pointing out the plugin name and the method call along with the stack trace (#26694)
cli: Values in files for undeclared variables (ex. tfvars) are no longer deprecated, but will continue to produce a warning. The number of warnings produced has been reduced from 3 full warnings before a summary to two. To provide ""global"" values across configurations, use TF_VAR... environment variables. To reduce the verbosity of the warnings, use the existing -compact-warnings option. (#27795)
cli: The cli now handles structured logs throughout, allowing for additional log context from providers to be maintained, and offering new options for output filters. (#26632)
cli: Core and Provider logs can now be enabled separately for debugging, using TF_LOG_CORE and TF_LOG_PROVIDER (#26685)
cli: Experimental terraform test command. (TODO: Include a link to the experiment's documentation page as part of aggregating the 0.15.0 prerelease changelogs into the final 0.15.0 changelog) (#27873)

BUG FIXES:

cli: Exit with an error if unable to gather input from the UI. For example, this may happen when running in a non-interactive environment but without -input=false. Previously Terraform would interpret these errors as empty strings, which could be confusing. (#26509)
cli: TF_LOG levels other than trace will now work correctly (#26632)
command/console: expressions using path (path.root, path.module) now return the same result as they would in a configuration (#27263)
command/show: fix issue with child_modules not properly displaying in certain circumstances (#27352)
command/state list: fix bug where nested modules' resources were missing from state list output (#27268)
command/state mv: fix display names in errors and improve error when failing to target a whole resource (#27482)
command/taint: show resource name in -allow-missing warning (#27501)
command/untaint: show resource name in -allow-missing warning (#27502)
core: validate will now ignore providers without configuration (#24896)
core: refresh data sources during destroy (#27408)
core: fix missing deposed object ID in apply logs (#27796)
backend/azure: azure state refreshes outside of grabbing the lock (#26561)
"
98,"0.14.7 (February 17, 2021)
ENHANCEMENTS:

cli: Emit an ""already installed"" event when a provider is found already installed (#27722)
provisioner/remote-exec: Can now run in a mode that expects the remote system to be running Windows and excuting commands using the Windows command interpreter, rather than a Unix-style shell. Specify the target_platform as ""windows"" in the connection block. (#26865)

BUG FIXES:

cli: Fix show -json not outputting the full module tree when some child modules have no resources (#27352)
cli: Fix excessively slow rendering of very large multi-line string outputs (#27746)
cli: Fix missing provider requirements in JSON plan when specified using required_providers instead of provider config (#27697)
"
99,"0.15.0 (Unreleased)
BREAKING CHANGES:

The list and map functions, both of which were deprecated since Terraform v0.12, are now removed. You can replace uses of these functions with tolist([...]) and tomap({...}) respectively. (#26818)

Terraform now requires UTF-8 character encoding and virtual terminal support when running on Windows. This unifies Terraform's terminal handling on Windows with that of other platforms, as per Microsoft recommendations. Terraform previously required these terminal features on all other platforms, and now requires them on Windows too.
UTF-8 and virtual terminal support were introduced across various Windows 10 updates, and so Terraform is no longer officially supported on the original release of Windows 10 or on Windows 8 and earlier. However, there are currently no technical measures to artificially prevent Terraform from running on these obsolete Windows releases, and so you may still be able to use Terraform v0.15 on older Windows versions if you either disable formatting (using the -no-color) option, or if you use a third-party terminal emulator package such as ConEmu, Cmder, or mintty.
We strongly encourage planning to migrate to a newer version of Windows rather than relying on these workarounds for the long term, because the Terraform team will test future releases only on up-to-date Windows 10 and can therefore not guarantee ongoing support for older versions.


Interrupting execution will now cause terraform to exit with a non-zero exit status. (#26738)


The trailing [DIR] argument to specify the working directory for various commands is no longer supported. Use the global -chdir option instead. (#27664)
For example, instead of terraform init infra, write terraform -chdir=infra init.
* The -lock and -lock-timeout options are no longer available on terraform init (#27464)
* The -verify-plugins=false option is no longer available on terraform init. (Terraform now always verifies plugins.) (#27461)
* The -get-plugins=false option is no longer available on terraform init. (Terraform now always installs plugins.) (#27463)
* The -force option is no longer available on terraform destroy. Use -auto-approve instead (#27681)
* terraform version -json output no longer includes the (previously-unpopulated) ""revision"" property [#27484] 
* The atlas backend, which was deprecated since Terraform v0.12, is now removed. (#26651)
* In the gcs backend the path config argument, which was deprecated since Terraform v0.11, is now removed. Use the prefix argument instead. (#26841)


ENHANCEMENTS:

config: Terraform will now emit a warning if you declare a backend block in a non-root module. Terraform has always ignored such declarations, but previously did so silently. This is a warning rather than an error only because it is sometimes convenient to temporarily use a root module as if it were a child module in order to test or debug its behavior separately from its main backend. (#26954)
cli: The family of error messages with the summary ""Invalid for_each argument"" will now include some additional context about which external values contributed to the result. (#26747)
cli: Terraform now uses UTF-8 and full VT mode even when running on Windows. Previously Terraform was using the ""classic"" Windows console API, which was far more limited in what formatting sequences it supported and which characters it could render. (#27487)
cli: Improved support for Windows console UI on Windows 10, including bold colors and underline for HCL diagnostics. (#26588)
cli: Diagnostic messages now have a vertical line along their left margin, which we hope will achieve a better visual heirarchy for sighted users and thus make it easier to see where the errors and warnings start and end in relation to other content that might be printed alongside. (#27343)
cli: Typing an invalid top-level command, like terraform destory instead of destroy, will now print out a specific error message about the command being invalid, rather than just printing out the usual help directory. (#26967)
cli: Plugin crashes will now be reported with more detail, pointing out the plugin name and the method call along with the stack trace (#26694)
provisioner/remote-exec: Can now run in a mode that expects the remote system to be running Windows and excuting commands using the Windows command interpreter, rather than a Unix-style shell. Specify the target_platform as ""windows"" in the connection block. (#26865)

BUG FIXES:

cli: Exit with an error if unable to gather input from the UI. For example, this may happen when running in a non-interactive environment but without -input=false. Previously Terraform would interpret these errors as empty strings, which could be confusing. (#26509)
cli: TF_LOG levels other than trace will now work correctly (#26632)
cli: Core and Provider logs can now be enabled separately for debugging, using TF_LOG_CORE and TF_LOG_PROVIDER (#26685)
command/console: expressions using path (path.root, path.module) now return the same result as they would in a configuration (#27263)
command/show: fix issue with child_modules not properly displaying in certain circumstances (#27352)
command/state list: fix bug where nested modules' resources were missing from state list output (#27268)
command/state mv: fix display names in errors and improve error when failing to target a whole resource (#27482)
command/taint: show resource name in -allow-missing warning (#27501)
command/untaint: show resource name in -allow-missing warning (#27502)
core: validate will now ignore providers without configuration (#24896)
core: refresh data sources during destroy (#27408)
"
100,"0.14.6 (February 04, 2021)
ENHANCEMENTS:

backend/s3: Add support for AWS Single-Sign On (SSO) cached credentials (#27620)

BUG FIXES:

cli: Rerunning init will reuse installed providers rather than fetching the provider again (#27582)
config: Fix panic when applying a config using sensitive values in some block sets (#27635)
core: Fix ""Invalid planned change"" error when planning tainted resource which no longer exists (#27563)
core: Fix panic when refreshing data source which contains sensitive values (#27567)
core: Fix init with broken link in plugin_cache_dir (#27447)
core: Prevent evaluation of removed data source instances during plan (#27621)
core: Don't plan changes for outputs that remain null (#27512)
"
101,"0.15.0 (Unreleased)
BREAKING CHANGES:

The list and map functions, both of which were deprecated since Terraform v0.12, are now removed. You can replace uses of these functions with tolist([...]) and tomap({...}) respectively. (#26818)

Terraform now requires UTF-8 character encoding and virtual terminal support when running on Windows. This unifies Terraform's terminal handling on Windows with that of other platforms, as per Microsoft recommendations. Terraform previously required these terminal features on all other platforms, and now requires them on Windows too.
UTF-8 and virtual terminal support were introduced across various Windows 10 updates, and so Terraform is no longer officially supported on the original release of Windows 10 or on Windows 8 and earlier. However, there are currently no technical measures to artificially prevent Terraform from running on these obsolete Windows releases, and so you may still be able to use Terraform v0.15 on older Windows versions if you either disable formatting (using the -no-color) option, or if you use a third-party terminal emulator package such as ConEmu, Cmder, or mintty.
We strongly encourage planning to migrate to a newer version of Windows rather than relying on these workarounds for the long term, because the Terraform team will test future releases only on up-to-date Windows 10 and can therefore not guarantee ongoing support for older versions.


Interrupting execution will now cause terraform to exit with a non-zero exit status. (#26738)

The -lock and -lock-timeout options are no longer available on terraform init (#27464)
The -verify-plugins=false option is no longer available on terraform init. (Terraform now always verifies plugins.) (#27461)
The -get-plugins=false option is no longer available on terraform init. (Terraform now always installs plugins.) (#27463)
terraform version -json output no longer includes the (previously-unpopulated) ""revision"" property [#27484] 
The atlas backend, which was deprecated since Terraform v0.12, is now removed. (#26651)
In the gcs backend the path config argument, which was deprecated since Terraform v0.11, is now removed. Use the prefix argument instead. (#26841)

ENHANCEMENTS:

config: Terraform will now emit a warning if you declare a backend block in a non-root module. Terraform has always ignored such declarations, but previously did so silently. This is a warning rather than an error only because it is sometimes convenient to temporarily use a root module as if it were a child module in order to test or debug its behavior separately from its main backend. (#26954)
cli: The family of error messages with the summary ""Invalid for_each argument"" will now include some additional context about which external values contributed to the result. (#26747)
cli: Terraform now uses UTF-8 and full VT mode even when running on Windows. Previously Terraform was using the ""classic"" Windows console API, which was far more limited in what formatting sequences it supported and which characters it could render. (#27487)
cli: Improved support for Windows console UI on Windows 10, including bold colors and underline for HCL diagnostics. (#26588)
cli: Diagnostic messages now have a vertical line along their left margin, which we hope will achieve a better visual heirarchy for sighted users and thus make it easier to see where the errors and warnings start and end in relation to other content that might be printed alongside. (#27343)
cli: Typing an invalid top-level command, like terraform destory instead of destroy, will now print out a specific error message about the command being invalid, rather than just printing out the usual help directory. (#26967)
cli: Plugin crashes will now be reported with more detail, pointing out the plugin name and the method call along with the stack trace (#26694)
provisioner/remote-exec: Can now run in a mode that expects the remote system to be running Windows and excuting commands using the Windows command interpreter, rather than a Unix-style shell. Specify the target_platform as ""windows"" in the connection block. (#26865)

BUG FIXES:

cli: Exit with an error if unable to gather input from the UI. For example, this may happen when running in a non-interactive environment but without -input=false. Previously Terraform would interpret these errors as empty strings, which could be confusing. (#26509)
cli: TF_LOG levels other than trace will now work correctly (#26632)
cli: Core and Provider logs can now be enabled separately for debugging, using TF_LOG_CORE and TF_LOG_PROVIDER (#26685)
command/console: expressions using path (path.root, path.module) now return the same result as they would in a configuration (#27263)
command/show: fix issue with child_modules not properly displaying in certain circumstances (#27352)
command/state list: fix bug where nested modules' resources were missing from state list output (#27268)
command/state mv: fix display names in errors and improve error when failing to target a whole resource (#27482)
command/taint: show resource name in -allow-missing warning (#27501)
command/untaint: show resource name in -allow-missing warning (#27502)
core: validate will now ignore providers without configuration (#24896)
core: refresh data sources during destroy (#27408)
core: don't plan changes for outputs that remain null (#27512)
"
102,"0.14.5 (January 20, 2021)
ENHANCEMENTS:

backend/pg: The Postgres backend now supports the ""scram-sha-256"" authentication method. (#26886)

BUG FIXES:

cli: Fix formatting of long integers in outputs and console (#27479)
cli: Fix redundant check of remote workspace version for local operations (#27498)
cli: Fix missing check of remote workspace version for state migration (#27556)
cli: Fix world-writable permissions on dependency lock file (#27205)
"
103,"0.15.0 (Unreleased)
UPGRADE NOTES:

config: The list and map functions, both of which were deprecated since Terraform v0.12, are now removed. You can replace uses of these functions with tolist([...]) and tomap({...}) respectively. (#26818)
cli: Interrupting execution will now cause terraform to exit with a non-0 status. (#26738)
backend/atlas: the atlas backend, which was deprecated since v0.12, has been removed. (#26651)
backend/gcs: The path config argument, which was deprecated since v0.11, has been removed. Use the prefix argument instead. (#26841)

ENHANCEMENTS:

config: Terraform will now emit a warning if you declare a backend block in a non-root module. Terraform has always ignored such declarations, but previously did so silently. This is a warning rather than an error only because it is sometimes convenient to temporarily use a root module as if it were a child module in order to test or debug its behavior separately from its main backend. (#26954)
cli: Improved support for Windows console UI on Windows 10, including bold colors and underline for HCL diagnostics. (#26588)
cli: The family of error messages with the summary ""Invalid for_each argument"" will now include some additional context about which external values contributed to the result. (#26747)
cli: Typing an invalid top-level command, like terraform destory instead of destroy, will now print out a specific error message about the command being invalid, rather than just printing out the usual help directory. (#26967)
cli: Plugin crashes will now be reported with more detail, pointing out the plugin name and the method call along with the stack trace (#26694)
provisioner/remote-exec: Can now run in a mode that expects the remote system to be running Windows and excuting commands using the Windows command interpreter, rather than a Unix-style shell. Specify the target_platform as ""windows"" in the connection block. (#26865)

BUG FIXES:

cli: Exit with an error if unable to gather input from the UI. For example, this may happen when running in a non-interactive environment but without -input=false. Previously Terraform would interpret these errors as empty strings, which could be confusing. (#26509)
cli: TF_LOG levels other than trace will now work correctly (#26632)
cli: Core and Provider logs can now be enabled separately for debugging, using TF_LOG_CORE and TF_LOG_PROVIDER (#26685)
command/console: expressions using path (path.root, path.module) now return the same result as they would in a configuration (#27263)
command/state list: fix bug where nested modules' resources were missing from state list output (#27268)
core: validate will now ignore providers without configuration (#24896)
"
104,"0.14.4 (January 06, 2021)
UPGRADE NOTES:

This release disables the remote Terraform version check feature for plan and apply operations. This fixes an issue with using custom Terraform version bundles in Terraform Enterprise. (#27319)

BUG FIXES:

backend/remote: Disable remote Terraform workspace version check when the remote workspace is in local operations mode ([#27407])
core: Fix panic when using sensitive values as arguments to data sources ([#27335])
core: Fix panic when using sensitive values as count arguments on validate ([#27410])
core: Fix panic when passing sensitive values to module input variables which have custom variable validation ([#27412])
dependencies: Upgrade HCL to v2.8.2, fixing several bugs with sensitive values ([#27420])
"
105,"0.13.6 (January 06, 2021)
UPGRADE NOTES:

The builtin provider's terraform_remote_state data source no longer enforces Terraform version checks on the remote state file. This allows Terraform 0.13.6 to access remote state from future Terraform versions, up until a future incompatible state file version upgrade is required. (#26692)

BUG FIXES:

init: setting -get-plugins to false will now cause a warning, as this flag has been a no-op since 0.13.0 and usage is better served through using provider_installation blocks (#27092)
"
106,"0.12.30 (January 06, 2021)
UPGRADE NOTES:

The builtin provider's terraform_remote_state data source no longer enforces Terraform version checks on the remote state file. This allows Terraform 0.12.30 to access remote state from future Terraform versions, up until a future incompatible state file version upgrade is required. (#26692)
"
107,"0.14.3 (December 17, 2020)
ENHANCEMENTS:


terraform output: Now supports a new ""raw"" mode, activated by the -raw option, for printing out the raw string representation of a particular output value. (#27212)
Only primitive-typed values have a string representation, so this formatting mode is not compatible with complex types. The -json mode is still available as a general way to get a machine-readable representation of an output value of any type.


config: for_each now allows maps whose element values are sensitive, as long as the element keys and the map itself are not sensitive. (#27247)


BUG FIXES:

config: Fix anytrue and alltrue functions when called with values which are not known until apply. (#27240)
config: Fix sum function when called with values which are not known until apply. Also allows sum to cope with numbers too large to represent in float64, along with correctly handling errors around infinite values. (#27249)
config: Fixed panic when referencing sensitive values in resource count expressions (#27238)
config: Fix incorrect attributes in diagnostics when validating objects (#27010)
core: Prevent unexpected updates during plan when multiple sensitive values are involved (#27318)
dependencies: Fix several small bugs related to the use of sensitive values with expressions and functions.
lang: Fix panic when calling coalescelist with a null argument (#26988)
terraform apply: -refresh=false was skipped when running apply directly (#27233)
terraform init: setting -get-plugins to false will now cause a warning, as this flag has been a no-op since 0.13.0 and usage is better served through using provider_installation blocks (#27092)
terraform init and other commands which interact with the dependency lock file: These will now generate a normal error message if the lock file is incorrectly a directory, rather than crashing as before. (#27250)
"
108,"0.14.2 (December 08, 2020)
BUG FIXES:

backend/remote: Disable the remote backend version compatibility check for workspaces set to use the ""latest"" pseudo-version. (#27199)
providers/terraform: Disable the remote backend version compatibility check for the terraform_remote_state data source. This check is unnecessary, because the data source is read-only by definition. (#27197)
"
109,"0.14.1 (December 08, 2020)
ENHANCEMENTS:

backend/remote: When using the enhanced remote backend with commands which locally modify state, verify that the local Terraform version and the configured remote workspace Terraform version are compatible. This prevents accidentally upgrading the remote state to an incompatible version. The check is skipped for commands which do not write state, and can also be disabled by the use of a new command-line flag, -ignore-remote-version. (#26947)

BUG FIXES:

configs: Fix for errors when using multiple layers of sensitive input variables (#27095)
configs: Fix error when using sensitive input variables in conditionals (#27107)
core: Fix permanent diff when a resource changes only in sensitivity, for example due to changing the sensitivity of a variable or output used as an attribute value. (#27128)
core: Fix issues where ignore_changes appears to not work, or causes validation errors with some resources. (#27141)
terraform fmt: Fix incorrect formatting with attribute expressions enclosed in parentheses. (#27040)
"
110,"0.14.0 (December 02, 2020)
NEW FEATURES:
* Terraform now supports marking input variables as sensitive, and will propagate that sensitivity through expressions that derive from sensitive input variables.


terraform init will now generate a lock file in the configuration directory which you can check in to your version control so that Terraform can make the same version selections in future. (#26524)
If you wish to retain the previous behavior of always taking the newest version allowed by the version constraints on each install, you can run terraform init -upgrade to see that behavior.


Terraform will now support reading and writing all compatible state files, even from future versions of Terraform. This means that users of Terraform 0.14.0 will be able to share state files with future Terraform versions until a new state file format version is needed. We have no plans to change the state file format at this time. (#26752)


UPGRADE NOTES:
* Outputs that reference sensitive values (which includes variables marked as sensitive, other module outputs marked as sensitive, or attributes a provider defines as sensitive if the provider_sensitive_attrs experiment is activated) must also be defined as sensitive, or Terraform will error at plan.
* The version argument inside provider configuration blocks has been documented as deprecated since Terraform 0.12. As of 0.14 it will now also generate an explicit deprecation warning. To avoid the warning, use provider requirements declarations instead. (#26135)
* The official MacOS builds of Terraform now require MacOS 10.12 Sierra or later. (#26357)
* TLS certificate verification for outbound HTTPS requests from Terraform CLI no longer treats the certificate's ""common name"" as a valid hostname when the certificate lacks any ""subject alternative name"" entries for the hostname. TLS server certificates must list their hostnames as a ""DNS name"" in the subject alternative names field. (#26357)
* Outbound HTTPS requests from Terraform CLI now enforce RFC 8446's client-side downgrade protection checks. This should not significantly affect normal operation, but may result in connection errors in environments where outgoing requests are forced through proxy servers and other ""middleboxes"", if they have behavior that resembles a downgrade attack. (#26357)
* Terraform's HTTP client code is now slightly stricter than before in HTTP header parsing, but in ways that should not affect typical server implementations: Terraform now trims only ASCII whitespace characters, and does not allow Transfer-Encoding: identity. (#26357)
* The terraform 0.13upgrade subcommand and the associated upgrade mechanisms are no longer available. Complete the v0.13 upgrade process before upgrading to Terraform v0.14.
* The debug command, which did not offer additional functionality, has been removed.
ENHANCEMENTS:

config: Added sensitive argument for variable blocks, which supresses output where that variable is used (#26183)
config: Added alltrue and anytrue functions, which serve as a sort of dynamic version of the && and || or operators, respectively. These are intended to allow evaluating boolean conditions, such as in variable validation blocks, across all of the items in a collection using for expressions. (#25656], [#26498)
config: New functions textencodebase64 and textdecodebase64 for encoding text in various character encodings other than UTF-8. (#25470)
terraform plan and terraform apply: Added an experimental concise diff renderer. By default, Terraform plans now hide most unchanged fields, only displaying the most relevant changes and some identifying context. This experiment can be disabled by setting a TF_X_CONCISE_DIFF environment variable to 0. (#26187)
config: ignore_changes can now apply to map keys that are not listed in the configuration (#26421)
terraform console: Now has distinct rendering of lists, sets, and tuples, and correctly renders objects with null attribute values. Multi-line strings are rendered using the ""heredoc"" syntax. (#26189, #27054)
terraform login: Added support for OAuth2 application scopes. (#26239)
terraform fmt: Will now do some slightly more opinionated normalization behaviors, using the documented idiomatic syntax. (#26390)
terraform init's provider installation step will now abort promptly if Terraform receives an interrupt signal. (#26405)
cli: A new global command line option -chdir=..., placed before the selected subcommand, instructs Terraform to switch to a different working directory before executing the subcommand. This is similar to switching to a new directory with cd before running Terraform, but it avoids changing the state of the calling shell. (#26087)
cli: help text is been reorganized to emphasize the main commands and improve consistency (#26695)
cli: Ensure that provider requirements are met by the locked dependencies for every command. This will help catch errors if the configuration has changed since the last run of terraform init. (#26761)
core: When sensitive values are used as part of provisioner configuration, logging is disabled to ensure the values are not displayed to the UI (#26611)
core: terraform plan no longer uses a separate refresh phase. Instead, all resources are updated on-demand during planning (#26270)
modules: Adds support for loading modules with S3 virtual hosted-style access (#26914)
backend/consul: Split state into chunks when outgrowing the limit of the Consul KV store. This allows storing state larger than the Consul 512KB limit. (#25856)
backend/consul: Add force-unlock support to the Consul backend (#25837)
backend/gcs: Add service account impersonation to GCS backend (#26837)
On Unix-based operating systems other than MacOS, the SSL_CERT_DIR environment variable can now be a colon-separated list of multiple certificate search paths. (#26357)
On MacOS, Terraform will now use the Security.framework API to access the system trust roots, for improved consistency with other MacOS software. (#26357)

BUG FIXES:

config: Report an error when provider configuration attributes are incorrectly added to a required_providers object. (#26184)
config: Better errors for invalid terraform version constraints (#26543)
config: fix panic when element() is called with a negative offset (#26079)
config: lookup() will now only treat map as unknown if it is wholly unknown (#26427)
config: Fix provider detection for resources when local name does not match provider type (#26871)
terraform fmt: Fix incorrect heredoc syntax in plan diff output (#25725)
terraform show: Hide sensitive outputs from display (#26740)
terraform taint: If the configuration's required_version constraint is not met, the taint subcommand will now correctly exit early. (#26345)
terraform taint and terraform untaint: Fix issue when using taint (and untaint) with workspaces where statefile was not found. (#22467)
terraform init: Fix locksfile constraint output for versions like ""1.2"". (#26637)
terraform init: Omit duplicate version constraints when installing packages or writing locksfile. (#26678)
cli: return an error on a state unlock failure [#25729] 
core: Prevent ""Inconsistent Plan"" errors when using dynamic with a block of TypeSet (#26638)
core: Errors with data sources reading old data during refresh, failing to refresh, and not appearing to wait on resource dependencies are fixed by updates to the data source lifecycle and the merging of refresh and plan (#26270)
core: Prevent evaluation of deposed instances, which in turn prevents errors when referencing create_before_destroy resources that have changes to their count or for_each values (#25631)
core: fix state push -force to work for all backends (#26190)
backend/consul: Fix bug which prevented state locking when path has trailing / (#25842)
backend/pg: Always have the default workspace in the pg backend (#26420)
backend/pg: Properly quote schema_name in the pg backend configuration (#26476)
build: Fix crash with terraform binary on OpenBSD. (#26249)
internal: Use default AWS credential handling when fetching modules (#26762)

EXPERIMENTS:
Experiments are Terraform language features that are not yet finalized but that we've included in a release so you can potentially try them out and share feedback. These features are only available if you explicitly enable the relevant experiment for your module. To share feedback on active experiments, please open an enhancement request issue in the main Terraform repository.


module_variable_optional_attrs: When declaring an input variable for a module whose type constraint (type argument) contains an object type constraint, the type expressions for the attributes can be annotated with the experimental optional(...) modifier.
Marking an attribute as ""optional"" changes the type conversion behavior for that type constraint so that if the given value is a map or object that has no attribute of that name then Terraform will silently give that attribute the value null, rather than returning an error saying that it is required. The resulting value still conforms to the type constraint in that the attribute is considered to be present, but references to it in the recieving module will find a null value and can act on that accordingly.
This experiment also includes a function named defaults which you can use in a local value to replace the null values representing optional attributes with non-null default values. The function also requires that you enable the module_variable_optional_attrs experiment for any module which calls it.


provider_sensitive_attrs: This is an unusual experiment in that it doesn't directly allow you to use a new feature in your module configuration but instead it changes the automatic behavior of Terraform in modules where it's enabled.
For modules where this experiment is active, Terraform will consider the attribute sensitivity flags set in provider resource type schemas when propagating the ""sensitive"" flag through expressions in the configuration. This is experimental because it has the potential to make far more items in the output be marked as sensitive than before, and so we want to get some experience and feedback about it before hopefully making this the default behavior.
One important consequence of enabling this experiment is that you may need to mark more of your module's output values as sensitive = true, in any case where a particular output value is derived from a value a provider has indicated as being sensitive. Without that explicit annotation, Terraform will return an error to avoid implicitly exposing a sensitive value via an output value.


If you try either of these features during their experimental periods and have feedback about them, please open a feature request issue. We are aiming to stabilize both features in the forthcoming v0.15 release, but their design may change in the meantime based on feedback. If we make further changes to the features during the v0.15 period then they will be reflected in v0.15 alpha releases."
111,"0.14.0 (Unreleased)
NEW FEATURES:
* Terraform now supports marking input variables as sensitive, and will propagate that sensitivity through expressions that derive from sensitive input variables.


terraform init will now generate a lock file in the configuration directory which you can check in to your version control so that Terraform can make the same version selections in future. (#26524)
If you wish to retain the previous behavior of always taking the newest version allowed by the version constraints on each install, you can run terraform init -upgrade to see that behavior.


Terraform will now support reading and writing all compatible state files, even from future versions of Terraform. This means that users of Terraform 0.14.0 will be able to share state files with future Terraform versions until a new state file format version is needed. We have no plans to change the state file format at this time. (#26752)


UPGRADE NOTES:
* Outputs that reference sensitive values (which includes variables marked as sensitive, other module outputs marked as sensitive, or attributes a provider defines as sensitive if the provider_sensitive_attrs experiment is activated) must also be defined as sensitive, or Terraform will error at plan.
* The version argument inside provider configuration blocks has been documented as deprecated since Terraform 0.12. As of 0.14 it will now also generate an explicit deprecation warning. To avoid the warning, use provider requirements declarations instead. (#26135)
* The official MacOS builds of Terraform now require MacOS 10.12 Sierra or later. (#26357)
* TLS certificate verification for outbound HTTPS requests from Terraform CLI no longer treats the certificate's ""common name"" as a valid hostname when the certificate lacks any ""subject alternative name"" entries for the hostname. TLS server certificates must list their hostnames as a ""DNS name"" in the subject alternative names field. (#26357)
* Outbound HTTPS requests from Terraform CLI now enforce RFC 8446's client-side downgrade protection checks. This should not significantly affect normal operation, but may result in connection errors in environments where outgoing requests are forced through proxy servers and other ""middleboxes"", if they have behavior that resembles a downgrade attack. (#26357)
* Terraform's HTTP client code is now slightly stricter than before in HTTP header parsing, but in ways that should not affect typical server implementations: Terraform now trims only ASCII whitespace characters, and does not allow Transfer-Encoding: identity. (#26357)
* The terraform 0.13upgrade subcommand and the associated upgrade mechanisms are no longer available. Complete the v0.13 upgrade process before upgrading to Terraform v0.14.
* The debug command, which did not offer additional functionality, has been removed.
ENHANCEMENTS:

backend/gcs: Add service account impersonation to GCS backend (#26837)
config: Added sensitive argument for variable blocks, which supresses output where that variable is used (#26183)
config: Added alltrue and anytrue functions, which serve as a sort of dynamic version of the && and || or operators, respectively. These are intended to allow evaluating boolean conditions, such as in variable validation blocks, across all of the items in a collection using for expressions. (#25656], [#26498)
config: New functions textencodebase64 and textdecodebase64 for encoding text in various character encodings other than UTF-8. (#25470)
terraform plan and terraform apply: Added an experimental concise diff renderer. By default, Terraform plans now hide most unchanged fields, only displaying the most relevant changes and some identifying context. This experiment can be disabled by setting a TF_X_CONCISE_DIFF environment variable to 0. (#26187)
config: ignore_changes can now apply to map keys that are not listed in the configuration (#26421)
terraform console: Now has distinct rendering of lists, sets, and tuples, and correctly renders objects with null attribute values. (#26189)
terraform login: Added support for OAuth2 application scopes. (#26239)
terraform fmt: Will now do some slightly more opinionated normalization behaviors, using the documented idiomatic syntax. (#26390)
terraform init's provider installation step will now abort promptly if Terraform receives an interrupt signal. (#26405)
cli: A new global command line option -chdir=..., placed before the selected subcommand, instructs Terraform to switch to a different working directory before executing the subcommand. This is similar to switching to a new directory with cd before running Terraform, but it avoids changing the state of the calling shell. (#26087)
cli: help text is been reorganized to emphasize the main commands and improve consistency (#26695)
cli: Ensure that provider requirements are met by the locked dependencies for every command. This will help catch errors if the configuration has changed since the last run of terraform init. (#26761)
core: When sensitive values are used as part of provisioner configuration, logging is disabled to ensure the values are not displayed to the UI (#26611)
core: terraform plan no longer uses a separate refresh phase. Instead, all resources are updated on-demand during planning (#26270)
backend/consul: Split state into chunks when outgrowing the limit of the Consul KV store. This allows storing state larger than the Consul 512KB limit. (#25856)
backend/consul: Add force-unlock support to the Consul backend (#25837)
On Unix-based operating systems other than MacOS, the SSL_CERT_DIR environment variable can now be a colon-separated list of multiple certificate search paths. (#26357)
On MacOS, Terraform will now use the Security.framework API to access the system trust roots, for improved consistency with other MacOS software. (#26357)

BUG FIXES:

config: Report an error when provider configuration attributes are incorrectly added to a required_providers object. (#26184)
config: Better errors for invalid terraform version constraints (#26543)
config: fix panic when element() is called with a negative offset (#26079)
config: lookup() will now only treat map as unknown if it is wholly unknown (#26427)
config: Fix provider detection for resources when local name does not match provider type (#26871)
terraform fmt: Fix incorrect heredoc syntax in plan diff output (#25725)
terraform show: Hide sensitive outputs from display (#26740)
terraform taint: If the configuration's required_version constraint is not met, the taint subcommand will now correctly exit early. (#26345)
terraform taint and terraform untaint: Fix issue when using taint (and untaint) with workspaces where statefile was not found. (#22467)
terraform init: Fix locksfile constraint output for versions like ""1.2"". (#26637)
terraform init: Omit duplicate version constraints when installing packages or writing locksfile. (#26678)
cli: return an error on a state unlock failure [#25729] 
core: Prevent ""Inconsistent Plan"" errors when using dynamic with a block of TypeSet (#26638)
core: Errors with data sources reading old data during refresh, failing to refresh, and not appearing to wait on resource dependencies are fixed by updates to the data source lifecycle and the merging of refresh and plan (#26270)
core: Prevent evaluation of deposed instances, which in turn prevents errors when referencing create_before_destroy resources that have changes to their count or for_each values (#25631)
core: fix state push -force to work for all backends (#26190)
backend/consul: Fix bug which prevented state locking when path has trailing / (#25842)
backend/pg: Always have the default workspace in the pg backend (#26420)
backend/pg: Properly quote schema_name in the pg backend configuration (#26476)
build: Fix crash with terraform binary on OpenBSD. (#26249)
internal: Use default AWS credential handling when fetching modules (#26762)

EXPERIMENTS:


module_variable_optional_attrs: When declaring an input variable for a module whose type constraint (type argument) contains an object type constraint, the type expressions for the attributes can be annotated with the experimental optional(...) modifier.
Marking an attribute as ""optional"" changes the type conversion behavior for that type constraint so that if the given value is a map or object that has no attribute of that name then Terraform will silently give that attribute the value null, rather than returning an error saying that it is required. The resulting value still conforms to the type constraint in that the attribute is considered to be present, but references to it in the recieving module will find a null value and can act on that accordingly.


provider_sensitive_attrs: This is an unusual experiment in that it doesn't directly allow you to use a new feature in your module configuration but instead it changes the automatic behavior of Terraform in modules where it's enabled.
For modules where this experiment is active, Terraform will consider the attribute sensitivity flags set in provider resource type schemas when propagating the ""sensitive"" flag through expressions in the configuration. This is experimental because it has the potential to make far more items in the output be marked as sensitive than before, and so we want to get some experience and feedback about it before hopefully making this the default behavior.
One important consequence of enabling this experiment is that you may need to mark more of your module's output values as sensitive = true, in any case where a particular output value is derived from a value a provider has indicated as being sensitive. Without that explicit annotation, Terraform will return an error to avoid implicitly exposing a sensitive value via an output value.


If you try either of these features during their experimental periods and have feedback about them, please open a feature request issue. We are aiming to stabilize both features in the forthcoming v0.15 release, but their design may change in the meantime based on feedback. If we make further changes to the features during the v0.15 period then they will be reflected in v0.15 alpha releases."
112,"0.14.0-beta2
(This describes the changes since v0.13.4, rather than since v0.14.0-beta1.)
NEW FEATURES:
* Terraform now supports marking input variables as sensitive, and will propagate that sensitivity through expressions that derive from sensitive input variables.


terraform init: Terraform will now generate a lock file in the configuration directory which you can check in to your version control so that Terraform can make the same version selections in future. (#26524)
If you wish to retain the previous behavior of always taking the newest version allowed by the version constraints on each install, you can run terraform init -upgrade to see that behavior.


UPGRADE NOTES:
* Outputs that reference sensitive values (which includes variables marked as sensitive, other module outputs marked as sensitive, or attributes a provider defines as sensitive if the provider_sensitive_attrs experiment is activated) must also be defined as sensitive, or Terraform will error at plan.
* The version argument inside provider configuration blocks has been documented as deprecated since Terraform 0.12. As of 0.14 it will now also generate an explicit deprecation warning. To avoid the warning, use provider requirements declarations instead. (#26135)
* The official MacOS builds of Terraform now require MacOS 10.12 Sierra or later. (#26357)
* TLS certificate verification for outbound HTTPS requests from Terraform CLI no longer treats the certificate's ""common name"" as a valid hostname when the certificate lacks any ""subject alternative name"" entries for the hostname. TLS server certificates must list their hostnames as a ""DNS name"" in the subject alternative names field. (#26357)
* Outbound HTTPS requests from Terraform CLI now enforce RFC 8446's client-side downgrade protection checks. This should not significantly affect normal operation, but may result in connection errors in environments where outgoing requests are forced through proxy servers and other ""middleboxes"", if they have behavior that resembles a downgrade attack. (#26357)
* Terraform's HTTP client code is now slightly stricter than before in HTTP header parsing, but in ways that should not affect typical server implementations: Terraform now trims only ASCII whitespace characters, and does not allow Transfer-Encoding: identity. (#26357)
* The terraform 0.13upgrade subcommand and the associated upgrade mechanisms are no longer available. Complete the v0.13 upgrade process before upgrading to Terraform v0.14.
* The debug command, which did not offer additional functionality, has been removed.
ENHANCEMENTS:

terraform plan and terraform apply: Added an experimental concise diff renderer. By default, Terraform plans now hide most unchanged fields, only displaying the most relevant changes and some identifying context. This experiment can be disabled by setting a TF_X_CONCISE_DIFF environment variable to 0. (#26187)
cli: A new global command line option -chdir=..., placed before the selected subcommand, instructs Terraform to switch to a different working directory before executing the subcommand. This is similar to switching to a new directory with cd before running Terraform, but it avoids changing the state of the calling shell. (#26087)
command/help: text has been reorganized to be clearer and more helpful (#26695)
config: Added sensitive argument for variable blocks, which supresses output where that variable is used (#26183)
When sensitive values are used as part of provisioner configuration, logging is disabled to ensure the values are not displayed to the UI (#26611)
config: Added alltrue and anytrue functions, which serve as a sort of dynamic version of the && and || or operators, respectively. These are intended to allow evaluating boolean conditions, such as in variable validation blocks, across all of the items in a collection using for expressions. (#25656], [#26498)
config: New functions textencodebase64 and textdecodebase64 for encoding text in various character encodings other than UTF-8. (#25470)
core: terraform plan no longer uses a separate refresh phase, all resources are updated on-demand during planning (#26270)
core: ignore_changes can now apply to map keys that are not listed in the configuration (#26421)
terraform console: Now has distinct rendering of lists, sets, and tuples, and correctly renders objects with null attribute values. (#26189)
terraform login: Added support for OAuth2 application scopes. (#26239)
terraform fmt: Will now do some slightly more opinionated normalization behaviors, using the documented idiomatic syntax. (#26390)
terraform init's provider installation step will now abort promptly if Terraform receives an interrupt signal. (#26405)
backend/consul: Split state into chunks when outgrowing the limit of the Consul KV store. This allows storing state larger than the Consul 512KB limit. (#25856)
backend/consul: Add force-unlock support to the Consul backend (#25837)
On Unix-based operating systems other than MacOS, the SSL_CERT_DIR environment variable can now be a colon-separated list of multiple certificate search paths. (#26357)
On MacOS, Terraform will now use the Security.framework API to access the system trust roots, for improved consistency with other MacOS software. (#26357)

BUG FIXES:

backend/consul: Fix bug which prevented state locking when path has trailing / (#25842)
backend/pg: Always have the default workspace in the pg backend (#26420)
backend/pg: Properly quote schema_name in the pg backend configuration (#26476)
build: Fix crash with terraform binary on OpenBSD. (#26249
command/clistate: return an error on a state unlock failure [#25729] 
command/format: Fix incorrect heredoc syntax in plan diff output (#25725)
command/show: Hide sensitive outputs from display (#26740)
command/taint: If the configuration's required_version constraint is not met, the taint subcommand will now correctly exit early. (#26345)
command/taint, untaint: Fix issue when using taint (and untaint) with workspaces where statefile was not found. (#22467)
configs: Report an error when provider configuration attributes are incorrectly added to a required_providers object. (#26184)
configs: Better errors for invalid terraform version constraints (#26543)
core: Prevent ""Inconsistent Plan"" errors when using dynamic with a block of TypeSet (#26638)
core: Errors with data sources reading old data during refresh, failing to refresh, and not appearing to wait on resource dependencies are fixed by updates to the data source lifecycle and the merging of refresh and plan (#26270)
core: Prevent evaluation of deposed instances, which in turn prevents errors when referencing create_before_destroy resources that have changes to their count or for_each values (#25631)
internal: Fix locksfile constraint output for versions like ""1.2"". (#26637)
internal: Omit duplicate version constraints when installing packages or writing locksfile. (#26678)
lang/funcs: fix panic when element() is called with a negative offset (#26079)
lang/funcs: lookup() will now only treat map as unknown if it is wholly unknown (#26427)
states/remote: fix state push -force to work for all backends (#26190)

EXPERIMENTS:


module_variable_optional_attrs: When declaring an input variable for a module whose type constraint (type argument) contains an object type constraint, the type expressions for the attributes can be annotated with the experimental optional(...) modifier.
Marking an attribute as ""optional"" changes the type conversion behavior for that type constraint so that if the given value is a map or object that has no attribute of that name then Terraform will silently give that attribute the value null, rather than returning an error saying that it is required. The resulting value still conforms to the type constraint in that the attribute is considered to be present, but references to it in the recieving module will find a null value and can act on that accordingly.
If you try this feature during its experimental period and have feedback about it, please open a feature request issue. We are aiming to stabilize this feature in the forthcoming 0.15 release, but its design may change in the meantime based on feedback. If we make further changes to the feature during the 0.15 period then they will be reflected in 0.15 alpha releases.

"
113,"0.13.5 (October 21, 2020)
BUG FIXES:
* terraform: fix issue where the provider configuration was not properly attached to the configured provider source address by localname (#26567)
* core: fix a performance issue when a resource contains a very large and deeply nested schema (#26577)
* backend/azurerm: fix an issue when using the metadata host to lookup environments (#26463)"
114,"0.14.0 (Unreleased)
NEW FEATURES:
* terraform init: Terraform will now generate a lock file in the configuration directory which you can check in to your version control so that Terraform can make the same version selections in future. (#26524)
If you wish to retain the previous behavior of always taking the newest version allowed by the version constraints on each install, you can run `terraform init -upgrade` to see that behavior.

UPGRADE NOTES:
* configs: The version argument inside provider configuration blocks has been documented as deprecated since Terraform 0.12. As of 0.14 it will now also generate an explicit deprecation warning. To avoid the warning, use provider requirements declarations instead. (#26135)
* The official MacOS builds of Terraform now require MacOS 10.12 Sierra or later. (#26357)
* TLS certificate verification for outbound HTTPS requests from Terraform CLI no longer treats the certificate's ""common name"" as a valid hostname when the certificate lacks any ""subject alternative name"" entries for the hostname. TLS server certificates must list their hostnames as a ""DNS name"" in the subject alternative names field. (#26357)
* Outbound HTTPS requests from Terraform CLI now enforce RFC 8446's client-side downgrade protection checks. This should not significantly affect normal operation, but may result in connection errors in environments where outgoing requests are forced through proxy servers and other ""middleboxes"", if they have behavior that resembles a downgrade attack. (#26357)
* Terraform's HTTP client code is now slightly stricter than before in HTTP header parsing, but in ways that should not affect typical server implementations: Terraform now trims only ASCII whitespace characters, and does not allow Transfer-Encoding: identity. (#26357)
* The terraform 0.13upgrade subcommand and the associated upgrade mechanisms are no longer available. Complete the v0.13 upgrade process before upgrading to Terraform v0.14.
ENHANCEMENTS:

terraform plan and terraform apply: Added an experimental concise diff renderer. By default, Terraform plans now hide most unchanged fields, only displaying the most relevant changes and some identifying context. This experiment can be disabled by setting a TF_X_CONCISE_DIFF environment variable to 0. (#26187)
cli: A new global command line option -chdir=..., placed before the selected subcommand, instructs Terraform to switch to a different working directory before executing the subcommand. This is similar to switching to a new directory with cd before running Terraform, but it avoids changing the state of the calling shell. (#26087)
configs: Added sensitive argument for variable blocks, which supresses output where that variable is used (#26183)
configs: Added alltrue function, which returns true if all elements in the given collection are true. This is primarily intended to make it easier to write variable validation conditions which operate on collections. (#25656)
core: terraform plan no longer uses a separate refresh phase, all resources are updated on-demand during planning (#26270)
core: ignore_changes can now apply to map keys that are not listed in the configuration (#26421)
terraform console: Now has distinct rendering of lists, sets, and tuples, and correctly renders objects with null attribute values. (#26189)
terraform login: Added support for OAuth2 application scopes. (#26239)
terraform fmt: Will now do some slightly more opinionated normalization behaviors, using the documented idiomatic syntax. (#26390)
terraform init's provider installation step will now abort promptly if Terraform receives an interrupt signal. (#26405)
backend/consul: Split state into chunks when outgrowing the limit of the Consul KV store. This allows storing state larger than the Consul 512KB limit. (#25856)
backend/consul: Add force-unlock support to the Consul backend (#25837)
On Unix-based operating systems other than MacOS, the SSL_CERT_DIR environment variable can now be a colon-separated list of multiple certificate search paths. (#26357)
On MacOS, Terraform will now use the Security.framework API to access the system trust roots, for improved consistency with other MacOS software. (#26357)

BUG FIXES:

backend/consul: Fix bug which prevented state locking when path has trailing / (#25842)
backend/pg: Always have the default workspace in the pg backend (#26420)
backend/pg: Properly quote schema_name in the pg backend configuration (#26476)
build: Fix crash with terraform binary on OpenBSD. (#26249
command/clistate: return an error on a state unlock failure [#25729] 
command/format: Fix incorrect heredoc syntax in plan diff output (#25725)
command/taint: If the configuration's required_version constraint is not met, the taint subcommand will now correctly exit early. (#26345)
command/taint, untaint: Fix issue when using taint (and untaint) with workspaces where statefile was not found. (#22467)
configs: Report an error when provider configuration attributes are incorrectly added to a required_providers object. (#26184)
configs: Better errors for invalid terraform version constraints (#26543)
core: Errors with data sources reading old data during refresh, failing to refresh, and not appearing to wait on resource dependencies are fixed by updates to the data source lifecycle and the merging of refresh and plan (#26270)
core: Prevent evaluation of deposed instances, which in turn prevents errors when referencing create_before_destroy resources that have changes to their count or for_each values (#25631)
lang/funcs: fix panic when element() is called with a negative offset (#26079)
lang/funcs: lookup() will now only treat map as unknown if it is wholly unknown (#26427)
states/remote: fix state push -force to work for all backends (#26190)

EXPERIMENTS:


module_variable_optional_attrs: When declaring an input variable for a module whose type constraint (type argument) contains an object type constraint, the type expressions for the attributes can be annotated with the experimental optional(...) modifier.
Marking an attribute as ""optional"" changes the type conversion behavior for that type constraint so that if the given value is a map or object that has no attribute of that name then Terraform will silently give that attribute the value null, rather than returning an error saying that it is required. The resulting value still conforms to the type constraint in that the attribute is considered to be present, but references to it in the recieving module will find a null value and can act on that accordingly.
If you try this feature during its experimental period and have feedback about it, please open a feature request issue. We are aiming to stabilize this feature in the forthcoming 0.15 release, but its design may change in the meantime based on feedback. If we make further changes to the feature during the 0.15 period then they will be reflected in 0.15 alpha releases.

"
115,"0.14.0 (Unreleased)
UPGRADE NOTES:
* configs: The version argument inside provider configuration blocks has been documented as deprecated since Terraform 0.12. As of 0.14 it will now also generate an explicit deprecation warning. To avoid the warning, use provider requirements declarations instead. (#26135)
* The official MacOS builds of Terraform now require MacOS 10.12 Sierra or later. (#26357)
* TLS certificate verification for outbound HTTPS requests from Terraform CLI no longer treats the certificate's ""common name"" as a valid hostname when the certificate lacks any ""subject alternative name"" entries for the hostname. TLS server certificates must list their hostnames as a ""DNS name"" in the subject alternative names field. (#26357)
* Outbound HTTPS requests from Terraform CLI now enforce RFC 8446's client-side downgrade protection checks. This should not significantly affect normal operation, but may result in connection errors in environments where outgoing requests are forced through proxy servers and other ""middleboxes"", if they have behavior that resembles a downgrade attack. (#26357)
* Terraform's HTTP client code is now slightly stricter than before in HTTP header parsing, but in ways that should not affect typical server implementations: Terraform now trims only ASCII whitespace characters, and does not allow Transfer-Encoding: identity. (#26357)
* The terraform 0.13upgrade subcommand and the associated upgrade mechanisms are no longer available. Complete the v0.13 upgrade process before upgrading to Terraform v0.14.
ENHANCEMENTS:

terraform plan and terraform apply: Added an experimental concise diff renderer. By default, Terraform plans now hide most unchanged fields, only displaying the most relevant changes and some identifying context. This experiment can be disabled by setting a TF_X_CONCISE_DIFF environment variable to 0. (#26187)
cli: A new global command line option -chdir=..., placed before the selected subcommand, instructs Terraform to switch to a different working directory before executing the subcommand. This is similar to switching to a new directory with cd before running Terraform, but it avoids changing the state of the calling shell. (#26087)
configs: Added sensitive argument for variable blocks, which supresses output where that variable is used (#26183)
configs: Added alltrue function, which returns true if all elements in the given collection are true. This is primarily intended to make it easier to write variable validation conditions which operate on collections. (#25656)
core: terraform plan no longer uses a separate refresh phase, all resources are updated on-demand during planning (#26270)
core: ignore_changes can now apply to map keys that are not listed in the configuration (#26421)
terraform console: Now has distinct rendering of lists, sets, and tuples, and correctly renders objects with null attribute values. (#26189)
terraform login: Added support for OAuth2 application scopes. (#26239)
terraform fmt: Will now do some slightly more opinionated normalization behaviors, using the documented idiomatic syntax. (#26390)
terraform init's provider installation step will now abort promptly if Terraform receives an interrupt signal. (#26405)
backend/consul: Split state into chunks when outgrowing the limit of the Consul KV store. This allows storing state larger than the Consul 512KB limit. (#25856)
backend/consul: Add force-unlock support to the Consul backend (#25837)
On Unix-based operating systems other than MacOS, the SSL_CERT_DIR environment variable can now be a colon-separated list of multiple certificate search paths. (#26357)
On MacOS, Terraform will now use the Security.framework API to access the system trust roots, for improved consistency with other MacOS software. (#26357)

BUG FIXES:

backend/consul: Fix bug which prevented state locking when path has trailing / (#25842)
backend/pg: Always have the default workspace in the pg backend (#26420)
backend/pg: Properly quote schema_name in the pg backend configuration (#26476)
build: Fix crash with terraform binary on OpenBSD. (#26249
command/clistate: return an error on a state unlock failure [#25729] 
command/format: Fix incorrect heredoc syntax in plan diff output (#25725)
command/taint: If the configuration's required_version constraint is not met, the taint subcommand will now correctly exit early. (#26345)
command/taint, untaint: Fix issue when using taint (and untaint) with workspaces where statefile was not found. (#22467)
configs: Report an error when provider configuration attributes are incorrectly added to a required_providers object. (#26184)
core: Errors with data sources reading old data during refresh, failing to refresh, and not appearing to wait on resource dependencies are fixed by updates to the data source lifecycle and the merging of refresh and plan (#26270)
core: Prevent evaluation of deposed instances, which in turn prevents errors when referencing create_before_destroy resources that have changes to their count or for_each values (#25631)
lang/funcs: fix panic when element() is called with a negative offset (#26079)
lang/funcs: lookup() will now only treat map as unknown if it is wholly unknown (#26427)
states/remote: fix state push -force to work for all backends (#26190)
"
116,"0.13.4 (September 30, 2020)
UPGRADE NOTES:

The built-in vendor (third-party) provisioners, which include habitat, puppet, chef, and salt-masterless are now deprecated and will be removed in a future version of Terraform. More information on Discuss.
Deprecated interpolation-only expressions are detected in more contexts in addition to resources and provider configurations. Module calls, data sources, outputs, and locals are now also covered. Terraform also detects interpolation-only expressions in complex values such as lists and objects. An expression like ""${foo}"" should be rewritten as just foo. (#27272] [#26334)

BUG FIXES:

command: Include schemas from required but unused providers in the output of terraform providers schema. This allows development tools such as the Terraform language server to offer autocompletion for the first resource for a given provider. (#26318)
core: create_before_destroy status is now updated in the state during refresh (#26343)
core: data sources using depends_on, either directly or through their modules, are no longer are forced to wait until apply by other planned data source reads (#26375)
"
117,"0.14.0 (Unreleased)
UPGRADE NOTES:
* configs: The version argument inside provider configuration blocks has been documented as deprecated since Terraform 0.12. As of 0.14 it will now also generate an explicit deprecation warning. To avoid the warning, use provider requirements declarations instead. (#26135)
ENHANCEMENTS:

terraform plan and terraform apply: Added an experimental concise diff renderer. By default, Terraform plans now hide most unchanged fields, only displaying the most relevant changes and some identifying context. This experiment can be disabled by setting a TF_X_CONCISE_DIFF environment variable to 0. (#26187)
cli: A new global command line option -chdir=..., placed before the selected subcommand, instructs Terraform to switch to a different working directory before executing the subcommand. This is similar to switching to a new directory with cd before running Terraform, but it avoids changing the state of the calling shell. (#26087)
config: Added alltrue function, which returns true if all elements in the given collection are true. This is primarily intended to make it easier to write variable validation conditions which operate on collections. (#25656)
core: terraform plan no longer uses a separate refresh phase, all resources are updated on-demand during planning (#26270)
terraform console: Now has distinct rendering of lists, sets, and tuples, and correctly renders objects with null attribute values. (#26189)
terraform login: Added support for OAuth2 application scopes. (#26239)
backend/consul: Split state into chunks when outgrowing the limit of the Consul KV store. This allows storing state larger than the Consul 512KB limit. (#25856)

BUG FIXES:

backend/consul: Fix bug which prevented state locking when path has trailing / (#25842)
build: fix crash with terraform binary on openBSD [#26249]
command/clistate: return an error on a state unlock failure [#25729] 
configs: Report an error when provider configuration attributes are incorrectly added to a required_providers object. (#26184)
core: Errors with data sources reading old data during refresh, failing to refresh, and not appearing to wait on resource dependencies are fixed by updates to the data source lifecycle and the merging of refresh and plan (#26270)
lang/funcs: fix panic when element() is called with a negative offset (#26079)
states/remote: fix state push -force to work for all backends (#26190)
"
118,"0.13.3 (September 16, 2020)
BUG FIXES:

build: fix crash with terraform binary on openBSD (#26250)
core: prevent create_before_destroy cycles by not connecting module close nodes to resource instance destroy nodes (#26186)
core: fix error where plan action changes from CreateThenDelete to DeleteThenCreate (#26192)
core: fix Cycle when create_before_destroy status wasn't checked from state (#26263)
core: fix ""inconsistent final plan"" error when changing the number of referenced resources to 0 (#26264)
states/remote: fix state push -force to work for all backends (#26190)
"
119,"0.14.0 (Unreleased)
ENHANCEMENTS:

cli: A new global command line option -chdir=..., placed before the selected subcommand, instructs Terraform to switch to a different working directory before executing the subcommand. This is similar to switching to a new directory with cd before running Terraform, but it avoids changing the state of the calling shell. (#26087)
command: Added an experimental concise diff renderer. By default, Terraform plans now hide most unchanged fields, only displaying the most relevant changes and some identifying context. This experiment can be disabled by setting a TF_X_CONCISE_DIFF environment variable to 0. (#26187)

BREAKING CHANGES:
* configs: The version argument inside provider configuration blocks is deprecated. Instead, use the required_providers setting. (#26135)
BUG FIXES:

command/clistate: return an error on a state unlock failure [#25729] 
lang/funcs: fix panic when element() is called with a negative offset (#26079)
states/remote: fix state push -force to work for all backends (#26190)
"
120,"0.13.2 (September 02, 2020)
NEW FEATURES:

Network-based Mirrors for Provider Installation: As an addition to the existing capability of ""mirroring"" providers into the local filesystem, a network mirror allows publishing copies of providers on an HTTP server and using that as an alternative source for provider packages, for situations where directly accessing the origin registries is impossible or undesirable. (#25999)

ENHANCEMENTS:

backend/http: add support for configuration by environment variable. (#25439)
command: Add support for provider redirects to 0.13upgrade. If a provider in the Terraform Registry has moved to a new namespace, the 0.13upgrade subcommand now detects this and follows the redirect where possible. (#26061)
command: Improve init error diagnostics when encountering what appears to be an in-house provider required by a pre-0.13 state file. Terraform will now display suggested terraform state replace-provider commands which will fix this specific problem. (#26066)

BUG FIXES:

command: Warn instead of error when the output subcommand with no arguments results in no outputs. This aligns the UI to match the 0 exit code in this situation, which is notable but not necessarily an error. (#26036)
terraform: Fix crashing bug when reading data sources during plan with blocks backed by objects, not collections (#26028)
terraform: Fix bug where variables values were asked for twice on the command line and provider input values were asked for but not saved (#26063)
"
121,"0.13.1 (August 26, 2020)
ENHANCEMENTS:

config: cidrsubnet and cidrhost now support address extensions of more than 32 bits (#25517)
cli: The directories that Terraform searches by default for provider plugins can now be symlinks to directories elsewhere. (This applies only to the top-level directory, not to nested directories inside it.) (#25692)
backend/s3: simplified mock handling and assume role testing (#25903)
backend/s3: support for appending data to the User-Agent request header with the TF_APPEND_USER_AGENT environment variable (#25903)

BUG FIXES:
* config: Override files containing module blocks can now override the special providers argument. (#25496)
* cli: The state lock will now be unlocked consistently across both the local and remote backends in the terraform console and terraform import commands. [#25454] 
* cli: The -target option to terraform plan and terraform apply now correctly handles addresses containing module instance indexes. (#25760)
* cli: terraform state mv can now move the last resource from a module without panicking. (#25523)
* cli: If the output of terraform version contains an outdated version notice, this is now printed after the version number and not before. (#25811)
* command: Prevent creation of workspaces with invalid names via the TF_WORKSPACE environment variable, and allow any existing invalid workspaces to be deleted. (#25262)
* command: Fix error when multiple -no-color flags are set on the command line. (#25847)
* command: Fix backend config override validation, allowing the use of -backend-config override files with the enhanced remote backend. (#25960)
* core: State snapshots now use a consistent ordering for resources that have the same name across different modules. Previously the ordering was undefined. (#25498)
* core: A dynamic block producing an unknown number of blocks will no longer incorrectly produce the error ""Provider produced inconsistent final plan"" when the block type is backed by a set of objects. (#25662)
* core: Terraform will now silently drop attributes that appear in the state but are not present in the corresponding resource type schema, on the assumption that those attributes existed in a previous version of the provider and have now been removed. (#25779)
* core: The state upgrade logic for handling unqualified provider addresses from Terraform v0.11 and earlier will no longer panic when it encounters references to the built-in terraform provider. (#25861)
* internal: Clean up provider package download temporary files after installing. (#25990)
* terraform: Evaluate module call arguments for terraform import even if defaults are given for input variables (#25890)
* terraform: Fix misleading Terraform required_version constraint diagnostics when multiple required_version settings exist in a single module (#25898)"
122,"0.13.0 (August 10, 2020)

This is a list of changes relative to Terraform v0.12.29. To see the
incremental changelogs for the v0.13.0 prereleases, see
the v0.13.0-rc1 changelog.

This section contains details about various changes in the v0.13 major release. If you are upgrading from Terraform v0.12, we recommend first referring to the v0.13 upgrade guide for information on some common concerns during upgrade and guidance on ways to address them. (The final upgrade guide and the documentation for the new features will be published only when v0.13.0 final is released; until then, some links in this section will be non-functional.)
NEW FEATURES:
* count and for_each for modules: Similar to the arguments of the same name in resource and data blocks, these create multiple instances of a module from a single module block. (#24461)


depends_on for modules: Modules can now use the depends_on argument to ensure that all module resource changes will be applied after any changes to the depends_on targets have been applied. (#25005)


Automatic installation of third-party providers: Terraform now supports a decentralized namespace for providers, allowing for automatic installation of community providers from third-party namespaces in the public registry and from private registries. (More details will be added about this prior to release.)


Custom validation rules for input variables: A new validation block type inside variable blocks allows module authors to define validation rules at the public interface into a module, so that errors in the calling configuration can be reported in the caller's context rather than inside the implementation details of the module. (#25054)


New Kubernetes remote state storage backend: This backend stores state snapshots as Kubernetes secrets. (#19525)


BREAKING CHANGES:
* As part of introducing a new heirarchical namespace for providers, Terraform now requires an explicit source specification for any provider that is not in the ""hashicorp"" namespace in the main public registry. (#24477)
For more information, including information on the automatic upgrade process, refer to [the v0.13 upgrade guide](https://www.terraform.io/upgrade-guides/0-13.html).



terraform import: the previously-deprecated -provider option is now removed. (#24090)
To specify a non-default provider configuration for import, add the provider meta-argument to the target resource block.
* config: Inside provisioner blocks that have when = destroy set, and inside any connection blocks that are used by such provisioner blocks, it is no longer valid to refer to any objects other than self, count, or each. (This was previously deprecated in a v0.12 minor release.) (#24083)
If you are using null_resource to define provisioners not attached to a real resource, include any values your provisioners need in the triggers map and change the provisioner configuration to refer to those values via self.triggers.
* configs: At most one terraform required_providers block is permitted per module (#24763)
If you previously had multiple required_providers blocks in the same module, consolidate their requirements together into a single block.
* The official MacOS builds of Terraform CLI are no longer compatible with Mac OS 10.10 Yosemite; Terraform now requires at least Mac OS 10.11 El Capitan.
Terraform 0.13 is the last major release that will support 10.11 El Capitan, so if you are upgrading your OS we recommend upgrading to Mac OS 10.12 Sierra or later.
* The official FreeBSD builds of Terraform CLI are no longer compatible with FreeBSD 10.x, which has reached end-of-life. Terraform now requires FreeBSD 11.2 or later.
* backend/oss: The TableStore schema now requires a primary key named LockID of type String. (#24149)
* backend/s3: The previously-deprecated lock_table, skip_get_ec2_platforms, and skip_requesting_account_id arguments are now removed. (#25134)
* backend/s3: The credential source preference order now considers EC2 instance profile credentials as lower priority than shared configuration, web identity, and ECS role credentials. (#25134)
* backend/s3: The AWS_METADATA_TIMEOUT environment variable is no longer used. The timeout is now fixed at one second with two retries. (#25134)


NOTES:
* The terraform plan and terraform apply commands will now detect and report changes to root module outputs as needing to be applied even if there are no resource changes in the plan.
This is an improvement in behavior for most users, since it will now be possible to change `output` blocks and use `terraform apply` to apply those changes.

If you have a configuration where a root module output value is changing for every plan (for example, by referring to an unstable data source), you will need to remove or change that output value in order to allow convergence on an empty plan. Otherwise, each new plan will propose more changes.



Terraform CLI now supports TLS 1.3 and supports Ed25519 certificates when making outgoing connections to remote TLS servers.
While both of these changes are backwards compatible in principle, certain legacy TLS server implementations can reportedly encounter problems when attempting to negotiate TLS 1.3. (These changes affects only requests made by Terraform CLI itself, such as to module registries or backends. Provider plugins have separate TLS implementations that will gain these features on a separate release schedule.)
* On Unix systems where use-vc is set in resolv.conf, Terraform will now use TCP for DNS resolution.
We don't expect this to cause any problem for most users, but if you find you are seeing DNS resolution failures after upgrading please verify that you can either reach your configured nameservers using TCP or that your resolver configuration does not include the use-vc directive.
* The terraform 0.12upgrade command is no longer available. (#24403)
To upgrade from Terraform v0.11, first upgrade to the latest v0.12 release and then upgrade to v0.13 from there.


ENHANCEMENTS:
* config: templatefile function will now return a helpful error message if a given variable has an invalid name, rather than relying on a syntax error in the template parsing itself. (#24184)
* config: The configuration language now uses Unicode 12.0 character tables for certain Unicode-version-sensitive operations on strings, such as the upper and lower functions. Those working with strings containing new characters introduced since Unicode 9.0 may see small differences in behavior as a result of these table updates.
* config: The new sum function takes a list or set of numbers and returns the sum of all elements. (#24666)
* config: Modules authored by the same vendor as the main provider they use can now pass metadata to the provider to allow for instrumentation and analytics. (#22583)
* cli: The terraform plan and terraform apply commands now recognize changes to root module outputs as side-effects to be approved and applied. This means you can apply root module output changes using the normal plan and apply workflow. (#25047)
* cli: When installing providers from the Terraform Registry, Terraform will verify the trust signature for partner providers, and allow for self-signed community providers. (#24617)
* cli: terraform init will display detailed trust signature information when installing providers from the Terraform Registry and other provider registries. (#24932)
* cli: It is now possible to optionally specify explicitly which installation methods can be used for different providers in the CLI configuration, such as forcing a particular provider to be loaded from a particular directory on local disk instead of consulting its origin provider registry. (#24728)
* cli: The new terraform state replace-provider subcommand allows changing the selected provider for existing resource instances in the Terraform state. (#24523)
* cli: The new terraform providers mirror subcommand can automatically construct or update a local filesystem mirror directory containing the providers required for the current configuration. (#25084)
* cli: terraform version -json now produces machine-readable version information. (#25252)
* cli: terraform import can now work with provider configurations containing references to other objects, as long as the data in question is already known in the current state. (#25420)
* cli: The terraform state rm command will now exit with status code 1 if the given resource address does not match any resource instances. (#22300)
* cli: The terraform login command now requires the full word ""yes"" to confirm, rather than just ""y"", for consistency with Terraform's other interactive prompts. (#25379)
* core: Several of Terraform's graph operations are now better optimized to support configurations with highly-connected graphs. (#23811, #25544)
* backend/remote: Now supports terraform state push -force. (#24696)
* backend/remote: Can now accept -target options when creating a plan using remote operations, if supported by the target server. (Server-side support for this in Terraform Cloud and Terraform Enterprise will follow in forthcoming releases of each.) (#24834)
* backend/azurerm: Now uses the Giovanni Storage SDK to communicate with Azure. (#24669)
* backend/s3: The backend will now always consult the shared configuration file, even if the AWS_SDK_LOAD_CONFIG environment variable isn't set. That environment variable is now ignored. (#25134)
* backend/s3: Region validation now automatically supports the new af-south-1 (Africa (Cape Town)) region. (#24744)
For AWS operations to work in the new region, you must explicitly enable it as described in [AWS General Reference: Enabling a Region](https://docs.aws.amazon.com/general/latest/gr/rande-manage.html#rande-manage-enable). If you haven't enabled the region, the Terraform S3 Backend will return `InvalidClientTokenId` errors during credential validation.


backend/s3: A ~/ prefix in the shared_credentials_file argument is now expanded to the current user's home directory. (#25134)
backend/s3: The backend has a number of new options for customizing the ""assume role"" behavior, including controlling the lifetime and access policy of temporary credentials. (#25134)
backend/swift: The authentication options match those of the OpenStack provider. (#23510)

BUG FIXES:
* config: The jsonencode function can now correctly encode a single null value as the JSON expression null. (#25078)
* config: The map function no longer crashes when incorrectly given a non-string key. (#24277)
* config: The substr function now correctly returns a zero-length string when given a length of zero, rather than ignoring that argument entirely. (#24318)
* config: ceil(1/0) and floor(1/0) (that is, an infinity as an argument) now return another infinity with the same sign, rather than just a large integer. (#21463)
* config: The rsadecrypt function now supports the OpenSSH RSA key format. (#25112)
* config: The merge function now returns more precise type information, making it usable for values passed to for_each, and will no longer crash if all of the given maps are empty. (#24032, #25303)
* vendor: The various set-manipulation functions, like setunion, will no longer panic if given an unknown set value (#25318)
* config: Fixed a crash with incorrect syntax in .tf.json and .tfvars.json files. (#24650)
* config: The function argument expansion syntax ... no longer incorrectly fails with ""Invalid expanding argument value"" in situations where the expanding argument's type will not be known until the apply phase. (#25216)
* config: Variable validation block error message checks no longer fail when non-ASCII characters are present. (#25144)
* cli: The terraform plan command (and the implied plan run by terraform apply with no arguments) will now print any warnings that were generated even if there are no changes to be made. (#24095)
* cli: terraform state mv now correctly records the resource's use of either count or for_each based on the given target address. (#24254)
* cli: When using the TF_CLI_CONFIG_FILE environment variable to override where Terraform looks for CLI configuration, Terraform will now ignore the default CLI configuration directory as well as the default CLI configuration file. (#24728)
* cli: The terraform login command in OAuth2 mode now implements the PKCE OAuth 2 extension more correctly. Previously it was not compliant with all of the details of the specification. (#24858)
* cli: Fixed a potential crash when the HOME environment variable isn't set, causing the native service credentials store to be nil. (#25110)
* command/fmt: Error messages will now include source code snippets where possible. (#24471)
* command/apply: terraform apply will no longer silently exit when given an absolute path to a saved plan file on Windows. (#25233)
* command/init: terraform init will now produce an explicit error message if given a non-directory path for its configuration directory argument, and if a -backend-config file has a syntax error. Previously these were silently ignored. (#25300, #25411)
* command/console:  (#25442)
* command/import: The import command will now properly attach the configured provider for the target resource based on the configuration, making the -provider command line option unnecessary. (#22862)
* command/import: The -allow-missing-config option now works correctly. It was inadvertently disabled as part of v0.12 refactoring. (#25352)
* command/show: Resource addresses are now consistently formatted between the plan and prior state in the -json output. (#24256)
* core: Fixed a crash related to an unsafe concurrent read and write of a map data structure. (#24599)
* core: Instances are now destroyed only using their stored state, without re-evaluating configuration. This avoids a number of dependency cycle problems when ""delete"" actions are included in a plan. (#24083)
* provider/terraform: The terraform_remote_state data source will no longer attempt to ""configure"" the selected backend during validation, which means backends will not try to perform remote actions such as verifying credentials during terraform validate. Local validation still applies in all cases, and the configuration step will still occur prior to actually reading the remote state in a normal plan/apply operation. (#24887)
* backend/remote: Backend will no longer crash if the user cancels backend initialization at an inopportune time, or if there is a connection error. (#25135) (#25341)
* backend/azurerm: The backend will now create a Azure storage snapshot of the previous Terraform state snapshot before writing a new one. (#24069)
* backend/s3: Various other minor authentication-related fixes previously made in the AWS provider. (#25134)
* backend/oss: Now allows locking of multiple different state files. (#24149)
* provisioner/remote-exec: The provisioner will now return an explicit error if the host connection argument is an empty string. Previously it would repeatedly attempt to resolve an empty hostname until timeout. (#24080)
* provisioner/chef: The provisioner will now gracefully handle non-failure (RFC062) exit codes returned from Chef. (#19155)
* provisioner/habitat: The provisioner will no longer generate user.toml with world-readable permissions. (#24321)
* communicator/winrm: Support a connection timeout for WinRM connection blocks. Previously this argument worked for SSH only. (#25350)
EXPERIMENTS:
* This release concludes the variable_validation experiment that was started in Terraform v0.12.20. If you were participating in the experiment, you should remove the experiment opt-in from your configuration as part of upgrading to Terraform 0.13.
The experiment received only feedback that can be addressed with backward-compatible future enhancements, so we've included it into this release as stable with no changes to its original design so far. We'll consider additional features related to custom validation in future releases after seeing how it's used in real-world modules.
"
123,"0.13.0-rc1 (July 22, 2020)
BUG FIXES:

command/init: Fix confusing error message for locally-installed providers with invalid package structure (#25504)
core: Prevent outputs from being evaluated during destroy (#25500)
core: Fix the pruning of temporary values from the root module which will fail to evaluate during destroy (#25543)
core: Don't create redundant dependency edges between objects in different instances of the same module. (#25599)
core: Prevent quadratic memory usage with large numbers of instances by not storing the complete resource state in each instance (#25544)
core: Fix errors and remove cycles when a provider configuration references resources during a full destroy, and fix empty evaluation results when using self references in a destroy provisioner. (#25681)
"
124,"0.12.29 (July 22, 2020)
BUG FIXES:

core: core: Prevent quadratic memory usage with large numbers of instances by not storing the complete resource state in each instance (#25633)
"
125,"0.13.0-beta3 (July 01, 2020)
BUG FIXES:

backend/azurerm: support for snapshotting the blob used for remote state storage prior to change (#24069)
backend/remote: Prevent panic when there's a connection error (#25341)
command: Fix bug with global -v/-version/--version flags introduced in 0.13.0beta2 (#25277)
command: Fix command test fixture modify-in-place bugs, which could cause state leak between tests (#25299)
command: Preserve more comments when rerunning 0.13upgrade (#25381)
command/console: enable use of impure functions in console (for example, bcrypt()) (#25442)
command/import: Fix -allow-missing-config option (#25352)
command/init: return an error with invalid -backend-config files (#25411)
communicator/winrm: Inlcude any user-configured timeout for winrm connection (#25350)
config: Add missing validation to prevent provider configuration within modules using depends_on (#25345)
configs: Fix nested provider requirements bug introduced in 0.13.0beta2 (#25334)
configs: Fix panic when required_providers blocks have non-string attribute values (#25369)
configs: Fix panic for invalid resource provider (#25408)
core: Hide empty plans for misbehaving data sources (#25302)
provider/terraform: Don't change non-computed attribute, which result in a perpetual diff (#25297)
terraform: Relax import-specific provider configuration constraints, to permit any values that can be evaluated statically (#25420)
vendor: The merge function will no longer panic if all given maps are empty (#25303)
vendor: The various set-manipulation functions, like setunion, will no longer panic if given an unknown set value (#25318)

BREAKING CHANGES:
* command/state: exit code 1 if state rm is called on a resource that does not exist (#22300)
* command/login: Require ""yes"" to confirm, no longer accepting ""y"" (#25379)"
126,"0.12.28 (June 25, 2020)
BUG FIXES:

build: build the 0.12 version of Terraform with Go 1.12.13, rather than 0.13 Terraform's 1.14.2 (#25386)
"
127,"0.12.27 (June 24, 2020)
BUG FIXES:

backend/remote: fix panic when there's a connection error to the remote backend (#25341)
"
128,"0.13.0-beta2 (June 17, 2020)
NOTES:

backend/s3: Deprecated lock_table, skip_get_ec2_platforms, and skip_requesting_account_id arguments have been removed (#25134)
backend/s3: Credential ordering has changed from static, environment, shared credentials, EC2 metadata, default AWS Go SDK (shared configuration, web identity, ECS, EC2 Metadata) to static, environment, shared credentials, default AWS Go SDK (shared configuration, web identity, ECS, EC2 Metadata) (#25134)
backend/s3: The AWS_METADATA_TIMEOUT environment variable no longer has any effect as we now depend on the default AWS Go SDK EC2 Metadata client timeout of one second with two retries (#25134)
Removed unused targets from Makefile. If you were previously using make dev or make quickdev, replace that usage with go install (#25146)

ENHANCEMENTS:

backend/kubernetes: New kubernetes remote state storage backend (#19525)
backend/s3: Always enable shared configuration file support (no longer require AWS_SDK_LOAD_CONFIG environment variable) (#25134)
backend/s3: Automatically expand ~ prefix for home directories in shared_credentials_file argument (#25134)
backend/s3: Add assume_role_duration_seconds, assume_role_policy_arns, assume_role_tags, and assume_role_transitive_tag_keys arguments (#25134)
command/providers: Show providers in a tree of modules requiring them, along with a list of providers required by state (#25190)
provisioner/remote-exec: Return an error when the host field is empty (#24080)

BUG FIXES:

addrs: detect builtin ""terraform"" provider in legacy state (#25154)
backend/remote: do not panic if PrepareConfig or Configure receive null values (can occur when the user cancels the init command) (#25135)
backend/s3: Ensure configured profile is used (#25134)
backend/s3: Ensure configured STS endpoint is used during AssumeRole API calls (#25134)
backend/s3: Prefer AWS shared configuration over EC2 metadata credentials by default (#25134)
backend/s3: Prefer ECS credentials over EC2 metadata credentials by default (#25134)
backend/s3: Remove hardcoded AWS Provider messaging (#25134)
command/0.13upgrade: Fix 0.13upgrade usage help text to include options (#25127)
command/0.13upgrade: Do not add source for builtin provider (#25215)
command/apply: Fix bug which caused Terraform to silently exit on Windows when using absolute plan path (#25233)
command/init: Fix bug which caused the default local plugindir to be omitted as a provider source location (#25214)
command/format: Fix bug which caused some diagnostics to print empty source lines (#25156)
command/version: add -json flag for machine-parsable version output (#25252)
config: Function argument expansion with ... will no longer incorrectly return ""Invalid expanding argument value"" in situations where the expanding argument type isn't known yet. (#25216)
config: Fix crash in validation with non-ascii characters (#25144)
config: Don't panic if version constraint syntax isn't accepted by new version constraint parser (#25223)
config: Validate depends_on references in modules and outputs (#25261)
core: Fix crash with multiple nested modules (#25176)
core: Fix panic when importing with modules (#25208)
core: Allow targeting with expanded module addresses (#25206)
core: Allow referencing module instances (#25258)
"
129,"0.13.0-beta1 (June 03, 2020)
NEW FEATURES:

count and for_each for modules: Similar to the arguments of the same name in resource and data blocks, these create multiple instances of a module from a single module block. (#24461)
depends_on for modules: Modules can now use the depends_on argument to ensure that all module resource changes will be applied after any changes to the depends_on targets have been applied. (#25005)
Automatic installation of third-party providers: Terraform now supports a decentralized namespace for providers, allowing for automatic installation of community providers from third-party namespaces in the public registry and from private registries. (More details will be added about this prior to release.)
Custom validation rules for input variables: A new validation block type inside variable blocks allows module authors to define validation rules at the public interface into a module, so that errors in the calling configuration can be reported in the caller's context rather than inside the implementation details of the module. (#25054)

BREAKING CHANGES:

As part of implementing a new decentralized namespace for providers, Terraform now requires an explicit source specification for any provider that is not in the ""hashicorp"" namespace in the main public registry. (More details will be added about this prior to release, including links to upgrade steps.) (#24477)
backend/oss: Changes to the TableStore schema now require a primary key named LockID of type String (#24149)
command/0.12upgrade: this command has been replaced with a deprecation notice directing users to install terraform v0.12 to run terraform 0.12upgrade.  (#24403)
command/import: remove the deprecated -provider command line argument (#24090)
command/import: fixed a bug where the import command was not properly attaching the configured provider for a resource to be imported, making the -provider command line argument unnecessary. (#22862)
command/providers: the output of this command is now a flat list that does not display providers per module. (#24634)
config: Inside provisioner blocks that have when = destroy set, and inside any connection blocks that are used by such provisioner blocks, it is now an error to refer to any objects other than self, count, or each (#24083)
configs: At most one terraform.required_providers block is permitted per module (#24763)
The official MacOS builds of Terraform CLI are no longer compatible with Mac OS 10.10 Yosemite; Terraform now requires at least Mac OS 10.11 El Capitan. Terraform 0.13 is the last major release that will support 10.11 El Capitan, so if you are upgrading your OS we recommend upgrading to Mac OS 10.12 Sierra or later.
The official FreeBSD builds of Terraform CLI are no longer compatible with FreeBSD 10.x, which has reached end-of-life. Terraform now requires FreeBSD 11.2 or later.

NOTES:

The terraform plan and terraform apply command will now detect and report changes to root module outputs as able to be applied even if there are no resource changes in the plan. This will be an improvement in behavior for most users, since it will now be possible to change output blocks and use terraform apply to apply those changes, but it may require some changes to unusual situations where a root module output value was intentionally changing on every plan, which was not an intended usage pattern and is no longer supported.
Terraform CLI now supports TLS 1.3 and supports Ed25519 certificates when making outgoing connections to remote TLS servers. While both of these changes are backwards compatible in principle, certain legacy TLS server implementations can reportedly encounter problems when attempting to negotiate TLS 1.3. (These changes affects only requests made by Terraform CLI itself, such as to module registries or backends. Provider plugins have separate TLS implementations that will gain these features on a separate release schedule.)
On Unix systems where use-vc is set in resolv.conf, Terraform will now use TCP for DNS resolution. We don't expect this to cause any problem for most users, but if you find you are seeing DNS resolution failures after upgrading please verify that you can either reach your configured nameservers using TCP or that your resolver configuration does not include the use-vc directive.
backend/s3: Region validation now automatically supports the new af-south-1 (Africa (Cape Town)) region. For AWS operations to work in the new region, the region must be explicitly enabled as outlined in the AWS Documentation. When the region is not enabled, the Terraform S3 Backend will return errors during credential validation (e.g. error validating provider credentials: error calling sts:GetCallerIdentity: InvalidClientTokenId: The security token included in the request is invalid). (#24744)

ENHANCEMENTS:

config: templatefile function will now return a helpful error message if a given variable has an invalid name, rather than relying on a syntax error in the template parsing itself. (#24184)
config: The configuration language now uses Unicode 12.0 character tables for certain Unicode-version-sensitive operations on strings, such as the upper and lower functions. Those working with strings containing new characters introduced since Unicode 9.0 may see small differences in behavior as a result of these table updates.
cli: When installing providers from the Terraform Registry, Terraform will verify the trust signature for partner providers, and allow for self-signed community providers (#24617)
cli: Display detailed trust signature information when installing providers from the Terraform Registry, including a link to more documentation on different levels of signature (#24932)
cli: It is now possible to optionally specify explicitly which installation methods can be used for different providers, such as forcing a particular provider to be loaded from a particular directory on local disk instead of consulting its origin provider registry. (#24728)
cli: Add state replace-provider subcommand to allow changing the provider source for existing resources (#24523)
cli: The terraform plan and terraform apply commands now recognize changes to root module outputs as side-effects to be approved and applied. This means you can apply root module output changes using the normal plan and apply workflow. (#25047)
cli: The new terraform providers mirror subcommand can automatically construct or update a local filesystem mirror directory containing the providers required for the current configuration. (#25084)
config: The merge function now returns more precise type information, making it usable for values passed to for_each (#24032)
config: Add ""sum"" function, which takes a list or set of numbers and returns the sum of all elements (#24666)
config: added support for passing metadata from modules to providers using HCL (#22583)
core: Significant performance enhancements for graph operations, which will help with highly-connected graphs (#23811)
core: Data resources can now be evaluated during plan, allowing depends_on to work correctly, and allowing data sources to update immediately when their configuration changes. (#24904)
core: Data resource changes detected during planning will now always be reported in the plan output, to highlight a likely reason for effective configurationc changes elsewhere. Previously only data resources deferred to the apply phase would be shown. (#24904)
backend/azurerm: switching to use the Giovanni Storage SDK to communicate with Azure (#24669)
backend/remote: Now supports terraform state push -force. (#24696)
backend/remote: Can now accept -target options when creating a plan using remote operations, if supported by the target server. (Server-side support for this in Terraform Cloud and Terraform Enterprise will follow in forthcoming releases of each.) (#24834)
backend/s3: Support automatic region validation for af-south-1 (#24744)
backend/swift auth options match OpenStack provider auth (#23510)

BUG FIXES:
* backend/oss: Allow locking of multiple different state files (#24149)
* cli: Fix terraform state mv to correctly set the resource each mode based on the target address (#24254)
* cli: The terraform plan command (and the implied plan run by terraform apply with no arguments) will now print any warnings that were generated even if there are no changes to be made. (#24095)
* cli: When using the TF_CLI_CONFIG_FILE environment variable to override where Terraform looks for CLI configuration, Terraform will now ignore the default CLI configuration directory as well as the default CLI configuration file. (#24728)
* cli: The terraform login command in OAuth2 mode now implements the PKCE OAuth 2 extension more correctly. Previously it was not compliant with all of the details of the specification. (#24858)
* command: Fix panic for nil credentials source, which can be caused by an unset HOME environment variable (#25110)
* command/fmt: Include source snippets in errors (#24471)
* command/format: Fix diagnostic output to show multi-line code snippets correctly (#24473)
* command/show (json output): fix inconsistency in resource addresses between plan and prior state output (#24256)
* core: Fix race in GetVariableValue (#24599)
* core: Instances are now destroyed only using their stored state, removing many cycle errors (#24083)
* core: Destroy provisioners should not evaluate for_each expressions (#24163)
* funcs/jsonencode: Fix null value handling (#25078)
* lang: Fix non-string key panics in map function (#24277)
* lang: substr(""abc"", 0, 0) would previously return ""abc"", despite the length argument being 0. This has been changed to return an empty string when length is zero. (#24318)
* lang: ceil(1/0) and floor(1/0) would previously return a large integer value, rather than infinity. This has been fixed. (#21463)
* lang: Add support for OpenSSH RSA key format to rsadecrypt function (#25112)
* provisioner/chef: Gracefully handle non-failure (RFC062) exit codes (#19155)
* provisioner/habitat: Fix permissions on user.toml (#24321)
* provider/terraform: The terraform_remote_state data source will no longer attempt to ""configure"" the selected backend during validation, which means backends will not try to perform remote actions such as verifying credentials during terraform validate. Local validation still applies in all cases, and the configuration step will still occur prior to actually reading the remote state in a normal plan/apply operation. (#24887)
* vendor: Fix crash when processing malformed JSON (#24650)
EXPERIMENTS:


This release concludes the variable_validation experiment that was started in Terraform v0.12.20. If you were participating in the experiment, you should remove the experiment opt-in from your configuration as part of upgrading to Terraform 0.13.
The experiment received only feedback that can be addressed with backward-compatible future enhancements, so it's been accepted into this release as stable with no changes to its original design so far. We'll consider additional features related to custom validation in future releases after seeing how it's used in real-world modules.

"
130,"ENHANCEMENTS:

backend/remote: Can now accept -target options when creating a plan using remote operations, if supported by the target server. (Server-side support for this in Terraform Cloud and Terraform Enterprise will follow in forthcoming releases of each.) (https://github.com/hashicorp/terraform/issues/24834)
cli: A special new lifecycle mode for provider plugins where they are assumed to be controlled by an external process outside of Terraform. This is for automated provider plugin testing only, and is not an end-user feature. (https://github.com/hashicorp/terraform/issues/24674)
"
131,"NOTES:

backend/s3: Region validation now automatically supports the new af-south-1 (Africa (Cape Town)) region. For AWS operations to work in the new region, the region must be explicitly enabled as outlined in the AWS Documentation. When the region is not enabled, the Terraform S3 Backend will return errors during credential validation (e.g. error validating provider credentials: error calling sts:GetCallerIdentity: InvalidClientTokenId: The security token included in the request is invalid). (#24744)

ENHANCEMENTS:

backend/s3: Support automatic region validation for af-south-1 (#24744)
backend/remote: Add support for force push to remote backend (#24884)

BUG FIXES:
* core: Destroy provisioners should not evaluate for_each expressions (#24163)
* core: Fix races in GetVariableValue (#24599)"
132,"NOTES:

cli: Windows executable signing.

Our Windows 32-bit and 64-bit executables for this version and up will be signed with a HashiCorp cert. Windows users will no longer see a warning about an ""unknown publisher"" when running our software.
BUG FIXES:
* command/login: Fix bug when using terraform login on Windows (#24397)
* registry: Fix panic when server is unreachable (#24411)"
133,
134,"ENHANCEMENTS:
* registry: Add configurable retries for module and provider discovery requests to the remote registry (#24260)
* registry: Add configurable request timeout for the remote registry client (#24259)
BUG FIXES:

cli: Fix terraform state mv to correctly set the resource each mode based on the target address (#24254)
cli: The terraform plan command (and the implied plan run by terraform apply with no arguments) will now print any warnings that were generated even if there are no changes to be made. (#24095)
"
135,"NEW FEATURES:
* backend/cos: New backend ""cos"", supporting using Tencent Cloud Storage as a remote backend.
* command/login: Enable ""terraform login"" and add support for UI-generated tokens (#23995)
* command/logout: Add ""terraform logout"" command to remove local credentials (#24048)
ENHANCEMENTS:

command/workspace delete: release lock after workspace removal warning (#24085)
lang/funcs: add setsubtract function (#23424)

BUG FIXES:
* command/state show: Fix an issue when a resource has a non-default provider configured (#24027)
* backend/remote-state: Fix issues where lingering lock files remained when deleting non-empty workspaces (#24085)
* command/import: Release lock if initialization error occurs on import (#23318)
* terraform: Fix panic when using for_each with a set containing null values (#24047)"
136,"ENHANCEMENTS:
* config: New built-in functions try and can are intended to ease working with data structures whose shape isn't known statically. (#23794)
* config: New, optional syntax for required_providers setting in terraform blocks. This is not intended for general use yet but will support upcoming enhancements. [#23843] 
BUG FIXES:
* command/show: Fix an issue with show and aliased providers (#23848)
* core: Always clean up empty resources before empty modules (#23822)
* internal/modsdir/manifest: Fix CLI issue with Windows machines (#23865)
EXPERIMENTS:


This release includes an opt-in experiment for custom validation rules on module variables.
The feature is not yet finalized and is subject to breaking changes even in minor releases, but we're introducing it here in order to solicit feedback from module developers about which use-cases it is meeting, any use-cases it isn't meeting, and any situations where things feel harder to express than they might be.
Due to the experimental nature of this feature, we do not recommend using it in ""production"" modules yet and we require an explicit experimental feature opt-in of variable_validation. Depending on what feedback we receive, the design of this experimental feature may change significantly in future versions without an automatic upgrade path.

"
137,"ENHANCEMENTS:
* command/init: Cache Terraform Registry metadata responses when handling multiple references to the same module. (#23727)
* command/state-mv: Detect and remove references elsewhere in the state to the source address in a terraform state mv operation. This does not affect any current operations but will cause the resulting state snapshot to be different than before, and a future version of Terraform may make use of this additional precision. (#23791)
BUG FIXES:

command/init: Fix an issue with via an update to go-getter where modules would fail to download from the registry (#23792)
command/init: use backend config from state when -backend=false is used during init. (#23802)
core: Do not evaluate unused config values, which may not be valid during destroy (#23717)
core: Better error handling for an odd ""should never happen"" situation regarding the restoration of a deposed instance during a create_before_destroy replace action. While this does not yet fix the situation (it can still happen), it now has a specialized error message to hopefully help gather some more information about the root cause in future reports. (#23718)
core: Prevent insertion of default providers when resources are removed from the config. (#23696)
core: Detect and handle dependencies implied by references in a connection block directly within a resource block. (#23663)
communicator/ssh: Fix deadlock when SSH agent forwarding fails. (#23661)
"
138,"NOTES:


cli: Our darwin releases for this version and up will be signed and notarized according to Apple's requirements.
Prior to this release, MacOS 10.15+ users attempting to run our software reported seeing the error: ""'terraform' cannot be opened because the developer cannot be verified."" This error affected all MacOS 10.15+ users who downloaded our software directly via web browsers, and was caused by changes to Apple's third-party software requirements.
Our recommended approach to install and interact with the Terraform CLI can be found here.
MacOS 10.15+ users should plan to upgrade to 0.12.18+.


UPGRADE NOTES:


Inside provisioner blocks that have when = destroy set, and inside any connection blocks that are used by such provisioner blocks, it is now deprecated to refer to any objects other than self, count, and each.
Terraform has historically allowed this but doing so tends to cause downstream problems with dependency cycles or incorrect destroy ordering because it causes the destroy phase of one resource to depend on the existing state of another. Although this is currently only a warning, we strongly suggest seeking alternative approaches for existing configurations that are hitting this warning in order to avoid the risk of later problems should you need to replace or destroy the related resources.
This deprecation warning will be promoted to an error in a future release.


ENHANCEMENTS:

provisioners: Warn about the deprecation of non-self references in destroy-time provisioners, both to allow preparation for this later becoming an error and also as an extra hint for the ""Cycle"" errors that commonly arise when such references are used. (#23559)
cli: The terraform plan and terraform apply commands (and some others) now accept the additional option -compact-warnings. If set, and if Terraform produces warnings that are not also accompanied by errors, then the warnings will be presented in the output in a compact form that includes only the summary information, thus providing a compromise to avoid warnings overwhelming the output if you are not yet ready to resolve them. (#23632)

BUG FIXES:

backend/s3: Fix for users with >1000 workspaces (#22963)
cli: Allow moving indexed resource instances to new addresses that that don't yet exist in state (#23582)
cli: Improved heuristics for log level filtering with the TF_LOG environment variable, although it is still not 100% reliable for levels other than TRACE due to limitations of Terraform's internal logging infrastructure. Because of that, levels other than TRACE will now cause the logs to begin with a warning about potential filtering inaccuracy. (#23577)
command/show: Fix panic on show plan (#23581)
config: Fixed referencing errors generally involving for_each (#23475)
provisioners: The built-in provisioners (local-exec, remote-exec, file, etc) will no longer fail when the TF_CLI_ARGS environment variable is set. (#17400)
"
139,"SECURITY NOTES:


If you are using the Azure remote state backend and you are using a SAS Token for authentication, please refer to the Azure remote state backend security advisory.
Prior versions of the backend may have transmitted your state to the storage service using cleartext HTTP unless you specifically requested HTTPS when generating your SAS Token. This does not affect any other backends, and does not affect the Azure backend when using other authentication mechanisms.


NEW FEATURES:

lang/funcs: Add trim* functions

ENHANCEMENTS:

cli: Terraform will now consolidate many warnings with the same summary text into fewer warning items, in order to avoid excessive amounts of warnings making it hard to read other output from Terraform commands. (#23425)
core: The upgrade logic for moving from the Terraform 0.11 to the Terraform 0.12 state snapshot format (internally, format version 3 to version 4) will now tolerate and ignore dependencies with invalid addresses, which tend to be left behind when following the terraform 0.11checklist directive to rename resources whose names start with digits prior to upgrading to Terraform 0.12. This should allow upgrading the state for a configuration that in the past had digit-prefixed resource names, once those names have been fixed in the configuration and state using the instructions given by terraform 0.11checklist in Terraform 0.11.14. (#23443)
"
140,"0.12.16 (November 18, 2019)
BUG FIXES:

command/0.12upgrade: fix panic when int value is out of range (#23394)
core: fix cycle between dependencies with create_before_destroy (#23399)
backend/remote: default .terraformignore paths will now work on Windows (#23311)
"
141,"BUG FIXES:


various commands: Fixed errant error ""Initialization required. Please see the error message above."" (#23383)
The error was produced on some of Terraform's subcommands (in particular terraform show and terraform output, but possibly others) if a warning was emitted during configuration loading and if a backend block was present. This issue has been present since v0.12.0 for any configuration that produces configuration-related deprecation warnings, but it became more visible in v0.12.14 due to the addition of several more situations that could produce warnings.

"
142,"UPGRADE NOTES:


Terraform v0.12.0 included several changes to the Terraform language involving making expressions, type constraints, keywords, and references first-class in the language syntax, removing the need for placing thee items either in quoted strings or in interpolation syntax. Terraform v0.11 required these items to be quoted because the underlying language could not represent them any other way, while Terraform v0.12 expects them to be unquoted in order to improve readability.
We have been accepting both forms for backward-compatibility with existing configurations and examples since the inititial v0.12.0 release. Having maintained compatibility for both forms for several versions we are now beginning the deprecation cycle for the old usage by having Terraform emit deprecation warnings.
Terraform will still accept the older forms in spite of these warnings, so no immediate action is required. If your modules are targeting Terraform v0.12.0 and later exclusively, you can silence the warnings by removing the quotes, as directed in the warning message. In a future major version of Terraform, some of these warnings will be elevated to be errors.
The summary of the warning for these situations will be one of the following:

Interpolation-only expressions are deprecated: an expression like ""${foo}"" should be rewritten as just foo.
Quoted type constraints are deprecated: In a variable block, a type constraint ""map"" should be written as map(string), ""list"" as list(string), and ""string"" as just string.
Quoted keywords are deprecated: In certain contexts that expect special keywords, such as when in provisioner blocks, the keyword should be unquoted.
Quoted references are deprecated: In the depends_on and ignore_changes meta-arguments, quoted references like ""aws_instance.foo"" should be rewritten without the quotes, e.g. as aws_instance.foo.

The above changes are made automatically by the upgrade tool for users who are upgrading from Terraform 0.11. These warnings are intended to help those who are using Terraform for the first time at Terraform 0.12 but who may have found examples online that are written for older versions of Terraform, in order to guide towards the modern Terraform style.


The terraform output command would formerly treat no outputs at all as an error, exiting with a non-zero status. Since it's expected for some root modules to have no outputs, the command now returns with success status zero in this situation, but still returns the error on stderr as a compromise to provide an explanation for why nothing is being shown.


ENHANCEMENTS:

config: Redundant interpolation syntax for attribute values and legacy (0.11-style) variable type constrants will now emit deprecation warnings. (#23348)
config: Keywords and references in depends_on, ignore_changes, and in provisioner when and on_failure will now emit deprecation warnings. (#23329)
command/output: Now treats no defined outputs as a success case rather than an error case, returning exit status zero instead of non-zero. (#23008] [#21136)
backend/artifactory: Will now honor the HTTP_PROXY and HTTPS_PROXY environment variables when appropriate, to allow sending requests to the Artifactory endpoints via a proxy. (#18629)

BUG FIXES:

backend/remote: Filter environment variables when loading context for remote backend (#23283)
command/plan: Previously certain changes to lists would cause the list diff in the plan output to miss items. Now terraform plan will show those items as expected. (#22695)
command/show: When showing a saved plan file not in JSON mode, use the same presentation as terraform plan itself would've used. (#23292)
command/force-unlock: Return an explicit error when the local-filesystem lock implementation receives the wrong lock id. Previously it was possible to see either an incorrect error or no error at all in that case. (#23336)
core: Store absolute instance dependencies in state to allow for proper destroy ordering (#23252)
core: Ensure tainted status is maintained when a destroy operation fails (#23304)
config: transpose function will no longer panic when it should produce an empty map as its result. (#23321)
cli: When running Terraform as a sub-process of itself, we will no longer produce errant prefixes on the console output. While we don't generally recommend using Terraform recursively like this, it was behaving in this strange way due to an implementation detail of how Terraform captures ""panic"" crashes from the Go runtime, and that subsystem is now updated to avoid that strange behavior. (#23281)
provisioners: Sanitize output to filter invalid utf8 sequences (#23302)
"
143,"UPGRADE NOTES:


Remote backend local-only operations: Previously the remote backend was not correctly handling variables marked as ""HCL"" in the remote workspace when running local-only operations like terraform import, instead interpreting them as literal strings as described in #23228.
That behavior is now corrected in this release, but in the unlikely event that an existing remote workspace contains a variable marked as ""HCL"" whose value is not valid HCL syntax these local-only commands will now fail with a syntax error where previously the value would not have been parsed at all and so an operation not relying on that value may have succeeded in spite of the problem. If you see an error like ""Invalid expression for var.example"" on local-only commands after upgrading, ensure that the remotely-stored value for the given variable uses correct HCL value syntax.
This does not affect true remote operations like terraform plan and terraform apply, because the processing of variables for those always happens in the remote system.


BUG FIXES:

config: Fix regression where self wasn't properly evaluated when using for_each (#23215)
config: dotfiles are no longer excluded when copying existing modules; previously, any dotfile/dir was excluded in this copy, but this change makes the local copy behavior match go-getter behavior (#22946)
core: Ensure create_before_destroy ordering is enforced with dependencies between modules (#22937)
core: Fix some destroy-time cycles due to unnecessary edges in the graph, and remove unused resource nodes (#22976)
backend/remote: Correctly handle remotely-stored variables that are marked as ""HCL"" when running local-only operations like terraform import. Previously they would produce a type mismatch error, due to misinterpreting them as literal strings. (#23229)
"
144,"BUG FIXES:

backend/remote: Don't do local validation of whether variables are set prior to submitting, because only the remote system knows the full set of configured stored variables and environment variables that might contribute. This avoids erroneous error messages about unset required variables for remote runs when those variables will be set by stored variables in the remote workspace. (#23122)
"
145,"ENHANCEMENTS:

backend/s3: Support role_arn in AWS configuration files (#22994)
backend/remote: Remote backend will now ignore all .terraform/ (exclusive of .terraform/modules) and .git/ directories for uploads during remote plans/applies. You can exclude files from upload to TFC by adding a .terraformignore file to your configuration directory, more details at https://www.terraform.io/docs/backends/types/remote.html (#23105)

BUG FIXES:

config: Clean up orphan modules in the presence of -target (#21313)
config: Always evaluate whole resources rather than instances in expressions, so that invalid instance indexes can return a useful error rather than unknown (#22846)
command/jsonplan: fix bug with missing nested modules planned_values output (#23092)
command/show: Fix panic when the only resource instance is deposed (#23027)
commands: When required root module variables are not provided and interactive input is disabled (-input=false), produce a proper ""variable not defined"" error rather than falling through to an internal assertion failure. (#23040)
provisioner/puppet: fix bug when connection type was not set in config (#23057)
"
146,"ENHANCEMENTS:

terraform plan and terraform apply will now warn when the -target option is used, to draw attention to the fact that the result of applying the plan is likely to be incomplete, and to remind to re-run terraform plan with no targets afterwards to ensure that the configuration has converged. (#22783)
config: New function parseint for parsing strings containing digits as integers in various bases. (#22747)
config: New function cidrsubnets, which is a companion to the existing function cidrsubnet which can allocate multiple consecutive subnet prefixes (possibly of different prefix lengths) in a single call. (#22858)
backend/google: The GCS backend now supports OAuth2 token authentication. (#21772)
provisioner/habitat: Multiple updates and fixes, see PR for details (#22705)

BUG FIXES:

backend/manta: fix panic when insecure_skip_tls_verify was not set (#22918)
"
147,"NOTES:
* core: ignore_changes is now processed (in addition to existing behaviors) before the provider plan is run. This means that users may see fewer planned changes when using ignore_changes, as before this change, changes to ignored attributes were still being sent to CustomizeDiff in providers (which could mean cascading changes for some resources). This should be indicative that providers are no longer getting changes that were marked as ignored, but if unexpected plans are seen while using ignore_changes, investigate the settings in the ignore_changes block to ensure the appropriate attributes are set. (#22520)
ENHANCEMENTS:
* provisioners/habitat: accept_license argument available to automate accepting the EULA, now required by this client (#22745)
* config: add source addressing to unknown value errors in for_each (#22760)
BUG FIXES:
* command/console: support -var and -var-file flags (#22145)
* command/show: Fixed bug with wrong errors being returned or swallowed. (#22772)
* config: The cidrhost, cidrsubnet, and cidrnetmask functions now behave correctly with IPv6 prefixes that are short enough for the host portion to be greater than 64-bit or 32-bit (depending on the target architecture). (#22505)
* config: Fixed bug on empty sets with for_each (#22281)"
148,"0.12.8 (September 04, 2019)
NEW FEATURES:
* lang/funcs: New fileset function, for finding static local files that match a glob pattern. (#22523)
ENHANCEMENTS:
* remote-state/pg: add option to skip schema creation (#21607)
BUG FIXES:
* command/console: use user-supplied -plugin-dir (#22616)
* config: ensure sets are appropriately known for for_each (#22597)"
149,"0.12.7 (August 22, 2019)
NEW FEATURES:
* New functions regex and regexall allow applying a regular expression pattern to a string and retrieving any matching substring(s) (#22353)
ENHANCEMENTS:
* lang/funcs: lookup() can work with maps of lists, maps and objects (#22269)
* SDK: helper/acctest: Add function to return random IP address (#22312)
* SDK: httpclient: Introduce composable UserAgent(version) (#22272)
* connection/ssh: Support certificate authentication (#22156)
BUG FIXES:
* config: reduce MinIems and MaxItems  validation during decoding, to allow for use of dynamic blocks (#22530)
* config: don't validate MinItems and MaxItems in CoerceValue, allowing providers to set incomplete values (#22478)
* config: fix panic on tuples with for_each (#22279)
* config: fix references to each of for_each in provisioners (#22289)
* config: fix panic when using nested dynamic blocks (#22314)
* config: ensure consistent evaluation when moving between single resources and for_each in addressing (#22454)
* core: only start a single instance of each required provisioner (#22553)
* command: fix issue where commands occasionally exited before the error message printed (#22373)
* command/0.12upgrade: use user-supplied plugin-dir (#22306)
* command/hook_ui: Truncate the ID considering multibyte characters (#18823)
* command/fmt: Terraform fmt no longer inserts spaces after % (#22356)
* command/state: Allow moving resources to modules not yet in state (#22299)
* backend/google: Now using the OAuth2 token endpoint on googleapis.com instead of google.com. These endpoints are equivalent in functionality but googleapis.com hosts are resolvable from private Google Cloud Platform VPCs where other connectivity is restricted. (#22451)"
150,"NOTES:

backend/s3: After this update, the AWS Go SDK will prefer credentials found via the AWS_PROFILE environment variable when both the AWS_PROFILE environment variable and the AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY environment variables are statically defined. Previously the SDK would ignore the AWS_PROFILE environment variable, if static environment credentials were also specified. This is listed as a bug fix in the AWS Go SDK release notes. (#22253)

NEW FEATURES:
* backend/oss: added support for assume role config (#22186)
* config: Resources can now use a for_each meta-argument (#17179)
ENHANCEMENTS:
* backend/s3: Add support for assuming role via web identity token via the AWS_WEB_IDENTITY_TOKEN_FILE and AWS_ROLE_ARN environment variables (#22253)
* backend/s3: Support automatic region validation for me-south-1. For AWS operations to work in the new region, the region must be explicitly enabled as outlined in the AWS Documentation (#22253)
* connection/ssh: Improve connection debug messages (#22097)
BUG FIXES:
* backend/remote: remove misleading contents from error message (#22148)
* backend/s3: Load credentials via the AWS_PROFILE environment variable (if available) when AWS_PROFILE is defined along with AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY (#22253)
* config: Improve conditionals to returns the correct type when dynamic values are present but unevaluated (#22137)
* config: Fix panic when mistakingly using dynamic on an attribute (#22169)
* cli: Fix crash with reset connection during init (#22146)
* cli: show all deposed instances and prevent crash in show command (#22149)
* configs/configupgrade: Fix crash with nil hilNode (#22181)
* command/fmt: now formats correctly in presence of here-docs (#21434)
* helper/schema: don't skip deprecation check during validation when attribute value is unknown (#22262)
* plugin/sdk: allow MinItems > 1 when dynamic blocks (#22221)
* plugin/sdk: fix reflect panics in helper/schema validation (#22236)"
151,"ENHANCEMENTS:
* command/format: No longer show no-ops in terraform show, since nothing will change (#21907)
* backend/s3: Support for assuming role using credential process from the shared AWS configuration file (support profile containing both credential_process and role_arn configurations) (#21908)
* connection/ssh: Abort ssh connections when the server is no longer responding (#22037)
* connection/ssh: Support ssh diffie-hellman-group-exchange-sha256 key exchange (#22037)
BUG FIXES:
* backend/remote: fix conflict with normalized config dir and vcs root working directory (#22096)
* backend/remote: be transparent about what filesystem prefix Terraform is uploading to the remote system, and why it's doing that (#22121)
* configs: Ensure diagnostics are properly recorded from nested modules (#22098)
* core: Prevent inconsistent final plan error when using dynamic in a set-type block (#22057)
* lang/funcs: Allow null values in compact function (#22044)"
152,"NEW FEATURES: 

lang/funcs: new abspath function returns the absolute path to a given file (#21409)
backend/swift: support for user configured state object names in swift containers (#17465)

BUG FIXES:

core: Prevent crash when a resource has no current valid instance (#21979)
plugin/sdk: Prevent empty strings from being replaced with default values (#21806)
plugin/sdk: Ensure resource timeouts are not lost when there is an empty plan (#21814)
plugin/sdk: Don't add null elements to diagnostic paths when validating config (#21884)
lang/funcs: Add missing map of bool support for lookup (#21863)
config: Fix issue with downloading BitBucket modules from deprecated V1 API by updating go-getter dependency (#21948)
config: Fix conditionals to evaluate to the correct type when using null (#21957)
"
153,"ENHANCEMENTS:

config: add GCS source support for modules (#21254)
command/format: Reduce extra whitespaces & new lines (#21334)
backend/s3: Support for chaining assume IAM role from AWS shared configuration files (#21815)

BUG FIXES:

configs: Can now use references like tags[""foo""] in ignore_changes to ignore in-place updates to specific keys in a map (#21788)
configs: Fix panic on missing value for version attribute in provider blocks. (#21825)
lang/funcs: Fix merge panic on null values. Now will give an error if null used (#21695)
backend/remote: Fix ""Conflict"" error if the first state snapshot written after a Terraform CLI upgrade has the same content as the prior state. (#21811)
backend/s3: Fix AWS shared configuration file credential source not assuming a role with environment and ECS credentials (#21815)
"
154,"NEW FEATURES:

provisioners: new provisioner: puppet (#18851)
range function for generating a sequence of numbers as a list (#21461)
yamldecode and experimental yamlencode functions for working with YAML-serialized data (#21459)
uuidv5 function for generating name-based (as opposed to pseudorandom) UUIDs (#21244)
backend/oss: Add support for Alibaba OSS remote state (#16927)

ENHANCEMENTS:

config: consider build metadata when interpreting module versions (#21640)
backend/http: implement retries for the http backend (#19702)
backend/swift: authentication mechanisms now more consistent with other OpenStack-compatible tools (#18671)
backend/swift: add application credential support (#20914)

BUG FIXES:

command/show: use the state snapshot included in the planfile when rendering a plan to json (#21597)
config: Fix issue with empty dynamic blocks failing when usign ConfigModeAttr (#21549)
core: Re-validate resource config during final plan (#21555)
core: Fix missing resource timeouts during destroy (#21611)
core: Don't panic when encountering an invalid depends_on (#21590)
backend: Fix panic when upgrading from a state with a hash value greater than MaxInt (#21484)
"
155,"BUG FIXES:

core: Always try to select a workspace after initialization (#21234)
command/show: fix inconsistent json output causing a panic [#21541] 
config: distinct function no longer panics when given an empty list (#21538)
config: Don't panic when a version constraint is added to a module that was previously initialized without one (#21542)
config: matchkeys function argument type checking will no longer fail incorrectly during validation (#21576)
backend/local: Don't panic if an instance in the state only has deposed instances, and no current instance (#21575)
"
156,"
This is the aggregated summary of changes compared to v0.11.14. If you'd like to see the incremental changelog through each of the v0.12.0 prereleases, please refer to the v0.12.0-rc1 changelog.

The focus of v0.12.0 was on improvements to the Terraform language made in response to all of the feedback and experience gathered on prior versions. We hope that these language improvements will help to make configurations for more complex situations more readable, and improve the usability of re-usable modules.
However, an overhaul of this kind inevitably means that 100% compatibility is not possible. The updated language is designed to be broadly compatible with the 0.11 language as documented, but some of the improvements required a slightly stricter parser and language model in order to resolve ambiguity or to give better feedback in error messages.
If you are upgrading to v0.12.0, we strongly recommend reading the upgrade guide to learn the recommended upgrade process, which includes a tool to automatically upgrade many improved language constructs and to indicate situations where human intuition is required to complete the upgrade.
Incompatibilities and Notes


As noted above, the language overhaul means that several aspects of the language are now parsed or evaluated more strictly than before, so configurations that employ workarounds for prior version limitations or that followed conventions other than what was shown in documentation may require some updates. For more information, please refer to the upgrade guide.


In order to give better feedback about mistakes, Terraform now validates that all variable names set via -var and -var-file options correspond to declared variables, generating errors or warnings if not. In situations where automation is providing a fixed set of variables to all configurations (whether they are using them or not), use TF_VAR_ environment variables instead, which are ignored if they do not correspond to a declared variable.


The wire protocol for provider and provisioner plugins has changed, so plugins built against prior versions of Terraform are not compatible with Terraform v0.12. The most commonly-downloaded providers already had v0.12-compatible releases at the time of v0.12.0 release, but some other providers (particularly those distributed independently of the terraform init installation mechanism) will need to make new releases before they can be used with Terraform v0.12 or later.


The index API for automatic provider installation in terraform init is now provided by the Terraform Registry at registry.terraform.io, rather than the indexes directly on releases.hashicorp.com. The ""releases"" server is still currently the distribution source for the release archives themselves at the time of writing, but that may change over time.


The serialization formats for persisted state snapshots and saved plans have changed. Third-party tools that parse these artifacts will need to be updated to support these new serialization formats.


For most use-cases, we recommend instead using terraform show -json to read the content of state or plan, in a form that is less likely to see significant breaking changes in future releases.

terraform validate now has a slightly smaller scope than before, focusing only on configuration syntax and type/value checking. This makes it safe to run in unattended scenarios, such as on save in a text editor.

New Features
The full set of language improvements is too large to list them all out exhaustively, so the list below covers some highlights:


First-class expressions: Prior to v0.12, expressions could be used only via string interpolation, like ""${var.foo}"". Expressions are now fully integrated into the language, allowing them to be used directly as argument values, like ami = var.ami.


for expressions: This new expression construct allows the construction of a list or map by transforming and filtering elements from another list or map. For more information, refer to the for expressions documentation.


Dynamic configuration blocks: For nested configuration blocks accepted as part of a resource configuration, it is now possible to dynamically generate zero or more blocks corresponding to items in a list or map using the special new dynamic block construct. This is the official replacement for the common (but buggy) unofficial workaround of treating a block type name as if it were an attribute expecting a list of maps value, which worked sometimes before as a result of some unintended coincidences in the implementation.


Generalised ""splat"" operator: The aws_instance.foo.*.id syntax was previously a special case only for resources with count set. It is now an operator within the expression language that can be applied to any list value. There is also an optional new splat variant that allows both index and attribute access operations on each item in the list. For more information, refer to the Splat Expressions documentation.


Nullable argument values: It is now possible to use a conditional expression like var.foo != """" ? var.foo : null to conditionally leave an argument value unset, whereas before Terraform required the configuration author to provide a specific default value in this case. Assigning null to an argument is equivalent to omitting that argument entirely.


Rich types in module inputs variables and output values: Terraform v0.7 added support for returning flat lists and maps of strings, but this is now generalized to allow returning arbitrary nested data structures with mixed types. Module authors can specify an expected type constraint for each input variable to allow early type checking of arguments.


Resource and module object values: An entire resource or module can now be treated as an object value within expressions, including passing them through input variables and output values to other modules, using an attribute-less reference syntax, like aws_instance.foo.


Extended template syntax: The simple interpolation syntax from prior versions is extended to become a simple template language, with support for conditional interpolations and repeated interpolations through iteration. For more information, see the String Templates documentation.


jsondecode and csvdecode interpolation functions: Due to the richer type system in the new configuration language implementation, we can now offer functions for decoding serialization formats. jsondecode is the opposite of jsonencode, while csvdecode provides a way to load in lists of maps from a compact tabular representation.


Revamped error messages: Error messages relating to configuration now always include information about where in the configuration the problem was found, along with other contextual information. We have also revisited many of the most common error messages to reword them for clarity, consistency, and actionability.


Structual plan output: When Terraform renders the set of changes it plans to make, it will now use formatting designed to be similar to the input configuration language, including nested rendering of individual changes within multi-line strings, JSON strings, and nested collections.


Other Improvements


terraform validate now accepts an argument -json which produces machine-readable output. Please refer to the documentation for this command for details on the format and some caveats that consumers must consider when using this interface. (#17539)


The JSON-based variant of the Terraform language now has a more tightly-specified and reliable mapping to the native syntax variant. In prior versions, certain Terraform configuration features did not function as expected or were not usable via the JSON-based forms. For more information, see the JSON Configuration Syntax documentation.


The new built-in function templatefile allows rendering a template from a file directly in the language, without installing the separate Template provider and using the template_file data source.


The new built-in function formatdate, which is a specialized string formatting function for creating machine-oriented timestamp strings in various formats.


The new built-in functions reverse, which reverses the order of items in a list, and strrev, which reverses the order of Unicode characters in a string.


A new pg state storage backend allows storing state in a PostgreSQL database.


The azurerm state storage backend supports new authentication mechanisms, custom resource manager endpoints, and HTTP proxies.


The s3 state storage backend now supports credential_source in AWS configuration files, support for the new AWS regions eu-north-1 and ap-east-1, and several other improvements previously made in the aws provider.


The swift state storage backend now supports locking and workspaces.


Bug Fixes
Quite a few bugs were fixed indirectly as a result of improvements to the underlying language engine, so a fully-comprehensive list of fixed bugs is not possible, but some of the more commonly-encountered bugs that are fixed in this release include:


config: The conditional operator ... ? ... : ... now works with result values of any type and only returns evaluation errors for the chosen result expression, as those familiar with this operator in other languages might expect.


config: Accept and ignore UTF-8 byte-order mark for configuration files (#19715)


config: When using a splat expression like aws_instance.foo.*.id, the addition of a new instance to the set (whose id is therefore not known until after apply) will no longer cause all of the other ids in the resulting list to appear unknown.


config: The jsonencode function now preserves the types of values passed to it, even inside nested structures, whereas before it had a tendency to convert primitive-typed values to string representations.


config: The format and formatlist functions now attempt automatic type conversions when the given values do not match the ""verbs"" in the format string, rather than producing a result with error placeholders in it.


config: Assigning a list containing one or more unknown values to an argument expecting a list no longer produces the incorrect error message ""should be a list"", because Terraform is now able to track the individual elements as being unknown rather than the list as a whole, and to track the type of each unknown value. (This also avoids any need to place seemingly-redundant list brackets around values that are already lists, which would now be interpreted as a list of lists.)


cli: When create_before_destroy is enabled for a resource, replacement actions are reflected correctly in rendered plans as +/- rather than -/+, and described as such in the UI messages.


core: Various root causes of the ""diffs didn't match during apply"" class of error are now checked at their source, allowing Terraform to either avoid the problem occurring altogether (ideally) or to provide a more actionable error message to help with reporting, finding, and fixing the bug.

"
157,"NEW FEATURES:

terraform 0.12checklist command detects and reports on some preparation steps that will make a subsequent Terraform 0.12 upgrade smoother. (#21241)

IMPROVEMENTS:

provider/terraform: The terraform_remote_state data source is now able to read outputs from a state snapshot created by Terraform 0.12, to provide more flexibility when upgrading individual configurations to Terraform 0.12 in a decomposed environment. (#21226)
backend/s3: Support DynamoDB, IAM, and STS endpoint configurations (#20659)
backend/s3: Support for AWS regions eu-north-1 and us-gov-east-1 (#20659)
backend/s3: Enhance retry logic and provide max_retries configuration for retry attempts (#20659)
backend/s3: Enhance S3 NoSuchBucket error to include additional information (#20659)
backend/s3: Remove unused EC2 platform and AWS Account ID lookup, and deprecate equivalent skip_get_ec2_platforms and skip_requesting_account_id arguments (#20659)
backend/remote: Do not unlock a workspace after a failed state upload (#21148)

BUG FIXES:

backend/remote: Ensure variables are loaded correctly when using terraform console (#20858)
backend/remote: Make sure workspaces are correctly uploaded (#20953)
backend/remote: Fix panic when loading cached configuration with 0.12 backend schema (#21199)
core: Fix a potential crash when loading module manifests with Windows paths (#20812)
core: Make sure UIInput keeps working after being canceled (#21140)
core: Always try to select a workspace after initialization (#21230)
"
158,"The following are the significant changes since 0.12.0-beta2.
NEW FEATURES: 

New function strrev, for reversing unicode strings. (#21091)

IMPROVEMENTS:

backend/s3: Support for the new AWS region ap-east-1 (#21117)
backend/remote: Do not unlock a workspace after a failed state upload (#21148)
command/init: Improve formatting of provider names during discovery (#21094)
command/0.12upgrade: Upgrade indexing of splat syntax (#21103)
command/0.12upgrade: Return error for invalid references (e.g. with initial digits) (#21103)

BUG FIXES:

core: Make sure UIInput keeps working after being canceled (#21139)
lang/funcs: flatten fix handling of sets and tuples; return a tuple (#21171)
states/statefile: properly upgrade dependency syntax (#21159)
"
159,"BACKWARDS INCOMPATIBILITIES / NOTES:

The terraform state ... family of commands have all been adjusted to more consistently match how resource addresses are resolved elsewhere in Terraform. In general the matches are now more specific than they were before (matching less, rather than more) but if you are using any of those commands in existing automation please verify that you will still getting expected behavior using the -dry-run options.
The project and region arguments for the gcs backend have now been removed, after having first been deprecated and then ignored in previous versions. These arguments are no longer needed because the backend expects the specified bucket to already exist. (#19285)

NEW FEATURES:

New function reverse, for reversing lists. (#18887)

IMPROVEMENTS:

The warning for undeclared variables in .tfvars files now consolidates multiple warnings when there are more than three, to avoid an overwhelming wall of warnings in situations where a common .tfvars file is used across many configurations. Setting ""global"" variables in .tfvars is deprecated for v0.12 and should be replaced with the TF_VAR_... environment variables. (#20581)
backend/remote: Retry calls when the remote backend responds with a server error (#20588)
backend/remote: Check for external updates while waiting for user input (#20620)
config: The coalesce function now skips null values (#21002)
backend/pg: Switch pg backend to session-level advisory locking (#20561)
plugin/discover: Parse and display provider warnings from the Terraform Registry (#20674)
plugin/registry: Add friendly error for when registry unresponsive (#20853)

BUG FIXES:

backend/remote: Ensure variables are loaded correctly when using terraform console (#20857)
backend/remote: Make sure workspaces are correctly uploaded (#20952)
config: Correct filebase64sha256 function return value (#20654)
command/fmt: ""Heredoc"" sequences no longer cause incorrect indentation for following blocks (#20715)
command/state ...: The address-matching logic for all of these commands now correctly matches an address like aws_instance.foo only in the root module, rather than maching all resources/instances of the given type and name in descendent modules too. (#20719)
command/state list: Properly load user-supplied statefile. (#21015)
command/state mv: Some regressions between 0.11 and 0.12 have been addressed. (#20719)
command/plan: Diff renderer will no longer panic if an object is removed from the end of a list of objects. (#20765)
command/plan: Diff renderer will now correctly indicate when adding a new attribute is what forces resource instance replacement. (#20827)
config: The coalesce function will now correctly ignore empty strings (#21002)
helper/schema: Prevent crash when setting a TypeSet attribute with a typed nil of *schema.Set (#20891)
core: Restore pre-v0.12 behavior of retaining objects in state if a delete operation fails. (#21033)
"
160,"BUG FIXES:

backend/remote: Fix a backend initialization bug (#20638)
"
161,"IMPROVEMENTS:

The filemd5, filesha1, etc functions from Terraform v0.12 are backported primarily to allow writing
  modules that can work in both Terraform 0.11 and 0.12, since the sha1(file(""..."")) pattern in 0.12
  works only for files containing valid UTF-8 text; sha1file(""..."") must be used instead.  Both
  forms are equivalent in Terraform 0.11.
backend/remote: Retry calls when the remote backend responds with a server error (#20589)
backend/remote: Check for external updates while waiting for user input (#20622)

BUG FIXES:

backend/remote: Fix ""token too long"" errors when streaming remote operation logs (#20241)
backend/remote: Use the can-queue-apply permission to detect if apply is allowed (#20462)
backend/remote: Exit with 1 when a remote run is canceled (#20482)
core: Use slashes in the module manifest to prevent Windows/Linux compatibility issues (#20246)
"
162,"This is a pre-release version of Terraform v0.12.0.
For important information on the status of this release, please see the release announcement.
BACKWARDS INCOMPATIBILITIES / NOTES:

backend/s3: workspace_key_prefix can no longer be defined with leading or trailing slashes. Users should verify the state paths in s3 if they need to change this in case there are extra slashes in the keys (#20432)
config: path.module and path.root now return paths with forward slashes on all operating systems, including Windows. This avoids the need to write constructed paths differently for Windows vs. other operating systems, but any existing constructed paths containing backslashes for Windows must now be rewritten to use forward slashes, like ""${path.module}/foo/bar"". (#19708)
config: path.module and path.root are now relative to the current working directory, rather than absolute as before. This avoids including a host-specific absolute path prefix on constructed paths, but may show as a diff after upgrade in situations where a constructed path is included in a resource attribute value. (#19708)
tools/terraform-bundle: use the terraform-bundle of the same tag as the targeted terraform binary version. This avoids adding complexity to resolve protocol versions across different terraform versions. (#20030)

IMPROVEMENTS:

communicator/ssh: Add SSH certificate authentication (#18896)
communicator/ssh: Enable ssh keepalive messages for long running commands (#20437)
config: New set-theory functions sethaselement, setunion, setintersection, and setproduct for working with set values.
config: New type conversion functions tostring, tonumber, tobool, tolist, toset, and tomap. Explicit conversions are rarely required but occasionally useful; use these functions only when necessary.
plugins: Plugin RPC connection is now authenticated (#19629)
backend/azurerm: Support for authenticating using the Azure CLI (#19465)
backend/remote: Return detailed version (in)compatibility information (#19659)
backend/remote: Log early to indicate remote execution started (#19941)
backend/remote: Make sure the correct error is shown when having version incompatibilities (#20086)
backend/remote: Fix ""token too long"" errors when streaming remote operation logs (#20242)
backend/remote: Use the state.v2 service when using remote state only (#20379)
backend/remote: Use the can-queue-apply permission to detect if apply is allowed (#20460)
backend/s3: Fix missing workspace entries when using workspace_key_prefix with trailing slashes (#20432)
backend/s3: Support DynamoDB, IAM, and STS endpoint configurations (#19571)
backend/s3: Support for the new AWS region eu-north-1 (#19651)
backend/s3: Enhance retry logic and provide max_retries configuration to retry attempts (#19951)
backend/s3: Enhance S3 NoSuchBucket error to include additional information (#19951)
backend/s3: Remove unused EC2 platform and AWS Account ID lookup, and deprecate equivalent skip_get_ec2_platforms and skip_requesting_account_id arguments (#20374)
backend/swift: Add support for locking and workspaces (#20211)
core: Enhance service discovery error handling and messaging (#19589)
core: Add support to retrieve version constraints to service discovery (#19647)
core: Validate provisioner connection blocks, and mark host field as required (#19707)
command/format: Ignore removal of empty strings (#19990)
command/format: Reduce whitespaces in empty fields (#19995)
command/format: Render null in dark gray (#19616)
command/init: Add provider protocol compatibility UI err msg during registry discovery (#19976)
command/providers schema: Add command to export schemas for all currently-configured providers (#20446)
command/show: Add support for machine readable output via a -json argument to terraform show (#19687)
command/state: Use locking when updating states (#19939)
provisioner/salt: Default values for remote_state_tree and remote_pillar_roots (#17151)

BUG FIXES:

config: Detect and reject self-referencing local values (#19706)
config: Accept and ignore UTF-8 byte-order mark for configuration files (#19715)
config: More helpful error message for a situation that may arise on upgrade from Terraform 0.11 or earlier (#19727)
config: Backends configured with -backend-config are correctly applied and stored along with default values (#20480)
connection/winrm: Set the correct default port when HTTPS is used (#19540)
plugins: GRPC plugins shutdown correctly when Close is called (#19629)
backend/local: Avoid rendering data sources on destroy (#19613)
backend/local: Fix incorrect destroy/update count on apply (#19610)
backend/local: Render CBD replacement (+/-) correctly (#19642)
backend/remote: Exit with 1 when a remote run is canceled (#20481)
command/format: Fix rendering of nested blocks during update (#19611)
command/format: Fix rendering of force-new updates (#19609)
command/format: Fix rendering of nested (JSON) object (#20071)
command/format: Fix rendering of unknown elements in set/map/list (#20067)
command/init: Fix plugin installer using wrong protocol causing incompatiable API version with plugin (#19221)
command/providers: Support -no-color argument to terraform providers, which was previously incorrectly returning an error (#19671)
helper/schema: Fix setting a set in a list (#19552)
states/statemgr: Avoid HTML escaping when printing LockInfo (#20005)
core: Correct errors when referencing a resource containing count without an index (#19674)
core: Fix occasional invalid provider errors when scaling down a counted datasource (#19676)
core: Fix crash when applying a stored plan containing destroys (#19726)

NEW FEATURES:
* backend/pg: Support for using Postgresql for remote state storage (#19070)"
163,"IMPROVEMENTS:

command/state: Use locking when updating states (#19939)
backend/remote: Add support for remote state only organizations (#20007)
backend/remote: Make sure the correct error is shown when having version incompatibilities (#20086)

BUG FIXES:

backend/remote: Fix an error that prevents checking version constraints (#19668)
backend/remote: Compare versions without the prerelease (#19705)
"
164,"IMPROVEMENTS:

backend/remote: Return detailed version (in)compatibility information (#19660)
core: Enhance service discovery error handling and messaging (#19660)
core: Add support to retrieve version constraints to service discovery (#19660)

BUG FIXES:

backend/remote: Fix symlink issues and Windows support when uploading configurations (#19573)
"
165,v0.11.10
166,"This is an experimental pre-release of Terraform v0.12.0.
This release is intended only for early experimentation and preview of the Terraform v0.12.0 features. We do not recommend using it against any real, existing infrastructure.
For more information, including a list of known issues, please refer to the release CHANGELOG."
167,v0.11.9
168,0.11.9-beta1
169,0.11.8
170,v0.11.7
171,v0.11.6
172,v0.11.5
173,v0.11.4
174,v0.11.3
175,v0.11.2
176,v0.11.1
177,v0.11.0
178,v0.11.0-rc1
179,v0.11.0-beta1
180,v0.10.8
181,
182,
183,v0.10.5
184,v0.10.4
185,v0.10.3
186,v0.10.2
187,v0.10.1
188,
189,v0.10.0-rc1
190,v0.10.0-beta2
191,v0.9.11
192,v0.9.10
193,v0.9.9
194,v0.10.0-beta1
195,v0.9.8
196,v0.9.7
197,v0.9.6
198,0.9.5
199,0.9.4
200,v0.9.3
201,v0.9.2
202,v0.9.1
203,v0.9.0
204,v0.8.8
205,v0.8.7
206,v0.8.6
207,v0.8.5
208,v0.8.4
209,0.8.3
210,v0.8.2
211,v0.8.1
212,v0.8.0
213,v0.7.13
214,v0.7.12
215,v0.7.11
216,v0.7.9
217,v0.7.8
218,v0.7.7
219,v0.7.6
220,v0.7.5
221,v0.7.4
222,
223,
224,v0.7.1
225,v0.7.0
226,v0.7.0-rc4
227,v0.7.0-rc3
228,v0.7.0-rc2
229,v0.7.0-rc1
230,v0.6.16
231,v0.6.15
232,v0.6.14
233,v0.6.13
234,
235,
236,
237,
238,
239,Release 0.6.7
240,
241,
242,Release v0.6.4
243,Release v0.6.3 
244,"v0.6.2
See CHANGELOG for release details"
245,
246,
