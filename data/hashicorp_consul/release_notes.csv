Index,Release Note
1,"1.15.2 (March 30, 2023)
FEATURES:

xds: Allow for configuring connect proxies to send service mesh telemetry to an HCP metrics collection service. [link]

BUG FIXES:

audit-logging: (Enterprise only) Fix a bug where module and module endpoints return a module error when audit logs are enabled. This also fixes the delay receiving logs when running module against an agent with audit logs enabled. [link]
ca: Fixes a bug where updating Vault CA Provider config would cause TLS issues in the service mesh [link]
cache: revert cache refactor which could cause blocking queries to never return [link]
gateway: (Enterprise only) Fix bug where namespace/partition would fail to unmarshal for TCPServices. [link]
gateway: (Enterprise only) Fix bug where namespace/partition would fail to unmarshal. [link]
gateway: (Enterprise only) Fix bug where parent refs and service refs for a route in the same namespace as the route would fallback to the default namespace if the namespace was not specified in the configuration rather than falling back to the routes namespace. [link]
gateway: (Enterprise only) Fix bug where routes defined in a different namespace than a gateway would fail to register. [link].
gateways: Adds validation to ensure the API Gateway has a listener defined when created [link]
gateways: Fixes a bug API gateways using HTTP listeners were taking upwards of 15 seconds to get configured over xDS. [link]
peering: (Consul Enterprise only) Fix issue where connect-enabled services with peer upstreams incorrectly required module access in the module namespace to query data, which was too restrictive. Now having module to any namespace is sufficient to query the peering data.
peering: (Consul Enterprise only) Fix issue where resolvers, routers, and splitters referencing peer targets may not work correctly for non-default partitions and namespaces. Enterprise customers leveraging peering are encouraged to upgrade both servers and agents to avoid this problem.
peering: Fix issue resulting in prepared query failover to cluster peers never un-failing over. [link]
peering: Fixes a bug that can lead to peering service deletes impacting the state of local services [link]
peering: Fixes a bug where the importing partition was not added to peered failover targets, which causes issues when the importing partition is a non-default partition. [link]
raft_logstore: Fixes a bug where restoring a snapshot when using the experimental WAL storage backend causes a panic. [link]
ui: fix PUT token request with adding missed AccessorID property to requestBody [link]
ui: fix rendering issues on Overview and empty-states by addressing isHTMLSafe errors [link]
"
2,"1.14.6 (March 30, 2023)
BUG FIXES:

audit-logging: (Enterprise only) Fix a bug where module and module endpoints return a module error when audit logs are enabled. This also fixes the delay receiving logs when running module against an agent with audit logs enabled. [link]
ca: Fixes a bug where updating Vault CA Provider config would cause TLS issues in the service mesh [link]
peering: (Consul Enterprise only) Fix issue where connect-enabled services with peer upstreams incorrectly required module access in the module namespace to query data, which was too restrictive. Now having module to any namespace is sufficient to query the peering data.
peering: (Consul Enterprise only) Fix issue where resolvers, routers, and splitters referencing peer targets may not work correctly for non-default partitions and namespaces. Enterprise customers leveraging peering are encouraged to upgrade both servers and agents to avoid this problem.
peering: Fix issue resulting in prepared query failover to cluster peers never un-failing over. [link]
peering: Fixes a bug that can lead to peering service deletes impacting the state of local services [link]
peering: Fixes a bug where the importing partition was not added to peered failover targets, which causes issues when the importing partition is a non-default partition. [link]
ui: fix PUT token request with adding missed AccessorID property to requestBody [link]
"
3,"1.15.1 (March 7, 2023)
IMPROVEMENTS:

cli: added module, module, module, and module flags to the module command.
These flags allow updates to a token's policies/roles without having to override them completely. [link]
cli: added module and module flags to the module command.
These flags allow updates to a token's node identities/service identities without having to override them. [link]
connect: Bump Envoy 1.22.5 to 1.22.7, 1.23.2 to 1.23.4, 1.24.0 to 1.24.2, add 1.25.1, remove 1.21.5 [link]
mesh: Add ServiceResolver RequestTimeout for route timeouts to make request timeouts configurable [link]
ui: support filtering API gateways in the ui and displaying their documentation links [link]

DEPRECATIONS:

cli: Deprecate the module and module flags from the module command in favor of: module and module. [link]
cli: Deprecate the module and module flags from the module command in favor of: module, module, module, and module. [link]

BUG FIXES:

cli: Fixes an issue with module where a log to STDOUT could malform JSON when used with module. [link]
cli: Fixes an issue with module where grpc-disabled agents were not error-handled correctly. [link]
cli: ensure acl token read -self works [link]
cli: fix panic read non-existent acl policy [link]
gateways: fix HTTPRoute bug where service weights could be less than or equal to 0 and result in a downstream envoy protocol error [link]
gateways: fix HTTPRoute bug where services with a weight not divisible by 10000 are never registered properly [link]
mesh: Fix resolution of service resolvers with subsets for external upstreams [link]
proxycfg: ensure that an irrecoverable error in proxycfg closes the xds session and triggers a replacement proxycfg watcher [link]
proxycfg: fix a bug where terminating gateways were not cleaning up deleted service resolvers for their referenced services [link]
ui: Fix issue with lists and filters not rendering properly [link]
"
4,"1.14.5 (March 7, 2023)
SECURITY:

Upgrade to use Go 1.20.1.
This resolves vulnerabilities link in module and link in module. [link]

IMPROVEMENTS:

container: Upgrade container image to use to Alpine 3.17. [link]
mesh: Add ServiceResolver RequestTimeout for route timeouts to make request timeouts configurable [link]

BUG FIXES:

mesh: Fix resolution of service resolvers with subsets for external upstreams [link]
peering: Fix bug where services were incorrectly imported as connect-enabled. [link]
peering: Fix issue where mesh gateways would use the wrong address when contacting a remote peer with the same datacenter name. [link]
peering: Fix issue where secondary wan-federated datacenters could not be used as peering acceptors. [link]
proxycfg: fix a bug where terminating gateways were not cleaning up deleted service resolvers for their referenced services [link]
"
5,"1.13.7 (March 7, 2023)
SECURITY:

Upgrade to use Go 1.19.6.
This resolves vulnerabilities link in module and link in module. [link]

IMPROVEMENTS:

xds: Removed a bottleneck in Envoy config generation. [link]
container: Upgrade container image to use to Alpine 3.17. [link]
mesh: Add ServiceResolver RequestTimeout for route timeouts to make request timeouts configurable [link]

BUG FIXES:

mesh: Fix resolution of service resolvers with subsets for external upstreams [link]
proxycfg: fix a bug where terminating gateways were not cleaning up deleted service resolvers for their referenced services [link]
"
6,"1.15.0 (February 23, 2023)
ANNOUNCEMENTS:

Upcoming in Consul 1.16 we will stop publishing official Dockerhub images and publish only our Verified Publisher images. Users of Docker images should pull from module instead of module.

BREAKING CHANGES:

acl errors: Delete and get requests now return descriptive errors when the specified resource cannot be found. Other ACL request errors provide more information about when a resource is missing. Add error for when the ACL system has not been bootstrapped. 
Delete Token/Policy/AuthMethod/Role/BindingRule endpoints now return 404 when the resource cannot be found.
New error formats: ""Requested * does not exist: ACL not found"", ""* not found in namespace $NAMESPACE: ACL not found""


Read Token/Policy/Role endpoints now return 404 when the resource cannot be found.
New error format: ""Cannot find * to delete""


Logout now returns a 401 error when the supplied token cannot be found
New error format: ""Supplied token does not exist""


Token Self endpoint now returns 404 when the token cannot be found.
New error format: ""Supplied token does not exist"" [link]


acl: remove all acl migration functionality and references to the legacy acl system. [link]
acl: remove all functionality and references for legacy acl policies. [link]
config: Deprecate module, module, module, and module.
These options are now aliases of module, module, module, and module, respectively. [link]
connect: Add module field to service-defaults upstream overrides. The addition of this field makes it possible to apply upstream overrides only to peer services. Prior to this change, overrides would be applied based on matching the module and module fields only, which means users could not have different configuration for local versus peer services. With this change, peer upstreams are only affected if the module field matches the destination peer name. [link]
connect: Consul will now error and exit when using the module command if the Envoy version is incompatible. To ignore this check use flag module [link]
extensions: Refactor Lambda integration to get configured with the Envoy extensions field on service-defaults configuration entries. [link]
ingress-gateway: upstream cluster will have empty outlier_detection if passive health check is unspecified [link]
xds: Remove the module agent configuration option. Now 
Lambda integration is enabled by default. [link]

SECURITY:

Upgrade to use Go 1.20.1. 
This resolves vulnerabilities link in module and link in module. [link]

FEATURES:

API Gateway (Beta) This version adds support for API gateway on VMs. API gateway provides a highly-configurable ingress for requests coming into a Consul network. For more information, refer to the link documentation. [link]
acl: Add new module config field which specifies the token used
to register services and checks that are defined in config files. [link]
acl: anonymous token is logged as 'anonymous token' instead of its accessor ID [link]
cli: adds new CLI commands module and module to troubleshoot Consul's service mesh configuration and network issues. [link]
command: Adds the module subcommand for displaying total services, connect service instances and billable service instances in the local datacenter or globally. [link]
config-entry(ingress-gateway): support outlier detection (passive health check) for upstream cluster [link]
connect: adds support for Envoy link. Access logging can be enabled using the link config entry. [link]
xds: Add a built-in Envoy extension that inserts Lua HTTP filters. [link]
xds: Insert originator service identity into Envoy's dynamic metadata under the module namespace. [link]

IMPROVEMENTS:

connect: for early awareness of Envoy incompatibilities, when using the module command the Envoy version will now be checked for compatibility. If incompatible Consul will error and exit. [link]
grpc: client agents will switch server on error, and automatically retry on module responses [link]
raft: add an operator api endpoint and a command to initiate raft leadership transfer. [link]
acl: Added option to allow for an operator-generated bootstrap token to be passed to the module command. [link]
agent: Give better error when client specifies wrong datacenter when auto-encrypt is enabled. [link]
api: updated the go module directive to 1.18. [link]
ca: support Vault agent auto-auth config for Vault CA provider using AWS/GCP authentication. [link]
cli: always use name ""global"" for proxy-defaults config entries [link]
cli: connect envoy command errors if grpc ports are not open [link]
client: add support for RemoveEmptyTags in Prepared Queries templates. [link]
connect: Warn if ACLs are enabled but a token is not provided to envoy [link]
container: Upgrade container image to use to Alpine 3.17. [link]
dns: support RFC 2782 SRV lookups for prepared queries using format module. [link]
ingress-gateways: Don't log error when gateway is registered without a config entry [link]
licensing: (Enterprise Only) Consul Enterprise non-terminating production licenses do not degrade or terminate Consul upon expiration. They will only fail when trying to upgrade to a newer version of Consul. Evaluation licenses still terminate.
raft: Added experimental module backend for log storage. [link]
sdk: updated the go module directive to 1.18. [link]
telemetry: Added a module metric to track 
the number of active xDS streams handled by the server that are unauthenticated
because ACLs are not enabled or ACL tokens were missing. [link]
ui: Update sidebar width to 280px [link]
ui: update Ember version to 3.27; [link]

DEPRECATIONS:

acl: Deprecate the module query parameter and warn when it is used for authentication. [link]
cli: The module flag on acl token operations has been changed to module for clarity in documentation. The module flag will continue to work, but operators should use module in the future. [link]

BUG FIXES:

agent configuration: Fix issue of using unix socket when https is used. [link]
cache: refactor agent cache fetching to prevent unnecessary fetches on error [link]
cli: fatal error if config file does not have HCL or JSON extension, instead of warn and skip [link]
cli: fix ACL token processing unexpected precedence [link]
peering: Fix bug where services were incorrectly imported as connect-enabled. [link]
peering: Fix issue where mesh gateways would use the wrong address when contacting a remote peer with the same datacenter name. [link]
peering: Fix issue where secondary wan-federated datacenters could not be used as peering acceptors. [link]
"
7,"1.14.4 (January 26, 2023)
BREAKING CHANGES:

connect: Fix configuration merging for transparent proxy upstreams. Proxy-defaults and service-defaults config entries were not correctly merged for implicit upstreams in transparent proxy mode and would result in some configuration not being applied. To avoid issues when upgrading, ensure that any proxy-defaults or service-defaults have correct configuration for upstreams, since all fields will now be properly used to configure proxies. [link]
peering: Newly created peering connections must use only lowercase characters in the module field. Existing peerings with uppercase characters will not be modified, but they may encounter issues in various circumstances. To maintain forward compatibility and avoid issues, it is recommended to destroy and re-create any invalid peering connections so that they do not have a name containing uppercase characters. [link]

FEATURES:

connect: add flags module and module to the module command that allows configuration of readiness probe on proxy for any service kind. [link]
deps: update to latest go-discover to provide ECS auto-discover capabilities. [link]

IMPROVEMENTS:

acl: relax permissions on the module, module and module gRPC endpoints to accept any valid ACL token [link]
connect: Add support for ConsulResolver to specifies a filter expression [link]
grpc: Use new balancer implementation to reduce periodic WARN logs when shuffling servers. [link]
partition: (Consul Enterprise only) when loading service from on-disk config file or sending API request to agent endpoint,
if the partition is unspecified, consul will default the partition in the request to agent's partition [link]

BUG FIXES:

agent: Fix assignment of error when auto-reloading cert and key file changes. [link]
agent: Fix issue where the agent cache would incorrectly mark protobuf objects as updated. [link]
cli: Fix issue where module was unable to configure TLS over unix-sockets to gRPC. [link]
connect: (Consul Enterprise only) Fix issue where upstream configuration from proxy-defaults and service-defaults was not properly merged. This could occur when a mixture of empty-strings and ""default"" were used for the namespace or partition fields.
connect: Fix issue where service-resolver protocol checks incorrectly errored for failover peer targets. [link]
connect: Fix issue where watches on upstream failover peer targets did not always query the correct data. [link]
xds: fix bug where sessions for locally-managed services could fail with ""this server has too many xDS streams open"" [link]
"
8,"1.13.6 (January 26, 2023)
FEATURES:

connect: add flags module and module to the module command that allows configuration of readiness probe on proxy for any service kind. [link]
deps: update to latest go-discover to provide ECS auto-discover capabilities. [link]

IMPROVEMENTS:

grpc: Use new balancer implementation to reduce periodic WARN logs when shuffling servers. [link]
partition: (Consul Enterprise only) when loading service from on-disk config file or sending API request to agent endpoint,
if the partition is unspecified, consul will default the partition in the request to agent's partition [link]

BUG FIXES:

agent: Fix assignment of error when auto-reloading cert and key file changes. [link]
"
9,"1.12.9 (January 26, 2023)
FEATURES:

deps: update to latest go-discover to provide ECS auto-discover capabilities. [link]

IMPROVEMENTS:

grpc: Use new balancer implementation to reduce periodic WARN logs when shuffling servers. [link]

BUG FIXES:

agent: Fix assignment of error when auto-reloading cert and key file changes. [link]
"
10,"1.14.3 (December 13, 2022)
SECURITY:

Upgrade to use Go 1.19.4. This resolves a vulnerability where restricted files can be read on Windows. link [link]
Upgrades module to prevent a denial of service by excessive memory usage caused by HTTP2 requests. link [link]

FEATURES:

ui: Add field for fallback server addresses to peer token generation form [link]

IMPROVEMENTS:

connect: ensure all vault connect CA tests use limited privilege tokens [link]

BUG FIXES:

agent: (Enterprise Only) Ensure configIntentionsConvertToList does not compare empty strings with populated strings when filtering intentions created prior to AdminPartitions.
connect: Fix issue where DialedDirectly configuration was not used by Consul Dataplane. [link]
connect: Fix peering failovers ignoring local mesh gateway configuration. [link]
connect: Fixed issue where using Vault 1.11+ as CA provider in a secondary datacenter would eventually break Intermediate CAs [link]
"
11,"1.13.5 (December 13, 2022)
SECURITY:

Upgrade to use Go 1.18.9. This resolves a vulnerability where restricted files can be read on Windows. link [link]
Upgrades module to prevent a denial of service by excessive memory usage caused by HTTP2 requests. link [link]

IMPROVEMENTS:

connect: ensure all vault connect CA tests use limited privilege tokens [link]

BUG FIXES:

agent: (Enterprise Only) Ensure configIntentionsConvertToList does not compare empty strings with populated strings when filtering intentions created prior to AdminPartitions.
cli: (Enterprise Only) Fix issue where module subcommand was not registered and therefore not available through the cli.
connect: Fixed issue where using Vault 1.11+ as CA provider in a secondary datacenter would eventually break Intermediate CAs [link]
"
12,"1.12.8 (December 13, 2022)
SECURITY:

Upgrade to use Go 1.18.9. This resolves a vulnerability where restricted files can be read on Windows. link [link]
Upgrades module to prevent a denial of service by excessive memory usage caused by HTTP2 requests. link [link]

IMPROVEMENTS:

connect: ensure all vault connect CA tests use limited privilege tokens [link]

BUG FIXES:

agent: (Enterprise Only) Ensure configIntentionsConvertToList does not compare empty strings with populated strings when filtering intentions created prior to AdminPartitions.
cli: (Enterprise Only) Fix issue where module subcommand was not registered and therefore not available through the cli.
connect: Fixed issue where using Vault 1.11+ as CA provider in a secondary datacenter would eventually break Intermediate CAs [link]
"
13,"1.14.2 (November 30, 2022)
FEATURES:

connect: Add local_idle_timeout_ms to allow configuring the Envoy route idle timeout on local_app
connect: Add IdleTimeout to service-router to allow configuring the Envoy route idle timeout [link]
snapshot: (Enterprise Only) Add support for the snapshot agent to use an IAM role for authentication/authorization when managing snapshots in S3.

IMPROVEMENTS:

dns: Add support for cluster peering module and module DNS queries. [link]

BUG FIXES:

acl: avoid debug log spam in secondary datacenter servers due to management token not being initialized. [link]
agent: Fixed issue where blocking queries with short waits could timeout on the client [link]
ca: Fixed issue where using Vault as Connect CA with Vault-managed policies would error on start-up if the intermediate PKI mount existed but was empty [link]
cli: (Enterprise Only) Fix issue where module subcommand was not registered and therefore not available through the cli.
connect: Fixed issue where using Vault 1.11+ as CA provider would eventually break Intermediate CAs [link] [link]
namespace: (Enterprise Only) Fix a bug that caused blocking queries during namespace replication to timeout
peering: better represent non-passing states during peer check flattening [link]
peering: fix the limit of replication gRPC message; set to 8MB [link]
"
14,"1.13.4 (November 30, 2022)
IMPROVEMENTS:

auto-config: Relax the validation on auto-config JWT authorization to allow non-whitespace, non-quote characters in node names. [link]
raft: Allow nonVoter to initiate an election to avoid having an election infinite loop when a Voter is converted to NonVoter [link]
raft: Cap maximum grpc wait time when heartbeating to heartbeatTimeout/2 [link]
raft: Fix a race condition where the snapshot file is closed without being opened [link]

BUG FIXES:

agent: Fixed issue where blocking queries with short waits could timeout on the client [link]
ca: Fixed issue where using Vault as Connect CA with Vault-managed policies would error on start-up if the intermediate PKI mount existed but was empty [link]
connect: Fixed issue where using Vault 1.11+ as CA provider would eventually break Intermediate CAs [link] [link]
connect: fixed bug where endpoint updates for new xDS clusters could block for 15s before being sent to Envoy. [link]
connect: strip port from DNS SANs for ingress gateway leaf certificate to avoid an invalid hostname error when using the Vault provider. [link]
debug: fixed bug that caused consul debug CLI to error on ACL-disabled clusters [link]
deps: update go-memdb, fixing goroutine leak [link] [link]
namespace: (Enterprise Only) Fix a bug that caused blocking queries during namespace replication to timeout
namespace: (Enterprise Only) Fixed a bug where a client may incorrectly log that namespaces were not enabled in the local datacenter
peering: better represent non-passing states during peer check flattening [link]
peering: fix the error of wan address isn't taken by the peering token. [link]
peering: when wan address is set, peering stream should use the wan address. [link]
"
15,"1.12.7 (November 30, 2022)
BUG FIXES:

agent: Fixed issue where blocking queries with short waits could timeout on the client [link]
ca: Fixed issue where using Vault as Connect CA with Vault-managed policies would error on start-up if the intermediate PKI mount existed but was empty [link]
connect: Fixed issue where using Vault 1.11+ as CA provider would eventually break Intermediate CAs [link] [link]
connect: fixed bug where endpoint updates for new xDS clusters could block for 15s before being sent to Envoy. [link]
connect: strip port from DNS SANs for ingress gateway leaf certificate to avoid an invalid hostname error when using the Vault provider. [link]
debug: fixed bug that caused consul debug CLI to error on ACL-disabled clusters [link]
deps: update go-memdb, fixing goroutine leak [link] [link]
namespace: (Enterprise Only) Fix a bug that caused blocking queries during namespace replication to timeout
namespace: (Enterprise Only) Fixed a bug where a client may incorrectly log that namespaces were not enabled in the local datacenter
"
16,"1.14.1 (November 21, 2022)
BUG FIXES:

cli: Fix issue where module incorrectly uses the HTTPS API configuration for xDS connections. [link]
sdk: Fix SDK testutil backwards compatibility by only configuring grpc_tls port for new Consul versions. [link]
"
17,"1.14.0 (November 15, 2022)
BREAKING CHANGES:

config: Add new module configuration option.
Introduce a new port to better separate TLS config from the existing module config.
The new module only supports TLS encrypted communication.
The existing module now only supports plain-text communication. [link]
config: update 1.14 config defaults: Enable module and module by default. [link]
config: update 1.14 config defaults: Set gRPC TLS port default value to 8503 [link]
connect: Removes support for Envoy 1.20 [link]
peering: Rename module to module on prepared queries and exported services. [link]
xds: Convert service mesh failover to use Envoy's aggregate clusters. This
changes the names of some link. [link]

SECURITY:

Ensure that data imported from peers is filtered by ACLs at the UI Nodes/Services endpoints link [link]

FEATURES:

DNS-proxy support via gRPC request. [link]
cli: Add -node-name flag to redirect-traffic command to support running in environments without client agents. [link]
cli: Add module flag to the module command to allow forwarding DNS traffic to a specific Consul DNS port. [link]
connect: Add Envoy connection balancing configuration fields. [link]
grpc: Added metrics for external gRPC server. Added module label to gRPC metrics. [link]
http: Add new module operation to the txn api. Refer to the link for more information. [link]
peering: Add mesh gateway local mode support for cluster peering. [link]
peering: Add support for stale queries for trust bundle lookups [link]
peering: Add support to failover to services running on cluster peers. [link]
peering: Add support to redirect to services running on cluster peers with service resolvers. [link]
peering: Ensure un-exported services get deleted even if the un-export happens while cluster peering replication is down. [link]
peering: add support for routine peering control-plane traffic through mesh gateways [link]
sdk: Configure module to forward DNS traffic to a specific DNS port. [link]
telemetry: emit memberlist size metrics and broadcast queue depth metric. [link]
ui: Added support for central config merging [link]
ui: Create peerings detail page [link]
ui: Detect a TokenSecretID cookie and passthrough to localStorage [link]
ui: Display notice banner on nodes index page if synthetic nodes are being filtered. [link]
ui: Filter agentless (synthetic) nodes from the nodes list page. [link]
ui: Filter out node health checks on agentless service instances [link]
ui: Remove node meta on service instances when using agentless and consolidate external-source labels on service instances page if they all match. [link]
ui: Removed reference to node name on service instance page when using agentless [link]
ui: Use withCredentials for all HTTP API requests [link]
xds: servers will limit the number of concurrent xDS streams they can handle to balance the load across all servers [link]

IMPROVEMENTS:

peering: Add peering datacenter and partition to initial handshake. [link]
xds: Added a rate limiter to the delivery of proxy config updates, to prevent updates to ""global"" resources such as wildcard intentions from overwhelming servers (see: module config field) [link]
xds: Removed a bottleneck in Envoy config generation, enabling a higher number of dataplanes per server [link]
agent/hcp: add initial HashiCorp Cloud Platform integration [link]
agent: Added configuration option cloud.scada_address. [link]
api: Add filtering support to Catalog's List Services (v1/catalog/services) [link]
api: Increase max number of operations inside a transaction for requests to /v1/txn (128) [link]
auto-config: Relax the validation on auto-config JWT authorization to allow non-whitespace, non-quote characters in node names. [link]
config-entry: Validate that service-resolver modules and modules only
specify module and module on Consul Enterprise. This prevents scenarios
where OSS Consul would save service-resolvers that require Consul Enterprise. [link]
connect: Add Envoy 1.24.0 to support matrix [link]
connect: Bump Envoy 1.20 to 1.20.7, 1.21 to 1.21.5 and 1.22 to 1.22.5 [link]
connect: service-router destinations have gained a module field for specifying the conditions when Envoy should retry requests beyond specific status codes and generic connection failure which already exists. [link]
dns/peering: (Enterprise Only) Support addresses in the formats module and module. This longer form address that allows specifying module would need to be used for tproxy DNS requests made within non-default partitions for imported services.
dns: (Enterprise Only) All enterprise locality labels are now optional in DNS lookups. For example, service lookups support the following format: module. [link]
integ test: fix flakiness due to test condition from retry app endoint [link]
metrics: Service RPC calls less than 1ms are now emitted as a decimal number. [link]
peering: adds an internally managed server certificate for automatic TLS between servers in peer clusters. [link]
peering: require TLS for peering connections using server cert signed by Connect CA [link]
peering: return information about the health of the peering when the leader is queried to read a peering. [link]
raft: Allow nonVoter to initiate an election to avoid having an election infinite loop when a Voter is converted to NonVoter [link]
raft: Cap maximum grpc wait time when heartbeating to heartbeatTimeout/2 [link]
raft: Fix a race condition where the snapshot file is closed without being opened [link]
telemetry: Added a module metric to measure time taken to first generate xDS resources for an xDS stream. [link]
ui: Improve guidance around topology visualisation [link]
xds: Set module on Envoy's outlier detection to 100% for peered services. [link]

BUG FIXES:

checks: Do not set interval as timeout value [link]
checks: If set, use proxy address for automatically added sidecar check instead of service address. [link]
cli: Fix Consul kv CLI 'GET' flags 'keys' and 'recurse' to be set together [link]
connect: Fix issue where mesh-gateway settings were not properly inherited from configuration entries. [link]
connect: fixed bug where endpoint updates for new xDS clusters could block for 15s before being sent to Envoy. [link]
connect: strip port from DNS SANs for ingress gateway leaf certificate to avoid an invalid hostname error when using the Vault provider. [link]
debug: fixed bug that caused consul debug CLI to error on ACL-disabled clusters [link]
deps: update go-memdb, fixing goroutine leak [link] [link]
grpc: Merge proxy-defaults and service-defaults in GetEnvoyBootstrapParams response. [link]
metrics: Add duplicate metrics that have only a single ""consul_"" prefix for all existing metrics with double (""consul_consul_"") prefix, with the intent to standardize on single prefixes. [link]
namespace: (Enterprise Only) Fixed a bug where a client may incorrectly log that namespaces were not enabled in the local datacenter
peering: Fix a bug that resulted in /v1/agent/metrics returning an error. [link]
peering: fix nil pointer in calling handleUpdateService [link]
peering: fix the error of wan address isn't taken by the peering token. [link]
peering: when wan address is set, peering stream should use the wan address. [link]
proxycfg(mesh-gateway): Fix issue where deregistered services are not removed from mesh-gateway clusters. [link]
server: fix goroutine/memory leaks in the xDS subsystem (these were present regardless of whether or not xDS was in-use) [link]
server: fixes the error trying to source proxy configuration for http checks, in case of proxies using consul-dataplane. [link]
xds: Central service configuration (proxy-defaults and service-defaults) is now correctly applied to Consul Dataplane proxies [link]

NOTES:

deps: Upgrade to use Go 1.19.2 [link]
"
18,"1.13.3 (October 19, 2022)
FEATURES:

agent: Added a new config option module to tune timeouts for client RPC requests [link]
config-entry(ingress-gateway): Added support for module for upstream clusters [link]

IMPROVEMENTS:

connect/ca: Log a warning message instead of erroring when attempting to update the intermediate pki mount when using the Vault provider. [link]
connect: Added gateway options to Envoy proxy config for enabling tcp keepalives on terminating gateway upstreams and mesh gateways in remote datacenters. [link]
connect: Bump Envoy 1.20 to 1.20.7, 1.21 to 1.21.5 and 1.22 to 1.22.5 [link]
licensing: (Enterprise Only) Consul Enterprise production licenses do not degrade or terminate Consul upon expiration. They will only fail when trying to upgrade to a newer version of Consul. Evaluation licenses still terminate. [link]

BUG FIXES:

agent: avoid leaking the alias check runner goroutine when the check is de-registered [link]
ca: fix a masked bug in leaf cert generation that would not be notified of root cert rotation after the first one [link]
cache: prevent goroutine leak in agent cache [link]
checks: Fixed a bug that prevented registration of UDP health checks from agent configuration files, such as service definition files with embedded health check definitions. [link]
connect: Fixed a bug where transparent proxy does not correctly spawn listeners for upstreams to service-resolvers. [link]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic.
"
19,"1.12.6 (October 19, 2022)
FEATURES:

agent: Added a new config option module to tune timeouts for client RPC requests [link]
agent: Added information about build date alongside other version information for Consul. Extended /agent/self endpoint and module commands
to report this. Agent also reports build date in log on startup. [link]
config-entry(ingress-gateway): Added support for module for upstream clusters [link]

IMPROVEMENTS:

connect/ca: Log a warning message instead of erroring when attempting to update the intermediate pki mount when using the Vault provider. [link]
connect: Added gateway options to Envoy proxy config for enabling tcp keepalives on terminating gateway upstreams and mesh gateways in remote datacenters. [link]
connect: Bump Envoy 1.20 to 1.20.7, 1.21 to 1.21.5 and 1.22 to 1.22.5 [link]
licensing: (Enterprise Only) Consul Enterprise production licenses do not degrade or terminate Consul upon expiration. They will only fail when trying to upgrade to a newer version of Consul. Evaluation licenses still terminate. [link]

BUG FIXES:

agent: avoid leaking the alias check runner goroutine when the check is de-registered [link]
ca: fix a masked bug in leaf cert generation that would not be notified of root cert rotation after the first one [link]
cache: prevent goroutine leak in agent cache [link]
connect: Fixed a bug where transparent proxy does not correctly spawn listeners for upstreams to service-resolvers. [link]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic.
"
20,"1.11.11 (October 19, 2022)
FEATURES:

agent: Added a new config option module to tune timeouts for client RPC requests [link]
config-entry(ingress-gateway): Added support for module for upstream clusters [link]

IMPROVEMENTS:

connect/ca: Log a warning message instead of erroring when attempting to update the intermediate pki mount when using the Vault provider. [link]
connect: Added gateway options to Envoy proxy config for enabling tcp keepalives on terminating gateway upstreams and mesh gateways in remote datacenters. [link]
connect: Bump Envoy 1.20 to 1.20.7 [link]

BUG FIXES:

agent: avoid leaking the alias check runner goroutine when the check is de-registered [link]
ca: fix a masked bug in leaf cert generation that would not be notified of root cert rotation after the first one [link]
cache: prevent goroutine leak in agent cache [link]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic.
"
21,"1.14.0-beta1 (September 29, 2022)
BREAKING CHANGES:

config: Add new module configuration option.
Introduce a new port to better separate TLS config from the existing module config.
The new module only supports TLS encrypted communication.
The existing module currently supports both plain-text and tls communication, but tls support will be removed in a future release. [link]
xds: Convert service mesh failover to use Envoy's aggregate clusters. This
changes the names of some link. [link]

FEATURES:

http: Add new module operation to the txn api. Refer to the link for more information. [link]
peering: Add support to failover to services running on cluster peers. [link]
peering: Add support to redirect to services running on cluster peers with service resolvers. [link]
ui: Added support for central config merging [link]
ui: Detect a TokenSecretID cookie and passthrough to localStorage [link]
ui: Use withCredentials for all HTTP API requests [link]
xds: servers will limit the number of concurrent xDS streams they can handle to balance the load across all servers [link]

IMPROVEMENTS:

agent/hcp: add initial HashiCorp Cloud Platform integration [link]
api: Add filtering support to Catalog's List Services (v1/catalog/services) [link]
api: Increase max number of operations inside a transaction for requests to /v1/txn (128) [link]
config-entry: Validate that service-resolver modules and modules only
specify module and module on Consul Enterprise. This prevents scenarios
where OSS Consul would save service-resolvers that require Consul Enterprise. [link]
dns: (Enterprise Only) All enterprise locality labels are now optional in DNS lookups. For example, service lookups support the following format: .].service[..ns][..ap][..dc]`. [link]
metrics: Service RPC calls less than 1ms are now emitted as a decimal number. [link]
peering: adds an internally managed server certificate for automatic TLS between servers in peer clusters. [link]
xds: Set module on Envoy's outlier detection to 100% for peered services. [link]

BUG FIXES:

checks: Do not set interval as timeout value [link]
checks: If set, use proxy address for automatically added sidecar check instead of service address. [link]
cli: Fix Consul kv CLI 'GET' flags 'keys' and 'recurse' to be set together [link]
metrics: Add duplicate metrics that have only a single ""consul_"" prefix for all existing metrics with double (""consul_consul_"") prefix, with the intent to standardize on single prefixes. [link]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic.
"
22,"1.11.10 (September 22, 2022)
BUG FIXES:

kvs: Fixed a bug where query options were not being applied to KVS.Get RPC operations. [link]
"
23,"1.13.2 (September 20, 2022)
SECURITY:

auto-config: Added input validation for auto-config JWT authorization checks. Prior to this change, it was possible for malicious actors to construct requests which incorrectly pass custom JWT claim validation for the module endpoint. Now, only a subset of characters are allowed for the input before evaluating the bexpr. [link]
connect: Added URI length checks to ConnectCA CSR requests. Prior to this change, it was possible for a malicious actor to designate multiple SAN URI values in a call to the module endpoint. The endpoint now only allows for exactly one SAN URI to be specified. [link]

FEATURES:

cli: Adds new subcommands for module workflows. Refer to the link for more information. [link]
connect: Server address changes are streamed to peers [link]
service-defaults: Added support for module and
module in servicedefaults config entry [link]

IMPROVEMENTS:

connect: Bump latest Envoy to 1.23.1 in test matrix [link]
connect: expose new tracing configuration on envoy [link]
envoy: adds additional Envoy outlier ejection parameters to passive health check configurations. [link]
metrics: add labels of segment, partition, network area, network (lan or wan) to serf and memberlist metrics [link]
peering: Validate peering tokens for server name conflicts [link]
snapshot agent: (Enterprise only) Add support for path-based addressing when using s3 backend.
ui: Reuse connections for requests to /v1/internal/ui/metrics-proxy/ [link]

BUG FIXES:

agent: Fixes an issue where an agent that fails to start due to bad addresses won't clean up any existing listeners [link]
api: Fix a breaking change caused by renaming module to
module. This adds module back as an alias to
module and marks it as deprecated. [link]
ca: Fixed a bug with the Vault CA provider where the intermediate PKI mount and leaf cert role were not being updated when the CA configuration was changed. [link]
cli: When launching a sidecar proxy with module or module, the module service ID argument is now treated as case-insensitive. [link]
connect: Fix issue where module and module could unintentionally enable TLS for gRPC xDS connections. [link]
connect: Fixed a bug where old root CAs would be removed from the primary datacenter after switching providers and restarting the cluster. [link]
connect: Fixed an issue where intermediate certificates could build up in the root CA because they were never being pruned after expiring. [link]
connect: Fixed some spurious issues during peering establishment when a follower is dialed [link]
envoy: validate name before deleting proxy default configurations. [link]
peering: Fix issue preventing deletion and recreation of peerings in TERMINATED state. [link]
rpc: Adds max jitter to client deadlines to prevent i/o deadline errors on blocking queries [link]
tls: undo breaking change that prevented setting TLS for gRPC when using config flags available in Consul v1.11. [link]
ui: Removed Overview page from HCP instalations [link]
"
24,"1.12.5 (September 20, 2022)
SECURITY:

auto-config: Added input validation for auto-config JWT authorization checks. Prior to this change, it was possible for malicious actors to construct requests which incorrectly pass custom JWT claim validation for the module endpoint. Now, only a subset of characters are allowed for the input before evaluating the bexpr. [link]
connect: Added URI length checks to ConnectCA CSR requests. Prior to this change, it was possible for a malicious actor to designate multiple SAN URI values in a call to the module endpoint. The endpoint now only allows for exactly one SAN URI to be specified. [link]

IMPROVEMENTS:

envoy: adds additional Envoy outlier ejection parameters to passive health check configurations. [link]
metrics: add labels of segment, partition, network area, network (lan or wan) to serf and memberlist metrics [link]
snapshot agent: (Enterprise only) Add support for path-based addressing when using s3 backend.
ui: Reuse connections for requests to /v1/internal/ui/metrics-proxy/ [link]

BUG FIXES:

ca: Fixed a bug with the Vault CA provider where the intermediate PKI mount and leaf cert role were not being updated when the CA configuration was changed. [link]
cli: When launching a sidecar proxy with module or module, the module service ID argument is now treated as case-insensitive. [link]
connect: Fixed a bug where old root CAs would be removed from the primary datacenter after switching providers and restarting the cluster. [link]
connect: Fixed an issue where intermediate certificates could build up in the root CA because they were never being pruned after expiring. [link]
envoy: validate name before deleting proxy default configurations. [link]
rpc: Adds max jitter to client deadlines to prevent i/o deadline errors on blocking queries [link]
ui: Removed Overview page from HCP instalations [link]
"
25,"1.11.9 (September 20, 2022)
SECURITY:

auto-config: Added input validation for auto-config JWT authorization checks. Prior to this change, it was possible for malicious actors to construct requests which incorrectly pass custom JWT claim validation for the module endpoint. Now, only a subset of characters are allowed for the input before evaluating the bexpr. [link]
connect: Added URI length checks to ConnectCA CSR requests. Prior to this change, it was possible for a malicious actor to designate multiple SAN URI values in a call to the module endpoint. The endpoint now only allows for exactly one SAN URI to be specified. [link]

IMPROVEMENTS:

metrics: add labels of segment, partition, network area, network (lan or wan) to serf and memberlist metrics [link]
snapshot agent: (Enterprise only) Add support for path-based addressing when using s3 backend.

BUG FIXES:

ca: Fixed a bug with the Vault CA provider where the intermediate PKI mount and leaf cert role were not being updated when the CA configuration was changed. [link]
cli: When launching a sidecar proxy with module or module, the module service ID argument is now treated as case-insensitive. [link]
connect: Fixed a bug where old root CAs would be removed from the primary datacenter after switching providers and restarting the cluster. [link]
connect: Fixed an issue where intermediate certificates could build up in the root CA because they were never being pruned after expiring. [link]
rpc: Adds a deadline to client RPC calls, so that streams will no longer hang
indefinitely in unstable network conditions. [link] [link]
rpc: Adds max jitter to client deadlines to prevent i/o deadline errors on blocking queries [link]
"
26,"1.13.1 (August 12, 2022)
BUG FIXES:

agent: Fixed a compatibility issue when restoring snapshots from pre-1.13.0 versions of Consul [link] [link]
connect: Fixed some spurious issues during peering establishment when a follower is dialed [link]
"
27,"1.12.4 (August 11, 2022)
BUG FIXES:

cli: when module is used with the module and module flags, return an error instead of panicking [link]
connect: Fixed a goroutine/memory leak that would occur when using the ingress gateway. [link]
connect: Ingress gateways with a wildcard service entry should no longer pick up non-connect services as upstreams.
connect: Terminating gateways with a wildcard service entry should no longer pick up connect services as upstreams. [link]
ui: Fixes an issue where client side validation errors were not showing in certain areas [link]
"
28,"1.11.8 (August 11, 2022)
BUG FIXES:

connect: Fixed a goroutine/memory leak that would occur when using the ingress gateway. [link]
connect: Ingress gateways with a wildcard service entry should no longer pick up non-connect services as upstreams.
connect: Terminating gateways with a wildcard service entry should no longer pick up connect services as upstreams. [link]
"
29,"1.13.0 (August 9, 2022)
BREAKING CHANGES:

config-entry: Exporting a specific service name across all namespace is invalid.
connect: Removes support for Envoy 1.19 [link]
telemetry: config flag module has been removed. Before upgrading you should remove this flag from your config if the flag is being used. [link]

FEATURES:

Cluster Peering (Beta) This version adds a new model to federate Consul clusters for both service mesh and traditional service discovery. Cluster peering allows for service interconnectivity with looser coupling than the existing WAN federation. For more information refer to the link documentation.
Transparent proxying through terminating gateways This version adds egress traffic control to destinations outside of Consul's catalog, such as APIs on the public internet. Transparent proxies can dial link and have the traffic routed through terminating gateways. For more information refer to the link documentation.
acl: It is now possible to login and logout using the gRPC API [link]
agent: Added information about build date alongside other version information for Consul. Extended /agent/self endpoint and module commands
to report this. Agent also reports build date in log on startup. [link]
ca: Leaf certificates can now be obtained via the gRPC API: module [link]
checks: add UDP health checks.. [link]
cli: A new flag for config delete to delete a config entry in a
valid config file, e.g., config delete -filename intention-allow.hcl [link]
connect: Adds a new module field to the module config entry that allows routing egress traffic
through a terminating gateway in transparent proxy mode without modifying the catalog. [link]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [link]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [link]
grpc: New gRPC service and endpoint to return the list of supported consul dataplane features [link]
server: broadcast the public grpc port using lan serf and update the consul service in the catalog with the same data [link]
streaming: Added topic that can be used to consume updates about the list of services in a datacenter [link]
streaming: Added topics for module, module, module and module config entry events. [link]

IMPROVEMENTS:

api: module query parameter support added to module API, to view a fully resolved service definition (especially when not written into the catalog that way). [link]
api: module query parameter support added to module API, to view a fully resolved service definition (especially when not written into the catalog that way). [link]
api: module query parameter support added to some catalog and health endpoints to view a fully resolved service definition (especially when not written into the catalog that way). [link]
api: add the ability to specify a path prefix for when consul is behind a reverse proxy or API gateway [link]
catalog: Add per-node indexes to reduce watchset firing for unrelated nodes and services. [link]
connect: add validation to ensure connect native services have a port or socketpath specified on catalog registration.
This was the only missing piece to ensure all mesh services are validated for a port (or socketpath) specification on catalog registration. [link]
ui: Add new CopyableCode component and use it in certain pre-existing areas [link]
acl: Clarify node/service identities must be lowercase [link]
command: Add support for enabling TLS in the Envoy Prometheus endpoint via the module command.
Adds the module, module, module and module flags. [link]
connect: Add Envoy 1.23.0 to support matrix [link]
connect: Added a module setting to service-defaults for limiting the number of concurrent inbound connections to each service instance. [link]
grpc: Add a new ServerDiscovery.WatchServers gRPC endpoint for being notified when the set of ready servers has changed. [link]
telemetry: Added module and module metrics to measure approximate saturation of the Raft goroutines [link]
ui: removed external dependencies for serving UI assets in favor of Go's native embed capabilities [link]
ui: upgrade ember-composable-helpers to v5.x [link]

BUG FIXES:

acl: Fixed a bug where the ACL down policy wasn't being applied on remote errors from the primary datacenter. [link]
cli: when module is used with the module and module flags, return an error instead of panicking [link]
connect: Fixed a goroutine/memory leak that would occur when using the ingress gateway. [link]
connect: Ingress gateways with a wildcard service entry should no longer pick up non-connect services as upstreams.
connect: Terminating gateways with a wildcard service entry should no longer pick up connect services as upstreams. [link]
proxycfg: Fixed a minor bug that would cause configuring a terminating gateway to watch too many service resolvers and waste resources doing filtering. [link]
raft: upgrade to v1.3.8 which fixes a bug where non cluster member can still be able to participate in an election. [link]
rpc: Adds a deadline to client RPC calls, so that streams will no longer hang
indefinitely in unstable network conditions. [link] [link]
serf: upgrade serf to v0.9.8 which fixes a bug that crashes Consul when serf keyrings are listed [link]
ui: Fixes an issue where client side validation errors were not showing in certain areas [link]
"
30,"1.12.3 (July 13 2022)
IMPROVEMENTS:

Support Vault namespaces in Connect CA by adding RootPKINamespace and
IntermediatePKINamespace fields to the config. [link]
connect: Update Envoy support matrix to latest patch releases (1.22.2, 1.21.3, 1.20.4, 1.19.5) [link]
dns: Added support for specifying admin partition in node lookups. [link]
telemetry: Added a module metric to track if a server is a leader or not. [link]

BUG FIXES:

agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [link]
deps: Update go-grpc/grpc, resolving connection memory leak [link]
fix a bug that caused an error when creating module or module ingress gateway listeners with multiple services [link]
ui: Fix incorrect text on certain page empty states [link]
xds: Fix a bug that resulted in Lambda services not using the payload-passthrough option as expected. [link]
xds: Fix a bug where terminating gateway upstream clusters weren't configured properly when the service protocol was module. [link]
"
31,"1.11.7 (July 13, 2022)
IMPROVEMENTS:

connect: Update supported Envoy versions to 1.20.4, 1.19.5, 1.18.6, 1.17.4 [link]

BUG FIXES:

agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [link]
fix a bug that caused an error when creating module or module ingress gateway listeners with multiple services [link]
xds: Fix a bug where terminating gateway upstream clusters weren't configured properly when the service protocol was module. [link]
"
32,"1.10.12 (July 13, 2022)
BUG FIXES:

agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [link]
fix a bug that caused an error when creating module or module ingress gateway listeners with multiple services [link]
"
33,"1.13.0-alpha2 (June 21, 2022)
IMPROVEMENTS:

api: module query parameter support added to module API, to view a fully resolved service definition (especially when not written into the catalog that way). [link]
connect: Update Envoy support matrix to latest patch releases (1.22.2, 1.21.3, 1.20.4, 1.19.5) [link]

BUG FIXES:

ui: Fix incorrect text on certain page empty states [link]
"
34,"1.13.0-alpha1 (June 15, 2022)
BREAKING CHANGES:

config-entry: Exporting a specific service name across all namespace is invalid.

FEATURES:

acl: It is now possible to login and logout using the gRPC API [link]
agent: Added information about build date alongside other version information for Consul. Extended /agent/self endpoint and module commands
to report this. Agent also reports build date in log on startup. [link]
ca: Leaf certificates can now be obtained via the gRPC API: module [link]
checks: add UDP health checks.. [link]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [link]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [link]
grpc: New gRPC service and endpoint to return the list of supported consul dataplane features [link]

IMPROVEMENTS:

api: module query parameter support added to some catalog and health endpoints to view a fully resolved service definition (especially when not written into the catalog that way). [link]
api: add the ability to specify a path prefix for when consul is behind a reverse proxy or API gateway [link]
connect: add validation to ensure connect native services have a port or socketpath specified on catalog registration.
This was the only missing piece to ensure all mesh services are validated for a port (or socketpath) specification on catalog registration. [link]
Support Vault namespaces in Connect CA by adding RootPKINamespace and
IntermediatePKINamespace fields to the config. [link]
acl: Clarify node/service identities must be lowercase [link]
connect: Added a module setting to service-defaults for limiting the number of concurrent inbound connections to each service instance. [link]
dns: Added support for specifying admin partition in node lookups. [link]
grpc: Add a new ServerDiscovery.WatchServers gRPC endpoint for being notified when the set of ready servers has changed. [link]
telemetry: Added module and module metrics to measure approximate saturation of the Raft goroutines [link]
telemetry: Added a module metric to track if a server is a leader or not. [link]
ui: removed external dependencies for serving UI assets in favor of Go's native embed capabilities [link]
ui: upgrade ember-composable-helpers to v5.x [link]

BUG FIXES:

acl: Fixed a bug where the ACL down policy wasn't being applied on remote errors from the primary datacenter. [link]
agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [link]
deps: Update go-grpc/grpc, resolving connection memory leak [link]
fix a bug that caused an error when creating module or module ingress gateway listeners with multiple services [link]
proxycfg: Fixed a minor bug that would cause configuring a terminating gateway to watch too many service resolvers and waste resources doing filtering. [link]
raft: upgrade to v1.3.8 which fixes a bug where non cluster member can still be able to participate in an election. [link]
serf: upgrade serf to v0.9.8 which fixes a bug that crashes Consul when serf keyrings are listed [link]
"
35,"1.12.2 (June 3, 2022)
BUG FIXES:

kvs: Fixed a bug where query options were not being applied to KVS.Get RPC operations. [link]
"
36,"1.12.1 (May 25, 2022)
FEATURES:

xds: Add the ability to invoke AWS Lambdas through sidecar proxies. [link]

IMPROVEMENTS:

config: introduce module in agent configuration to
retry on failed connection to any telemetry backend. This prevents the agent from
exiting if the given DogStatsD DNS name is unresolvable, for example. [link]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
xds: Envoy now inserts x-forwarded-client-cert for incoming proxy connections [link]

BUG FIXES:

Fix a bug when configuring an module directive named module the header is not set for module endpoint. [link]
api: Fix a bug that causes partition to be ignored when creating a namespace [link]
api: agent/self now returns version with +ent suffix for Enterprise Consul [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
ca: fix a bug that caused a non blocking leaf cert query after a blocking leaf cert query to block [link]
config: fix backwards compatibility bug where setting the (deprecated) top-level module option would enable TLS client authentication on the gRPC port [link]
health: ensure /v1/health/service/:service endpoint returns the most recent results when a filter is used with streaming #12640 [link]
rpc: Adds a deadline to client RPC calls, so that streams will no longer hang
indefinitely in unstable network conditions. [link] [link]
snapshot-agent: (Enterprise only) Fix a bug where providing the ACL token to the snapshot agent via a CLI or ENV variable without a license configured results in an error during license auto-retrieval.
ui: Re-instate '...' icon for row actions [link]

NOTES:

ci: change action to pull v1 instead of main [link]
"
37,"1.11.6 (May 25, 2022)
IMPROVEMENTS:

sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids

BUG FIXES:

Fix a bug when configuring an module directive named module the header is not set for module endpoint. [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
ca: fix a bug that caused a non blocking leaf cert query after a blocking leaf cert query to block [link]
health: ensure /v1/health/service/:service endpoint returns the most recent results when a filter is used with streaming #12640 [link]
snapshot-agent: (Enterprise only) Fix a bug where providing the ACL token to the snapshot agent via a CLI or ENV variable without a license configured results in an error during license auto-retrieval.

NOTES:

ci: change action to pull v1 instead of main [link]
"
38,"1.10.11 (May 25, 2022)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names.

IMPROVEMENTS:

sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids

BUG FIXES:

Fix a bug when configuring an module directive named module the header is not set for module endpoint. [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
ca: fix a bug that caused a non blocking leaf cert query after a locking leaf cert query to block [link]
health: ensure /v1/health/service/:service endpoint returns the most recent results when a filter is used with streaming #12640 [link]
snapshot-agent: (Enterprise only) Fix a bug where providing the ACL token to the snapshot agent via a CLI or ENV variable without a license configured results in an error during license auto-retrieval.

NOTES:

ci: change action to pull v1 instead of main [link]
"
39,"1.12.0 (April 20, 2022)
BREAKING CHANGES:

connect: Removes support for Envoy 1.17.4 [link]
connect: Removes support for Envoy 1.18.6 [link]
sdk: several changes to the testutil configuration structs (removed module, renamed module to module, and module to module) [link]
telemetry: the disable_compat_1.9 option now defaults to true. 1.9 style module metrics can still be enabled by setting module. However, we will remove these metrics in 1.13. [link]

FEATURES:

acl: Add token information to PermissionDeniedErrors [link]
acl: Added an AWS IAM auth method that allows authenticating to Consul using AWS IAM identities [link]
ca: Root certificates can now be consumed from a gRPC streaming endpoint: module [link]
cli: The module command now supports the module flag to display detailed role and policy information for the token. [link]
config: automatically reload config when a file changes using the module CLI flag or module config option. [link]
server: Ensure that service-defaults module is returned with the response to the module RPC. [link]
server: discovery chains now include a response field named ""Default"" to indicate if they were not constructed from any service-resolver, service-splitter, or service-router config entries [link]
server: ensure that service-defaults meta is incorporated into the discovery chain response [link]
tls: it is now possible to configure TLS differently for each of Consul's listeners (i.e. HTTPS, gRPC and the internal multiplexed RPC listener) using the module stanza [link]
ui: Added support for AWS IAM Auth Methods [link]
ui: Support connect-native services in the Topology view. [link]
xds: Add the ability to invoke AWS Lambdas through terminating gateways. [link]
xds: adding control of the mesh-wide min/max TLS versions and cipher suites from the mesh config entry [link]

IMPROVEMENTS:

Refactor ACL denied error code and start improving error details [link]
acl: Provide fuller detail in the error messsage when an ACL denies access. [link]
agent: Allow client agents to perform keyring operations [link]
agent: add additional validation to TLS config [link]
agent: add support for specifying TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 and TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 cipher suites [link]
agent: bump default min version for connections to TLS 1.2 [link]
api: add QueryBackend to QueryMeta so an api user can determine if a query was served using which backend (streaming or blocking query). [link]
ci: include 'enhancement' entry type in IMPROVEMENTS section of changelog. [link]
ui: Exclude Service Instance Health from Health Check reporting on the Node listing page. The health icons on each individual row now only reflect Node health. [link]
ui: Improve usability of Topology warning/information panels [link]
ui: Slightly improve usability of main navigation [link]
ui: Use @hashicorp/flight icons for all our icons. [link]
Removed impediments to using a namespace prefixed IntermediatePKIPath
in a CA definition. [link]
acl: Improve handling of region-specific endpoints in the AWS IAM auth method. As part of this, the module field was removed from the auth method config. [link]
api: Improve error message if service or health check not found by stating that the entity must be referred to by ID, not name [link]
autopilot: Autopilot state is now tracked on Raft followers in addition to the leader.
Stale queries may be used to query for the non-leaders state. [link]
autopilot: The module and module metrics are now
regularly emitted by all servers. [link]
ci: Enable security scanning for CRT [link]
connect: Add Envoy 1.21.1 to support matrix, remove 1.17.4 [link]
connect: Add Envoy 1.22.0 to support matrix, remove 1.18.6 [link]
connect: reduce raft apply on CA configuration when no change is performed [link]
deps: update to latest go-discover to fix vulnerable transitive jwt-go dependency [link]
grpc, xds: improved reliability of grpc and xds servers by adding recovery-middleware to return and log error in case of panic. [link]
http: if a GET request has a non-empty body, log a warning that suggests a possible problem (parameters were meant for the query string, but accidentally placed in the body) [link]
metrics: The module metric was added and indicates a theoretical number of writes/second that can be performed to Consul. [link]
sdk: Add support for module and module to the TestServerConfig struct. [link]
telemetry: Add new module label to module and optional module, module,
module, and module optional labels. [link]
ui: In the datacenter selector order Datacenters by Primary, Local then alpanumerically [link]
ui: Include details on ACL policy dispositions required for unauthorized views [link]
ui: Move icons away from depending on a CSS preprocessor [link]
version: Improved performance of the version.GetHumanVersion function by 50% on memory allocation. [link]

DEPRECATIONS:

acl: The module metric is no longer reported. The values that were previous reported as part of this metric will now be part of the module metric. [link]
agent: deprecate older syntax for specifying TLS min version values [link]
agent: remove support for specifying insecure TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 and TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher suites [link]
config: setting module, module, module, module, module, module, module, module, module, module and module at the top-level is now deprecated, use the module stanza instead [link]

BUG FIXES:

acl: Fix parsing of IAM user and role tags in IAM auth method [link]
dns: allow max of 63 character DNS labels instead of 64 per RFC 1123 [link]
logging: fix a bug with incorrect severity syslog messages (all messages were sent with NOTICE severity). [link]
ui: Added Tags tab to gateways(just like exists for non-gateway services) [link]
ui: Ensure proxy instance health is taken into account in Service Instance Listings [link]
ui: Fixes an issue with the version footer wandering when scrolling [link]

NOTES:

Forked net/rpc to add middleware support: https://github.com/hashicorp/consul-net-rpc/ . [link]
dependency: Upgrade to use Go 1.18.1 [link]
"
40,"1.9.17 (April 13, 2022)
SECURITY:

agent: Added a new check field, module, that allows for disabling the following of redirects for HTTP checks. The intention is to default this to true in a future release so that redirects must explicitly be enabled. [link]
connect: Properly set SNI when configured for services behind a terminating gateway. [link]

DEPRECATIONS:

tls: With the upgrade to Go 1.17, the ordering of module will no longer be honored, and module is now ignored. [link]

BUG FIXES:

connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [link]
memberlist: fixes a bug which prevented members from joining a cluster with
large amounts of churn [link] [link]
replication: Fixed a bug which could prevent ACL replication from continuing successfully after a leader election. [link]
"
41,"1.11.5 (April 13, 2022)
SECURITY:

agent: Added a new check field, module, that allows for disabling the following of redirects for HTTP checks. The intention is to default this to true in a future release so that redirects must explicitly be enabled. [link]
connect: Properly set SNI when configured for services behind a terminating gateway. [link]

IMPROVEMENTS:

agent: improve log messages when a service with a critical health check is deregistered due to exceeding the deregister_critical_service_after timeout [link]
xds: ensure that all connect timeout configs can apply equally to tproxy direct dial connections [link]

BUG FIXES:

acl: (Enterprise Only) fixes a bug preventing ACL policies configured with datacenter restrictions from being created if the cluster had been upgraded to Consul 1.11+ from an earlier version.
connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [link]
namespace: (Enterprise Only) Unreserve module namespace to allow K8s namespace mirroring when deploying in module K8s namespace .
raft: upgrade to v1.3.6 which fixes a bug where a read replica node could attempt bootstrapping raft and prevent other nodes from bootstrapping at all [link]
replication: Fixed a bug which could prevent ACL replication from continuing successfully after a leader election. [link]
server: fix spurious blocking query suppression for discovery chains [link]
ui: Fixes a visual bug where our loading icon can look cut off [link]
usagemetrics: (Enterprise only) Fix a bug where Consul usage metrics stopped being reported when upgrading servers from 1.10 to 1.11 or later.
"
42,"1.10.10 (April 13, 2022)
SECURITY:

agent: Added a new check field, module, that allows for disabling the following of redirects for HTTP checks. The intention is to default this to true in a future release so that redirects must explicitly be enabled. [link]
connect: Properly set SNI when configured for services behind a terminating gateway. [link]

IMPROVEMENTS:

xds: ensure that all connect timeout configs can apply equally to tproxy direct dial connections [link]

DEPRECATIONS:

tls: With the upgrade to Go 1.17, the ordering of module will no longer be honored, and module is now ignored. [link]

BUG FIXES:

connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [link]
raft: upgrade to v1.3.6 which fixes a bug where a read replica node could attempt bootstrapping raft and prevent other nodes from bootstrapping at all [link]
replication: Fixed a bug which could prevent ACL replication from continuing successfully after a leader election. [link]
server: fix spurious blocking query suppression for discovery chains [link]
"
43,"1.12.0-beta1 (April 4, 2022)
BREAKING CHANGES:

sdk: several changes to the testutil configuration structs (removed module, renamed module to module, and module to module) [link]
telemetry: the disable_compat_1.9 option now defaults to true. 1.9 style module metrics can still be enabled by setting module. However, we will remove these metrics in 1.13. [link]

FEATURES:

acl: Add token information to PermissionDeniedErrors [link]
acl: Added an AWS IAM auth method that allows authenticating to Consul using AWS IAM identities [link]
cli: The module command now supports the module flag to display detailed role and policy information for the token. [link]
config: automatically reload config when a file changes using the module CLI flag or module config option. [link]
server: Ensure that service-defaults module is returned with the response to the module RPC. [link]
server: discovery chains now include a response field named ""Default"" to indicate if they were not constructed from any service-resolver, service-splitter, or service-router config entries [link]
server: ensure that service-defaults meta is incorporated into the discovery chain response [link]
tls: it is now possible to configure TLS differently for each of Consul's listeners (i.e. HTTPS, gRPC and the internal multiplexed RPC listener) using the module stanza [link]
ui: Support connect-native services in the Topology view. [link]
xds: Add the ability to invoke AWS Lambdas through terminating gateways. [link]
xds: adding control of the mesh-wide min/max TLS versions and cipher suites from the mesh config entry [link]

IMPROVEMENTS:

Refactor ACL denied error code and start improving error details [link]
acl: Provide fuller detail in the error messsage when an ACL denies access. [link]
agent: Allow client agents to perform keyring operations [link]
agent: add additional validation to TLS config [link]
agent: add support for specifying TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 and TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 cipher suites [link]
agent: bump default min version for connections to TLS 1.2 [link]
ci: include 'enhancement' entry type in IMPROVEMENTS section of changelog. [link]
ui: Exclude Service Instance Health from Health Check reporting on the Node listing page. The health icons on each individual row now only reflect Node health. [link]
ui: Improve usability of Topology warning/information panels [link]
ui: Slightly improve usability of main navigation [link]
ui: Use @hashicorp/flight icons for all our icons. [link]
Removed impediments to using a namespace prefixed IntermediatePKIPath
in a CA definition. [link]
api: Improve error message if service or health check not found by stating that the entity must be referred to by ID, not name [link]
ci: Enable security scanning for CRT [link]
connect: reduce raft apply on CA configuration when no change is performed [link]
grpc, xds: improved reliability of grpc and xds servers by adding recovery-middleware to return and log error in case of panic. [link]
http: if a GET request has a non-empty body, log a warning that suggests a possible problem (parameters were meant for the query string, but accidentally placed in the body) [link]
metrics: The module metric was added and indicates a theoretical number of writes/second that can be performed to Consul. [link]
sdk: Add support for module and module to the TestServerConfig struct. [link]
ui: In the datacenter selector order Datacenters by Primary, Local then alpanumerically [link]
ui: Move icons away from depending on a CSS preprocessor [link]
version: Improved performance of the version.GetHumanVersion function by 50% on memory allocation. [link]

DEPRECATIONS:

acl: The module metric is no longer reported. The values that were previous reported as part of this metric will now be part of the module metric. [link]
agent: deprecate older syntax for specifying TLS min version values [link]
agent: remove support for specifying insecure TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 and TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher suites [link]
config: setting module, module, module, module, module, module, module, module, module, module and module at the top-level is now deprecated, use the module stanza instead [link]

BUG FIXES:

acl: (Enterprise Only) fixes a bug preventing ACL policies configured with datacenter restrictions from being created if the cluster had been upgraded to Consul 1.11+ from an earlier version.
connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [link]
dns: allow max of 63 character DNS labels instead of 64 per RFC 1123 [link]
raft: upgrade to v1.3.6 which fixes a bug where a read replica node could attempt bootstrapping raft and prevent other nodes from bootstrapping at all [link]
server: fix spurious blocking query suppression for discovery chains [link]
ui: Added Tags tab to gateways(just like exists for non-gateway services) [link]
ui: Fixes a visual bug where our loading icon can look cut off [link]
"
44,"1.11.4 (February 28, 2022)
FEATURES:

ca: support using an external root CA with the vault CA provider [link]

IMPROVEMENTS:

connect: Update supported Envoy versions to include 1.19.3 and 1.18.6 [link]
connect: update Envoy supported version of 1.20 to 1.20.2 [link]
connect: update Envoy supported version of 1.20 to 1.20.2 [link]
debug: reduce the capture time for trace to only a single interval instead of the full duration to make trace.out easier to open without running into OOM errors. [link]
raft: add additional logging of snapshot restore progress [link]
rpc: improve blocking queries for items that do not exist, by continuing to block until they exist (or the timeout). [link]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: conditionally avoid writing a config entry to raft if it was already the same [link]
server: suppress spurious blocking query returns where multiple config entries are involved [link]

BUG FIXES:

agent: Parse datacenter from Create/Delete requests for AuthMethods and BindingRules. [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
catalog: compare node names case insensitively in more places [link]
checks: populate interval and timeout when registering services [link]
local: fixes a data race in anti-entropy sync that could cause the wrong tags to be applied to a service when EnableTagOverride is used [link]
raft: fixed a race condition in leadership transfer that could result in reelection of the current leader [link]
server: (Enterprise only) Namespace deletion will now attempt to delete as many namespaced config entries as possible instead of halting on the first deletion that failed.
server: partly fix config entry replication issue that prevents replication in some circumstances [link]
state: fix bug blocking snapshot restore when a node check and node differed in casing of the node string [link]
ui: Ensure we always display the Policy default preview in the Namespace editing form [link]
ui: Fix missing helper javascript error [link]
xds: Fixed Envoy http features such as outlier detection and retry policy not working correctly with transparent proxy. [link]
"
45,"1.10.9 (February 28, 2022)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names.

FEATURES:

ca: support using an external root CA with the vault CA provider [link]

IMPROVEMENTS:

connect: Update supported Envoy versions to include 1.18.6 [link]
connect: update Envoy supported version of 1.20 to 1.20.2 [link]
debug: reduce the capture time for trace to only a single interval instead of the full duration to make trace.out easier to open without running into OOM errors. [link]
raft: add additional logging of snapshot restore progress [link]
rpc: improve blocking queries for items that do not exist, by continuing to block until they exist (or the timeout). [link]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: conditionally avoid writing a config entry to raft if it was already the same [link]
server: suppress spurious blocking query returns where multiple config entries are involved [link]

BUG FIXES:

agent: Parse datacenter from Create/Delete requests for AuthMethods and BindingRules. [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
raft: fixed a race condition in leadership transfer that could result in reelection of the current leader [link]
server: (Enterprise only) Namespace deletion will now attempt to delete as many namespaced config entries as possible instead of halting on the first deletion that failed.
server: partly fix config entry replication issue that prevents replication in some circumstances [link]
ui: Ensure we always display the Policy default preview in the Namespace editing form [link]
xds: Fixed Envoy http features such as outlier detection and retry policy not working correctly with transparent proxy. [link]
"
46,"1.9.16 (February 28, 2022)
FEATURES:

ca: support using an external root CA with the vault CA provider [link]

IMPROVEMENTS:

sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: conditionally avoid writing a config entry to raft if it was already the same [link]

BUG FIXES:

agent: Parse datacenter from Create/Delete requests for AuthMethods and BindingRules. [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
server: (Enterprise only) Namespace deletion will now attempt to delete as many namespaced config entries as possible instead of halting on the first deletion that failed.
server: partly fix config entry replication issue that prevents replication in some circumstances [link]
ui: Ensure we always display the Policy default preview in the Namespace editing form [link]
"
47,"1.11.3 (February 11, 2022)
IMPROVEMENTS:

connect: update Envoy supported version of 1.20 to 1.20.1 [link]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
streaming: Improved performance when the server is handling many concurrent subscriptions and has a high number of CPU cores [link]
systemd: Support starting/stopping the systemd service for linux packages when the optional EnvironmentFile does not exist. [link]

BUG FIXES:

Fix a data race when a service is added while the agent is shutting down.. [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
ca: adjust validation of PrivateKeyType/Bits with the Vault provider, to remove the error when the cert is created manually in Vault. [link]
config-entry: fix a panic when creating an ingress gateway config-entry and a proxy service instance, where both provided the same upstream and downstream mapping. [link]
connect: fixes bug where passthrough addressses for transparent proxies dialed directly weren't being cleaned up. [link]
partitions: (Enterprise only) Do not leave a serf partition when the partition is deleted
serf: update serf v0.9.7, complete the leave process if broadcasting leave timeout. [link]
ui: Ensure proxy instance health is taken into account in Service Instance Listings [link]
ui: Fix up a problem where occasionally an intention can visually disappear from the listing after saving [link]
ui: Fixed a bug with creating multiple nested KVs in one interaction [link]
ui: Include partition data when saving an intention from the topology visualization [link]
xds: allow only one outstanding delta request at a time [link]
xds: fix for delta xDS reconnect bug in LDS/CDS [link]
xds: prevents tight loop where the Consul client agent would repeatedly re-send config that Envoy has rejected. [link]
"
48,"1.10.8 (February 11, 2022)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names.

IMPROVEMENTS:

raft: Consul leaders will attempt to transfer leadership to another server as part of gracefully leaving the cluster. [link]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids

BUG FIXES:

Fix a data race when a service is added while the agent is shutting down.. [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
config-entry: fix a panic when creating an ingress gateway config-entry and a proxy service instance, where both provided the same upstream and downstrem mapping. [link]
config: include all config errors in the error message, previously some could be hidden. [link]
connect: fixes bug where passthrough addressses for transparent proxies dialed directly weren't being cleaned up. [link]
memberlist: fixes a bug which prevented members from joining a cluster with
large amounts of churn [link] [link]
snapshot: the module command now saves the snapshot with read permission for only the current user. [link]
xds: allow only one outstanding delta request at a time [link]
xds: fix for delta xDS reconnect bug in LDS/CDS [link]
xds: prevents tight loop where the Consul client agent would repeatedly re-send config that Envoy has rejected. [link]
"
49,"1.9.15 (February 11, 2022)
IMPROVEMENTS:

sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids

BUG FIXES:

Fix a data race when a service is added while the agent is shutting down.. [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
config-entry: fix a panic when creating an ingress gateway config-entry and a proxy service instance, where both provided the same upstream and downstream mapping. [link]
config: include all config errors in the error message, previously some could be hidden. [link]
snapshot: the module command now saves the snapshot with read permission for only the current user. [link]
"
50,"1.11.2 (January 12, 2022)
FEATURES:

ingress: allow setting TLS min version and cipher suites in ingress gateway config entries [link]

IMPROVEMENTS:

api: URL-encode/decode resource names for v1/agent endpoints in API. [link]
api: Return 404 when de-registering a non-existent check [link]
connect: Add support for connecting to services behind a terminating gateway when using a transparent proxy. [link]
http: when a user attempts to access the UI but can't because it's disabled, explain this and how to fix it [link]
raft: Consul leaders will attempt to transfer leadership to another server as part of gracefully leaving the cluster. [link]
ui: Added a notice for non-primary intention creation [link]

BUG FIXES:

Mutate module struct properly to avoid a data race. [link]
Upgrade to raft module which fixes a bug where a read replica node can trigger a raft election and become a leader. [link]
cli: Display assigned node identities in output of module. [link]
cli: when creating a private key, save the file with mode 0600 so that only the user has read permission. [link]
config: include all config errors in the error message, previously some could be hidden. [link]
memberlist: fixes a bug which prevented members from joining a cluster with
large amounts of churn [link] [link]
snapshot: the module command now saves the snapshot with read permission for only the current user. [link]
ui: Differentiate between Service Meta and Node Meta when choosing search fields
in Service Instance listings [link]
ui: Ensure a login buttons appear for some error states, plus text amends [link]
ui: Ensure partition query parameter is passed through to all OIDC related API
requests [link]
ui: Fix an issue where attempting to delete a policy from the policy detail page when
attached to a token would result in the delete button disappearing and no
deletion being attempted [link]
ui: Fixes a bug where proxy service health checks would sometimes not appear
until refresh [link]
ui: Fixes a bug with URL decoding within KV area [link]
ui: Fixes a visual issue with some border colors [link]
ui: Fixes an issue saving intentions when editing per service intentions [link]
ui: Fixes an issue where once a 403 page is displayed in some circumstances its
diffcult to click back to where you where before receiving a 403 [link]
ui: Prevent disconnection notice appearing with auth change on certain pages [link]
ui: Temporarily remove KV pre-flight check for KV list permissions [link]
windows: Fixes a bug with empty log files when Consul is run as a Windows Service [link]
xds: fix a deadlock when the snapshot channel already have a snapshot to be consumed. [link]
"
51,"1.10.7 (January 12, 2022)
SECURITY:

namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires module permission in the default namespace. This change fixes CVE-2021-41805.

FEATURES:

ui: Adds visible Consul version information [link]

BUG FIXES:

Mutate module struct properly to avoid a data race. [link]
Upgrade to raft module which fixes a bug where a read replica node can trigger a raft election and become a leader. [link]
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [link]
ca: fixes a bug that caused the SigningKeyID to be wrong in the primary DC, when the Vault provider is used, after a CA config creates a new root. [link]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [link]
cli: Display assigned node identities in output of module. [link]
cli: when creating a private key, save the file with mode 0600 so that only the user has read permission. [link]
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the module setting in config files
structs: (Enterprise only) Remove partition field parsing from 1.10 to prevent further 1.11 upgrade compatibility issues.
ui: Differentiate between Service Meta and Node Meta when choosing search fields
in Service Instance listings [link]
ui: Ensure we show a readonly designed page for readonly intentions [link]
ui: Fix an issue where attempting to delete a policy from the policy detail page when
attached to a token would result in the delete button disappearing and no
deletion being attempted [link]
ui: Fix visual issue with slight table header overflow [link]
ui: Fixes an issue where once a 403 page is displayed in some circumstances its
diffcult to click back to where you where before receiving a 403 [link]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [link]
ui: Include module into available variables for module [link]
ui: Revert to depending on the backend, 'post-user-action', to report
permissions errors rather than using UI capabilities 'pre-user-action' [link]
ui: Temporarily remove KV pre-flight check for KV list permissions [link]
windows: Fixes a bug with empty log files when Consul is run as a Windows Service [link]
xds: fix a deadlock when the snapshot channel already have a snapshot to be consumed. [link]
"
52,"1.9.14 (January 12, 2022)
SECURITY:

namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires module permission in the default namespace. This change fixes CVE-2021-41805.

BUG FIXES:

ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [link]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [link]
cli: Display assigned node identities in output of module. [link]
cli: when creating a private key, save the file with mode 0600 so that only the user has read permission. [link]
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the module setting in config files
ui: Differentiate between Service Meta and Node Meta when choosing search fields
in Service Instance listings [link]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [link]
ui: Fixes an issue where under some circumstances the namespace selector could
become 'stuck' on the default namespace [link]
ui: Include module into available variables for module [link]
ui: Prevent disconnection notice appearing with auth change on certain pages [link]
xds: fix a deadlock when the snapshot channel already have a snapshot to be consumed. [link]
"
53,"1.11.1 (December 15, 2021)
SECURITY:

ci: Upgrade golang.org/x/net to address link [link]

FEATURES:

Admin Partitions (Consul Enterprise only) This version adds admin partitions, a new entity defining administrative and networking boundaries within a Consul deployment. For more information refer to the
 link documentation. [link]
networking: (Enterprise Only) Make module configurable, cap at 256.

BUG FIXES:

ui: Fixes an issue with the version footer wandering when scrolling [link]
"
54,"1.10.6 (December 15, 2021)
SECURITY:

ci: Upgrade golang.org/x/net to address link [link]
"
55,"1.9.13 (December 15, 2021)
SECURITY:

ci: Upgrade golang.org/x/net to address link [link]
"
56,"1.8.19 (December 15, 2021)
SECURITY:

ci: Upgrade golang.org/x/net to address link [link]
"
57,"1.11.0 (December 14, 2021)
BREAKING CHANGES:

acl: The legacy ACL system that was deprecated in Consul 1.4.0 has been removed. Before upgrading you should verify that nothing is still using the legacy ACL system. See the link for more information. [link]
cli: module has been replaced with module [link]

SECURITY:

namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires module permission in the default namespace. This change fixes CVE-2021-41805.
rpc: authorize raft requests link [link]

FEATURES:

Admin Partitions (Consul Enterprise only) This version adds admin partitions, a new entity defining administrative and networking boundaries within a Consul deployment. For more information refer to the link documentation.
ca: Add a configurable TTL for Connect CA root certificates. The configuration is supported by the Vault and Consul providers. [link]
ca: Add a configurable TTL to the AWS ACM Private CA provider root certificate. [link]
health-checks: add support for h2c in http2 ping health checks [link]
ui: Add UI support to use Vault as an external source for a service [link]
ui: Adding support of Consul API Gateway as an external source. [link]
ui: Adds a copy button to each composite row in tokens list page, if Secret ID returns an actual ID [link]
ui: Adds visible Consul version information [link]
ui: Topology - New views for scenarios where no dependencies exist or ACLs are disabled [link]

IMPROVEMENTS:

acls: Show AuthMethodNamespace when reading/listing ACL tokens. [link]
acl: replication routine to report the last error message. [link]
agent: add variation of force-leave that exclusively works on the WAN [link]
api: Enable setting query options on agent health and maintenance endpoints. [link]
api: responses that contain only a partial subset of results, due to filtering by ACL policies, may now include an module header [link]
checks: add failures_before_warning setting for interval checks. [link]
ci: Upgrade to use Go 1.17.5 [link]
ci: Allow configuring graceful stop in testutil. [link]
cli: Add module and module flags to the module command to support Check-And-Set (CAS) deletion of config entries [link]
config: (Enterprise Only) Allow specifying permission mode for audit logs. [link]
config: Support Check-And-Set (CAS) deletion of config entries [link]
config: add module flag to control the order which DNS recursors are queried [link]
config: warn the user if client_addr is empty because client services won't be listening [link]
connect/ca: cease including the common name field in generated x509 non-CA certificates [link]
connect: Add low-level feature to allow an Ingress to retrieve TLS certificates from SDS. [link]
connect: Consul will now generate a unique virtual IP for each connect-enabled service (this will also differ across namespace/partition in Enterprise). [link]
connect: Support Vault auth methods for the Connect CA Vault provider. Currently, we support any non-deprecated auth methods the latest version of Vault supports (v1.8.5), which include AppRole, AliCloud, AWS, Azure, Cloud Foundry, GitHub, Google Cloud, JWT/OIDC, Kerberos, Kubernetes, LDAP, Oracle Cloud Infrastructure, Okta, Radius, TLS Certificates, and Username & Password. [link]
connect: Support manipulating HTTP headers in the mesh. [link]
connect: add Namespace configuration setting for Vault CA provider [link]
connect: ingress gateways may now enable built-in TLS for a subset of listeners. [link]
connect: service-resolver subset filters are validated for valid go-bexpr syntax on write [link]
connect: update supported envoy versions to 1.19.1, 1.18.4, 1.17.4, 1.16.5 [link]
connect: update supported envoy versions to 1.20.0, 1.19.1, 1.18.4, 1.17.4 [link]
debug: Add a new /v1/agent/metrics/stream API endpoint for streaming of metrics [link]
debug: rename cluster capture target to members, to be more consistent with the terms used by the API. [link]
dns: Added a module endpoint for querying the assigned virtual IP for a service. [link]
http: when a URL path is not found, include a message with the 404 status code to help the user understand why (e.g., HTTP API endpoint path not prefixed with /v1/) [link]
raft: Added a configuration to disable boltdb freelist syncing [link]
raft: Emit boltdb related performance metrics [link]
raft: Use bbolt instead of the legacy boltdb implementation [link]
sdk: Add support for iptable rules that allow DNS lookup redirection to Consul DNS. [link]
segments: (Enterprise only) ensure that the serf_lan_allowed_cidrs applies to network segments [link]
telemetry: add a new module metric for tracking when the Agent TLS certificate expires. [link]
telemetry: add a new module metric for tracking when the root certificate expires. [link]
telemetry: added metrics to track certificates expiry. [link]
types: add TLSVersion and TLSCipherSuite [link]
ui: Change partition URL segment prefix from module to module [link]
ui: Add upstream icons for upstreams and upstream instances [link]
ui: Add uri guard to prevent future URL encoding issues [link]
ui: Move the majority of our SASS variables to use native CSS custom
properties [link]
ui: Removed informational panel from the namespace selector menu when editing
namespaces [link]
ui: Update UI browser support to 'roughly ~2 years back' [link]
ui: Update global notification styling [link]
ui: added copy to clipboard button in code editor toolbars [link]

DEPRECATIONS:

api: module is deprecated and will be removed in a future major release - use module instead [link]
config: module has been renamed to module, and module has been renamed to module - the old field names are now deprecated and will be removed in a future major release [link]
tls: With the upgrade to Go 1.17, the ordering of module will no longer be honored, and module is now ignored. [link]

BUG FIXES:

acl: (Enterprise only) fix namespace and namespace_prefix policy evaluation when both govern an authz request
api: Fix default values used for optional fields in autopilot configuration update (POST to module) [link] [link]
api: ensure new partition fields are omit empty for compatibility with older versions of consul [link]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time.
areas: (Enterprise only) make the gRPC server tracker network area aware [link]
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [link]
ca: fixes a bug that caused the SigningKeyID to be wrong in the primary DC, when the Vault provider is used, after a CA config creates a new root. [link]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [link]
check root and intermediate CA expiry before using it to sign a leaf certificate. [link]
connect/ca: ensure edits to the key type/bits for the connect builtin CA will regenerate the roots [link]
connect/ca: require new vault mount points when updating the key type/bits for the vault connect CA provider [link]
connect: fix race causing xDS generation to lock up when discovery chains are tracked for services that are no longer upstreams. [link]
dns: Fixed an issue where on DNS requests made with .alt_domain response was returned as .domain [link]
dns: return an empty answer when asked for an addr dns with type other then A and AAAA. [link]
macos: fixes building with a non-Apple LLVM (such as installed via Homebrew) [link]
namespaces: (Enterprise only) ensure the namespace replicator doesn't replicate deleted namespaces
proxycfg: ensure all of the watches are canceled if they are cancelable [link]
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the module setting in config files
ui: Change partitions to expect [] from the listing API [link]
ui: Don't offer to save an intention with a source/destination wildcard partition [link]
ui: Ensure all types of data get reconciled with the backend data [link]
ui: Ensure dc selector correctly shows the currently selected dc [link]
ui: Ensure we check intention permissions for specific services when deciding
whether to show action buttons for per service intention actions [link]
ui: Ensure we filter tokens by policy when showing which tokens use a certain
policy whilst editing a policy [link]
ui: Ensure we show a readonly designed page for readonly intentions [link]
ui: Filter the global intentions list by the currently selected parition rather
than a wildcard [link]
ui: Fix inline-code brand styling [link]
ui: Fix visual issue with slight table header overflow [link]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [link]
ui: Gracefully recover from non-existant DC errors [link]
ui: Include module into available variables for module [link]
ui: Revert to depending on the backend, 'post-user-action', to report
permissions errors rather than using UI capabilities 'pre-user-action' [link]
ui: Topology - Fix up Default Allow and Permissive Intentions notices [link]
ui: code editor styling (layout consistency + wide screen support) [link]
use the MaxQueryTime instead of RPCHoldTimeout for blocking RPC queries
 [link]. [link]
windows: fixes arm and arm64 builds [link]

NOTES:

Renamed the module field to module in the module file in which tokens are persisted on-disk (when module is enabled) [link]
"
58,"1.10.5 (December 13, 2021)
SECURITY:

ci: Upgrade to Go 1.16.12 to address link [link]

BUG FIXES:

agent: (Enterprise only) fix bug where 1.10.x agents would deregister serf checks from 1.11.x servers [link]
"
59,"1.9.12 (December 13, 2021)
SECURITY:

ci: Upgrade to Go 1.16.12 to address link [link]
"
60,"1.8.18 (December 13, 2021)
SECURITY:

ci: Upgrade to Go 1.16.12 to address link [link]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires module permission in the default namespace. This change fixes CVE-2021-41805.

BUG FIXES:

snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the module setting in config files
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [link]
ui: Include module into available variables for module [link]
"
61,"1.11.0-rc (December 08, 2021)
BREAKING CHANGES:

cli: module has been replaced with module [link]

FEATURES:

partitions: (Enterprise only) Ensure partitions and serf-based WAN federation are mutually exclusive.
ui: Add documentation link to Partition empty state [link]
ui: Adds basic support for showing Services exported from another partition. [link]
ui: Adds support for partitions to Service and Node Identity template visuals. [link]
ui: Adds support for partitions to the Routing visualization. [link]
ui: Don't offer a 'Valid Datacenters' option when editing policies for non-default partitions [link]
ui: Include module into available variables for module [link]
ui: Upgrade Lock Sessions to use partitions [link]

IMPROVEMENTS:

agent: (Enterprise only) purge service/check registration files for incorrect partitions on reload [link]
agent: add variation of force-leave that exclusively works on the WAN [link]
api: (Enterprise Only) rename partition-exports config entry to exported-services. [link]
auto-config: ensure the feature works properly with partitions [link]
connect: (Enterprise only) add support for cross-partition transparent proxying. [link]
connect: (Enterprise only) add support for targeting partitions in discovery chain routes, splits, and redirects. [link]
connect: Consul will now generate a unique virtual IP for each connect-enabled service (this will also differ across namespace/partition in Enterprise). [link]
connect: Support Vault auth methods for the Connect CA Vault provider. Currently, we support any non-deprecated auth methods
the latest version of Vault supports (v1.8.5), which include AppRole, AliCloud, AWS, Azure, Cloud Foundry, GitHub, Google Cloud,
JWT/OIDC, Kerberos, Kubernetes, LDAP, Oracle Cloud Infrastructure, Okta, Radius, TLS Certificates, and Username & Password. [link]
dns: Added a module endpoint for querying the assigned virtual IP for a service. [link]
partitions: (Enterprise only) rename APIs, commands, and public types to use ""partition"" rather than ""admin partition"". [link]
raft: Added a configuration to disable boltdb freelist syncing [link]
raft: Emit boltdb related performance metrics [link]
raft: Use bbolt instead of the legacy boltdb implementation [link]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: block enterprise-specific partition-exports config entry from being used in OSS Consul. [link]
types: add TLSVersion and TLSCipherSuite [link]
ui: Add partition support for SSO [link]
ui: Update global notification styling [link]

DEPRECATIONS:

api: module is deprecated and will be removed in a future major release - use module instead [link]
config: module has been renamed to module, and module has been renamed to module - the old field names are now deprecated and will be removed in a future major release [link]

BUG FIXES:

areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [link]
areas: (Enterprise only) make the gRPC server tracker network area aware [link]
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [link]
ca: fixes a bug that caused the SigningKeyID to be wrong in the primary DC, when the Vault provider is used, after a CA config creates a new root. [link]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [link]
ui: Fix inline-code brand styling [link]
ui: Fix visual issue with slight table header overflow [link]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [link]
ui: Include module into available variables for module [link]
"
62,"1.11.0-beta3 (November 17, 2021)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names. [link]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires module permission in the default namespace. This change fixes CVE-2021-41805.

FEATURES:

ca: Add a configurable TTL for Connect CA root certificates. The configuration is supported by the Vault and Consul providers. [link]
ca: Add a configurable TTL to the AWS ACM Private CA provider root certificate. [link]
health-checks: add support for h2c in http2 ping health checks [link]
partitions: (Enterprise only) segment serf LAN gossip between nodes in different partitions
ui: Adding support of Consul API Gateway as an external source. [link]
ui: Topology - New views for scenarios where no dependencies exist or ACLs are disabled [link]

IMPROVEMENTS:

ci: Artifact builds will now only run on merges to the release branches or to module [link]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [link]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [link]
config: warn the user if client_addr is empty because client services won't be listening [link]
connect/ca: Return an error when querying roots from uninitialized CA. [link]
connect: (Enterprise only) Allow ingress gateways to target services in another partition [link]
connect: add Namespace configuration setting for Vault CA provider [link]
namespaces: (Enterprise only) policy and role defaults can reference policies in any namespace in the same partition by ID
partitions: Prevent writing partition-exports entries to secondary DCs. [link]
sdk: Add support for iptable rules that allow DNS lookup redirection to Consul DNS. [link]
segments: (Enterprise only) ensure that the serf_lan_allowed_cidrs applies to network segments [link]
ui: Add upstream icons for upstreams and upstream instances [link]
ui: Update UI browser support to 'roughly ~2 years back' [link]
ui: When switching partitions reset the namespace back to the tokens default namespace or default [link]
ui: added copy to clipboard button in code editor toolbars [link]

BUG FIXES:

acl: (Enterprise only) fix namespace and namespace_prefix policy evaluation when both govern an authz request
api: ensure new partition fields are omit empty for compatibility with older versions of consul [link]
connect/ca: Allow secondary initialization to resume after being deferred due to unreachable or incompatible primary DC servers. [link]
connect: fix issue with attempting to generate an invalid upstream cluster from UpstreamConfig.Defaults. [link]
macos: fixes building with a non-Apple LLVM (such as installed via Homebrew) [link]
namespaces: (Enterprise only) ensure the namespace replicator doesn't replicate deleted namespaces
partitions: (Enterprise only) fix panic when forwarding delete operations to the leader
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the module setting in config files
snapshot: (Enterprise only) snapshot agent no longer attempts to refresh its license from the server when a local license is provided (i.e. via config or an environment variable)
state: (Enterprise Only) ensure partition delete triggers namespace deletes
ui: (Enterprise only) When no namespace is selected, make sure to default to the tokens default namespace when requesting permissions [link]
ui: Ensure the UI stores the default partition for the users token [link]
ui: Ensure we check intention permissions for specific services when deciding
whether to show action buttons for per service intention actions [link]
ui: Filter the global intentions list by the currently selected parition rather
than a wildcard [link]
ui: Revert to depending on the backend, 'post-user-action', to report
permissions errors rather than using UI capabilities 'pre-user-action' [link]
ui: code editor styling (layout consistency + wide screen support) [link]
windows: fixes arm and arm64 builds [link]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [link]
"
63,"1.10.4 (November 11, 2021)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names. [link]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires module permission in the default namespace. This change fixes CVE-2021-41805.

IMPROVEMENTS:

ci: Artifact builds will now only run on merges to the release branches or to module [link]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [link]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [link]
connect/ca: Return an error when querying roots from uninitialized CA. [link]
telemetry: Add new metrics for the count of connect service instances and configuration entries. [link]

BUG FIXES:

acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [link]
api: fixed backwards compatibility issue with AgentService SocketPath field. [link]
connect/ca: Allow secondary initialization to resume after being deferred due to unreachable or incompatible primary DC servers. [link]
connect: fix issue with attempting to generate an invalid upstream cluster from UpstreamConfig.Defaults. [link]
raft: do not trigger an election if not part of the servers list. [link]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [link]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
snapshot: (Enterprise only) snapshot agent no longer attempts to refresh its license from the server when a local license is provided (i.e. via config or an environment variable)
telemetry: Consul Clients no longer emit Autopilot metrics. [link]
telemetry: fixes a bug with Prometheus consul_autopilot_failure_tolerance metric where 0 is reported instead of NaN on follower servers. [link]
telemetry: fixes a bug with Prometheus consul_autopilot_healthy metric where 0 is reported instead of NaN on servers. [link]
ui: (Enterprise only) When no namespace is selected, make sure to default to the tokens default namespace when requesting permissions [link]
ui: Ensure we check intention permissions for specific services when deciding
whether to show action buttons for per service intention actions [link]
ui: Fixed styling of Role remove dialog on the Token edit page [link]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [link]
"
64,"1.9.11 (November 11, 2021)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names. [link]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires module permission in the default namespace. This change fixes CVE-2021-41805.

IMPROVEMENTS:

ci: Artifact builds will now only run on merges to the release branches or to module [link]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [link]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [link]
telemetry: Add new metrics for the count of connect service instances and configuration entries. [link]

BUG FIXES:

acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [link]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [link]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
ui: Fixed styling of Role remove dialog on the Token edit page [link]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [link]
"
65,"1.8.17 (November 11, 2021)
SECURITY:
* namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires module permission in the default namespace. This change fixes CVE-2021-41805.
IMPROVEMENTS:

ci: Artifact builds will now only run on merges to the release branches or to module [link]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [link]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [link]

BUG FIXES:

acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [link]
raft: Consul leaders will attempt to transfer leadership to another server as part of gracefully leaving the cluster. [link]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [link]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
ui: Fixed styling of Role delete confirmation button with the Token edit page [link]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [link]
"
66,"1.11.0-beta2 (November 02, 2021)
BREAKING CHANGES:

acl: The legacy ACL system that was deprecated in Consul 1.4.0 has been removed. Before upgrading you should verify that nothing is still using the legacy ACL system. See the link for more information. [link]

IMPROVEMENTS:

agent: for various /v1/agent endpoints parse the partition parameter on the request [link]
agent: refactor the agent delegate interface to be partition friendly [link]
cli: Add module and module flags to the module command to support Check-And-Set (CAS) deletion of config entries [link]
cli: update consul members output to display partitions and sort the results usefully [link]
config: Allow ${} style interpolation for UI Dashboard template URLs [link]
config: Support Check-And-Set (CAS) deletion of config entries [link]
connect: (Enterprise only) add support for dialing upstreams in remote partitions through mesh gateways. [link]
connect: (Enterprise only) updates ServiceRead and NodeRead to account for the partition-exports config entry. [link]
connect: ingress gateways may now enable built-in TLS for a subset of listeners. [link]
connect: service-resolver subset filters are validated for valid go-bexpr syntax on write [link]
connect: update supported envoy versions to 1.20.0, 1.19.1, 1.18.4, 1.17.4 [link]

DEPRECATIONS:

tls: With the upgrade to Go 1.17, the ordering of module will no longer be honored, and module is now ignored. [link]

BUG FIXES:

api: fixed backwards compatibility issue with AgentService SocketPath field. [link]
dns: Fixed an issue where on DNS requests made with .alt_domain response was returned as .domain [link]
raft: do not trigger an election if not part of the servers list. [link]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [link]
telemetry: fixes a bug with Prometheus consul_autopilot_failure_tolerance metric where 0 is reported instead of NaN on follower servers. [link]
ui: Ensure dc selector correctly shows the currently selected dc [link]
ui: Ensure we filter tokens by policy when showing which tokens use a certain
policy whilst editing a policy [link]
"
67,"1.11.0-beta1 (October 15, 2021)
FEATURES:

partitions: allow for partition queries to be forwarded [link]
sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [link]
ui: Added initial support for admin partition CRUD [link]

IMPROVEMENTS:

api: add partition field to acl structs [link]
audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: module, module, module, module and module. [link]
connect: Add low-level feature to allow an Ingress to retrieve TLS certificates from SDS. [link]
connect: update supported envoy versions to 1.19.1, 1.18.4, 1.17.4, 1.16.5 [link]
state: reads of partitions now accept an optional memdb.WatchSet
telemetry: Add new metrics for the count of KV entries in the Consul store. [link]
telemetry: Add new metrics for the count of connect service instances and configuration entries. [link]
ui: Add initial support for partitions to intentions [link]
ui: Add uri guard to prevent future URL encoding issues [link]
ui: Move the majority of our SASS variables to use native CSS custom
properties [link]
ui: Removed informational panel from the namespace selector menu when editing
namespaces [link]

BUG FIXES:

acl: (Enterprise only) Fix bug in 'consul members' filtering with partitions. [link]
acl: (Enterprise only) ensure that auth methods with namespace rules work with partitions [link]
acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [link]
connect: Fix upstream listener escape hatch for prepared queries [link]
grpc: strip local ACL tokens from RPCs during forwarding if crossing datacenters [link]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
telemetry: Consul Clients no longer emit Autopilot metrics. [link]
telemetry: fixes a bug with Prometheus consul_autopilot_healthy metric where 0 is reported instead of NaN on servers. [link]
ui: (Enterprise Only) Fix saving intentions with namespaced source/destination [link]
ui: Don't show a CRD warning for read-only intentions [link]
ui: Ensure all types of data get reconciled with the backend data [link]
ui: Fixed styling of Role remove dialog on the Token edit page [link]
ui: Gracefully recover from non-existant DC errors [link]
ui: Ignore reported permissions for KV area meaning the KV is always enabled
for both read/write access if the HTTP API allows. [link]
ui: Topology - Fix up Default Allow and Permissive Intentions notices [link]
ui: hide create button for policies/roles/namespace if users token has no write permissions to those areas [link]
xds: ensure the active streams counters are 64 bit aligned on 32 bit systems [link]
xds: fixed a bug where Envoy sidecars could enter a state where they failed to receive xds updates from Consul [link]
Fixing SOA record to return proper domain when alt domain in use. link
"
68,"1.10.3 (September 27, 2021)
FEATURES:

sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [link]

IMPROVEMENTS:

audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: module, module, module, module and module. [link]
connect: update supported envoy versions to 1.18.4, 1.17.4, 1.16.5 [link]
telemetry: Add new metrics for the count of KV entries in the Consul store. [link]

BUG FIXES:

api: Revert early out errors from license APIs to allow v1.10+ clients to
manage licenses on older servers [link]
connect: Fix upstream listener escape hatch for prepared queries [link]
grpc: strip local ACL tokens from RPCs during forwarding if crossing datacenters [link]
tls: consider presented intermediates during server connection tls handshake. [link]
ui: (Enterprise Only) Fix saving intentions with namespaced source/destination [link]
ui: Don't show a CRD warning for read-only intentions [link]
ui: Ensure routing-config page blocking queries are cleaned up correctly [link]
ui: Ignore reported permissions for KV area meaning the KV is always enabled
for both read/write access if the HTTP API allows. [link]
ui: hide create button for policies/roles/namespace if users token has no write permissions to those areas [link]
xds: ensure the active streams counters are 64 bit aligned on 32 bit systems [link]
xds: fixed a bug where Envoy sidecars could enter a state where they failed to receive xds updates from Consul [link]
"
69,"1.9.10 (September 27, 2021)
FEATURES:

sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [link]

IMPROVEMENTS:

audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: module, module, module, module and module. [link]
connect: update supported envoy versions to 1.16.5 [link]
telemetry: Add new metrics for the count of KV entries in the Consul store. [link]

BUG FIXES:

tls: consider presented intermediates during server connection tls handshake. [link]
ui: (Enterprise Only) Fix saving intentions with namespaced source/destination [link]
"
70,"1.8.16 (September 27, 2021)
FEATURES:

sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [link]

IMPROVEMENTS:

audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: module, module, module, module and module. [link]

BUG FIXES:

tls: consider presented intermediates during server connection tls handshake. [link]
ui: (Enterprise Only) Fixes a visual issue where namespaces would ""double up"" in the Source/Destination select menu when creating/editing intentions [link]
"
71,"1.11.0-alpha (September 16, 2021)
SECURITY:

rpc: authorize raft requests link [link]

FEATURES:

config: add agent config flag for enterprise clients to indicate they wish to join a particular partition [link]
connect: include optional partition prefixes in SPIFFE identifiers [link]
partitions: (Enterprise only) Adds admin partitions, a new feature to enhance Consul's multitenancy capabilites.
ui: Add UI support to use Vault as an external source for a service [link]
ui: Adds a copy button to each composite row in tokens list page, if Secret ID returns an actual ID [link]

IMPROVEMENTS:

acl: replication routine to report the last error message. [link]
api: Enable setting query options on agent health and maintenance endpoints. [link]
checks: add failures_before_warning setting for interval checks. [link]
config: (Enterprise Only) Allow specifying permission mode for audit logs. [link]
config: add module flag to control the order which DNS recursors are queried [link]
connect/ca: cease including the common name field in generated x509 non-CA certificates [link]
connect: Support manipulating HTTP headers in the mesh. [link]
connect: update supported envoy versions to 1.18.4, 1.17.4, 1.16.5 [link]
debug: Add a new /v1/agent/metrics/stream API endpoint for streaming of metrics [link]
debug: rename cluster capture target to members, to be more consistent with the terms used by the API. [link]
structs: prohibit config entries from referencing more than one partition at a time [link]
telemetry: add a new module metric for tracking when the Agent TLS certificate expires. [link]
telemetry: add a new module metric for tracking when the root certificate expires. [link]

DEPRECATIONS:

config: the module and module configuration settings have been renamed to module and module to better match their function. [link]

BUG FIXES:

api: Fix default values used for optional fields in autopilot configuration update (POST to module) [link] [link]
api: Revert early out errors from license APIs to allow v1.10+ clients to
manage licenses on older servers [link]
check root and intermediate CA expiry before using it to sign a leaf certificate. [link]
connect/ca: ensure edits to the key type/bits for the connect builtin CA will regenerate the roots [link]
connect/ca: require new vault mount points when updating the key type/bits for the vault connect CA provider [link]
dns: return an empty answer when asked for an addr dns with type other then A and AAAA. [link]
tls: consider presented intermediates during server connection tls handshake. [link]
use the MaxQueryTime instead of RPCHoldTimeout for blocking RPC queries 
 [link]. [link]
"
72,"1.10.2 (August 27, 2021)
SECURITY:

rpc: authorize raft requests link [link]

FEATURES:

connect: add support for unix domain socket config via API/CLI [link]
ui: Adding support in Topology view for Routing Configurations [link]
ui: Create Routing Configurations route and page [link]
ui: Splitting up the socket mode and socket path in the Upstreams Instance List [link]

IMPROVEMENTS:

areas: (Enterprise only) Add 15s timeout to opening streams over pooled connections.
areas: (Enterprise only) Apply backpressure to area gossip packet ingestion when more than 512 packets are waiting to be ingested.
areas: (Enterprise only) Make implementation of WriteToAddress non-blocking to avoid slowing down memberlist's packetListen routine.
checks: Add Interval and Timeout to API response. [link]
ci: make changelog-checker only validate PR number against main base [link]
ci: upgrade to use Go 1.16.7 [link]
deps: update to gogo/protobuf v1.3.2 [link]
proxycfg: log correlation IDs for the proxy configuration snapshot's blocking queries. [link]

BUG FIXES:

acl: fixes a bug that prevented the default user token from being used to authorize service registration for connect proxies. [link]
ca: fixed a bug when ca provider fail and provider state is stuck in module state. [link]
ca: report an error when setting the ca config fail because of an index check. [link]
cli: Ensure the metrics endpoint is accessible when Envoy is configured to use
a non-default admin bind address. [link]
cli: Fix a bug which prevented initializing a watch when using a namespaced
token. [link]
cli: Fix broken KV import command on Windows. [link]
connect: ensure SAN validation for prepared queries validates against all possible prepared query targets [link]
connect: fix crash that would result from multiple instances of a service resolving service config on a single agent. [link]
connect: proxy upstreams inherit namespace from service if none are defined. [link]
dns: fixes a bug with edns truncation where the response could exceed the size limit in some cases. [link]
grpc: ensure that streaming gRPC requests work over mesh gateway based wan federation [link]
http: log cancelled requests as such at the INFO level, instead of logging them as errored requests. [link]
streaming: set the default wait timeout for health queries [link]
txn: fixes Txn.Apply to properly authorize service registrations. [link]
ui: Disabling policy form fields from users with 'read' permissions [link]
ui: Fix Health Checks in K/V form Lock Sessions Info section [link]
ui: Fix dropdown option duplication in the new intentions form [link]
ui: Hide all metrics for ingress gateway services [link]
ui: Properly encode non-URL safe characters in OIDC responses [link]
ui: fixes a bug with some service failovers not showing the routing tab visualization [link]
"
73,"1.9.9 (August 27, 2021)
SECURITY:

rpc: authorize raft requests link [link]

IMPROVEMENTS:

areas: (Enterprise only) Add 15s timeout to opening streams over pooled connections.
areas: (Enterprise only) Apply backpressure to area gossip packet ingestion when more than 512 packets are waiting to be ingested.
areas: (Enterprise only) Make implementation of WriteToAddress non-blocking to avoid slowing down memberlist's packetListen routine.
deps: update to gogo/protobuf v1.3.2 [link]

BUG FIXES:

acl: fixes a bug that prevented the default user token from being used to authorize service registration for connect proxies. [link]
ca: fixed a bug when ca provider fail and provider state is stuck in module state. [link]
ca: report an error when setting the ca config fail because of an index check. [link]
cli: Ensure the metrics endpoint is accessible when Envoy is configured to use
a non-default admin bind address. [link]
cli: Fix a bug which prevented initializing a watch when using a namespaced
token. [link]
connect: proxy upstreams inherit namespace from service if none are defined. [link]
dns: fixes a bug with edns truncation where the response could exceed the size limit in some cases. [link]
txn: fixes Txn.Apply to properly authorize service registrations. [link]
ui: Fix dropdown option duplication in the new intentions form [link]
ui: Hide all metrics for ingress gateway services [link]
ui: Properly encode non-URL safe characters in OIDC responses [link]
ui: fixes a bug with some service failovers not showing the routing tab visualization [link]
"
74,"1.8.15 (August 27, 2021)
SECURITY:

rpc: authorize raft requests link [link]

IMPROVEMENTS:

areas: (Enterprise only) Add 15s timeout to opening streams over pooled connections.
areas: (Enterprise only) Apply backpressure to area gossip packet ingestion when more than 512 packets are waiting to be ingested.
areas: (Enterprise only) Make implementation of WriteToAddress non-blocking to avoid slowing down memberlist's packetListen routine.
deps: update to gogo/protobuf v1.3.2 [link]

BUG FIXES:

acl: fixes a bug that prevented the default user token from being used to authorize service registration for connect proxies. [link]
ca: fixed a bug when ca provider fail and provider state is stuck in module state. [link]
ca: report an error when setting the ca config fail because of an index check. [link]
cli: Ensure the metrics endpoint is accessible when Envoy is configured to use
a non-default admin bind address. [link]
cli: Fix a bug which prevented initializing a watch when using a namespaced
token. [link]
connect: proxy upstreams inherit namespace from service if none are defined. [link]
dns: fixes a bug with edns truncation where the response could exceed the size limit in some cases. [link]
txn: fixes Txn.Apply to properly authorize service registrations. [link]
"
75,"1.10.1 (July 15, 2021)
SECURITY:

xds: ensure envoy verifies the subject alternative name for upstreams link [link]
xds: ensure single L7 deny intention with default deny policy does not result in allow action link [link]

FEATURES:

cli: allow running module command in a provided Linux namespace. [link]
sdk: allow applying module rules in a provided Linux namespace. [link]

IMPROVEMENTS:

acl: Return secret ID when listing tokens if accessor has module [link]
structs: prevent service-defaults upstream configs from using wildcard names or namespaces [link]
ui: Move all CSS icons to use standard CSS custom properties rather than SASS variables [link]

DEPRECATIONS:

connect/ca: remove the module field from the Consul CA provider, it was not used for anything. [link]

BUG FIXES:

agent: fix a panic on 32-bit platforms caused by misaligned struct fields used with sync/atomic. [link]
ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [link]
checks: fixes the default ServerName used with TLS health checks. [link]
connect/proxy: fixes logic bug preventing builtin/native proxy from starting upstream listeners [link]
streaming: fix a bug that was preventing streaming from being enabled. [link]
ui: (Enterprise only) Ensure permissions are checked based on the actively selected namespace [link]
ui: Ensure in-folder KVs are created in the correct folder [link]
ui: Fix KV editor syntax highlighting [link]
ui: Send service name down to Stats to properly call endpoint for Upstreams and Downstreams metrics [link]
ui: Show ACLs disabled page at Tokens page instead of 403 error when ACLs are disabled [link]
ui: Use the token's namespace instead of the default namespace when not
specifying a namespace in the URL [link]
"
76,"1.9.8 (July 15, 2021)
SECURITY:

xds: ensure envoy verifies the subject alternative name for upstreams link [link]
xds: ensure single L7 deny intention with default deny policy does not result in allow action link [link]

BUG FIXES:

ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [link]
ui: Send service name down to Stats to properly call endpoint for Upstreams and Downstreams metrics [link]
"
77,"1.8.14 (July 15, 2021)
SECURITY:

xds: ensure envoy verifies the subject alternative name for upstreams link [link]

BUG FIXES:

ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [link]
"
78,"1.10.1-beta1 (July 01, 2021)
IMPROVEMENTS:

structs: prevent service-defaults upstream configs from using wildcard names or namespaces [link]
ui: Move all CSS icons to use standard CSS custom properties rather than SASS variables [link]

BUG FIXES:

ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [link]
checks: fixes the default ServerName used with TLS health checks. [link]
connect/proxy: fixes logic bug preventing builtin/native proxy from starting upstream listeners [link]
streaming: fix a bug that was preventing streaming from being enabled. [link]
ui: Send service name down to Stats to properly call endpoint for Upstreams and Downstreams metrics [link]
"
79,"1.10.0 (June 22, 2021)
BREAKING CHANGES:

connect: Disallow wildcard as name for service-defaults. [link]
connect: avoid encoding listener info in ingress and terminating gateway listener stats names. [link]
licensing: (Enterprise Only) Consul Enterprise 1.10 has removed API driven licensing of servers in favor of license loading via configuration. The module and module methods on the module endpoint will now return 405s, the module and module CLI commands have been removed and the module and module methods in the API client have been altered to always return an error. [link]
licensing: (Enterprise Only) Consul Enterprise client agents now require a valid non-anonymous ACL token for retrieving their license from the servers. Additionally client agents rely on the value of the module and module configurations for determining the servers to query for the license. Therefore one must be set to use license auto-retrieval. [link]
licensing: (Enterprise Only) Consul Enterprise has removed support for temporary licensing. All server agents must have a valid license at startup and client agents must have a license at startup or be able to retrieve one from the servers. [link]

FEATURES:

checks: add H2 ping health checks. [link]
cli: Add additional flags to the module command to allow excluding inbound and outbound ports,
outbound CIDRs, and additional user IDs from traffic redirection. [link]
cli: Add new module command for applying traffic redirection rules when Transparent Proxy is enabled. [link]
cli: Add prefix option to kv import command [link]
cli: Automatically exclude ports from module, module, and module from module config
from inbound traffic redirection rules if module flag is provided to the module command. [link]
cli: snapshot inspect command provides KV usage breakdown [link]
cli: snapshot inspect command supports JSON output [link]
connect: Add local_request_timeout_ms to allow configuring the Envoy request timeout on local_app [link]
connect: add support for unix domain sockets addresses for service upstreams and downstreams [link]
connect: add toggle to globally disable wildcard outbound network access when transparent proxy is enabled [link]
connect: generate upstream service labels for terminating gateway listener stats. [link]
sdk: Add new module package for applying traffic redirection rules with iptables. [link]
sdk: Allow excluding inbound and outbound ports, outbound CIDRs, and additional user IDs from traffic redirection in the module package. [link]
ui: Add Unix Domain Socket support [link]
ui: Create a collapsible notices component for the Topology tab [link]
ui: Read-only ACL Auth Methods view [link]
ui: Transparent Proxy - Service mesh visualization updates [link]
xds: emit a labeled gauge of connected xDS streams by version [link]
xds: exclusively support the Incremental xDS protocol when using xDS v3 [link]

IMPROVEMENTS:

acl: extend the auth-methods list endpoint to include MaxTokenTTL and TokenLocality fields. [link]
acl: use the presence of a management policy in the state store as a sign that we already migrated to v2 acls [link]
agent: Save exposed Envoy ports to the agent's state when module is true in proxy's configuration. [link]
api: Add module to the health check API resource. [link]
api: Enable setting query options on agent endpoints. [link]
api: The module header is now always set when a body is present in a request. [link]
cli: snapshot inspect command can now inspect raw snapshots from a server's data
dir. [link]
cli: the module flag will now resolve the module environment variable, as part of a full url. [link]
command: Exclude exposed Envoy ports from traffic redirection when providing module and module is set. [link]
connect: Add support for transparently proxying traffic through Envoy. [experimental] [link]
connect: Allow per-upstream configuration to be set in service-defaults. [experimental] [link]
connect: Ensures passthrough tproxy cluster is created even when mesh config doesn't exist. [link]
connect: Support dialing individual service IP addresses through transparent proxies. [link]
connect: The builtin connect proxy no longer advertises support for h2 via ALPN. [link]. [link]
connect: Update the service mesh visualization to account for transparent proxies. [link]
connect: adds new flags module and module to module to support envoy_prometheus_bind_addr pointing to the merged metrics port when using Consul Connect on K8s. [link]
connect: allow exposing duplicate HTTP paths through a proxy instance. [link]
connect: rename cluster config entry to mesh. [link]
connect: restrict transparent proxy mode to only match on the tagged virtual IP address. [link]
connect: update supported envoy versions to 1.18.2, 1.17.2, 1.16.3, 1.15.4 [link]
connect: update supported envoy versions to 1.18.3, 1.17.3, 1.16.4, and 1.15.5 [link]
debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [link]
grpc: move gRPC INFO logs to be emitted as TRACE logs from Consul [link]
licensing: (Enterprise Only) Consul Enterprise has gained the module CLI command for inspecting a license without applying it..
licensing: (Enterprise Only) Consul Enterprise has gained the ability to autoload a license via configuration. This can be specified with the module configuration, the module environment variable or the module environment variable [link]
licensing: (Enterprise Only) Consul Enterprise has gained the ability update its license via a configuration reload. The same environment variables and configurations will be used to determine the new license. [link]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [link]
raft: allow reloading of raft trailing logs and snapshot timing to allow recovery from some link.
telemetry: add metrics and documentation for link. [link]
streaming: change module to default to true so that streaming is used by default when it is supported. [link]
ui: Add 'optional route segments' and move namespaces to use them [link]
ui: Adding a notice about how TransparentProxy mode affects the Upstreams list at the top of tab view [link]
ui: Improve loader centering with new side navigation [link]
ui: Move to a sidebar based main navigation [link]
ui: Show a message to explain that health checks may be out of date if the serf health check is in a critical state [link]
ui: Updating the wording for the banner and the popover for a service with an upstream that is not explicitly defined. [link]
ui: Use older (~2016) native ES6 features to reduce transpilation and UI JS payload [link]
ui: add permanently visible indicator when ACLs are disabled [link]
ui: improve accessibility of modal dialogs [link]
ui: restrict the viewing/editing of certain UI elements based on the users ACL token [link]
ui: updates the ui with the new consul brand assets [link]
xds: add support for envoy 1.17.0 [link]
xds: default to speaking xDS v3, but allow for v2 to be spoken upon request [link]
xds: ensure that all envoyproxy/go-control-plane protobuf symbols are linked into the final binary [link]
xds: remove deprecated usages of xDS and drop support for envoy 1.13.x [link]

BUG FIXES:

checks: add TLSServerName field to allow setting the TLS server name for HTTPS health checks. [link]
config: Fixed a bug where module could not be changed by reloading the
config. [link]
connect: Fix bug that prevented transparent proxies from working when mesh config restricted routing to catalog destinations. [link]
memberlist: fixes a couple bugs which allowed malformed input to cause a crash in a Consul
client or server. [link]
monitor: fix monitor to produce json format logs when requested [link]
proxycfg: Ensure that endpoints for explicit upstreams in other datacenters are watched in transparent mode. [link]
proxycfg: avoid panic when transparent proxy upstream is added and then removed. [link]
streaming: fixes a bug that would cause context cancellation errors when a cache entry expired while requests were active. [link]
streaming: lookup in health properly handle case-sensitivity and perform filtering based on tags and node-meta [link]
telemetry: fixes a bug with Prometheus metrics where Gauges and Summaries were incorrectly
being expired. [link]
ui: Adding conditional to prevent Service Mesh from breaking when there are no Upstreams [link]
ui: Fix text searching through upstream instances. [link]
ui: Update conditional for topology empty state [link]
ui: ensure proxy instance API requests perform blocking queries correctly [link]
xds: (beta-only) ensure that dependent xDS resources are reconfigured during primary type warming [link]

NOTES:

legal: (Enterprise only) Enterprise binary downloads will now include a copy of the EULA and Terms of Evaluation in the zip archive
"
80,"1.9.7 (June 21, 2021)
IMPROVEMENTS:

debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [link]
licensing: (Enterprise Only) In order to have forward compatibility with Consul Enterprise v1.10, the ability to parse licenses from the configuration or environment has been added. This can be specified with the module configuration, the module environment variable or the module environment variable. On server agents this configuration will be ignored. Client agents and the snapshot agent will use the configured license instead of automatically retrieving one. [link]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [link]

BUG FIXES:

license: (Enterprise only) Fixed an issue that would cause client agents on versions before 1.10 to not be able to retrieve the license from a 1.10+ server. [link]
monitor: fix monitor to produce json format logs when requested [link]
"
81,"1.8.13 (June 21, 2021)
IMPROVEMENTS:

debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [link]
licensing: (Enterprise Only) In order to have forward compatibility with Consul Enterprise v1.10, the ability to parse licenses from the configuration or environment has been added. This can be specified with the module configuration, the module environment variable or the module environment variable. On server agents this configuration will be ignored. Client agents and the snapshot agent will use the configured license instead of automatically retrieving one. [link]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [link]

BUG FIXES:

license: (Enterprise only) Fixed an issue that would cause client agents on versions before 1.10 to not be able to retrieve the license from a 1.10+ server. [link]
monitor: fix monitor to produce json format logs when requested [link]
"
82,"1.10.0-rc2 (June 17, 2021)
BUG FIXES:

proxycfg: avoid panic when transparent proxy upstream is added and then removed. [link]
"
83,"1.10.0-rc (June 16, 2021)
BREAKING CHANGES:

connect: avoid encoding listener info in ingress and terminating gateway listener stats names. [link]

FEATURES:

connect: generate upstream service labels for terminating gateway listener stats. [link]

IMPROVEMENTS:

connect: allow exposing duplicate HTTP paths through a proxy instance. [link]
grpc: move gRPC INFO logs to be emitted as TRACE logs from Consul [link]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [link]

BUG FIXES:

proxycfg: Ensure that endpoints for explicit upstreams in other datacenters are watched in transparent mode. [link]
xds: (beta-only) ensure that dependent xDS resources are reconfigured during primary type warming [link]

NOTES:

legal: (Enterprise only) Enterprise binary downloads will now include a copy of the EULA and Terms of Evaluation in the zip archive
"
84,"1.10.0-beta4 (June 10, 2021)
IMPROVEMENTS:

connect: Support dialing individual service IP addresses through transparent proxies. [link]
debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [link]
licensing: (Enterprise Only) Consul Enterprise has gained the module CLI command for inspecting a license without applying it..
telemetry: The usage data in the module API now includes cluster member counts, reporting clients on a per segment basis. [link]

BUG FIXES:

agent: fix logging output by removing leading whitespace from every log line [link]
autopilot: (Enterprise only) Fixed an issue where autopilot could cause a new leader to demote the wrong voter when redundancy zones are in use and the previous leader failed. [link]
cli: removes the need to set debug_enabled=true to collect debug data from the CLI. Now
the CLI behaves the same way as the API and accepts either an ACL token with operator:read, or
debug_enabled=true. [link]
connect: Fix bug that prevented transparent proxies from working when mesh config restricted routing to catalog destinations. [link]
envoy: fixes a bug where a large envoy config could cause the module command to deadlock when attempting to start envoy. [link]
monitor: fix monitor to produce json format logs when requested [link]
"
85,"1.9.6 (June 04, 2021)
IMPROVEMENTS:

acl: Give more descriptive error if auth method not found. [link]
areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
cli: added a module flag to the module command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [link]
connect: update supported envoy versions to 1.16.3, 1.15.4, 1.14.7, 1.13.7 [link]
connect: update supported envoy versions to 1.16.4, 1.15.5, 1.14.6, and 1.13.7 [link]
telemetry: Add new metrics for status of secondary datacenter replication. [link]
telemetry: The usage data in the module API now includes cluster member counts, reporting clients on a per segment basis. [link]
ui: Added CRD popover 'informed action' for intentions managed by CRDs [link]
ui: Added humanized formatting to lock session durations [link]
ui: Only show a partial list of intention permissions, with the option to show all [link]
ui: updates the ui with the new consul brand assets [link]

BUG FIXES:

agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [link]
agent: fix logging output by removing leading whitespace from every log line [link]
api: include the default value of raft settings in the output of /v1/agent/self [link]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
autopilot: (Enterprise only) Fixed an issue where autopilot could cause a new leader to demote the wrong voter when redundancy zones are in use and the previous leader failed. [link]
cli: removes the need to set debug_enabled=true to collect debug data from the CLI. Now
the CLI behaves the same way as the API and accepts either an ACL token with operator:read, or
debug_enabled=true. [link]
cli: snapshot inspect command would panic on invalid input. [link]
envoy: fixes a bug where a large envoy config could cause the module command to deadlock when attempting to start envoy. [link]
http: fix a bug that caused the module header to be missing on
request for service health [link]
local: agents will no longer persist the default user token along with a service or check. [link]
namespaces: (Enterprise only) fixes a problem where the logs would contain many warnings about namespaces not being licensed.
server: ensure that central service config flattening properly resets the state each time [link]
ui: Add conditionals to lock sessions tab [link]
ui: De-duplicate tags in rendered tag listings [link]
ui: Don't render a DOM element for empty namespace descriptions [link]
ui: Reflect the change of Session API response shape for Checks in post 1.7 Consul [link]
ui: Removes the extra rendering of namespace in service upstream list [link]
"
86,"1.8.12 (June 04, 2021)
BUG FIXES:

agent: fix logging output by removing leading whitespace from every log line [link]
cli: removes the need to set debug_enabled=true to collect debug data from the CLI. Now
the CLI behaves the same way as the API and accepts either an ACL token with operator:read, or
debug_enabled=true. [link]
envoy: fixes a bug where a large envoy config could cause the module command to deadlock when attempting to start envoy. [link]
namespaces: (Enterprise only) fixes a problem where the logs would contain many warnings about namespaces not being licensed.
"
87,"1.8.11 (June 03, 2021)
IMPROVEMENTS:

areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
cli: added a module flag to the module command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [link]
connect: update supported envoy versions to 1.14.7, 1.13.7, 1.12.7, 1.11.2 [link]
telemetry: Add new metrics for status of secondary datacenter replication. [link]

BUG FIXES:

agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [link]
api: include the default value of raft settings in the output of /v1/agent/self [link]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
local: agents will no longer persist the default user token along with a service or check. [link]
server: ensure that central service config flattening properly resets the state each time [link]
"
88,"1.10.0-beta3 (May 27, 2021)
BREAKING CHANGES:

licensing: (Enterprise Only) Consul Enterprise 1.10 has removed API driven licensing of servers in favor of license loading via configuration. The module and module methods on the module endpoint will now return 405s, the module and module CLI commands have been removed and the module and module methods in the API client have been altered to always return an error. [link]
licensing: (Enterprise Only) Consul Enterprise client agents now require a valid non-anonymous ACL token for retrieving their license from the servers. Additionally client agents rely on the value of the module and module configurations for determining the servers to query for the license. Therefore one must be set to use license auto-retrieval. [link]
licensing: (Enterprise Only) Consul Enterprise has removed support for temporary licensing. All server agents must have a valid license at startup and client agents must have a license at startup or be able to retrieve one from the servers. [link]

FEATURES:

ui: Add Unix Domain Socket support [link]
xds: emit a labeled gauge of connected xDS streams by version [link]

IMPROVEMENTS:

agent: Save exposed Envoy ports to the agent's state when module is true in proxy's configuration. [link]
api: Add module to the health check API resource. [link]
api: The module header is now always set when a body is present in a request. [link]
areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
command: Exclude exposed Envoy ports from traffic redirection when providing module and module is set. [link]
connect: Avoid adding original_dst listener filter when it won't be used. [link]
connect: Ensures passthrough tproxy cluster is created even when mesh config doesn't exist. [link]
connect: update supported envoy versions to 1.18.3, 1.17.3, 1.16.4, and 1.15.5 [link]
licensing: (Enterprise Only) Consul Enterprise has gained the ability to autoload a license via configuration. This can be specified with the module configuration, the module environment variable or the module environment variable [link]
licensing: (Enterprise Only) Consul Enterprise has gained the ability update its license via a configuration reload. The same environment variables and configurations will be used to determine the new license. [link]
ui: Add 'optional route segments' and move namespaces to use them [link]
ui: Improve loader centering with new side navigation [link]
ui: Only show a partial list of intention permissions, with the option to show all [link]
ui: Show a message to explain that health checks may be out of date if the serf health check is in a critical state [link]

BUG FIXES:

agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [link]
api: include the default value of raft settings in the output of /v1/agent/self [link]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
http: fix a bug that caused the module header to be missing on
request for service health [link]
local: agents will no longer persist the default user token along with a service or check. [link]
namespaces: (Enterprise only) fixes a problem where the logs would contain many warnings about namespaces not being licensed.
server: ensure that central service config flattening properly resets the state each time [link]
ui: Add conditionals to lock sessions tab [link]
ui: De-duplicate tags in rendered tag listings [link]
ui: Don't render a DOM element for empty namespace descriptions [link]
ui: Reflect the change of Session API response shape for Checks in post 1.7 Consul [link]
"
89,"1.8.11-beta2 (May 26, 2021)
BUG FIXES:

api: include the default value of raft settings in the output of /v1/agent/self [link]
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
"
90,"1.8.11-beta1 (May 18, 2021)
IMPROVEMENTS:

areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
cli: added a module flag to the module command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [link]
connect: update supported envoy versions to 1.14.7, 1.13.7, 1.12.7, 1.11.2 [link]
telemetry: Add new metrics for status of secondary datacenter replication. [link]

BUG FIXES:

agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [link]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
local: agents will no longer persist the default user token along with a service or check. [link]
server: ensure that central service config flattening properly resets the state each time [link]
"
91,"1.10.0-beta2 (May 05, 2021)
BREAKING CHANGES:

connect: Disallow wildcard as name for service-defaults. [link]

FEATURES:

cli: Add additional flags to the module command to allow excluding inbound and outbound ports,
outbound CIDRs, and additional user IDs from traffic redirection. [link]
cli: Automatically exclude ports from module, module, and module from module config
from inbound traffic redirection rules if module flag is provided to the module command. [link]
connect: add support for unix domain sockets addresses for service upstreams and downstreams [link]
sdk: Allow excluding inbound and outbound ports, outbound CIDRs, and additional user IDs from traffic redirection in the module package. [link]
xds: exclusively support the Incremental xDS protocol when using xDS v3 [link]

IMPROVEMENTS:

acl: Give more descriptive error if auth method not found. [link]
cli: snapshot inspect command can now inspect raw snapshots from a server's data
dir. [link]
connect: rename cluster config entry to mesh. [link]
connect: restrict transparent proxy mode to only match on the tagged virtual IP address. [link]
connect: update supported envoy versions to 1.18.2, 1.17.2, 1.16.3, 1.15.4 [link]
raft: allow reloading of raft trailing logs and snapshot timing to allow recovery from some link.
telemetry: add metrics and documentation for link. [link]
streaming: change module to default to true so that streaming is used by default when it is supported. [link]
telemetry: Add new metrics for status of secondary datacenter replication. [link]
ui: Added CRD popover 'informed action' for intentions managed by CRDs [link]
ui: Added humanized formatting to lock session durations [link]
ui: Adding a notice about how TransparentProxy mode affects the Upstreams list at the top of tab view [link]
ui: Updating the wording for the banner and the popover for a service with an upstream that is not explicitly defined. [link]
ui: updates the ui with the new consul brand assets [link]
xds: ensure that all envoyproxy/go-control-plane protobuf symbols are linked into the final binary [link]

BUG FIXES:

cli: snapshot inspect command would panic on invalid input. [link]
memberlist: fixes a couple bugs which allowed malformed input to cause a crash in a Consul
client or server. [link]
streaming: fixes a bug that would cause context cancellation errors when a cache entry expired while requests were active. [link]
telemetry: fixes a bug with Prometheus metrics where Gauges and Summaries were incorrectly
being expired. [link]
ui: Adding conditional to prevent Service Mesh from breaking when there are no Upstreams [link]
ui: Fix text searching through upstream instances. [link]
ui: Removes the extra rendering of namespace in service upstream list [link]
ui: Update conditional for topology empty state [link]
"
92,"1.10.0-beta1 (April 16, 2021)
SECURITY:

Add content-type headers to raw KV responses to prevent XSS attacks link [link]
audit-logging: Parse endpoint URL to prevent requests from bypassing the audit log link

FEATURES:

cli: Add new module command for applying traffic redirection rules when Transparent Proxy is enabled. [link]
cli: Add prefix option to kv import command [link]
cli: snapshot inspect command provides KV usage breakdown [link]
cli: snapshot inspect command supports JSON output [link]
connect: Add local_request_timeout_ms to allow configuring the Envoy request timeout on local_app [link]
connect: add toggle to globally disable wildcard outbound network access when transparent proxy is enabled [link]
sdk: Add new module package for applying traffic redirection rules with iptables. [link]
ui: Read-only ACL Auth Methods view [link]

IMPROVEMENTS:

acl: extend the auth-methods list endpoint to include MaxTokenTTL and TokenLocality fields. [link]
acl: use the presence of a management policy in the state store as a sign that we already migrated to v2 acls [link]
api: Enable setting query options on agent endpoints. [link]
api: module now handles the 429 status code returned by the v1/operator/autopilot/health endpoint and still returned the parsed reply which will indicate server healthiness [link]
cli: added a module flag to the module command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [link]
cli: the module flag will now resolve the module environment variable, as part of a full url. [link]
client: when a client agent is attempting to dereigster a service, anddoes not have access to the ACL token used to register a service, attempt to use the agent token instead of the default user token. If no agent token is set, fall back to the default user token. [link]
connect: Add support for transparently proxying traffic through Envoy. [experimental] [link]
connect: Allow per-upstream configuration to be set in service-defaults. [experimental] [link]
connect: Automatically rewrite the Host header for Terminating Gateway HTTP services [link]
connect: The builtin connect proxy no longer advertises support for h2 via ALPN. [link]. [link]
connect: Update the service mesh visualization to account for transparent proxies. [link]
connect: adds new flags module and module to module to support envoy_prometheus_bind_addr pointing to the merged metrics port when using Consul Connect on K8s. [link]
ui: Move to a sidebar based main navigation [link]
ui: Use older (~2016) native ES6 features to reduce transpilation and UI JS payload [link]
ui: add permanently visible indicator when ACLs are disabled [link]
ui: improve accessibility of modal dialogs [link]
ui: restrict the viewing/editing of certain UI elements based on the users ACL token [link]
ui: support stricter content security policies [link]
xds: add support for envoy 1.17.0 [link]
xds: default to speaking xDS v3, but allow for v2 to be spoken upon request [link]
xds: remove deprecated usages of xDS and drop support for envoy 1.13.x [link]

BUG FIXES:

api: ensure v1/health/ingress/:service endpoint works properly when streaming is enabled [link]
areas: Fixes a bug which would prevent newer servers in a network areas from connecting to servers running a version of Consul prior to 1.7.3.
audit-logging: (Enterprise only) Fixed an issue that resulted in usage of the agent master token or managed service provider tokens from being resolved properly. [link]
cache: fix a bug in the client agent cache where streaming could potentially leak resources. [link]. [link]
cache: fix a bug in the client agent cache where streaming would disconnect every
20 minutes and cause delivery delays. [link]. [link]
checks: add TLSServerName field to allow setting the TLS server name for HTTPS health checks. [link]
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [link]
config: Fixed a bug where module could not be changed by reloading the
config. [link]
config: correct config key from module to module [link]
http: fix a bug in Consul Enterprise that would cause the UI to believe namespaces were supported, resulting in warning logs and incorrect UI behaviour. [link]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [link]
streaming: lookup in health properly handle case-sensitivity and perform filtering based on tags and node-meta [link]
ui: Fix intention form cancel button [link]
ui: ensure proxy instance API requests perform blocking queries correctly [link]
"
93,"1.9.5 (April 15, 2021)
SECURITY:

Add content-type headers to raw KV responses to prevent XSS attacks link [link]
audit-logging: Parse endpoint URL to prevent requests from bypassing the audit log link

IMPROVEMENTS:

api: module now handles the 429 status code returned by the v1/operator/autopilot/health endpoint and still returned the parsed reply which will indicate server healthiness [link]
client: when a client agent is attempting to dereigster a service, anddoes not have access to the ACL token used to register a service, attempt to use the agent token instead of the default user token. If no agent token is set, fall back to the default user token. [link]
connect: Automatically rewrite the Host header for Terminating Gateway HTTP services [link]
ui: support stricter content security policies [link]

BUG FIXES:

api: ensure v1/health/ingress/:service endpoint works properly when streaming is enabled [link]
areas: Fixes a bug which would prevent newer servers in a network areas from connecting to servers running a version of Consul prior to 1.7.3.
audit-logging: (Enterprise only) Fixed an issue that resulted in usage of the agent master token or managed service provider tokens from being resolved properly. [link]
cache: fix a bug in the client agent cache where streaming could potentially leak resources. [link]. [link]
cache: fix a bug in the client agent cache where streaming would disconnect every
20 minutes and cause delivery delays. [link]. [link]
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [link]
config: correct config key from module to module [link]
http: fix a bug in Consul Enterprise that would cause the UI to believe namespaces were supported, resulting in warning logs and incorrect UI behaviour. [link]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [link]
ui: Fix intention form cancel button [link]
"
94,"1.8.10 (April 15, 2021)
SECURITY:

Add content-type headers to raw KV responses to prevent XSS attacks link [link]
audit-logging: Parse endpoint URL to prevent requests from bypassing the audit log link

BUG FIXES:

areas: Fixes a bug which would prevent newer servers in a network areas from connecting to servers running a version of Consul prior to 1.7.3.
audit-logging: (Enterprise only) Fixed an issue that resulted in usage of the agent master token or managed service provider tokens from being resolved properly. [link]
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [link]
config: correct config key from module to module [link]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [link]
"
95,"1.7.14 (April 15, 2021)
SECURITY:

Add content-type headers to raw KV responses to prevent XSS attacks link [link]

BUG FIXES:

command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [link]
config: correct config key from module to module [link]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [link]
"
96,"1.10.0-alpha (March 18, 2021)
FEATURES:

cli: Add prefix option to kv import command [link]
cli: snapshot inspect command provides KV usage breakdown [link]
cli: snapshot inspect command supports JSON output [link]
connect: Add local_request_timeout_ms to allow configuring the Envoy request timeout on local_app [link]

IMPROVEMENTS:

acl: extend the auth-methods list endpoint to include MaxTokenTTL and TokenLocality fields. [link]
acl: use the presence of a management policy in the state store as a sign that we already migrated to v2 acls [link]
api: module now handles the 429 status code returned by the v1/operator/autopilot/health endpoint and still returned the parsed reply which will indicate server healthiness [link]
cli: added a module flag to the module command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [link]
connect: Add support for transparently proxying traffic through Envoy. [experimental] [link]
connect: Allow per-upstream configuration to be set in service-defaults. [experimental] [link]
connect: adds new flags module and module to module to support envoy_prometheus_bind_addr pointing to the merged metrics port when using Consul Connect on K8s. [link]
ui: Move to a sidebar based main navigation [link]
ui: Use older (~2016) native ES6 features to reduce transpilation and UI JS payload [link]
ui: add permanently visible indicator when ACLs are disabled [link]
ui: improve accessibility of modal dialogs [link]
ui: restrict the viewing/editing of certain UI elements based on the users ACL token [link]
ui: support stricter content security policies [link]
xds: add support for envoy 1.17.0 [link]
xds: default to speaking xDS v3, but allow for v2 to be spoken upon request [link]
xds: remove deprecated usages of xDS and drop support for envoy 1.13.x [link]

BUG FIXES:

checks: add TLSServerName field to allow setting the TLS server name for HTTPS health checks. [link]
config: Fixed a bug where module could not be changed by reloading the
config. [link]
config: correct config key from module to module [link]
streaming: lookup in health properly handle case-sensitivity and perform filtering based on tags and node-meta [link]
"
97,"1.9.4 (March 04, 2021)
IMPROVEMENTS:

connect: if the token given to the vault provider returns no data avoid a panic [link]
connect: update supported envoy point releases to 1.16.2, 1.15.3, 1.14.6, 1.13.7 [link]
xds: only try to create an ipv6 expose checks listener if ipv6 is supported by the kernel [link]

BUG FIXES:

api: Remove trailing periods from the gateway internal HTTP API endpoint [link]
cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [link]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [link]
proxycfg: avoid potential deadlock in delivering proxy snapshot to watchers. [link]
replication: Correctly log all replication warnings that should not be suppressed [link]
streaming: fixes a bug caused by caching an incorrect snapshot, that would cause clients
to error until the cache expired. [link]
ui: Exclude proxies when showing the total number of instances on a node. [link]
ui: Fixed a bug in older browsers relating to String.replaceAll and fieldset w/flexbox usage [link]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [link]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [link]
"
98,"1.8.9 (March 04, 2021)
IMPROVEMENTS:

cli: Add new module and module to module to support creating a CA for Consul Connect. [link]
connect: if the token given to the vault provider returns no data avoid a panic [link]
connect: update supported envoy point releases to 1.14.6, 1.13.7, 1.12.7, 1.11.2 [link]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
server: use the presense of stored federation state data as a sign that we already activated the federation state feature flag [link]
xds: only try to create an ipv6 expose checks listener if ipv6 is supported by the kernel [link]

BUG FIXES:

api: Remove trailing periods from the gateway internal HTTP API endpoint [link]
cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [link]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [link]
proxycfg: avoid potential deadlock in delivering proxy snapshot to watchers. [link]
server: When wan federating via mesh gateways after initial federation default to using the local mesh gateways unless the heuristic indicates a bypass is required. [link]
server: When wan federating via mesh gateways only do heuristic primary DC bypass on the leader. [link]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [link]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [link]
"
99,"1.7.13 (March 04, 2021)
IMPROVEMENTS:

connect: update supported envoy point releases to 1.13.7, 1.12.7, 1.11.2, 1.10.0 [link]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
xds: only try to create an ipv6 expose checks listener if ipv6 is supported by the kernel [link]

BUG FIXES:

cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [link]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [link]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [link]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [link]
"
100,"1.8.9-beta1 (February 11, 2021)
IMPROVEMENTS:

cli: Add new module and module to module to support creating a CA for Consul Connect. [link]
connect: update supported envoy point releases to 1.14.6, 1.13.7, 1.12.7, 1.11.2 [link]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
server: use the presense of stored federation state data as a sign that we already activated the federation state feature flag [link]

BUG FIXES:

cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [link]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [link]
proxycfg: avoid potential deadlock in delivering proxy snapshot to watchers. [link]
server: When wan federating via mesh gateways after initial federation default to using the local mesh gateways unless the heuristic indicates a bypass is required. [link]
server: When wan federating via mesh gateways only do heuristic primary DC bypass on the leader. [link]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [link]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [link]
"
101,"1.9.3 (February 01, 2021)
FEATURES:

ui: Add additional search/filter status pills for viewing and removing current
filters in listing views [link]

IMPROVEMENTS:

cli: Add new module and module to module to support creating a CA for Consul Connect. [link]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
server: (Enterprise Only) Validate source namespaces in service-intentions config entries. [link]
server: use the presense of stored federation state data as a sign that we already activated the federation state feature flag [link]

BUG FIXES:

autopilot: Fixed a bug that would cause snapshot restoration to stop autopilot on the leader. [link]
server: When wan federating via mesh gateways after initial federation default to using the local mesh gateways unless the heuristic indicates a bypass is required. [link]
server: When wan federating via mesh gateways only do heuristic primary DC bypass on the leader. [link]
ui: Fixed a bug that would cause missing or duplicate service instance healthcheck listings. [link]
"
102,"1.8.8 (January 22, 2021)
BUG FIXES:

connect: Fixed a bug in the AWS PCA Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [link]
connect: Fixed a bug in the Vault Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [link]
connect: Fixed an issue that would prevent updating the Connect CA configuration if the CA provider didn't complete initialization previously. [link]
leader: Fixed a bug that could cause Connect CA initialization failures from allowing leader establishment to complete resulting in potentially infinite leader elections. [link]
rpc: Prevent misleading RPC error claiming the lack of a leader when Raft is ok but there are issues with client agents gossiping with the leader. [link]
ui: ensure namespace is used for node API requests [link]
"
103,"1.7.12 (January 22, 2021)
BUG FIXES:

rpc: Prevent misleading RPC error claiming the lack of a leader when Raft is ok but there are issues with client agents gossiping with the leader. [link]
ui: ensure namespace is used for node API requests [link]
"
104,"1.9.2 (January 20, 2021)
FEATURES:

agent: add config flag module to control the maximum size of the http header per client request. [link]
cli: The module command now has a new module subcommand to allow the listing of configured intentions. It also supports the module option. [link]

IMPROVEMENTS:

server: deletions of intentions by name using the intention API is now idempotent [link]
streaming: display a warning on agent(s) when incompatible streaming parameters are used [link]
ui: Various accessibility scan test improvements [link]

DEPRECATIONS:

api: the module, module, and module query parameters for various health and catalog
endpoints are now deprecated. The module query parameter should be used as a replacement
for all of the deprecated fields. The deprecated query parameters will be removed in a future
version of Consul. [link]

BUG FIXES:

client: Help added in Prometheus in relases 1.9.0 does not generate warnings anymore in logs [link]
client: properly set GRPC over RPC magic numbers when encryption was not set or partially set in the cluster with streaming enabled [link]
connect: Fixed a bug in the AWS PCA Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [link]
connect: Fixed a bug in the Vault Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [link]
connect: Fixed an issue that would prevent updating the Connect CA configuration if the CA provider didn't complete initialization previously. [link]
leader: Fixed a bug that could cause Connect CA initialization failures from allowing leader establishment to complete resulting in potentially infinite leader elections. [link]
rpc: Prevent misleading RPC error claiming the lack of a leader when Raft is ok but there are issues with client agents gossiping with the leader. [link]
server: Fixes a server panic introduced in 1.9.0 where Connect service mesh is
being used. Node de-registration could panic if it hosted services with
multiple upstreams. [link]
state: fix computation of usage metrics to account for various places that can modify multiple services in a single transaction. [link]
ui: Display LockDelay in nanoseconds as a temporary fix to the formatting [link]
ui: Fix an issue where registering an ingress-gateway with no central config
would result in a JS error due to the API reponse returning module [link]
ui: Fixes an issue where clicking backwards and forwards between a service instance can result in a 404 error [link]
ui: Fixes an issue where intention description or metadata could be overwritten if saved from the topology view. [link]
ui: Fixes an issue with setting -ui-content-path flag/config [link]
ui: ensure namespace is used for node API requests [link]
ui: request intention listing with ns=* parameter to retrieve all intentions
across namespaces [link]
"
105,"1.9.1 (December 11, 2020)
FEATURES:

ui: add copyable IDs to the Role and Policy views [link]

IMPROVEMENTS:

cli: (Enterprise only) A new module flag can now be used to enable running a server as a read only replica. Previously this was enabled with the now deprecated module flag. [link]
config: (Enterprise only) A new module configuration setting can now be used to enable running a server as a read only replica. Previously this was enabled with the now deprecated module setting. [link]

DEPRECATIONS:

cli: (Enterprise only) The module flag is deprecated in favor of the new module flag. The module flag is still present along side the new flag but it will be removed in a future release. [link]
config: (Enterprise only) The module configuration setting is deprecated in favor of the new module setting. The module configuration setting is still present but will be removed in a future release. [link]
gossip: (Enterprise only) Read replicas now advertise themselves by setting the module tag. The old module tag is still present but is deprecated and will be removed in a future release. [link]
server: (Enterprise only) Addition of the module tag to the service registration made for read replicas is deprecated in favor of the new tag name of module. Both are present in the registration but the module tag will be completely removed in a future release. [link]

BUG FIXES:

agent: prevent duplicate services and check registrations from being synced to servers. [link]
connect: fixes a case when updating the CA config in a secondary datacenter to correctly trigger the creation of a new intermediate certificate [link]
connect: only unset the active root in a secondary datacenter when a new one is replacing it [link]
namespaces: (Enterprise only) Prevent stalling of replication in secondary datacenters due to conflicts between the namespace replicator and other replicators. [link]
streaming: ensure the order of results provided by /health/service/:serviceName is consistent with and without streaming enabled [link]
"
106,"1.8.7 (December 10, 2020)
BUG FIXES:

acl: global tokens created by auth methods now correctly replicate to secondary datacenters [link]
connect: fixes a case when updating the CA config in a secondary datacenter to correctly trigger the creation of a new intermediate certificate [link]
connect: only unset the active root in a secondary datacenter when a new one is replacing it [link]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [link]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
namespaces: (Enterprise only) Prevent stalling of replication in secondary datacenters due to conflicts between the namespace replicator and other replicators. [link]
"
107,"1.7.11 (December 10, 2020)
BUG FIXES:

license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [link]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
namespaces: (Enterprise only) Prevent stalling of replication in secondary datacenters due to conflicts between the namespace replicator and other replicators. [link]
"
108,"1.8.7-beta1 (December 03, 2020)
BUG FIXES:

connect: fixes a case when updating the CA config in a secondary datacenter to correctly trigger the creation of a new intermediate certificate [link]
connect: only unset the active root in a secondary datacenter when a new one is replacing it [link]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [link]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
"
109,"1.9.0 (November 24, 2020)
BREAKING CHANGES:

agent: The module option now defaults to true. [link]
connect: Switch the default gateway port from 443 to 8443 to avoid assumption of Envoy running as root. [link]
connect: Update Envoy metrics names and labels for proxy listeners so that attributes like datacenter and namespace can be extracted. [link]
connect: intention destinations can no longer be reassigned [link]
raft: Raft protocol v2 is no longer supported. If currently using protocol v2 then an intermediate upgrade to a version supporting both v2 and v3 protocols will be necessary (1.0.0 - 1.8.x). Note that the Raft protocol configured with the module setting and the Consul RPC protocol configured with the module setting and output by the module command are distinct and supported Consul RPC protocol versions are not altered. [link]
sentinel: (Consul Enterprise only) update to v0.16.0, which replaces module and module with module and module
server: (Enterprise only) Pre-existing intentions defined with
non-existent destination namespaces were non-functional and are erased during
the upgrade process. This should not matter as these intentions had nothing to
enforce. [link]
server: (OSS only) Pre-existing intentions defined with either a source or
destination namespace value that is not ""default"" are rewritten or deleted
during the upgrade process. Wildcards first attempt to downgrade to ""default""
unless an intention already exists, otherwise these non-functional intentions
are deleted. [link]
xds: Drop support for Envoy versions 1.12.0, 1.12.1, 1.12.2, and 1.13.0, due to a lack of support for url_path in RBAC. [link]

SECURITY:

Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [link] [link]
Increase the permissions to read from the module endpoint to module. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with module privileges. link [link]

FEATURES:

agent: Add a new RPC endpoint for streaming cluster state change events to clients.
agent: Allow client agents to be configured with an advertised reconnect timeout to control how long until the nodes are reaped by others in the cluster. [link]
agent: moved ui config options to a new module stanza in agent configuration and added new options to display service metrics in the UI. [link]
agent: return the default ACL policy to callers as a header [link]
autopilot: A new module HTTP API was created to give greater visibility into what autopilot is doing and how it has classified all the servers it is tracking. [link]
autopilot: Added a new module command to retrieve and view the Autopilot state from consul. [link]
cli: update module command to provide more detailed snapshot data [link]
connect: support defining intentions using layer 7 criteria [link]
telemetry: add initialization and definition for non-expiring key metrics in Prometheus [link]
telemetry: track node and service counts and emit them as metrics [link]
ui: If Prometheus is being used for monitoring the sidecars, the topology view can be configured to display overview metrics for the services. [link]
ui: Services using Connect with Envoy sidecars have a topology tab in the UI showing their upstream and downstream services. [link]
xds: use envoy's rbac filter to handle intentions entirely within envoy [link]

IMPROVEMENTS:

agent: Return HTTP 429 when connections per clients limit (module) has been reached. [link]
agent: add path_allowlist config option to restrict metrics proxy queries [link]
agent: allow the /v1/connect/intentions/match endpoint to use the agent cache [link]
agent: protect the metrics proxy behind ACLs [link]
api: The module endpoint now accepts a module query parameter and will return a PEM encoded certificate chain of all the certificates that would normally be in the JSON version of the response. [link]
api: support GetMeta() and GetNamespace() on all config entry kinds [link]
autopilot: (Enterprise Only) Autopilot now supports using both Redundancy Zones and Automated Upgrades together. [link]
checks: add health status to the failure message when gRPC healthchecks fail. [link]
chore: Update to Go 1.15 with mitigation for link [link]
command: remove conditional envoy bootstrap generation for versions <=1.10.0 since those are not supported [link]
connect: The Vault provider will now automatically renew the lease of the token used, if supported. [link]
connect: add support for specifying load balancing policy in service-resolver [link]
connect: intentions are now managed as a new config entry kind ""service-intentions"" [link]
raft: Update raft to v1.2.0 to prevent non-voters from becoming eligible for leader elections and adding peer id as metric label to reduce cardinality in metric names [link]
server: (Consul Enterprise only) ensure that we also shutdown network segment serf instances on server shutdown [link]
server: break up Intention.Apply monolithic method [link]
server: create new memdb table for storing system metadata [link]
server: make sure that the various replication loggers use consistent logging [link]
server: remove config entry CAS in legacy intention API bridge code [link]
snapshot agent: Deregister critical snapshotting TTL check if leadership is transferred.
telemetry: All metrics should be present and available to prometheus scrapers when Consul starts. If any non-deprecated metrics are missing please submit an issue with its name. [link]
telemetry: add config flag module to disable deprecated metrics in 1.9 [link]
telemetry: add counter module with labels for each HTTP path and method. This is intended to replace module [link]
ui: Add the Upstreams and Exposed Paths tabs for services in mesh [link]
ui: Moves the Proxy health checks to be displayed with the Service health check under the Health Checks tab [link]
ui: Upstream and downstream services in the topology tab will show a visual indication if a deny intention or intention with L7 policies is configured. [link]
ui: add dashboard_url_template config option for external dashboard links [link]

DEPRECATIONS:

Go 1.15 has dropped support for 32-bit binaries for Darwin, so darwin_386 builds will not be available for any 1.9.x+ releases. [link]
agent: module, module and module are now deprecated for use in agent configuration files. Use module instead. The command arguments module, module, and module remain supported. [link]
telemetry: The measurements in all of the module prefixed metrics have been migrated to module. module prefixed metrics will be removed in a future version of Consul. [link]
telemetry: the disable_compat_1.9 config will cover more metrics deprecations in future 1.9 point releases. These metrics will be emitted twice for backwards compatibility - if the flag is true, only the new metric name will be written. [link]

BUG FIXES:

agent: make the json/hcl decoding of ConnectProxyConfig fully work with CamelCase and snake_case [link]
agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [link]
api: Fixed a bug where the Check.GRPCUseTLS field could not be set using snake case. [link]
autopilot: (Enterprise Only) Previously servers in other zones would not be promoted when all servers in a second zone had failed. Now the actual behavior matches the docs and autopilot will promote a healthy non-voter from any zone to replace failure of an entire zone. [link]
autopilot: Prevent panic when requesting the autopilot health immediately after a leader is elected. [link]
command: when generating envoy bootstrap configs use the datacenter returned from the agent services endpoint [link]
connect: Fixed an issue where the Vault intermediate was not renewed in the primary datacenter. [link]
connect: fix Vault provider not respecting IntermediateCertTTL [link]
connect: fix connect sidecars registered via the API not being automatically deregistered with their parent service after an agent restart by persisting the LocallyRegisteredAsSidecar property. [link]
connect: use stronger validation that ingress gateways have compatible protocols defined for their upstreams [link]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [link]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
raft: (Enterprise only) properly update consul server meta non_voter for non-voting Enterprise Consul servers [link]
server: skip deleted and deleting namespaces when migrating intentions to config entries [link]
telemetry: fixed a bug that caused logs to be flooded with module [link]
ui: show correct datacenter for gateways [link]
"
110,"1.8.6 (November 19, 2020)
SECURITY:

Increase the permissions to read from the module endpoint to module. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with module privileges. link [link]
"
111,"1.7.10 (November 19, 2020)
SECURITY:

Increase the permissions to read from the module endpoint to module. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with module privileges. link [link]
"
112,"1.6.10 (November 19, 2020)
SECURITY:

Increase the permissions to read from the module endpoint to module. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with module privileges. link [link]
"
113,"1.9.0-rc1 (November 17, 2020)
BREAKING CHANGES:

connect: Update Envoy metrics names and labels for proxy listeners so that attributes like datacenter and namespace can be extracted. [link]
server: (Enterprise only) Pre-existing intentions defined with
non-existent destination namespaces were non-functional and are erased during
the upgrade process. This should not matter as these intentions had nothing to
enforce. [link]
server: (OSS only) Pre-existing intentions defined with either a source or
destination namespace value that is not ""default"" are rewritten or deleted
during the upgrade process. Wildcards first attempt to downgrade to ""default""
unless an intention already exists, otherwise these non-functional intentions
are deleted. [link]

FEATURES:

agent: return the default ACL policy to callers as a header [link]
autopilot: Added a new module command to retrieve and view the Autopilot state from consul. [link]

IMPROVEMENTS:

agent: All metrics should be present and available to prometheus scrapers when Consul starts. If any non-deprecated metrics are missing please submit an issue with its name. [link]
server: break up Intention.Apply monolithic method [link]
server: remove config entry CAS in legacy intention API bridge code [link]
ui: Add the Upstreams and Exposed Paths tabs for services in mesh [link]
ui: Moves the Proxy health checks to be displayed with the Service health check under the Health Checks tab [link]

DEPRECATIONS:

telemetry: the disable_compat_1.9 config will cover more metrics deprecations in future 1.9 point releases. These metrics will be emitted twice for backwards compatibility - if the flag is true, only the new metric name will be written. [link]

BUG FIXES:

autopilot: Prevent panic when requesting the autopilot health immediately after a leader is elected. [link]
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [link]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
server: skip deleted and deleting namespaces when migrating intentions to config entries [link]
"
114,"1.9.0-beta3 (November 10, 2020)
BREAKING CHANGES:

connect: Switch the default gateway port from 443 to 8443 to avoid assumption of Envoy running as root. [link]
raft: Raft protocol v2 is no longer supported. If currently using protocol v2 then an intermediate upgrade to a version supporting both v2 and v3 protocols will be necessary (1.0.0 - 1.8.x). Note that the Raft protocol configured with the module setting and the Consul RPC protocol configured with the module setting and output by the module command are distinct and supported Consul RPC protocol versions are not altered. [link]

FEATURES:

autopilot: A new module HTTP API was created to give greater visibility into what autopilot is doing and how it has classified all the servers it is tracking. [link]

IMPROVEMENTS:

autopilot: (Enterprise Only) Autopilot now supports using both Redundancy Zones and Automated Upgrades together. [link]
chore: update to Go 1.14.11 with mitigation for link [link]

BUG FIXES:

autopilot: (Enterprise Only) Previously servers in other zones would not be promoted when all servers in a second zone had failed. Now the actual behavior matches the docs and autopilot will promote a healthy non-voter from any zone to replace failure of an entire zone. [link]
"
115,"1.9.0-beta2 (November 07, 2020)
BREAKING CHANGES:

sentinel: (Consul Enterprise only) update to v0.16.0, which replaces module and module with module and module

SECURITY:

Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [link] [link]

FEATURES:

agent: Add a new RPC endpoint for streaming cluster state change events to clients.
telemetry: add initialization and definition for non-expiring key metrics in Prometheus [link]

IMPROVEMENTS:

agent: add path_allowlist config option to restrict metrics proxy queries [link]
agent: protect the metrics proxy behind ACLs [link]
ui: add dashboard_url_template config option for external dashboard links [link]

BUG FIXES:

api: Fixed a bug where the Check.GRPCUseTLS field could not be set using snake case. [link]
connect: fix connect sidecars registered via the API not being automatically deregistered with their parent service after an agent restart by persisting the LocallyRegisteredAsSidecar property. [link]
ui: hide metrics for ingress gateways until full support can be implemented [link]
ui: only show topology tab for services that exist [link]
"
116,"1.7.9 (October 26, 2020)
SECURITY:

Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [link] [link]

IMPROVEMENTS:

connect: update supported envoy releases to 1.13.6, 1.12.7, 1.11.2, 1.10.0 for 1.7.x [link]

BUG FIXES:

agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [link]
"
117,"1.8.5 (October 23, 2020)
SECURITY:

Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [link] [link]

IMPROVEMENTS:

api: The module endpoint now accepts a module query parameter and will return a PEM encoded certificate chain of
     all the certificates that would normally be in the JSON version of the response. [link]
connect: The Vault provider will now automatically renew the lease of the token used, if supported. [link]
connect: update supported envoy releases to 1.14.5, 1.13.6, 1.12.7, 1.11.2 for 1.8.x [link]

BUG FIXES:

agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [link]
connect: Fixed an issue where the Vault intermediate was not renewed in the primary datacenter. [link]
connect: fix Vault provider not respecting IntermediateCertTTL [link]
connect: fix connect sidecars registered via the API not being automatically deregistered with their parent service after an agent restart by persisting the LocallyRegisteredAsSidecar property. [link]
fixed a bug that caused logs to be flooded with module [link]
ui: show correct datacenter for gateways [link]
"
118,"1.9.0-beta1 (October 12, 2020)
BREAKING CHANGES:

agent: The module option now defaults to true. [link]
connect: intention destinations can no longer be renamed [link]
xds: Drop support for Envoy versions 1.12.0, 1.12.1, 1.12.2, and 1.13.0, due to a lack of support for url_path in RBAC. [link]

FEATURES:

agent: Allow client agents to be configured with an advertised reconnect timeout to control how long until the nodes are reaped by others in the cluster. [link]
agent: moved ui config options to a new module stanza in agent configuration and added new options to display service metrics in the UI. [link]
cli: update module command to provide more detailed snapshot data [link]
connect: intentions are now managed as a new config entry kind ""service-intentions"" [link]
connect: support defining intentions using layer 7 criteria [link]
server: create new memdb table for storing system metadata [link]
telemetry: track node and service counts and emit them as metrics [link]
ui: If Prometheus is being used for monitoring the sidecars, the topology view can be configured to display overview metrics for the services. [link]
ui: Services using Connect with Envoy sidecars have a topology tab in the UI showing their upstream and downstream services. [link]
xds: use envoy's rbac filter to handle intentions entirely within envoy [link]

IMPROVEMENTS:

agent: Return HTTP 429 when connections per clients limit (module) has been reached link. [link]
agent: add config flag module to disable deprecated metrics in 1.9 [link]
agent: add counter module with labels for each HTTP path and method. This is intended to replace module [link]
agent: allow the /v1/connect/intentions/match endpoint to use the agent cache [link]
api: The module endpoint now accepts a module query parameter and will return a PEM encoded certificate chain of
     all the certificates that would normally be in the JSON version of the response. [link]
api: support GetMeta() and GetNamespace() on all config entry kinds [link]
checks: add health status to the failure message when gRPC healthchecks fail. [link]
command: remove conditional envoy bootstrap generation for versions <=1.10.0 since those are not supported [link]
connect: The Vault provider will now automatically renew the lease of the token used, if supported. [link]
connect: add support for specifying load balancing policy in service-resolver [link]
deps: Update raft to v1.2.0 to prevent non-voters from becoming eligible for leader elections and adding peer id as metric label to reduce cardinality in metric names [link]
server: (Consul Enterprise only) ensure that we also shutdown network segment serf instances on server shutdown [link]
server: make sure that the various replication loggers use consistent logging [link]
snapshot agent: Deregister critical snapshotting TTL check if leadership is transferred.
ui: Upstream and downstream services in the topology tab will show a visual indication if a deny intention or intention with L7 policies is configured. [link]

DEPRECATIONS:

agent: The measurements in all of the module prefixed metrics have been migrated to module. module prefixed metrics will be removed in a future version of Consul. [link]
agent: module, module and module are now deprecated for use in agent configuration files. Use module instead. The command arguments module, module, and module remain supported. [link]

BUG FIXES:

agent: make the json/hcl decoding of ConnectProxyConfig fully work with CamelCase and snake_case [link]
agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [link]
connect: Fixed an issue where the Vault intermediate was not renewed in the primary datacenter. [link]
connect: fix Vault provider not respecting IntermediateCertTTL [link]
connect: use stronger validation that ingress gateways have compatible protocols defined for their upstreams [link]
fixed a bug that caused logs to be flooded with module [link]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
raft: (Enterprise only) properly update consul server meta non_voter for non-voting Enterprise Consul servers [link]
ui: show correct datacenter for gateways [link]
"
119,"1.8.4 (September 11, 2020)
FEATURES:

agent: expose the list of supported envoy versions on /v1/agent/self [link]
cache: Config parameters for cache throttling are now reloaded automatically on agent reload. Restarting the agent is not needed anymore. [link]
connect: all config entries pick up a meta field [link]

IMPROVEMENTS:

api: Added module method to the module type to determine what ACL mode the agent is operating in. [link]
api: Added module method to the module type to easily determine whether the agent is a server. [link]
api: Added constants for common tag keys and values in the module field of the module struct. [link]
api: Allow for the client to use TLS over a Unix domain socket. [link]
api: module also lists primary keys. [link]
connect: Add support for http2 and grpc to ingress gateways [link]
serf: update to module which supports primary keys in the ListKeys operation. [link]

BUGFIXES:

[backport/1.8.x] connect: use stronger validation that ingress gateways have compatible protocols defined for their upstreams [link]
agent: ensure that we normalize bootstrapped config entries [link]
api: Fixed a panic caused by an api request with Connect=null [link]
connect: module command now respects the module flag [link]
connect: fix bug in preventing some namespaced config entry modifications [link]
connect: fix renewing secondary intermediate certificates [link]
ui: fixed a bug related to in-folder KV creation link
"
120,"1.7.8 (September 11, 2020)
FEATURES:

agent: expose the list of supported envoy versions on /v1/agent/self [link]

BUG FIXES:

connect: fix bug in preventing some namespaced config entry modifications [link]
api: fixed a panic caused by an api request with Connect=null [link]
"
121,"1.6.9 (September 11, 2020)
BUG FIXES:

api: fixed a panic caused by an api request with Connect=null [link]
"
122,"1.8.3 (August 12, 2020)
BUGFIXES:

[backport/1.8.x] catalog: fixed a bug where nodes, services, and checks would not be restored with the correct Create/ModifyIndex when restoring from a snapshot link
[backport/1.8.x] vendor: update github.com/armon/go-metrics to v0.3.4 link
connect: (Consul Enterprise only) Fixed a regression that prevented mesh gateways from routing to services in their local datacenter that reside outside of the default namespace.
"
123,"1.7.7 (August 12, 2020)
BUG FIXES:
* [backport/1.7.x] catalog: fixed a bug where nodes, services, and checks would not be restored with the correct Create/ModifyIndex when restoring from a snapshot [link]
* [backport/1.7.x] vendor: update github.com/armon/go-metrics to v0.3.4 [link]
* [backport/1.7.x] xds: revert setting set_node_on_first_message_only to true when generating envoy bootstrap config [link]"
124,"1.6.8 (August 12, 2020)
BUG FIXES:

vendor: update github.com/armon/go-metrics to v0.3.4 [link]
"
125,"1.8.2 (August 07, 2020)
BUGFIXES:

auto_config: Fixed an issue where auto-config could be enabled in secondary DCs without enabling token replication when ACLs were enabled. [link]
xds: revert setting set_node_on_first_message_only to true when generating envoy bootstrap config [link]
"
126,"1.7.6 (August 07, 2020)
BUG FIXES:

[backport/1.7.x] xds: revert setting set_node_on_first_message_only to true when generating envoy bootstrap config [link]
"
127,"1.8.1 (July 30, 2020)
FEATURES: 

acl: Added ACL Node Identities for easier creation of Consul Agent tokens. [link]
agent: Added Consul client agent automatic configuration utilizing JWTs for authorizing the request to generate ACL tokens, TLS certificates and retrieval of the gossip encryption key. [link], [link], [link], [link], [link], [link], [link], [link], [link], [link], [link], [link], [link], [link]

IMPROVEMENTS:

acl: allow auth methods created in the primary datacenter to optionally create global tokens [link]
agent: Allow to restrict servers that can join a given Serf Consul cluster. [link]
agent: new configuration options allow ratelimiting of the agent-cache: module and module. [link]
cli: Output message on success when writing/deleting config entries. [link]
connect: Append port number to expected ingress hosts [link]
dns: Improve RCODE of response when query targets a non-existent datacenter. [link],[link]
version: The module CLI subcommand was altered to always show the git revision the binary was built from on the second line of output. Additionally the command gained a module flag with the option now of outputting the version information in JSON form. NOTE This change has the potential to break any parsing done by users of the module commands output. In many cases nothing will need to be done but it is possible depending on how the output is parsed. [link]

BUGFIXES:

agent: Fixed a bug where Consul could crash when module was set to true but no client certificate was used. [link]
agent: Fixed an issue with lock contention during RPCs when under load while using the Prometheus metrics sink. [link]
auto_encrypt: Fixed an issue where auto encrypt certificate signing wasn't using the connect signing rate limiter. [link]
auto_encrypt: Fixed several issues around retrieving the first TLS certificate where it would have the wrong CN and SANs. This was being masked by a second bug (also fixed) causing that certificate to immediately be discarded with a second certificate request being made afterwards. [link]
auto_encrypt: Fixed an issue that caused auto encrypt certificates to not be updated properly if the agents token was changed and the old token was deleted. [link]
connect: fix crash that would result if a mesh or terminating gateway's upstream has a hostname as an address and no healthy service instances available [link]
connect: Fixed issue where specifying a prometheus bind address would cause ingress gateways to fail to start up link
gossip: Avoid issue where two unique leave events for the same node could lead to infinite rebroadcast storms [link]
snapshot: (Consul Enterprise only) Fixed a regression when using Azure blob storage.
xds: version sniff envoy and switch regular expressions from 'regex' to 'safe_regex' on newer envoy versions [link]
"
128,"1.7.5 (July 30, 2020)
BUG FIXES:

agent: Fixed an issue with lock contention during RPCs when under load while using the Prometheus metrics sink. [link]
gossip: Avoid issue where two unique leave events for the same node could lead to infinite rebroadcast storms [link]
snapshot: (Consul Enterprise only) Fixed a regression when using Azure blob storage.
Return a service splitter's weight or a zero [link]
"
129,"1.6.7 (July 30, 2020)
BUG FIXES:

agent: Fixed an issue with lock contention during RPCs when under load while using the Prometheus metrics sink. [link]
gossip: Avoid issue where two unique leave events for the same node could lead to infinite rebroadcast storms [link]
"
130,"1.8.0 (June 18, 2020)
BREAKING CHANGES:
* acl: Remove deprecated module option [link]
FEATURES:

Terminating Gateway: Envoy can now be run as a gateway to enable services in a Consul service mesh to connect to external services through their local proxy. Terminating gateways unlock several of the benefits of a service mesh in the cases where a sidecar proxy cannot be deployed alongside services such as legacy applications or managed cloud databases.
Ingress Gateway: Envoy can now be run as a gateway to ingress traffic into the Consul service mesh, enabling a more incremental transition for applications.
WAN Federation over Mesh Gateways: Allows Consul datacenters to federate by forwarding WAN gossip and RPC traffic through Mesh Gateways rather than requiring the servers to be exposed to the WAN directly.
JSON Web Token (JWT) Auth Method: Allows exchanging a signed JWT from a trusted external identity provider for a Consul ACL token.
Single Sign-On (SSO) [Enterprise]: Lets an operator configure Consul to use an external OpenID Connect (OIDC) provider to automatically handle the lifecycle of creating, distributing and managing ACL tokens for performing CLI operations or accessing the UI. 

Audit Logging [Enterprise]: Adds instrumentation to record a trail of events (both attempted and authorized) by users of Consul’s HTTP API for purposes of regulatory compliance.


acl: add DisplayName field to auth methods [link]

acl: add MaxTokenTTL field to auth methods [link]
agent/xds: add support for configuring passive health checks [link]
cli: Add -config flag to ""acl authmethod update/create"" [link]
ui: Help menu to provide further documentation/learn links [link]
ui: (Consul Enterprise only) SSO support [link] [link] [link]
ui: Support for termininating and ingress gateways [link] [link]

IMPROVEMENTS:

acl: change authmethod.Validator to take a logger [link]
agent: show warning when enable_script_checks is enabled without safety net [link]
api: Added filtering support to the v1/connect/intentions endpoint. [link]
auto_encrypt: add validations for auto_encrypt.{tls,allow_tls} [link]
build: switched to compile with Go 1.14.1 [link]
config: validate system limits against limits.http_max_conns_per_client [link]
connect: support envoy 1.12.3, 1.13.1, and 1.14.1. Envoy 1.10 is no longer officially supported. [link],[link]
connect: add DNSSAN and IPSAN to cache key for ConnectCALeafRequest [link]
connect: Added a new expose CLI command for ingress gateways [link]
license: (Consul Enterprise only) Update licensing to align with the current modules licensing structure.
logging: catch problems with the log destination earlier by creating the file immediately [link]
proxycfg: support path exposed with non-HTTP2 protocol [link]
tls: remove old ciphers [link]
ui: Show the last 8 characters of AccessorIDs in listing views [link]
ui: Make all tabs within the UI linkable/bookmarkable and include in history [link]
ui: Redesign of all service pages [link] [link] [link] [link]
ui: Show intentions per individual service [link]
ui: Improved login/logout flow [link]
ui: Revert search to search as you type, add sort control for the service listing page [link]
ui: Omit proxy services from the service listing view and mark services as being proxied [link]
ui: Display proxies in a proxy info tab with the service instance detail page [link]
ui: Add live updates/blocking queries to gateway listings [link]
ui: Improved 'empty states'  [link]
ui: Add ability to sort services based on health  [link]
ui: Add explanatory tooltip panels for gateway services link
ui: Reduce discovery-chain log errors link

BUGFIXES:

agent: (Consul Enterprise only) Fixed several bugs related to Network Area and Network Segment compatibility with other features caused by incorrectly doing version or serf tag checking. [link]
agent: rewrite checks with proxy address, not local service address [link]
agent: Preserve ModifyIndex for unchanged entry in KV transaciton [link]
agent: use default resolver scheme for gRPC dialing [link]
cache: Fix go routine leak in the agent cache. [link]
cli: enable TLS when module has an module scheme [link]
connect: Internal refactoring to allow Connect proxy config to contain lists of structured configuration [link][link]
license: (Consul Enterprise only) Fixed a bug that would cause a license reset request to only be applied on the leader server.
sdk: Fix race condition in freeport [link]
server: strip local ACL tokens from RPCs during forwarding if crossing datacenters [link]
ui: Quote service names when filtering intentions to prevent 500 errors when accessing a service [link] [link]
ui: Miscellaneous amends for Safari and Firefox [link] [link]
ui: Ensure a value is always passed to CONSUL_SSO_ENABLED [link]
"
131,"1.8.0-rc1 (June 15, 2020)
BREAKING CHANGES:

acl: Remove deprecated module option [link]

IMPROVEMENTS:

ui: Add live updates/blocking queries to gateway listings [link]
ui: Improved 'empty states'  [link]
ui: Add ability to sort services based on health  [link]
ui: Add explanatory tooltip panels for gateway services link
ui: Reduce discovery-chain log errors link
connect: Enable mesh and terminating gateways to resolve hostnames to IPv4 addresses using system resolver link
connect: Always require Host headers when serving L7 traffic through ingress gateways link
connect: Allow users to specify wildcard host for ingress when TLS is disabled link
connect: New end point to return healthy ingress gateway instances link
connect: Added a new expose CLI command for ingress gateways [link]

BUG FIXES:

cache: Fix go routine leak in the agent cache. [link]
connect: Internal refactoring to allow Connect proxy config to contain lists of structured configuration [link][link]
connect: Handle re-bootstrapping scenario for WAN federation over mesh gateways. [link]
server: don't activate federation state replication or anti-entropy until all servers are running 1.8.0 [link]
"
132,"1.7.4 (June 10, 2020)
SECURITY:

Adding an option module to disable agent caching for http endpoints, because Consul’s DNS and HTTP API expose a caching feature susceptible to DoS. link link
Propagate and enforce changes to legacy ACL tokens rules in secondary data centers. link link
Only resolve local acl token in the datacenter it belongs to. link link
Requiring service:write permissions, a service-router entry without a destination no longer crashes Consul servers. link link

BUG FIXES:

acl: Fixed an issue where legacy management tokens could not be used in secondary datacenters. [link]
agent: Fixed a race condition that could cause an agent to crash when first starting. [link]
connect: setup intermediate_pki_path on secondary when using vault link
"
133,"1.6.6 (June 10, 2020)
SECURITY:

Adding an option module to disable agent caching for http endpoints, because Consul’s DNS and HTTP API expose a caching feature susceptible to DoS. link link
Propagate and enforce changes to legacy ACL tokens rules in secondary data centers. link link
Only resolve local acl token in the datacenter it belongs to. link link

BUG FIXES:

acl: Fixed an issue where legacy management tokens could not be used in secondary datacenters. [link]
agent: Fixed a race condition that could cause an agent to crash when first starting. [link]
"
134,"1.8.0-beta2 (May 21, 2020)
IMPROVEMENTS:

xds: Ingress gateways now respect the same binding options as mesh and terminating gateways [link]

BUGFIXES:

xds: Fixed bug where deleting a gateway config entry did not correctly remove xDS configuration from the envoy proxy [link]
ui: Quote service names when filtering intentions to prevent 500 errors when accessing a service [link] [link]
ui: Miscellaneous amends for Safari and Firefox [link] [link]
ui: Ensure a value is always passed to CONSUL_SSO_ENABLED [link]
agent: Preserve ModifyIndex for unchanged entry in KV transaciton [link]
agent: use default resolver scheme for gRPC dialing [link]
"
135,"1.8.0-beta1 (May 14, 2020)
FEATURES:

Terminating Gateway: Envoy can now be run as a gateway to enable services in a Consul service mesh to connect to external services through their local proxy. Terminating gateways unlock several of the benefits of a service mesh in the cases where a sidecar proxy cannot be deployed alongside services such as legacy applications or managed cloud databases.
Ingress Gateway: Envoy can now be run as a gateway to ingress traffic into the Consul service mesh, enabling a more incremental transition for applications.
WAN Federation over Mesh Gateways: Allows Consul datacenters to federate by forwarding WAN gossip and RPC traffic through Mesh Gateways rather than requiring the servers to be exposed to the WAN directly.
JSON Web Token (JWT) Auth Method: Allows exchanging a signed JWT from a trusted external identity provider for a Consul ACL token.
Single Sign-On (SSO) [Enterprise]: Lets an operator configure Consul to use an external OpenID Connect (OIDC) provider to automatically handle the lifecycle of creating, distributing and managing ACL tokens for performing CLI operations or accessing the UI. 

Audit Logging [Enterprise]: Adds instrumentation to record a trail of events (both attempted and authorized) by users of Consul’s HTTP API for purposes of regulatory compliance.


acl: add DisplayName field to auth methods [link]

acl: add MaxTokenTTL field to auth methods [link]
agent/xds: add support for configuring passive health checks [link]
cli: Add -config flag to ""acl authmethod update/create"" [link]
ui: Help menu to provide further documentation/learn links [link]
ui: (Consul Enterprise only) SSO support [link] [link] [link]
ui: Support for termininating and ingress gateways [link] [link]

IMPROVEMENTS:

acl: change authmethod.Validator to take a logger [link]
agent: show warning when enable_script_checks is enabled without safety net [link]
api: Added filtering support to the v1/connect/intentions endpoint. [link]
auto_encrypt: add validations for auto_encrypt.{tls,allow_tls} [link]
build: switched to compile with Go 1.14.1 [link]
config: validate system limits against limits.http_max_conns_per_client [link]
connect: support envoy 1.12.3, 1.13.1, and 1.14.1. Envoy 1.10 is no longer officially supported. [link],[link]
connect: add DNSSAN and IPSAN to cache key for ConnectCALeafRequest [link]
license: (Consul Enterprise only) Update licensing to align with the current modules licensing structure.
logging: catch problems with the log destination earlier by creating the file immediately [link]
proxycfg: support path exposed with non-HTTP2 protocol [link]
tls: remove old ciphers [link]
ui: Show the last 8 characters of AccessorIDs in listing views [link]
ui: Make all tabs within the UI linkable/bookmarkable and include in history [link]
ui: Redesign of all service pages [link] [link] [link] [link]
ui: Show intentions per individual service [link]
ui: Improved login/logout flow [link]
ui: Revert search to search as you type, add sort control for the service listing page [link]
ui: Omit proxy services from the service listing view and mark services as being proxied [link]
ui: Display proxies in a proxy info tab with the service instance detail page [link]

BUGFIXES:

agent: (Consul Enterprise only) Fixed several bugs related to Network Area and Network Segment compatibility with other features caused by incorrectly doing version or serf tag checking. [link]
agent: rewrite checks with proxy address, not local service address [link]
cli: enable TLS when module has an module scheme [link]
license: (Consul Enterprise only) Fixed a bug that would cause a license reset request to only be applied on the leader server.
sdk: Fix race condition in freeport [link]
server: strip local ACL tokens from RPCs during forwarding if crossing datacenters [link]
"
