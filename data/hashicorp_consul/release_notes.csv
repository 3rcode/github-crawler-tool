Index,Release Note,Release Note With Abstraction
1,"1.14.7 (May 16, 2023)
SECURITY:

Upgrade to use Go 1.20.4.
  This resolves vulnerabilities CVE-2023-24537(go/scanner),
  CVE-2023-24538(html/template),
  CVE-2023-24534(net/textproto) and
  CVE-2023-24536(mime/multipart).
  Also, golang.org/x/net has been updated to v0.7.0 to resolve CVEs CVE-2022-41721, CVE-2022-27664 and CVE-2022-41723 [GH-17240]

IMPROVEMENTS:

connect: update supported envoy versions to 1.21.6, 1.22.11, 1.23.8, 1.24.6 [GH-16888]
envoy: add MaxEjectionPercent and BaseEjectionTime to passive health check configs. [GH-15979]
hcp: Add support for linking existing Consul clusters to HCP management plane. [GH-16916]
logging: change snapshot log header from agent.server.snapshot to agent.server.raft.snapshot [GH-17236]
peering: allow re-establishing terminated peering from new token without deleting existing peering first. [GH-16776]

BUG FIXES:

Fix an bug where decoding some Config structs with unset pointer fields could fail with reflect: call of reflect.Value.Type on zero Value. [GH-17048]
acl: (Enterprise only) Check permissions in correct partition/namespace when resolving service in non-default partition/namespace
acls: Fix ACL bug that can result in sidecar proxies having incorrect endpoints.
connect: Fix multiple inefficient behaviors when querying service health. [GH-17241]
connect: fix a bug with Envoy potentially starting with incomplete configuration by not waiting enough for initial xDS configuration. [GH-17317]
grpc: ensure grpc resolver correctly uses lan/wan addresses on servers [GH-17270]
peering: Fix issue where peer streams could incorrectly deregister services in various scenarios. [GH-17235]
proxycfg: ensure that an irrecoverable error in proxycfg closes the xds session and triggers a replacement proxycfg watcher [GH-16497]
xds: Fix possible panic that can when generating clusters before the root certificates have been fetched. [GH-17185]
","1.14.7 (May 16, 2023)
SECURITY:
Upgrade to use Go 1.20.4.
  This resolves vulnerabilities CVE-2023-24537(go/scanner),
  CVE-2023-24538(html/template),
  CVE-2023-24534(net/textproto) and
  CVE-2023-24536(mime/multipart).
  Also, golang.org/x/net has been updated to v0.7.0 to resolve CVEs CVE-2022-41721, CVE-2022-27664 and CVE-2022-41723 [GH-17240]
IMPROVEMENTS:
connect: update supported envoy versions to 1.21.6, 1.22.11, 1.23.8, 1.24.6 [GH-16888]
envoy: add MaxEjectionPercent and BaseEjectionTime to passive health check configs. [GH-15979]
hcp: Add support for linking existing Consul clusters to HCP management plane. [GH-16916]
logging: change snapshot log header from agent.server.snapshot to agent.server.raft.snapshot [GH-17236]
peering: allow re-establishing terminated peering from new token without deleting existing peering first. [GH-16776]
BUG FIXES:
Fix an bug where decoding some Config structs with unset pointer fields could fail with reflect: call of reflect.Value.Type on zero Value. [GH-17048]
acl: (Enterprise only) Check permissions in correct partition/namespace when resolving service in non-default partition/namespace
acls: Fix ACL bug that can result in sidecar proxies having incorrect endpoints.
connect: Fix multiple inefficient behaviors when querying service health. [GH-17241]
connect: fix a bug with Envoy potentially starting with incomplete configuration by not waiting enough for initial xDS configuration. [GH-17317]
grpc: ensure grpc resolver correctly uses lan/wan addresses on servers [GH-17270]
peering: Fix issue where peer streams could incorrectly deregister services in various scenarios. [GH-17235]
proxycfg: ensure that an irrecoverable error in proxycfg closes the xds session and triggers a replacement proxycfg watcher [GH-16497]
xds: Fix possible panic that can when generating clusters before the root certificates have been fetched. [GH-17185]"
2,"1.13.8 (May 16, 2023)
SECURITY:

Upgrade to use Go 1.20.1.
  This resolves vulnerabilities CVE-2022-41724 in crypto/tls and CVE-2022-41723 in net/http. [GH-16263]
Upgrade to use Go 1.20.4.
  This resolves vulnerabilities CVE-2023-24537(go/scanner),
  CVE-2023-24538(html/template),
  CVE-2023-24534(net/textproto) and
  CVE-2023-24536(mime/multipart).
  Also, golang.org/x/net has been updated to v0.7.0 to resolve CVEs CVE-2022-41721, CVE-2022-27664 and CVE-2022-41723 [GH-17240]

IMPROVEMENTS:

api: updated the go module directive to 1.18. [GH-15297]
connect: update supported envoy versions to 1.20.7, 1.21.6, 1.22.11, 1.23.8 [GH-16891]
sdk: updated the go module directive to 1.18. [GH-15297]

BUG FIXES:

Fix an bug where decoding some Config structs with unset pointer fields could fail with reflect: call of reflect.Value.Type on zero Value. [GH-17048]
audit-logging: (Enterprise only) Fix a bug where /agent/monitor and /agent/metrics endpoints return a Streaming not supported error when audit logs are enabled. This also fixes the delay receiving logs when running consul monitor against an agent with audit logs enabled. [GH-16700]
ca: Fixes a bug where updating Vault CA Provider config would cause TLS issues in the service mesh [GH-16592]
connect: Fix multiple inefficient behaviors when querying service health. [GH-17241]
grpc: ensure grpc resolver correctly uses lan/wan addresses on servers [GH-17270]
peering: Fixes a bug that can lead to peering service deletes impacting the state of local services [GH-16570]
xds: Fix possible panic that can when generating clusters before the root certificates have been fetched. [GH-17185]
","1.13.8 (May 16, 2023)
SECURITY:
Upgrade to use Go 1.20.1.
  This resolves vulnerabilities CVE-2022-41724 in crypto/tls and CVE-2022-41723 in net/http. [GH-16263]
Upgrade to use Go 1.20.4.
  This resolves vulnerabilities CVE-2023-24537(go/scanner),
  CVE-2023-24538(html/template),
  CVE-2023-24534(net/textproto) and
  CVE-2023-24536(mime/multipart).
  Also, golang.org/x/net has been updated to v0.7.0 to resolve CVEs CVE-2022-41721, CVE-2022-27664 and CVE-2022-41723 [GH-17240]
IMPROVEMENTS:
api: updated the go module directive to 1.18. [GH-15297]
connect: update supported envoy versions to 1.20.7, 1.21.6, 1.22.11, 1.23.8 [GH-16891]
sdk: updated the go module directive to 1.18. [GH-15297]
BUG FIXES:
Fix an bug where decoding some Config structs with unset pointer fields could fail with reflect: call of reflect.Value.Type on zero Value. [GH-17048]
audit-logging: (Enterprise only) Fix a bug where /agent/monitor and /agent/metrics endpoints return a Streaming not supported error when audit logs are enabled. This also fixes the delay receiving logs when running consul monitor against an agent with audit logs enabled. [GH-16700]
ca: Fixes a bug where updating Vault CA Provider config would cause TLS issues in the service mesh [GH-16592]
connect: Fix multiple inefficient behaviors when querying service health. [GH-17241]
grpc: ensure grpc resolver correctly uses lan/wan addresses on servers [GH-17270]
peering: Fixes a bug that can lead to peering service deletes impacting the state of local services [GH-16570]
xds: Fix possible panic that can when generating clusters before the root certificates have been fetched. [GH-17185]"
3,"1.15.2 (March 30, 2023)
FEATURES:

xds: Allow for configuring connect proxies to send service mesh telemetry to an HCP metrics collection service. [GH-16585]

BUG FIXES:

audit-logging: (Enterprise only) Fix a bug where /agent/monitor and /agent/metrics endpoints return a Streaming not supported error when audit logs are enabled. This also fixes the delay receiving logs when running consul monitor against an agent with audit logs enabled. [GH-16700]
ca: Fixes a bug where updating Vault CA Provider config would cause TLS issues in the service mesh [GH-16592]
cache: revert cache refactor which could cause blocking queries to never return [GH-16818]
gateway: (Enterprise only) Fix bug where namespace/partition would fail to unmarshal for TCPServices. [GH-16781]
gateway: (Enterprise only) Fix bug where namespace/partition would fail to unmarshal. [GH-16651]
gateway: (Enterprise only) Fix bug where parent refs and service refs for a route in the same namespace as the route would fallback to the default namespace if the namespace was not specified in the configuration rather than falling back to the routes namespace. [GH-16789]
gateway: (Enterprise only) Fix bug where routes defined in a different namespace than a gateway would fail to register. [GH-16677].
gateways: Adds validation to ensure the API Gateway has a listener defined when created [GH-16649]
gateways: Fixes a bug API gateways using HTTP listeners were taking upwards of 15 seconds to get configured over xDS. [GH-16661]
peering: (Consul Enterprise only) Fix issue where connect-enabled services with peer upstreams incorrectly required service:write access in the default namespace to query data, which was too restrictive. Now having service:write to any namespace is sufficient to query the peering data.
peering: (Consul Enterprise only) Fix issue where resolvers, routers, and splitters referencing peer targets may not work correctly for non-default partitions and namespaces. Enterprise customers leveraging peering are encouraged to upgrade both servers and agents to avoid this problem.
peering: Fix issue resulting in prepared query failover to cluster peers never un-failing over. [GH-16729]
peering: Fixes a bug that can lead to peering service deletes impacting the state of local services [GH-16570]
peering: Fixes a bug where the importing partition was not added to peered failover targets, which causes issues when the importing partition is a non-default partition. [GH-16675]
raft_logstore: Fixes a bug where restoring a snapshot when using the experimental WAL storage backend causes a panic. [GH-16647]
ui: fix PUT token request with adding missed AccessorID property to requestBody [GH-16660]
ui: fix rendering issues on Overview and empty-states by addressing isHTMLSafe errors [GH-16574]
","1.15.2 (March 30, 2023)
FEATURES:
xds: Allow for configuring connect proxies to send service mesh telemetry to an HCP metrics collection service. [GH-16585]
BUG FIXES:
audit-logging: (Enterprise only) Fix a bug where /agent/monitor and /agent/metrics endpoints return a Streaming not supported error when audit logs are enabled. This also fixes the delay receiving logs when running consul monitor against an agent with audit logs enabled. [GH-16700]
ca: Fixes a bug where updating Vault CA Provider config would cause TLS issues in the service mesh [GH-16592]
cache: revert cache refactor which could cause blocking queries to never return [GH-16818]
gateway: (Enterprise only) Fix bug where namespace/partition would fail to unmarshal for TCPServices. [GH-16781]
gateway: (Enterprise only) Fix bug where namespace/partition would fail to unmarshal. [GH-16651]
gateway: (Enterprise only) Fix bug where parent refs and service refs for a route in the same namespace as the route would fallback to the default namespace if the namespace was not specified in the configuration rather than falling back to the routes namespace. [GH-16789]
gateway: (Enterprise only) Fix bug where routes defined in a different namespace than a gateway would fail to register. [GH-16677].
gateways: Adds validation to ensure the API Gateway has a listener defined when created [GH-16649]
gateways: Fixes a bug API gateways using HTTP listeners were taking upwards of 15 seconds to get configured over xDS. [GH-16661]
peering: (Consul Enterprise only) Fix issue where connect-enabled services with peer upstreams incorrectly required service:write access in the default namespace to query data, which was too restrictive. Now having service:write to any namespace is sufficient to query the peering data.
peering: (Consul Enterprise only) Fix issue where resolvers, routers, and splitters referencing peer targets may not work correctly for non-default partitions and namespaces. Enterprise customers leveraging peering are encouraged to upgrade both servers and agents to avoid this problem.
peering: Fix issue resulting in prepared query failover to cluster peers never un-failing over. [GH-16729]
peering: Fixes a bug that can lead to peering service deletes impacting the state of local services [GH-16570]
peering: Fixes a bug where the importing partition was not added to peered failover targets, which causes issues when the importing partition is a non-default partition. [GH-16675]
raft_logstore: Fixes a bug where restoring a snapshot when using the experimental WAL storage backend causes a panic. [GH-16647]
ui: fix PUT token request with adding missed AccessorID property to requestBody [GH-16660]
ui: fix rendering issues on Overview and empty-states by addressing isHTMLSafe errors [GH-16574]"
4,"1.14.6 (March 30, 2023)
BUG FIXES:

audit-logging: (Enterprise only) Fix a bug where /agent/monitor and /agent/metrics endpoints return a Streaming not supported error when audit logs are enabled. This also fixes the delay receiving logs when running consul monitor against an agent with audit logs enabled. [GH-16700]
ca: Fixes a bug where updating Vault CA Provider config would cause TLS issues in the service mesh [GH-16592]
peering: (Consul Enterprise only) Fix issue where connect-enabled services with peer upstreams incorrectly required service:write access in the default namespace to query data, which was too restrictive. Now having service:write to any namespace is sufficient to query the peering data.
peering: (Consul Enterprise only) Fix issue where resolvers, routers, and splitters referencing peer targets may not work correctly for non-default partitions and namespaces. Enterprise customers leveraging peering are encouraged to upgrade both servers and agents to avoid this problem.
peering: Fix issue resulting in prepared query failover to cluster peers never un-failing over. [GH-16729]
peering: Fixes a bug that can lead to peering service deletes impacting the state of local services [GH-16570]
peering: Fixes a bug where the importing partition was not added to peered failover targets, which causes issues when the importing partition is a non-default partition. [GH-16693]
ui: fix PUT token request with adding missed AccessorID property to requestBody [GH-16660]
","1.14.6 (March 30, 2023)
BUG FIXES:
audit-logging: (Enterprise only) Fix a bug where /agent/monitor and /agent/metrics endpoints return a Streaming not supported error when audit logs are enabled. This also fixes the delay receiving logs when running consul monitor against an agent with audit logs enabled. [GH-16700]
ca: Fixes a bug where updating Vault CA Provider config would cause TLS issues in the service mesh [GH-16592]
peering: (Consul Enterprise only) Fix issue where connect-enabled services with peer upstreams incorrectly required service:write access in the default namespace to query data, which was too restrictive. Now having service:write to any namespace is sufficient to query the peering data.
peering: (Consul Enterprise only) Fix issue where resolvers, routers, and splitters referencing peer targets may not work correctly for non-default partitions and namespaces. Enterprise customers leveraging peering are encouraged to upgrade both servers and agents to avoid this problem.
peering: Fix issue resulting in prepared query failover to cluster peers never un-failing over. [GH-16729]
peering: Fixes a bug that can lead to peering service deletes impacting the state of local services [GH-16570]
peering: Fixes a bug where the importing partition was not added to peered failover targets, which causes issues when the importing partition is a non-default partition. [GH-16693]
ui: fix PUT token request with adding missed AccessorID property to requestBody [GH-16660]"
5,"1.15.1 (March 7, 2023)
IMPROVEMENTS:

cli: added -append-policy-id, -append-policy-name, -append-role-name, and -append-role-id flags to the consul token update command.
These flags allow updates to a token's policies/roles without having to override them completely. [GH-16288]
cli: added -append-service-identity and -append-node-identity flags to the consul token update command.
These flags allow updates to a token's node identities/service identities without having to override them. [GH-16506]
connect: Bump Envoy 1.22.5 to 1.22.7, 1.23.2 to 1.23.4, 1.24.0 to 1.24.2, add 1.25.1, remove 1.21.5 [GH-16274]
mesh: Add ServiceResolver RequestTimeout for route timeouts to make request timeouts configurable [GH-16495]
ui: support filtering API gateways in the ui and displaying their documentation links [GH-16508]

DEPRECATIONS:

cli: Deprecate the -merge-node-identites and -merge-service-identities flags from the consul token update command in favor of: -append-node-identity and -append-service-identity. [GH-16506]
cli: Deprecate the -merge-policies and -merge-roles flags from the consul token update command in favor of: -append-policy-id, -append-policy-name, -append-role-name, and -append-role-id. [GH-16288]

BUG FIXES:

cli: Fixes an issue with consul connect envoy where a log to STDOUT could malform JSON when used with -bootstrap. [GH-16530]
cli: Fixes an issue with consul connect envoy where grpc-disabled agents were not error-handled correctly. [GH-16530]
cli: ensure acl token read -self works [GH-16445]
cli: fix panic read non-existent acl policy [GH-16485]
gateways: fix HTTPRoute bug where service weights could be less than or equal to 0 and result in a downstream envoy protocol error [GH-16512]
gateways: fix HTTPRoute bug where services with a weight not divisible by 10000 are never registered properly [GH-16531]
mesh: Fix resolution of service resolvers with subsets for external upstreams [GH-16499]
proxycfg: ensure that an irrecoverable error in proxycfg closes the xds session and triggers a replacement proxycfg watcher [GH-16497]
proxycfg: fix a bug where terminating gateways were not cleaning up deleted service resolvers for their referenced services [GH-16498]
ui: Fix issue with lists and filters not rendering properly [GH-16444]
","1.15.1 (March 7, 2023)
IMPROVEMENTS:
cli: added -append-policy-id, -append-policy-name, -append-role-name, and -append-role-id flags to the consul token update command.
These flags allow updates to a token's policies/roles without having to override them completely. [GH-16288]
cli: added -append-service-identity and -append-node-identity flags to the consul token update command.
These flags allow updates to a token's node identities/service identities without having to override them. [GH-16506]
connect: Bump Envoy 1.22.5 to 1.22.7, 1.23.2 to 1.23.4, 1.24.0 to 1.24.2, add 1.25.1, remove 1.21.5 [GH-16274]
mesh: Add ServiceResolver RequestTimeout for route timeouts to make request timeouts configurable [GH-16495]
ui: support filtering API gateways in the ui and displaying their documentation links [GH-16508]
DEPRECATIONS:
cli: Deprecate the -merge-node-identites and -merge-service-identities flags from the consul token update command in favor of: -append-node-identity and -append-service-identity. [GH-16506]
cli: Deprecate the -merge-policies and -merge-roles flags from the consul token update command in favor of: -append-policy-id, -append-policy-name, -append-role-name, and -append-role-id. [GH-16288]
BUG FIXES:
cli: Fixes an issue with consul connect envoy where a log to STDOUT could malform JSON when used with -bootstrap. [GH-16530]
cli: Fixes an issue with consul connect envoy where grpc-disabled agents were not error-handled correctly. [GH-16530]
cli: ensure acl token read -self works [GH-16445]
cli: fix panic read non-existent acl policy [GH-16485]
gateways: fix HTTPRoute bug where service weights could be less than or equal to 0 and result in a downstream envoy protocol error [GH-16512]
gateways: fix HTTPRoute bug where services with a weight not divisible by 10000 are never registered properly [GH-16531]
mesh: Fix resolution of service resolvers with subsets for external upstreams [GH-16499]
proxycfg: ensure that an irrecoverable error in proxycfg closes the xds session and triggers a replacement proxycfg watcher [GH-16497]
proxycfg: fix a bug where terminating gateways were not cleaning up deleted service resolvers for their referenced services [GH-16498]
ui: Fix issue with lists and filters not rendering properly [GH-16444]"
6,"1.14.5 (March 7, 2023)
SECURITY:

Upgrade to use Go 1.20.1.
This resolves vulnerabilities CVE-2022-41724 in crypto/tls and CVE-2022-41723 in net/http. [GH-16263]

IMPROVEMENTS:

container: Upgrade container image to use to Alpine 3.17. [GH-16358]
mesh: Add ServiceResolver RequestTimeout for route timeouts to make request timeouts configurable [GH-16495]

BUG FIXES:

mesh: Fix resolution of service resolvers with subsets for external upstreams [GH-16499]
peering: Fix bug where services were incorrectly imported as connect-enabled. [GH-16339]
peering: Fix issue where mesh gateways would use the wrong address when contacting a remote peer with the same datacenter name. [GH-16257]
peering: Fix issue where secondary wan-federated datacenters could not be used as peering acceptors. [GH-16230]
proxycfg: fix a bug where terminating gateways were not cleaning up deleted service resolvers for their referenced services [GH-16498]
","1.14.5 (March 7, 2023)
SECURITY:
Upgrade to use Go 1.20.1.
This resolves vulnerabilities CVE-2022-41724 in crypto/tls and CVE-2022-41723 in net/http. [GH-16263]
IMPROVEMENTS:
container: Upgrade container image to use to Alpine 3.17. [GH-16358]
mesh: Add ServiceResolver RequestTimeout for route timeouts to make request timeouts configurable [GH-16495]
BUG FIXES:
mesh: Fix resolution of service resolvers with subsets for external upstreams [GH-16499]
peering: Fix bug where services were incorrectly imported as connect-enabled. [GH-16339]
peering: Fix issue where mesh gateways would use the wrong address when contacting a remote peer with the same datacenter name. [GH-16257]
peering: Fix issue where secondary wan-federated datacenters could not be used as peering acceptors. [GH-16230]
proxycfg: fix a bug where terminating gateways were not cleaning up deleted service resolvers for their referenced services [GH-16498]"
7,"1.13.7 (March 7, 2023)
SECURITY:

Upgrade to use Go 1.19.6.
This resolves vulnerabilities CVE-2022-41724 in crypto/tls and CVE-2022-41723 in net/http. [GH-16299]

IMPROVEMENTS:

xds: Removed a bottleneck in Envoy config generation. [GH-16269]
container: Upgrade container image to use to Alpine 3.17. [GH-16358]
mesh: Add ServiceResolver RequestTimeout for route timeouts to make request timeouts configurable [GH-16495]

BUG FIXES:

mesh: Fix resolution of service resolvers with subsets for external upstreams [GH-16499]
proxycfg: fix a bug where terminating gateways were not cleaning up deleted service resolvers for their referenced services [GH-16498]
","1.13.7 (March 7, 2023)
SECURITY:
Upgrade to use Go 1.19.6.
This resolves vulnerabilities CVE-2022-41724 in crypto/tls and CVE-2022-41723 in net/http. [GH-16299]
IMPROVEMENTS:
xds: Removed a bottleneck in Envoy config generation. [GH-16269]
container: Upgrade container image to use to Alpine 3.17. [GH-16358]
mesh: Add ServiceResolver RequestTimeout for route timeouts to make request timeouts configurable [GH-16495]
BUG FIXES:
mesh: Fix resolution of service resolvers with subsets for external upstreams [GH-16499]
proxycfg: fix a bug where terminating gateways were not cleaning up deleted service resolvers for their referenced services [GH-16498]"
8,"1.15.0 (February 23, 2023)
ANNOUNCEMENTS:

Upcoming in Consul 1.16 we will stop publishing official Dockerhub images and publish only our Verified Publisher images. Users of Docker images should pull from hashicorp/consul instead of consul.

BREAKING CHANGES:

acl errors: Delete and get requests now return descriptive errors when the specified resource cannot be found. Other ACL request errors provide more information about when a resource is missing. Add error for when the ACL system has not been bootstrapped. 
Delete Token/Policy/AuthMethod/Role/BindingRule endpoints now return 404 when the resource cannot be found.
New error formats: ""Requested * does not exist: ACL not found"", ""* not found in namespace $NAMESPACE: ACL not found""


Read Token/Policy/Role endpoints now return 404 when the resource cannot be found.
New error format: ""Cannot find * to delete""


Logout now returns a 401 error when the supplied token cannot be found
New error format: ""Supplied token does not exist""


Token Self endpoint now returns 404 when the token cannot be found.
New error format: ""Supplied token does not exist"" [GH-16105]


acl: remove all acl migration functionality and references to the legacy acl system. [GH-15947]
acl: remove all functionality and references for legacy acl policies. [GH-15922]
config: Deprecate -join, -join-wan, start_join, and start_join_wan.
These options are now aliases of -retry-join, -retry-join-wan, retry_join, and retry_join_wan, respectively. [GH-15598]
connect: Add peer field to service-defaults upstream overrides. The addition of this field makes it possible to apply upstream overrides only to peer services. Prior to this change, overrides would be applied based on matching the namespace and name fields only, which means users could not have different configuration for local versus peer services. With this change, peer upstreams are only affected if the peer field matches the destination peer name. [GH-15956]
connect: Consul will now error and exit when using the consul connect envoy command if the Envoy version is incompatible. To ignore this check use flag --ignore-envoy-compatibility [GH-15818]
extensions: Refactor Lambda integration to get configured with the Envoy extensions field on service-defaults configuration entries. [GH-15817]
ingress-gateway: upstream cluster will have empty outlier_detection if passive health check is unspecified [GH-15614]
xds: Remove the connect.enable_serverless_plugin agent configuration option. Now 
Lambda integration is enabled by default. [GH-15710]

SECURITY:

Upgrade to use Go 1.20.1. 
This resolves vulnerabilities CVE-2022-41724 in crypto/tls and CVE-2022-41723 in net/http. [GH-16263]

FEATURES:

API Gateway (Beta) This version adds support for API gateway on VMs. API gateway provides a highly-configurable ingress for requests coming into a Consul network. For more information, refer to the API gateway documentation. [GH-16369]
acl: Add new acl.tokens.config_file_registration config field which specifies the token used
to register services and checks that are defined in config files. [GH-15828]
acl: anonymous token is logged as 'anonymous token' instead of its accessor ID [GH-15884]
cli: adds new CLI commands consul troubleshoot upstreams and consul troubleshoot proxy to troubleshoot Consul's service mesh configuration and network issues. [GH-16284]
command: Adds the operator usage instances subcommand for displaying total services, connect service instances and billable service instances in the local datacenter or globally. [GH-16205]
config-entry(ingress-gateway): support outlier detection (passive health check) for upstream cluster [GH-15614]
connect: adds support for Envoy access logging. Access logging can be enabled using the proxy-defaults config entry. [GH-15864]
xds: Add a built-in Envoy extension that inserts Lua HTTP filters. [GH-15906]
xds: Insert originator service identity into Envoy's dynamic metadata under the consul namespace. [GH-15906]

IMPROVEMENTS:

connect: for early awareness of Envoy incompatibilities, when using the consul connect envoy command the Envoy version will now be checked for compatibility. If incompatible Consul will error and exit. [GH-15818]
grpc: client agents will switch server on error, and automatically retry on RESOURCE_EXHAUSTED responses [GH-15892]
raft: add an operator api endpoint and a command to initiate raft leadership transfer. [GH-14132]
acl: Added option to allow for an operator-generated bootstrap token to be passed to the acl bootstrap command. [GH-14437]
agent: Give better error when client specifies wrong datacenter when auto-encrypt is enabled. [GH-14832]
api: updated the go module directive to 1.18. [GH-15297]
ca: support Vault agent auto-auth config for Vault CA provider using AWS/GCP authentication. [GH-15970]
cli: always use name ""global"" for proxy-defaults config entries [GH-14833]
cli: connect envoy command errors if grpc ports are not open [GH-15794]
client: add support for RemoveEmptyTags in Prepared Queries templates. [GH-14244]
connect: Warn if ACLs are enabled but a token is not provided to envoy [GH-15967]
container: Upgrade container image to use to Alpine 3.17. [GH-16358]
dns: support RFC 2782 SRV lookups for prepared queries using format _<query id or name>._tcp.query[.<datacenter>].<domain>. [GH-14465]
ingress-gateways: Don't log error when gateway is registered without a config entry [GH-15001]
licensing: (Enterprise Only) Consul Enterprise non-terminating production licenses do not degrade or terminate Consul upon expiration. They will only fail when trying to upgrade to a newer version of Consul. Evaluation licenses still terminate.
raft: Added experimental wal backend for log storage. [GH-16176]
sdk: updated the go module directive to 1.18. [GH-15297]
telemetry: Added a consul.xds.server.streamsUnauthenticated metric to track 
the number of active xDS streams handled by the server that are unauthenticated
because ACLs are not enabled or ACL tokens were missing. [GH-15967]
ui: Update sidebar width to 280px [GH-16204]
ui: update Ember version to 3.27; [GH-16227]

DEPRECATIONS:

acl: Deprecate the token query parameter and warn when it is used for authentication. [GH-16009]
cli: The -id flag on acl token operations has been changed to -accessor-id for clarity in documentation. The -id flag will continue to work, but operators should use -accessor-id in the future. [GH-16044]

BUG FIXES:

agent configuration: Fix issue of using unix socket when https is used. [GH-16301]
cache: refactor agent cache fetching to prevent unnecessary fetches on error [GH-14956]
cli: fatal error if config file does not have HCL or JSON extension, instead of warn and skip [GH-15107]
cli: fix ACL token processing unexpected precedence [GH-15274]
peering: Fix bug where services were incorrectly imported as connect-enabled. [GH-16339]
peering: Fix issue where mesh gateways would use the wrong address when contacting a remote peer with the same datacenter name. [GH-16257]
peering: Fix issue where secondary wan-federated datacenters could not be used as peering acceptors. [GH-16230]
","1.15.0 (February 23, 2023)
ANNOUNCEMENTS:
Upcoming in Consul 1.16 we will stop publishing official Dockerhub images and publish only our Verified Publisher images. Users of Docker images should pull from hashicorp/consul instead of consul.
BREAKING CHANGES:
acl errors: Delete and get requests now return descriptive errors when the specified resource cannot be found. Other ACL request errors provide more information about when a resource is missing. Add error for when the ACL system has not been bootstrapped. 
Delete Token/Policy/AuthMethod/Role/BindingRule endpoints now return 404 when the resource cannot be found.
New error formats: ""Requested * does not exist: ACL not found"", ""* not found in namespace $NAMESPACE: ACL not found""
Read Token/Policy/Role endpoints now return 404 when the resource cannot be found.
New error format: ""Cannot find * to delete""
Logout now returns a 401 error when the supplied token cannot be found
New error format: ""Supplied token does not exist""
Token Self endpoint now returns 404 when the token cannot be found.
New error format: ""Supplied token does not exist"" [GH-16105]
acl: remove all acl migration functionality and references to the legacy acl system. [GH-15947]
acl: remove all functionality and references for legacy acl policies. [GH-15922]
config: Deprecate -join, -join-wan, start_join, and start_join_wan.
These options are now aliases of -retry-join, -retry-join-wan, retry_join, and retry_join_wan, respectively. [GH-15598]
connect: Add peer field to service-defaults upstream overrides. The addition of this field makes it possible to apply upstream overrides only to peer services. Prior to this change, overrides would be applied based on matching the namespace and name fields only, which means users could not have different configuration for local versus peer services. With this change, peer upstreams are only affected if the peer field matches the destination peer name. [GH-15956]
connect: Consul will now error and exit when using the consul connect envoy command if the Envoy version is incompatible. To ignore this check use flag --ignore-envoy-compatibility [GH-15818]
extensions: Refactor Lambda integration to get configured with the Envoy extensions field on service-defaults configuration entries. [GH-15817]
ingress-gateway: upstream cluster will have empty outlier_detection if passive health check is unspecified [GH-15614]
xds: Remove the connect.enable_serverless_plugin agent configuration option. Now 
Lambda integration is enabled by default. [GH-15710]
SECURITY:
Upgrade to use Go 1.20.1. 
This resolves vulnerabilities CVE-2022-41724 in crypto/tls and CVE-2022-41723 in net/http. [GH-16263]
FEATURES:
API Gateway (Beta) This version adds support for API gateway on VMs. API gateway provides a highly-configurable ingress for requests coming into a Consul network. For more information, refer to the API gateway documentation. [GH-16369]
acl: Add new acl.tokens.config_file_registration config field which specifies the token used
to register services and checks that are defined in config files. [GH-15828]
acl: anonymous token is logged as 'anonymous token' instead of its accessor ID [GH-15884]
cli: adds new CLI commands consul troubleshoot upstreams and consul troubleshoot proxy to troubleshoot Consul's service mesh configuration and network issues. [GH-16284]
command: Adds the operator usage instances subcommand for displaying total services, connect service instances and billable service instances in the local datacenter or globally. [GH-16205]
config-entry(ingress-gateway): support outlier detection (passive health check) for upstream cluster [GH-15614]
connect: adds support for Envoy access logging. Access logging can be enabled using the proxy-defaults config entry. [GH-15864]
xds: Add a built-in Envoy extension that inserts Lua HTTP filters. [GH-15906]
xds: Insert originator service identity into Envoy's dynamic metadata under the consul namespace. [GH-15906]
IMPROVEMENTS:
connect: for early awareness of Envoy incompatibilities, when using the consul connect envoy command the Envoy version will now be checked for compatibility. If incompatible Consul will error and exit. [GH-15818]
grpc: client agents will switch server on error, and automatically retry on RESOURCE_EXHAUSTED responses [GH-15892]
raft: add an operator api endpoint and a command to initiate raft leadership transfer. [GH-14132]
acl: Added option to allow for an operator-generated bootstrap token to be passed to the acl bootstrap command. [GH-14437]
agent: Give better error when client specifies wrong datacenter when auto-encrypt is enabled. [GH-14832]
api: updated the go module directive to 1.18. [GH-15297]
ca: support Vault agent auto-auth config for Vault CA provider using AWS/GCP authentication. [GH-15970]
cli: always use name ""global"" for proxy-defaults config entries [GH-14833]
cli: connect envoy command errors if grpc ports are not open [GH-15794]
client: add support for RemoveEmptyTags in Prepared Queries templates. [GH-14244]
connect: Warn if ACLs are enabled but a token is not provided to envoy [GH-15967]
container: Upgrade container image to use to Alpine 3.17. [GH-16358]
dns: support RFC 2782 SRV lookups for prepared queries using format _._tcp.query[.].. [GH-14465]
ingress-gateways: Don't log error when gateway is registered without a config entry [GH-15001]
licensing: (Enterprise Only) Consul Enterprise non-terminating production licenses do not degrade or terminate Consul upon expiration. They will only fail when trying to upgrade to a newer version of Consul. Evaluation licenses still terminate.
raft: Added experimental wal backend for log storage. [GH-16176]
sdk: updated the go module directive to 1.18. [GH-15297]
telemetry: Added a consul.xds.server.streamsUnauthenticated metric to track 
the number of active xDS streams handled by the server that are unauthenticated
because ACLs are not enabled or ACL tokens were missing. [GH-15967]
ui: Update sidebar width to 280px [GH-16204]
ui: update Ember version to 3.27; [GH-16227]
DEPRECATIONS:
acl: Deprecate the token query parameter and warn when it is used for authentication. [GH-16009]
cli: The -id flag on acl token operations has been changed to -accessor-id for clarity in documentation. The -id flag will continue to work, but operators should use -accessor-id in the future. [GH-16044]
BUG FIXES:
agent configuration: Fix issue of using unix socket when https is used. [GH-16301]
cache: refactor agent cache fetching to prevent unnecessary fetches on error [GH-14956]
cli: fatal error if config file does not have HCL or JSON extension, instead of warn and skip [GH-15107]
cli: fix ACL token processing unexpected precedence [GH-15274]
peering: Fix bug where services were incorrectly imported as connect-enabled. [GH-16339]
peering: Fix issue where mesh gateways would use the wrong address when contacting a remote peer with the same datacenter name. [GH-16257]
peering: Fix issue where secondary wan-federated datacenters could not be used as peering acceptors. [GH-16230]"
9,"1.14.4 (January 26, 2023)
BREAKING CHANGES:

connect: Fix configuration merging for transparent proxy upstreams. Proxy-defaults and service-defaults config entries were not correctly merged for implicit upstreams in transparent proxy mode and would result in some configuration not being applied. To avoid issues when upgrading, ensure that any proxy-defaults or service-defaults have correct configuration for upstreams, since all fields will now be properly used to configure proxies. [GH-16000]
peering: Newly created peering connections must use only lowercase characters in the name field. Existing peerings with uppercase characters will not be modified, but they may encounter issues in various circumstances. To maintain forward compatibility and avoid issues, it is recommended to destroy and re-create any invalid peering connections so that they do not have a name containing uppercase characters. [GH-15697]

FEATURES:

connect: add flags envoy-ready-bind-port and envoy-ready-bind-address to the consul connect envoy command that allows configuration of readiness probe on proxy for any service kind. [GH-16015]
deps: update to latest go-discover to provide ECS auto-discover capabilities. [GH-13782]

IMPROVEMENTS:

acl: relax permissions on the WatchServers, WatchRoots and GetSupportedDataplaneFeatures gRPC endpoints to accept any valid ACL token [GH-15346]
connect: Add support for ConsulResolver to specifies a filter expression [GH-15659]
grpc: Use new balancer implementation to reduce periodic WARN logs when shuffling servers. [GH-15701]
partition: (Consul Enterprise only) when loading service from on-disk config file or sending API request to agent endpoint,
if the partition is unspecified, consul will default the partition in the request to agent's partition [GH-16024]

BUG FIXES:

agent: Fix assignment of error when auto-reloading cert and key file changes. [GH-15769]
agent: Fix issue where the agent cache would incorrectly mark protobuf objects as updated. [GH-15866]
cli: Fix issue where consul connect envoy was unable to configure TLS over unix-sockets to gRPC. [GH-15913]
connect: (Consul Enterprise only) Fix issue where upstream configuration from proxy-defaults and service-defaults was not properly merged. This could occur when a mixture of empty-strings and ""default"" were used for the namespace or partition fields.
connect: Fix issue where service-resolver protocol checks incorrectly errored for failover peer targets. [GH-15833]
connect: Fix issue where watches on upstream failover peer targets did not always query the correct data. [GH-15865]
xds: fix bug where sessions for locally-managed services could fail with ""this server has too many xDS streams open"" [GH-15789]
","1.14.4 (January 26, 2023)
BREAKING CHANGES:
connect: Fix configuration merging for transparent proxy upstreams. Proxy-defaults and service-defaults config entries were not correctly merged for implicit upstreams in transparent proxy mode and would result in some configuration not being applied. To avoid issues when upgrading, ensure that any proxy-defaults or service-defaults have correct configuration for upstreams, since all fields will now be properly used to configure proxies. [GH-16000]
peering: Newly created peering connections must use only lowercase characters in the name field. Existing peerings with uppercase characters will not be modified, but they may encounter issues in various circumstances. To maintain forward compatibility and avoid issues, it is recommended to destroy and re-create any invalid peering connections so that they do not have a name containing uppercase characters. [GH-15697]
FEATURES:
connect: add flags envoy-ready-bind-port and envoy-ready-bind-address to the consul connect envoy command that allows configuration of readiness probe on proxy for any service kind. [GH-16015]
deps: update to latest go-discover to provide ECS auto-discover capabilities. [GH-13782]
IMPROVEMENTS:
acl: relax permissions on the WatchServers, WatchRoots and GetSupportedDataplaneFeatures gRPC endpoints to accept any valid ACL token [GH-15346]
connect: Add support for ConsulResolver to specifies a filter expression [GH-15659]
grpc: Use new balancer implementation to reduce periodic WARN logs when shuffling servers. [GH-15701]
partition: (Consul Enterprise only) when loading service from on-disk config file or sending API request to agent endpoint,
if the partition is unspecified, consul will default the partition in the request to agent's partition [GH-16024]
BUG FIXES:
agent: Fix assignment of error when auto-reloading cert and key file changes. [GH-15769]
agent: Fix issue where the agent cache would incorrectly mark protobuf objects as updated. [GH-15866]
cli: Fix issue where consul connect envoy was unable to configure TLS over unix-sockets to gRPC. [GH-15913]
connect: (Consul Enterprise only) Fix issue where upstream configuration from proxy-defaults and service-defaults was not properly merged. This could occur when a mixture of empty-strings and ""default"" were used for the namespace or partition fields.
connect: Fix issue where service-resolver protocol checks incorrectly errored for failover peer targets. [GH-15833]
connect: Fix issue where watches on upstream failover peer targets did not always query the correct data. [GH-15865]
xds: fix bug where sessions for locally-managed services could fail with ""this server has too many xDS streams open"" [GH-15789]"
10,"1.13.6 (January 26, 2023)
FEATURES:

connect: add flags envoy-ready-bind-port and envoy-ready-bind-address to the consul connect envoy command that allows configuration of readiness probe on proxy for any service kind. [GH-16015]
deps: update to latest go-discover to provide ECS auto-discover capabilities. [GH-13782]

IMPROVEMENTS:

grpc: Use new balancer implementation to reduce periodic WARN logs when shuffling servers. [GH-15701]
partition: (Consul Enterprise only) when loading service from on-disk config file or sending API request to agent endpoint,
if the partition is unspecified, consul will default the partition in the request to agent's partition [GH-16024]

BUG FIXES:

agent: Fix assignment of error when auto-reloading cert and key file changes. [GH-15769]
","1.13.6 (January 26, 2023)
FEATURES:
connect: add flags envoy-ready-bind-port and envoy-ready-bind-address to the consul connect envoy command that allows configuration of readiness probe on proxy for any service kind. [GH-16015]
deps: update to latest go-discover to provide ECS auto-discover capabilities. [GH-13782]
IMPROVEMENTS:
grpc: Use new balancer implementation to reduce periodic WARN logs when shuffling servers. [GH-15701]
partition: (Consul Enterprise only) when loading service from on-disk config file or sending API request to agent endpoint,
if the partition is unspecified, consul will default the partition in the request to agent's partition [GH-16024]
BUG FIXES:
agent: Fix assignment of error when auto-reloading cert and key file changes. [GH-15769]"
11,"1.12.9 (January 26, 2023)
FEATURES:

deps: update to latest go-discover to provide ECS auto-discover capabilities. [GH-13782]

IMPROVEMENTS:

grpc: Use new balancer implementation to reduce periodic WARN logs when shuffling servers. [GH-15701]

BUG FIXES:

agent: Fix assignment of error when auto-reloading cert and key file changes. [GH-15769]
","1.12.9 (January 26, 2023)
FEATURES:
deps: update to latest go-discover to provide ECS auto-discover capabilities. [GH-13782]
IMPROVEMENTS:
grpc: Use new balancer implementation to reduce periodic WARN logs when shuffling servers. [GH-15701]
BUG FIXES:
agent: Fix assignment of error when auto-reloading cert and key file changes. [GH-15769]"
12,"1.14.3 (December 13, 2022)
SECURITY:

Upgrade to use Go 1.19.4. This resolves a vulnerability where restricted files can be read on Windows. CVE-2022-41720 [GH-15705]
Upgrades golang.org/x/net to prevent a denial of service by excessive memory usage caused by HTTP2 requests. CVE-2022-41717 [GH-15737]

FEATURES:

ui: Add field for fallback server addresses to peer token generation form [GH-15555]

IMPROVEMENTS:

connect: ensure all vault connect CA tests use limited privilege tokens [GH-15669]

BUG FIXES:

agent: (Enterprise Only) Ensure configIntentionsConvertToList does not compare empty strings with populated strings when filtering intentions created prior to AdminPartitions.
connect: Fix issue where DialedDirectly configuration was not used by Consul Dataplane. [GH-15760]
connect: Fix peering failovers ignoring local mesh gateway configuration. [GH-15690]
connect: Fixed issue where using Vault 1.11+ as CA provider in a secondary datacenter would eventually break Intermediate CAs [GH-15661]
","1.14.3 (December 13, 2022)
SECURITY:
Upgrade to use Go 1.19.4. This resolves a vulnerability where restricted files can be read on Windows. CVE-2022-41720 [GH-15705]
Upgrades golang.org/x/net to prevent a denial of service by excessive memory usage caused by HTTP2 requests. CVE-2022-41717 [GH-15737]
FEATURES:
ui: Add field for fallback server addresses to peer token generation form [GH-15555]
IMPROVEMENTS:
connect: ensure all vault connect CA tests use limited privilege tokens [GH-15669]
BUG FIXES:
agent: (Enterprise Only) Ensure configIntentionsConvertToList does not compare empty strings with populated strings when filtering intentions created prior to AdminPartitions.
connect: Fix issue where DialedDirectly configuration was not used by Consul Dataplane. [GH-15760]
connect: Fix peering failovers ignoring local mesh gateway configuration. [GH-15690]
connect: Fixed issue where using Vault 1.11+ as CA provider in a secondary datacenter would eventually break Intermediate CAs [GH-15661]"
13,"1.13.5 (December 13, 2022)
SECURITY:

Upgrade to use Go 1.18.9. This resolves a vulnerability where restricted files can be read on Windows. CVE-2022-41720 [GH-15706]
Upgrades golang.org/x/net to prevent a denial of service by excessive memory usage caused by HTTP2 requests. CVE-2022-41717 [GH-15743]

IMPROVEMENTS:

connect: ensure all vault connect CA tests use limited privilege tokens [GH-15669]

BUG FIXES:

agent: (Enterprise Only) Ensure configIntentionsConvertToList does not compare empty strings with populated strings when filtering intentions created prior to AdminPartitions.
cli: (Enterprise Only) Fix issue where consul partition update subcommand was not registered and therefore not available through the cli.
connect: Fixed issue where using Vault 1.11+ as CA provider in a secondary datacenter would eventually break Intermediate CAs [GH-15661]
","1.13.5 (December 13, 2022)
SECURITY:
Upgrade to use Go 1.18.9. This resolves a vulnerability where restricted files can be read on Windows. CVE-2022-41720 [GH-15706]
Upgrades golang.org/x/net to prevent a denial of service by excessive memory usage caused by HTTP2 requests. CVE-2022-41717 [GH-15743]
IMPROVEMENTS:
connect: ensure all vault connect CA tests use limited privilege tokens [GH-15669]
BUG FIXES:
agent: (Enterprise Only) Ensure configIntentionsConvertToList does not compare empty strings with populated strings when filtering intentions created prior to AdminPartitions.
cli: (Enterprise Only) Fix issue where consul partition update subcommand was not registered and therefore not available through the cli.
connect: Fixed issue where using Vault 1.11+ as CA provider in a secondary datacenter would eventually break Intermediate CAs [GH-15661]"
14,"1.12.8 (December 13, 2022)
SECURITY:

Upgrade to use Go 1.18.9. This resolves a vulnerability where restricted files can be read on Windows. CVE-2022-41720 [GH-15727]
Upgrades golang.org/x/net to prevent a denial of service by excessive memory usage caused by HTTP2 requests. CVE-2022-41717 [GH-15746]

IMPROVEMENTS:

connect: ensure all vault connect CA tests use limited privilege tokens [GH-15669]

BUG FIXES:

agent: (Enterprise Only) Ensure configIntentionsConvertToList does not compare empty strings with populated strings when filtering intentions created prior to AdminPartitions.
cli: (Enterprise Only) Fix issue where consul partition update subcommand was not registered and therefore not available through the cli.
connect: Fixed issue where using Vault 1.11+ as CA provider in a secondary datacenter would eventually break Intermediate CAs [GH-15661]
","1.12.8 (December 13, 2022)
SECURITY:
Upgrade to use Go 1.18.9. This resolves a vulnerability where restricted files can be read on Windows. CVE-2022-41720 [GH-15727]
Upgrades golang.org/x/net to prevent a denial of service by excessive memory usage caused by HTTP2 requests. CVE-2022-41717 [GH-15746]
IMPROVEMENTS:
connect: ensure all vault connect CA tests use limited privilege tokens [GH-15669]
BUG FIXES:
agent: (Enterprise Only) Ensure configIntentionsConvertToList does not compare empty strings with populated strings when filtering intentions created prior to AdminPartitions.
cli: (Enterprise Only) Fix issue where consul partition update subcommand was not registered and therefore not available through the cli.
connect: Fixed issue where using Vault 1.11+ as CA provider in a secondary datacenter would eventually break Intermediate CAs [GH-15661]"
15,"1.14.2 (November 30, 2022)
FEATURES:

connect: Add local_idle_timeout_ms to allow configuring the Envoy route idle timeout on local_app
connect: Add IdleTimeout to service-router to allow configuring the Envoy route idle timeout [GH-14340]
snapshot: (Enterprise Only) Add support for the snapshot agent to use an IAM role for authentication/authorization when managing snapshots in S3.

IMPROVEMENTS:

dns: Add support for cluster peering .service and .node DNS queries. [GH-15596]

BUG FIXES:

acl: avoid debug log spam in secondary datacenter servers due to management token not being initialized. [GH-15610]
agent: Fixed issue where blocking queries with short waits could timeout on the client [GH-15541]
ca: Fixed issue where using Vault as Connect CA with Vault-managed policies would error on start-up if the intermediate PKI mount existed but was empty [GH-15525]
cli: (Enterprise Only) Fix issue where consul partition update subcommand was not registered and therefore not available through the cli.
connect: Fixed issue where using Vault 1.11+ as CA provider would eventually break Intermediate CAs [GH-15217] [GH-15253]
namespace: (Enterprise Only) Fix a bug that caused blocking queries during namespace replication to timeout
peering: better represent non-passing states during peer check flattening [GH-15615]
peering: fix the limit of replication gRPC message; set to 8MB [GH-15503]
","1.14.2 (November 30, 2022)
FEATURES:
connect: Add local_idle_timeout_ms to allow configuring the Envoy route idle timeout on local_app
connect: Add IdleTimeout to service-router to allow configuring the Envoy route idle timeout [GH-14340]
snapshot: (Enterprise Only) Add support for the snapshot agent to use an IAM role for authentication/authorization when managing snapshots in S3.
IMPROVEMENTS:
dns: Add support for cluster peering .service and .node DNS queries. [GH-15596]
BUG FIXES:
acl: avoid debug log spam in secondary datacenter servers due to management token not being initialized. [GH-15610]
agent: Fixed issue where blocking queries with short waits could timeout on the client [GH-15541]
ca: Fixed issue where using Vault as Connect CA with Vault-managed policies would error on start-up if the intermediate PKI mount existed but was empty [GH-15525]
cli: (Enterprise Only) Fix issue where consul partition update subcommand was not registered and therefore not available through the cli.
connect: Fixed issue where using Vault 1.11+ as CA provider would eventually break Intermediate CAs [GH-15217] [GH-15253]
namespace: (Enterprise Only) Fix a bug that caused blocking queries during namespace replication to timeout
peering: better represent non-passing states during peer check flattening [GH-15615]
peering: fix the limit of replication gRPC message; set to 8MB [GH-15503]"
16,"1.13.4 (November 30, 2022)
IMPROVEMENTS:

auto-config: Relax the validation on auto-config JWT authorization to allow non-whitespace, non-quote characters in node names. [GH-15370]
raft: Allow nonVoter to initiate an election to avoid having an election infinite loop when a Voter is converted to NonVoter [GH-14897]
raft: Cap maximum grpc wait time when heartbeating to heartbeatTimeout/2 [GH-14897]
raft: Fix a race condition where the snapshot file is closed without being opened [GH-14897]

BUG FIXES:

agent: Fixed issue where blocking queries with short waits could timeout on the client [GH-15541]
ca: Fixed issue where using Vault as Connect CA with Vault-managed policies would error on start-up if the intermediate PKI mount existed but was empty [GH-15525]
connect: Fixed issue where using Vault 1.11+ as CA provider would eventually break Intermediate CAs [GH-15217] [GH-15253]
connect: fixed bug where endpoint updates for new xDS clusters could block for 15s before being sent to Envoy. [GH-15083]
connect: strip port from DNS SANs for ingress gateway leaf certificate to avoid an invalid hostname error when using the Vault provider. [GH-15320]
debug: fixed bug that caused consul debug CLI to error on ACL-disabled clusters [GH-15155]
deps: update go-memdb, fixing goroutine leak [GH-15010] [GH-15068]
namespace: (Enterprise Only) Fix a bug that caused blocking queries during namespace replication to timeout
namespace: (Enterprise Only) Fixed a bug where a client may incorrectly log that namespaces were not enabled in the local datacenter
peering: better represent non-passing states during peer check flattening [GH-15615]
peering: fix the error of wan address isn't taken by the peering token. [GH-15065]
peering: when wan address is set, peering stream should use the wan address. [GH-15108]
","1.13.4 (November 30, 2022)
IMPROVEMENTS:
auto-config: Relax the validation on auto-config JWT authorization to allow non-whitespace, non-quote characters in node names. [GH-15370]
raft: Allow nonVoter to initiate an election to avoid having an election infinite loop when a Voter is converted to NonVoter [GH-14897]
raft: Cap maximum grpc wait time when heartbeating to heartbeatTimeout/2 [GH-14897]
raft: Fix a race condition where the snapshot file is closed without being opened [GH-14897]
BUG FIXES:
agent: Fixed issue where blocking queries with short waits could timeout on the client [GH-15541]
ca: Fixed issue where using Vault as Connect CA with Vault-managed policies would error on start-up if the intermediate PKI mount existed but was empty [GH-15525]
connect: Fixed issue where using Vault 1.11+ as CA provider would eventually break Intermediate CAs [GH-15217] [GH-15253]
connect: fixed bug where endpoint updates for new xDS clusters could block for 15s before being sent to Envoy. [GH-15083]
connect: strip port from DNS SANs for ingress gateway leaf certificate to avoid an invalid hostname error when using the Vault provider. [GH-15320]
debug: fixed bug that caused consul debug CLI to error on ACL-disabled clusters [GH-15155]
deps: update go-memdb, fixing goroutine leak [GH-15010] [GH-15068]
namespace: (Enterprise Only) Fix a bug that caused blocking queries during namespace replication to timeout
namespace: (Enterprise Only) Fixed a bug where a client may incorrectly log that namespaces were not enabled in the local datacenter
peering: better represent non-passing states during peer check flattening [GH-15615]
peering: fix the error of wan address isn't taken by the peering token. [GH-15065]
peering: when wan address is set, peering stream should use the wan address. [GH-15108]"
17,"1.12.7 (November 30, 2022)
BUG FIXES:

agent: Fixed issue where blocking queries with short waits could timeout on the client [GH-15541]
ca: Fixed issue where using Vault as Connect CA with Vault-managed policies would error on start-up if the intermediate PKI mount existed but was empty [GH-15525]
connect: Fixed issue where using Vault 1.11+ as CA provider would eventually break Intermediate CAs [GH-15217] [GH-15253]
connect: fixed bug where endpoint updates for new xDS clusters could block for 15s before being sent to Envoy. [GH-15083]
connect: strip port from DNS SANs for ingress gateway leaf certificate to avoid an invalid hostname error when using the Vault provider. [GH-15320]
debug: fixed bug that caused consul debug CLI to error on ACL-disabled clusters [GH-15155]
deps: update go-memdb, fixing goroutine leak [GH-15010] [GH-15068]
namespace: (Enterprise Only) Fix a bug that caused blocking queries during namespace replication to timeout
namespace: (Enterprise Only) Fixed a bug where a client may incorrectly log that namespaces were not enabled in the local datacenter
","1.12.7 (November 30, 2022)
BUG FIXES:
agent: Fixed issue where blocking queries with short waits could timeout on the client [GH-15541]
ca: Fixed issue where using Vault as Connect CA with Vault-managed policies would error on start-up if the intermediate PKI mount existed but was empty [GH-15525]
connect: Fixed issue where using Vault 1.11+ as CA provider would eventually break Intermediate CAs [GH-15217] [GH-15253]
connect: fixed bug where endpoint updates for new xDS clusters could block for 15s before being sent to Envoy. [GH-15083]
connect: strip port from DNS SANs for ingress gateway leaf certificate to avoid an invalid hostname error when using the Vault provider. [GH-15320]
debug: fixed bug that caused consul debug CLI to error on ACL-disabled clusters [GH-15155]
deps: update go-memdb, fixing goroutine leak [GH-15010] [GH-15068]
namespace: (Enterprise Only) Fix a bug that caused blocking queries during namespace replication to timeout
namespace: (Enterprise Only) Fixed a bug where a client may incorrectly log that namespaces were not enabled in the local datacenter"
18,"1.14.1 (November 21, 2022)
BUG FIXES:

cli: Fix issue where consul connect envoy incorrectly uses the HTTPS API configuration for xDS connections. [GH-15466]
sdk: Fix SDK testutil backwards compatibility by only configuring grpc_tls port for new Consul versions. [GH-15423]
","1.14.1 (November 21, 2022)
BUG FIXES:
cli: Fix issue where consul connect envoy incorrectly uses the HTTPS API configuration for xDS connections. [GH-15466]
sdk: Fix SDK testutil backwards compatibility by only configuring grpc_tls port for new Consul versions. [GH-15423]"
19,"1.14.0 (November 15, 2022)
BREAKING CHANGES:

config: Add new ports.grpc_tls configuration option.
Introduce a new port to better separate TLS config from the existing ports.grpc config.
The new ports.grpc_tls only supports TLS encrypted communication.
The existing ports.grpc now only supports plain-text communication. [GH-15339]
config: update 1.14 config defaults: Enable peering and connect by default. [GH-15302]
config: update 1.14 config defaults: Set gRPC TLS port default value to 8503 [GH-15302]
connect: Removes support for Envoy 1.20 [GH-15093]
peering: Rename PeerName to Peer on prepared queries and exported services. [GH-14854]
xds: Convert service mesh failover to use Envoy's aggregate clusters. This
changes the names of some Envoy dynamic HTTP metrics. [GH-14178]

SECURITY:

Ensure that data imported from peers is filtered by ACLs at the UI Nodes/Services endpoints CVE-2022-3920 [GH-15356]

FEATURES:

DNS-proxy support via gRPC request. [GH-14811]
cli: Add -node-name flag to redirect-traffic command to support running in environments without client agents. [GH-14933]
cli: Add -consul-dns-port flag to the consul connect redirect-traffic command to allow forwarding DNS traffic to a specific Consul DNS port. [GH-15050]
connect: Add Envoy connection balancing configuration fields. [GH-14616]
grpc: Added metrics for external gRPC server. Added server_type=internal|external label to gRPC metrics. [GH-14922]
http: Add new get-or-empty operation to the txn api. Refer to the API docs for more information. [GH-14474]
peering: Add mesh gateway local mode support for cluster peering. [GH-14817]
peering: Add support for stale queries for trust bundle lookups [GH-14724]
peering: Add support to failover to services running on cluster peers. [GH-14396]
peering: Add support to redirect to services running on cluster peers with service resolvers. [GH-14445]
peering: Ensure un-exported services get deleted even if the un-export happens while cluster peering replication is down. [GH-14797]
peering: add support for routine peering control-plane traffic through mesh gateways [GH-14981]
sdk: Configure iptables to forward DNS traffic to a specific DNS port. [GH-15050]
telemetry: emit memberlist size metrics and broadcast queue depth metric. [GH-14873]
ui: Added support for central config merging [GH-14604]
ui: Create peerings detail page [GH-14947]
ui: Detect a TokenSecretID cookie and passthrough to localStorage [GH-14495]
ui: Display notice banner on nodes index page if synthetic nodes are being filtered. [GH-14971]
ui: Filter agentless (synthetic) nodes from the nodes list page. [GH-14970]
ui: Filter out node health checks on agentless service instances [GH-14986]
ui: Remove node meta on service instances when using agentless and consolidate external-source labels on service instances page if they all match. [GH-14921]
ui: Removed reference to node name on service instance page when using agentless [GH-14903]
ui: Use withCredentials for all HTTP API requests [GH-14343]
xds: servers will limit the number of concurrent xDS streams they can handle to balance the load across all servers [GH-14397]

IMPROVEMENTS:

peering: Add peering datacenter and partition to initial handshake. [GH-14889]
xds: Added a rate limiter to the delivery of proxy config updates, to prevent updates to ""global"" resources such as wildcard intentions from overwhelming servers (see: xds.update_max_per_second config field) [GH-14960]
xds: Removed a bottleneck in Envoy config generation, enabling a higher number of dataplanes per server [GH-14934]
agent/hcp: add initial HashiCorp Cloud Platform integration [GH-14723]
agent: Added configuration option cloud.scada_address. [GH-14936]
api: Add filtering support to Catalog's List Services (v1/catalog/services) [GH-11742]
api: Increase max number of operations inside a transaction for requests to /v1/txn (128) [GH-14599]
auto-config: Relax the validation on auto-config JWT authorization to allow non-whitespace, non-quote characters in node names. [GH-15370]
config-entry: Validate that service-resolver Failovers and Redirects only
specify Partition and Namespace on Consul Enterprise. This prevents scenarios
where OSS Consul would save service-resolvers that require Consul Enterprise. [GH-14162]
connect: Add Envoy 1.24.0 to support matrix [GH-15093]
connect: Bump Envoy 1.20 to 1.20.7, 1.21 to 1.21.5 and 1.22 to 1.22.5 [GH-14831]
connect: service-router destinations have gained a RetryOn field for specifying the conditions when Envoy should retry requests beyond specific status codes and generic connection failure which already exists. [GH-12890]
dns/peering: (Enterprise Only) Support addresses in the formats <servicename>.virtual.<namespace>.ns.<partition>.ap.<peername>.peer.consul and <servicename>.virtual.<partition>.ap.<peername>.peer.consul. This longer form address that allows specifying .peer would need to be used for tproxy DNS requests made within non-default partitions for imported services.
dns: (Enterprise Only) All enterprise locality labels are now optional in DNS lookups. For example, service lookups support the following format: [<tag>.]<service>.service[.<namespace>.ns][.<partition>.ap][.<datacenter>.dc]<domain>. [GH-14679]
integ test: fix flakiness due to test condition from retry app endoint [GH-15233]
metrics: Service RPC calls less than 1ms are now emitted as a decimal number. [GH-12905]
peering: adds an internally managed server certificate for automatic TLS between servers in peer clusters. [GH-14556]
peering: require TLS for peering connections using server cert signed by Connect CA [GH-14796]
peering: return information about the health of the peering when the leader is queried to read a peering. [GH-14747]
raft: Allow nonVoter to initiate an election to avoid having an election infinite loop when a Voter is converted to NonVoter [GH-14897]
raft: Cap maximum grpc wait time when heartbeating to heartbeatTimeout/2 [GH-14897]
raft: Fix a race condition where the snapshot file is closed without being opened [GH-14897]
telemetry: Added a consul.xds.server.streamStart metric to measure time taken to first generate xDS resources for an xDS stream. [GH-14957]
ui: Improve guidance around topology visualisation [GH-14527]
xds: Set max_ejection_percent on Envoy's outlier detection to 100% for peered services. [GH-14373]

BUG FIXES:

checks: Do not set interval as timeout value [GH-14619]
checks: If set, use proxy address for automatically added sidecar check instead of service address. [GH-14433]
cli: Fix Consul kv CLI 'GET' flags 'keys' and 'recurse' to be set together [GH-13493]
connect: Fix issue where mesh-gateway settings were not properly inherited from configuration entries. [GH-15186]
connect: fixed bug where endpoint updates for new xDS clusters could block for 15s before being sent to Envoy. [GH-15083]
connect: strip port from DNS SANs for ingress gateway leaf certificate to avoid an invalid hostname error when using the Vault provider. [GH-15320]
debug: fixed bug that caused consul debug CLI to error on ACL-disabled clusters [GH-15155]
deps: update go-memdb, fixing goroutine leak [GH-15010] [GH-15068]
grpc: Merge proxy-defaults and service-defaults in GetEnvoyBootstrapParams response. [GH-14869]
metrics: Add duplicate metrics that have only a single ""consul_"" prefix for all existing metrics with double (""consul_consul_"") prefix, with the intent to standardize on single prefixes. [GH-14475]
namespace: (Enterprise Only) Fixed a bug where a client may incorrectly log that namespaces were not enabled in the local datacenter
peering: Fix a bug that resulted in /v1/agent/metrics returning an error. [GH-15178]
peering: fix nil pointer in calling handleUpdateService [GH-15160]
peering: fix the error of wan address isn't taken by the peering token. [GH-15065]
peering: when wan address is set, peering stream should use the wan address. [GH-15108]
proxycfg(mesh-gateway): Fix issue where deregistered services are not removed from mesh-gateway clusters. [GH-15272]
server: fix goroutine/memory leaks in the xDS subsystem (these were present regardless of whether or not xDS was in-use) [GH-14916]
server: fixes the error trying to source proxy configuration for http checks, in case of proxies using consul-dataplane. [GH-14924]
xds: Central service configuration (proxy-defaults and service-defaults) is now correctly applied to Consul Dataplane proxies [GH-14962]

NOTES:

deps: Upgrade to use Go 1.19.2 [GH-15090]
","1.14.0 (November 15, 2022)
BREAKING CHANGES:
config: Add new ports.grpc_tls configuration option.
Introduce a new port to better separate TLS config from the existing ports.grpc config.
The new ports.grpc_tls only supports TLS encrypted communication.
The existing ports.grpc now only supports plain-text communication. [GH-15339]
config: update 1.14 config defaults: Enable peering and connect by default. [GH-15302]
config: update 1.14 config defaults: Set gRPC TLS port default value to 8503 [GH-15302]
connect: Removes support for Envoy 1.20 [GH-15093]
peering: Rename PeerName to Peer on prepared queries and exported services. [GH-14854]
xds: Convert service mesh failover to use Envoy's aggregate clusters. This
changes the names of some Envoy dynamic HTTP metrics. [GH-14178]
SECURITY:
Ensure that data imported from peers is filtered by ACLs at the UI Nodes/Services endpoints CVE-2022-3920 [GH-15356]
FEATURES:
DNS-proxy support via gRPC request. [GH-14811]
cli: Add -node-name flag to redirect-traffic command to support running in environments without client agents. [GH-14933]
cli: Add -consul-dns-port flag to the consul connect redirect-traffic command to allow forwarding DNS traffic to a specific Consul DNS port. [GH-15050]
connect: Add Envoy connection balancing configuration fields. [GH-14616]
grpc: Added metrics for external gRPC server. Added server_type=internal|external label to gRPC metrics. [GH-14922]
http: Add new get-or-empty operation to the txn api. Refer to the API docs for more information. [GH-14474]
peering: Add mesh gateway local mode support for cluster peering. [GH-14817]
peering: Add support for stale queries for trust bundle lookups [GH-14724]
peering: Add support to failover to services running on cluster peers. [GH-14396]
peering: Add support to redirect to services running on cluster peers with service resolvers. [GH-14445]
peering: Ensure un-exported services get deleted even if the un-export happens while cluster peering replication is down. [GH-14797]
peering: add support for routine peering control-plane traffic through mesh gateways [GH-14981]
sdk: Configure iptables to forward DNS traffic to a specific DNS port. [GH-15050]
telemetry: emit memberlist size metrics and broadcast queue depth metric. [GH-14873]
ui: Added support for central config merging [GH-14604]
ui: Create peerings detail page [GH-14947]
ui: Detect a TokenSecretID cookie and passthrough to localStorage [GH-14495]
ui: Display notice banner on nodes index page if synthetic nodes are being filtered. [GH-14971]
ui: Filter agentless (synthetic) nodes from the nodes list page. [GH-14970]
ui: Filter out node health checks on agentless service instances [GH-14986]
ui: Remove node meta on service instances when using agentless and consolidate external-source labels on service instances page if they all match. [GH-14921]
ui: Removed reference to node name on service instance page when using agentless [GH-14903]
ui: Use withCredentials for all HTTP API requests [GH-14343]
xds: servers will limit the number of concurrent xDS streams they can handle to balance the load across all servers [GH-14397]
IMPROVEMENTS:
peering: Add peering datacenter and partition to initial handshake. [GH-14889]
xds: Added a rate limiter to the delivery of proxy config updates, to prevent updates to ""global"" resources such as wildcard intentions from overwhelming servers (see: xds.update_max_per_second config field) [GH-14960]
xds: Removed a bottleneck in Envoy config generation, enabling a higher number of dataplanes per server [GH-14934]
agent/hcp: add initial HashiCorp Cloud Platform integration [GH-14723]
agent: Added configuration option cloud.scada_address. [GH-14936]
api: Add filtering support to Catalog's List Services (v1/catalog/services) [GH-11742]
api: Increase max number of operations inside a transaction for requests to /v1/txn (128) [GH-14599]
auto-config: Relax the validation on auto-config JWT authorization to allow non-whitespace, non-quote characters in node names. [GH-15370]
config-entry: Validate that service-resolver Failovers and Redirects only
specify Partition and Namespace on Consul Enterprise. This prevents scenarios
where OSS Consul would save service-resolvers that require Consul Enterprise. [GH-14162]
connect: Add Envoy 1.24.0 to support matrix [GH-15093]
connect: Bump Envoy 1.20 to 1.20.7, 1.21 to 1.21.5 and 1.22 to 1.22.5 [GH-14831]
connect: service-router destinations have gained a RetryOn field for specifying the conditions when Envoy should retry requests beyond specific status codes and generic connection failure which already exists. [GH-12890]
dns/peering: (Enterprise Only) Support addresses in the formats .virtual..ns..ap..peer.consul and .virtual..ap..peer.consul. This longer form address that allows specifying .peer would need to be used for tproxy DNS requests made within non-default partitions for imported services.
dns: (Enterprise Only) All enterprise locality labels are now optional in DNS lookups. For example, service lookups support the following format: [.].service[..ns][..ap][..dc]. [GH-14679]
integ test: fix flakiness due to test condition from retry app endoint [GH-15233]
metrics: Service RPC calls less than 1ms are now emitted as a decimal number. [GH-12905]
peering: adds an internally managed server certificate for automatic TLS between servers in peer clusters. [GH-14556]
peering: require TLS for peering connections using server cert signed by Connect CA [GH-14796]
peering: return information about the health of the peering when the leader is queried to read a peering. [GH-14747]
raft: Allow nonVoter to initiate an election to avoid having an election infinite loop when a Voter is converted to NonVoter [GH-14897]
raft: Cap maximum grpc wait time when heartbeating to heartbeatTimeout/2 [GH-14897]
raft: Fix a race condition where the snapshot file is closed without being opened [GH-14897]
telemetry: Added a consul.xds.server.streamStart metric to measure time taken to first generate xDS resources for an xDS stream. [GH-14957]
ui: Improve guidance around topology visualisation [GH-14527]
xds: Set max_ejection_percent on Envoy's outlier detection to 100% for peered services. [GH-14373]
BUG FIXES:
checks: Do not set interval as timeout value [GH-14619]
checks: If set, use proxy address for automatically added sidecar check instead of service address. [GH-14433]
cli: Fix Consul kv CLI 'GET' flags 'keys' and 'recurse' to be set together [GH-13493]
connect: Fix issue where mesh-gateway settings were not properly inherited from configuration entries. [GH-15186]
connect: fixed bug where endpoint updates for new xDS clusters could block for 15s before being sent to Envoy. [GH-15083]
connect: strip port from DNS SANs for ingress gateway leaf certificate to avoid an invalid hostname error when using the Vault provider. [GH-15320]
debug: fixed bug that caused consul debug CLI to error on ACL-disabled clusters [GH-15155]
deps: update go-memdb, fixing goroutine leak [GH-15010] [GH-15068]
grpc: Merge proxy-defaults and service-defaults in GetEnvoyBootstrapParams response. [GH-14869]
metrics: Add duplicate metrics that have only a single ""consul_"" prefix for all existing metrics with double (""consul_consul_"") prefix, with the intent to standardize on single prefixes. [GH-14475]
namespace: (Enterprise Only) Fixed a bug where a client may incorrectly log that namespaces were not enabled in the local datacenter
peering: Fix a bug that resulted in /v1/agent/metrics returning an error. [GH-15178]
peering: fix nil pointer in calling handleUpdateService [GH-15160]
peering: fix the error of wan address isn't taken by the peering token. [GH-15065]
peering: when wan address is set, peering stream should use the wan address. [GH-15108]
proxycfg(mesh-gateway): Fix issue where deregistered services are not removed from mesh-gateway clusters. [GH-15272]
server: fix goroutine/memory leaks in the xDS subsystem (these were present regardless of whether or not xDS was in-use) [GH-14916]
server: fixes the error trying to source proxy configuration for http checks, in case of proxies using consul-dataplane. [GH-14924]
xds: Central service configuration (proxy-defaults and service-defaults) is now correctly applied to Consul Dataplane proxies [GH-14962]
NOTES:
deps: Upgrade to use Go 1.19.2 [GH-15090]"
20,"1.13.3 (October 19, 2022)
FEATURES:

agent: Added a new config option rpc_client_timeout to tune timeouts for client RPC requests [GH-14965]
config-entry(ingress-gateway): Added support for max_connections for upstream clusters [GH-14749]

IMPROVEMENTS:

connect/ca: Log a warning message instead of erroring when attempting to update the intermediate pki mount when using the Vault provider. [GH-15035]
connect: Added gateway options to Envoy proxy config for enabling tcp keepalives on terminating gateway upstreams and mesh gateways in remote datacenters. [GH-14800]
connect: Bump Envoy 1.20 to 1.20.7, 1.21 to 1.21.5 and 1.22 to 1.22.5 [GH-14828]
licensing: (Enterprise Only) Consul Enterprise production licenses do not degrade or terminate Consul upon expiration. They will only fail when trying to upgrade to a newer version of Consul. Evaluation licenses still terminate. [GH-1990]

BUG FIXES:

agent: avoid leaking the alias check runner goroutine when the check is de-registered [GH-14935]
ca: fix a masked bug in leaf cert generation that would not be notified of root cert rotation after the first one [GH-15005]
cache: prevent goroutine leak in agent cache [GH-14908]
checks: Fixed a bug that prevented registration of UDP health checks from agent configuration files, such as service definition files with embedded health check definitions. [GH-14885]
connect: Fixed a bug where transparent proxy does not correctly spawn listeners for upstreams to service-resolvers. [GH-14751]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic.
","1.13.3 (October 19, 2022)
FEATURES:
agent: Added a new config option rpc_client_timeout to tune timeouts for client RPC requests [GH-14965]
config-entry(ingress-gateway): Added support for max_connections for upstream clusters [GH-14749]
IMPROVEMENTS:
connect/ca: Log a warning message instead of erroring when attempting to update the intermediate pki mount when using the Vault provider. [GH-15035]
connect: Added gateway options to Envoy proxy config for enabling tcp keepalives on terminating gateway upstreams and mesh gateways in remote datacenters. [GH-14800]
connect: Bump Envoy 1.20 to 1.20.7, 1.21 to 1.21.5 and 1.22 to 1.22.5 [GH-14828]
licensing: (Enterprise Only) Consul Enterprise production licenses do not degrade or terminate Consul upon expiration. They will only fail when trying to upgrade to a newer version of Consul. Evaluation licenses still terminate. [GH-1990]
BUG FIXES:
agent: avoid leaking the alias check runner goroutine when the check is de-registered [GH-14935]
ca: fix a masked bug in leaf cert generation that would not be notified of root cert rotation after the first one [GH-15005]
cache: prevent goroutine leak in agent cache [GH-14908]
checks: Fixed a bug that prevented registration of UDP health checks from agent configuration files, such as service definition files with embedded health check definitions. [GH-14885]
connect: Fixed a bug where transparent proxy does not correctly spawn listeners for upstreams to service-resolvers. [GH-14751]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic."
21,"1.12.6 (October 19, 2022)
FEATURES:

agent: Added a new config option rpc_client_timeout to tune timeouts for client RPC requests [GH-14965]
agent: Added information about build date alongside other version information for Consul. Extended /agent/self endpoint and consul version commands
to report this. Agent also reports build date in log on startup. [GH-13357]
config-entry(ingress-gateway): Added support for max_connections for upstream clusters [GH-14749]

IMPROVEMENTS:

connect/ca: Log a warning message instead of erroring when attempting to update the intermediate pki mount when using the Vault provider. [GH-15035]
connect: Added gateway options to Envoy proxy config for enabling tcp keepalives on terminating gateway upstreams and mesh gateways in remote datacenters. [GH-14800]
connect: Bump Envoy 1.20 to 1.20.7, 1.21 to 1.21.5 and 1.22 to 1.22.5 [GH-14829]
licensing: (Enterprise Only) Consul Enterprise production licenses do not degrade or terminate Consul upon expiration. They will only fail when trying to upgrade to a newer version of Consul. Evaluation licenses still terminate. [GH-1990]

BUG FIXES:

agent: avoid leaking the alias check runner goroutine when the check is de-registered [GH-14935]
ca: fix a masked bug in leaf cert generation that would not be notified of root cert rotation after the first one [GH-15005]
cache: prevent goroutine leak in agent cache [GH-14908]
connect: Fixed a bug where transparent proxy does not correctly spawn listeners for upstreams to service-resolvers. [GH-14751]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic.
","1.12.6 (October 19, 2022)
FEATURES:
agent: Added a new config option rpc_client_timeout to tune timeouts for client RPC requests [GH-14965]
agent: Added information about build date alongside other version information for Consul. Extended /agent/self endpoint and consul version commands
to report this. Agent also reports build date in log on startup. [GH-13357]
config-entry(ingress-gateway): Added support for max_connections for upstream clusters [GH-14749]
IMPROVEMENTS:
connect/ca: Log a warning message instead of erroring when attempting to update the intermediate pki mount when using the Vault provider. [GH-15035]
connect: Added gateway options to Envoy proxy config for enabling tcp keepalives on terminating gateway upstreams and mesh gateways in remote datacenters. [GH-14800]
connect: Bump Envoy 1.20 to 1.20.7, 1.21 to 1.21.5 and 1.22 to 1.22.5 [GH-14829]
licensing: (Enterprise Only) Consul Enterprise production licenses do not degrade or terminate Consul upon expiration. They will only fail when trying to upgrade to a newer version of Consul. Evaluation licenses still terminate. [GH-1990]
BUG FIXES:
agent: avoid leaking the alias check runner goroutine when the check is de-registered [GH-14935]
ca: fix a masked bug in leaf cert generation that would not be notified of root cert rotation after the first one [GH-15005]
cache: prevent goroutine leak in agent cache [GH-14908]
connect: Fixed a bug where transparent proxy does not correctly spawn listeners for upstreams to service-resolvers. [GH-14751]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic."
22,"1.11.11 (October 19, 2022)
FEATURES:

agent: Added a new config option rpc_client_timeout to tune timeouts for client RPC requests [GH-14965]
config-entry(ingress-gateway): Added support for max_connections for upstream clusters [GH-14749]

IMPROVEMENTS:

connect/ca: Log a warning message instead of erroring when attempting to update the intermediate pki mount when using the Vault provider. [GH-15035]
connect: Added gateway options to Envoy proxy config for enabling tcp keepalives on terminating gateway upstreams and mesh gateways in remote datacenters. [GH-14800]
connect: Bump Envoy 1.20 to 1.20.7 [GH-14830]

BUG FIXES:

agent: avoid leaking the alias check runner goroutine when the check is de-registered [GH-14935]
ca: fix a masked bug in leaf cert generation that would not be notified of root cert rotation after the first one [GH-15005]
cache: prevent goroutine leak in agent cache [GH-14908]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic.
","1.11.11 (October 19, 2022)
FEATURES:
agent: Added a new config option rpc_client_timeout to tune timeouts for client RPC requests [GH-14965]
config-entry(ingress-gateway): Added support for max_connections for upstream clusters [GH-14749]
IMPROVEMENTS:
connect/ca: Log a warning message instead of erroring when attempting to update the intermediate pki mount when using the Vault provider. [GH-15035]
connect: Added gateway options to Envoy proxy config for enabling tcp keepalives on terminating gateway upstreams and mesh gateways in remote datacenters. [GH-14800]
connect: Bump Envoy 1.20 to 1.20.7 [GH-14830]
BUG FIXES:
agent: avoid leaking the alias check runner goroutine when the check is de-registered [GH-14935]
ca: fix a masked bug in leaf cert generation that would not be notified of root cert rotation after the first one [GH-15005]
cache: prevent goroutine leak in agent cache [GH-14908]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic."
23,"1.14.0-beta1 (September 29, 2022)
BREAKING CHANGES:

config: Add new ports.grpc_tls configuration option.
Introduce a new port to better separate TLS config from the existing ports.grpc config.
The new ports.grpc_tls only supports TLS encrypted communication.
The existing ports.grpc currently supports both plain-text and tls communication, but tls support will be removed in a future release. [GH-14294]
xds: Convert service mesh failover to use Envoy's aggregate clusters. This
changes the names of some Envoy dynamic HTTP metrics. [GH-14178]

FEATURES:

http: Add new get-or-empty operation to the txn api. Refer to the API docs for more information. [GH-14474]
peering: Add support to failover to services running on cluster peers. [GH-14396]
peering: Add support to redirect to services running on cluster peers with service resolvers. [GH-14445]
ui: Added support for central config merging [GH-14604]
ui: Detect a TokenSecretID cookie and passthrough to localStorage [GH-14495]
ui: Use withCredentials for all HTTP API requests [GH-14343]
xds: servers will limit the number of concurrent xDS streams they can handle to balance the load across all servers [GH-14397]

IMPROVEMENTS:

agent/hcp: add initial HashiCorp Cloud Platform integration [GH-14723]
api: Add filtering support to Catalog's List Services (v1/catalog/services) [GH-11742]
api: Increase max number of operations inside a transaction for requests to /v1/txn (128) [GH-14599]
config-entry: Validate that service-resolver Failovers and Redirects only
specify Partition and Namespace on Consul Enterprise. This prevents scenarios
where OSS Consul would save service-resolvers that require Consul Enterprise. [GH-14162]
dns: (Enterprise Only) All enterprise locality labels are now optional in DNS lookups. For example, service lookups support the following format: .].service[..ns][..ap][..dc]`. [GH-14679]
metrics: Service RPC calls less than 1ms are now emitted as a decimal number. [GH-12905]
peering: adds an internally managed server certificate for automatic TLS between servers in peer clusters. [GH-14556]
xds: Set max_ejection_percent on Envoy's outlier detection to 100% for peered services. [GH-14373]

BUG FIXES:

checks: Do not set interval as timeout value [GH-14619]
checks: If set, use proxy address for automatically added sidecar check instead of service address. [GH-14433]
cli: Fix Consul kv CLI 'GET' flags 'keys' and 'recurse' to be set together [GH-13493]
metrics: Add duplicate metrics that have only a single ""consul_"" prefix for all existing metrics with double (""consul_consul_"") prefix, with the intent to standardize on single prefixes. [GH-14475]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic.
","1.14.0-beta1 (September 29, 2022)
BREAKING CHANGES:
config: Add new ports.grpc_tls configuration option.
Introduce a new port to better separate TLS config from the existing ports.grpc config.
The new ports.grpc_tls only supports TLS encrypted communication.
The existing ports.grpc currently supports both plain-text and tls communication, but tls support will be removed in a future release. [GH-14294]
xds: Convert service mesh failover to use Envoy's aggregate clusters. This
changes the names of some Envoy dynamic HTTP metrics. [GH-14178]
FEATURES:
http: Add new get-or-empty operation to the txn api. Refer to the API docs for more information. [GH-14474]
peering: Add support to failover to services running on cluster peers. [GH-14396]
peering: Add support to redirect to services running on cluster peers with service resolvers. [GH-14445]
ui: Added support for central config merging [GH-14604]
ui: Detect a TokenSecretID cookie and passthrough to localStorage [GH-14495]
ui: Use withCredentials for all HTTP API requests [GH-14343]
xds: servers will limit the number of concurrent xDS streams they can handle to balance the load across all servers [GH-14397]
IMPROVEMENTS:
agent/hcp: add initial HashiCorp Cloud Platform integration [GH-14723]
api: Add filtering support to Catalog's List Services (v1/catalog/services) [GH-11742]
api: Increase max number of operations inside a transaction for requests to /v1/txn (128) [GH-14599]
config-entry: Validate that service-resolver Failovers and Redirects only
specify Partition and Namespace on Consul Enterprise. This prevents scenarios
where OSS Consul would save service-resolvers that require Consul Enterprise. [GH-14162]
dns: (Enterprise Only) All enterprise locality labels are now optional in DNS lookups. For example, service lookups support the following format: .].service[..ns][..ap][..dc]`. [GH-14679]
metrics: Service RPC calls less than 1ms are now emitted as a decimal number. [GH-12905]
peering: adds an internally managed server certificate for automatic TLS between servers in peer clusters. [GH-14556]
xds: Set max_ejection_percent on Envoy's outlier detection to 100% for peered services. [GH-14373]
BUG FIXES:
checks: Do not set interval as timeout value [GH-14619]
checks: If set, use proxy address for automatically added sidecar check instead of service address. [GH-14433]
cli: Fix Consul kv CLI 'GET' flags 'keys' and 'recurse' to be set together [GH-13493]
metrics: Add duplicate metrics that have only a single ""consul_"" prefix for all existing metrics with double (""consul_consul_"") prefix, with the intent to standardize on single prefixes. [GH-14475]
snapshot-agent: (Enterprise only) Fix a bug when a session is not found in Consul, which leads the agent to panic."
24,"1.11.10 (September 22, 2022)
BUG FIXES:

kvs: Fixed a bug where query options were not being applied to KVS.Get RPC operations. [GH-13344]
","1.11.10 (September 22, 2022)
BUG FIXES:
kvs: Fixed a bug where query options were not being applied to KVS.Get RPC operations. [GH-13344]"
25,"1.13.2 (September 20, 2022)
SECURITY:

auto-config: Added input validation for auto-config JWT authorization checks. Prior to this change, it was possible for malicious actors to construct requests which incorrectly pass custom JWT claim validation for the AutoConfig.InitialConfiguration endpoint. Now, only a subset of characters are allowed for the input before evaluating the bexpr. [GH-14577]
connect: Added URI length checks to ConnectCA CSR requests. Prior to this change, it was possible for a malicious actor to designate multiple SAN URI values in a call to the ConnectCA.Sign endpoint. The endpoint now only allows for exactly one SAN URI to be specified. [GH-14579]

FEATURES:

cli: Adds new subcommands for peering workflows. Refer to the CLI docs for more information. [GH-14423]
connect: Server address changes are streamed to peers [GH-14285]
service-defaults: Added support for local_request_timeout_ms and
local_connect_timeout_ms in servicedefaults config entry [GH-14395]

IMPROVEMENTS:

connect: Bump latest Envoy to 1.23.1 in test matrix [GH-14573]
connect: expose new tracing configuration on envoy [GH-13998]
envoy: adds additional Envoy outlier ejection parameters to passive health check configurations. [GH-14238]
metrics: add labels of segment, partition, network area, network (lan or wan) to serf and memberlist metrics [GH-14161]
peering: Validate peering tokens for server name conflicts [GH-14563]
snapshot agent: (Enterprise only) Add support for path-based addressing when using s3 backend.
ui: Reuse connections for requests to /v1/internal/ui/metrics-proxy/ [GH-14521]

BUG FIXES:

agent: Fixes an issue where an agent that fails to start due to bad addresses won't clean up any existing listeners [GH-14081]
api: Fix a breaking change caused by renaming QueryDatacenterOptions to
QueryFailoverOptions. This adds QueryDatacenterOptions back as an alias to
QueryFailoverOptions and marks it as deprecated. [GH-14378]
ca: Fixed a bug with the Vault CA provider where the intermediate PKI mount and leaf cert role were not being updated when the CA configuration was changed. [GH-14516]
cli: When launching a sidecar proxy with consul connect envoy or consul connect proxy, the -sidecar-for service ID argument is now treated as case-insensitive. [GH-14034]
connect: Fix issue where auto_config and auto_encrypt could unintentionally enable TLS for gRPC xDS connections. [GH-14269]
connect: Fixed a bug where old root CAs would be removed from the primary datacenter after switching providers and restarting the cluster. [GH-14598]
connect: Fixed an issue where intermediate certificates could build up in the root CA because they were never being pruned after expiring. [GH-14429]
connect: Fixed some spurious issues during peering establishment when a follower is dialed [GH-14119]
envoy: validate name before deleting proxy default configurations. [GH-14290]
peering: Fix issue preventing deletion and recreation of peerings in TERMINATED state. [GH-14364]
rpc: Adds max jitter to client deadlines to prevent i/o deadline errors on blocking queries [GH-14233]
tls: undo breaking change that prevented setting TLS for gRPC when using config flags available in Consul v1.11. [GH-14668]
ui: Removed Overview page from HCP instalations [GH-14606]
","1.13.2 (September 20, 2022)
SECURITY:
auto-config: Added input validation for auto-config JWT authorization checks. Prior to this change, it was possible for malicious actors to construct requests which incorrectly pass custom JWT claim validation for the AutoConfig.InitialConfiguration endpoint. Now, only a subset of characters are allowed for the input before evaluating the bexpr. [GH-14577]
connect: Added URI length checks to ConnectCA CSR requests. Prior to this change, it was possible for a malicious actor to designate multiple SAN URI values in a call to the ConnectCA.Sign endpoint. The endpoint now only allows for exactly one SAN URI to be specified. [GH-14579]
FEATURES:
cli: Adds new subcommands for peering workflows. Refer to the CLI docs for more information. [GH-14423]
connect: Server address changes are streamed to peers [GH-14285]
service-defaults: Added support for local_request_timeout_ms and
local_connect_timeout_ms in servicedefaults config entry [GH-14395]
IMPROVEMENTS:
connect: Bump latest Envoy to 1.23.1 in test matrix [GH-14573]
connect: expose new tracing configuration on envoy [GH-13998]
envoy: adds additional Envoy outlier ejection parameters to passive health check configurations. [GH-14238]
metrics: add labels of segment, partition, network area, network (lan or wan) to serf and memberlist metrics [GH-14161]
peering: Validate peering tokens for server name conflicts [GH-14563]
snapshot agent: (Enterprise only) Add support for path-based addressing when using s3 backend.
ui: Reuse connections for requests to /v1/internal/ui/metrics-proxy/ [GH-14521]
BUG FIXES:
agent: Fixes an issue where an agent that fails to start due to bad addresses won't clean up any existing listeners [GH-14081]
api: Fix a breaking change caused by renaming QueryDatacenterOptions to
QueryFailoverOptions. This adds QueryDatacenterOptions back as an alias to
QueryFailoverOptions and marks it as deprecated. [GH-14378]
ca: Fixed a bug with the Vault CA provider where the intermediate PKI mount and leaf cert role were not being updated when the CA configuration was changed. [GH-14516]
cli: When launching a sidecar proxy with consul connect envoy or consul connect proxy, the -sidecar-for service ID argument is now treated as case-insensitive. [GH-14034]
connect: Fix issue where auto_config and auto_encrypt could unintentionally enable TLS for gRPC xDS connections. [GH-14269]
connect: Fixed a bug where old root CAs would be removed from the primary datacenter after switching providers and restarting the cluster. [GH-14598]
connect: Fixed an issue where intermediate certificates could build up in the root CA because they were never being pruned after expiring. [GH-14429]
connect: Fixed some spurious issues during peering establishment when a follower is dialed [GH-14119]
envoy: validate name before deleting proxy default configurations. [GH-14290]
peering: Fix issue preventing deletion and recreation of peerings in TERMINATED state. [GH-14364]
rpc: Adds max jitter to client deadlines to prevent i/o deadline errors on blocking queries [GH-14233]
tls: undo breaking change that prevented setting TLS for gRPC when using config flags available in Consul v1.11. [GH-14668]
ui: Removed Overview page from HCP instalations [GH-14606]"
26,"1.12.5 (September 20, 2022)
SECURITY:

auto-config: Added input validation for auto-config JWT authorization checks. Prior to this change, it was possible for malicious actors to construct requests which incorrectly pass custom JWT claim validation for the AutoConfig.InitialConfiguration endpoint. Now, only a subset of characters are allowed for the input before evaluating the bexpr. [GH-14577]
connect: Added URI length checks to ConnectCA CSR requests. Prior to this change, it was possible for a malicious actor to designate multiple SAN URI values in a call to the ConnectCA.Sign endpoint. The endpoint now only allows for exactly one SAN URI to be specified. [GH-14579]

IMPROVEMENTS:

envoy: adds additional Envoy outlier ejection parameters to passive health check configurations. [GH-14238]
metrics: add labels of segment, partition, network area, network (lan or wan) to serf and memberlist metrics [GH-14161]
snapshot agent: (Enterprise only) Add support for path-based addressing when using s3 backend.
ui: Reuse connections for requests to /v1/internal/ui/metrics-proxy/ [GH-14521]

BUG FIXES:

ca: Fixed a bug with the Vault CA provider where the intermediate PKI mount and leaf cert role were not being updated when the CA configuration was changed. [GH-14516]
cli: When launching a sidecar proxy with consul connect envoy or consul connect proxy, the -sidecar-for service ID argument is now treated as case-insensitive. [GH-14034]
connect: Fixed a bug where old root CAs would be removed from the primary datacenter after switching providers and restarting the cluster. [GH-14598]
connect: Fixed an issue where intermediate certificates could build up in the root CA because they were never being pruned after expiring. [GH-14429]
envoy: validate name before deleting proxy default configurations. [GH-14290]
rpc: Adds max jitter to client deadlines to prevent i/o deadline errors on blocking queries [GH-14233]
ui: Removed Overview page from HCP instalations [GH-14606]
","1.12.5 (September 20, 2022)
SECURITY:
auto-config: Added input validation for auto-config JWT authorization checks. Prior to this change, it was possible for malicious actors to construct requests which incorrectly pass custom JWT claim validation for the AutoConfig.InitialConfiguration endpoint. Now, only a subset of characters are allowed for the input before evaluating the bexpr. [GH-14577]
connect: Added URI length checks to ConnectCA CSR requests. Prior to this change, it was possible for a malicious actor to designate multiple SAN URI values in a call to the ConnectCA.Sign endpoint. The endpoint now only allows for exactly one SAN URI to be specified. [GH-14579]
IMPROVEMENTS:
envoy: adds additional Envoy outlier ejection parameters to passive health check configurations. [GH-14238]
metrics: add labels of segment, partition, network area, network (lan or wan) to serf and memberlist metrics [GH-14161]
snapshot agent: (Enterprise only) Add support for path-based addressing when using s3 backend.
ui: Reuse connections for requests to /v1/internal/ui/metrics-proxy/ [GH-14521]
BUG FIXES:
ca: Fixed a bug with the Vault CA provider where the intermediate PKI mount and leaf cert role were not being updated when the CA configuration was changed. [GH-14516]
cli: When launching a sidecar proxy with consul connect envoy or consul connect proxy, the -sidecar-for service ID argument is now treated as case-insensitive. [GH-14034]
connect: Fixed a bug where old root CAs would be removed from the primary datacenter after switching providers and restarting the cluster. [GH-14598]
connect: Fixed an issue where intermediate certificates could build up in the root CA because they were never being pruned after expiring. [GH-14429]
envoy: validate name before deleting proxy default configurations. [GH-14290]
rpc: Adds max jitter to client deadlines to prevent i/o deadline errors on blocking queries [GH-14233]
ui: Removed Overview page from HCP instalations [GH-14606]"
27,"1.11.9 (September 20, 2022)
SECURITY:

auto-config: Added input validation for auto-config JWT authorization checks. Prior to this change, it was possible for malicious actors to construct requests which incorrectly pass custom JWT claim validation for the AutoConfig.InitialConfiguration endpoint. Now, only a subset of characters are allowed for the input before evaluating the bexpr. [GH-14577]
connect: Added URI length checks to ConnectCA CSR requests. Prior to this change, it was possible for a malicious actor to designate multiple SAN URI values in a call to the ConnectCA.Sign endpoint. The endpoint now only allows for exactly one SAN URI to be specified. [GH-14579]

IMPROVEMENTS:

metrics: add labels of segment, partition, network area, network (lan or wan) to serf and memberlist metrics [GH-14161]
snapshot agent: (Enterprise only) Add support for path-based addressing when using s3 backend.

BUG FIXES:

ca: Fixed a bug with the Vault CA provider where the intermediate PKI mount and leaf cert role were not being updated when the CA configuration was changed. [GH-14516]
cli: When launching a sidecar proxy with consul connect envoy or consul connect proxy, the -sidecar-for service ID argument is now treated as case-insensitive. [GH-14034]
connect: Fixed a bug where old root CAs would be removed from the primary datacenter after switching providers and restarting the cluster. [GH-14598]
connect: Fixed an issue where intermediate certificates could build up in the root CA because they were never being pruned after expiring. [GH-14429]
rpc: Adds a deadline to client RPC calls, so that streams will no longer hang
indefinitely in unstable network conditions. [GH-8504] [GH-11500]
rpc: Adds max jitter to client deadlines to prevent i/o deadline errors on blocking queries [GH-14233]
","1.11.9 (September 20, 2022)
SECURITY:
auto-config: Added input validation for auto-config JWT authorization checks. Prior to this change, it was possible for malicious actors to construct requests which incorrectly pass custom JWT claim validation for the AutoConfig.InitialConfiguration endpoint. Now, only a subset of characters are allowed for the input before evaluating the bexpr. [GH-14577]
connect: Added URI length checks to ConnectCA CSR requests. Prior to this change, it was possible for a malicious actor to designate multiple SAN URI values in a call to the ConnectCA.Sign endpoint. The endpoint now only allows for exactly one SAN URI to be specified. [GH-14579]
IMPROVEMENTS:
metrics: add labels of segment, partition, network area, network (lan or wan) to serf and memberlist metrics [GH-14161]
snapshot agent: (Enterprise only) Add support for path-based addressing when using s3 backend.
BUG FIXES:
ca: Fixed a bug with the Vault CA provider where the intermediate PKI mount and leaf cert role were not being updated when the CA configuration was changed. [GH-14516]
cli: When launching a sidecar proxy with consul connect envoy or consul connect proxy, the -sidecar-for service ID argument is now treated as case-insensitive. [GH-14034]
connect: Fixed a bug where old root CAs would be removed from the primary datacenter after switching providers and restarting the cluster. [GH-14598]
connect: Fixed an issue where intermediate certificates could build up in the root CA because they were never being pruned after expiring. [GH-14429]
rpc: Adds a deadline to client RPC calls, so that streams will no longer hang
indefinitely in unstable network conditions. [GH-8504] [GH-11500]
rpc: Adds max jitter to client deadlines to prevent i/o deadline errors on blocking queries [GH-14233]"
28,"1.13.1 (August 12, 2022)
BUG FIXES:

agent: Fixed a compatibility issue when restoring snapshots from pre-1.13.0 versions of Consul [GH-14107] [GH-14149]
connect: Fixed some spurious issues during peering establishment when a follower is dialed [GH-14119]
","1.13.1 (August 12, 2022)
BUG FIXES:
agent: Fixed a compatibility issue when restoring snapshots from pre-1.13.0 versions of Consul [GH-14107] [GH-14149]
connect: Fixed some spurious issues during peering establishment when a follower is dialed [GH-14119]"
29,"1.12.4 (August 11, 2022)
BUG FIXES:

cli: when acl token read is used with the -self and -expanded flags, return an error instead of panicking [GH-13787]
connect: Fixed a goroutine/memory leak that would occur when using the ingress gateway. [GH-13847]
connect: Ingress gateways with a wildcard service entry should no longer pick up non-connect services as upstreams.
connect: Terminating gateways with a wildcard service entry should no longer pick up connect services as upstreams. [GH-13958]
ui: Fixes an issue where client side validation errors were not showing in certain areas [GH-14021]
","1.12.4 (August 11, 2022)
BUG FIXES:
cli: when acl token read is used with the -self and -expanded flags, return an error instead of panicking [GH-13787]
connect: Fixed a goroutine/memory leak that would occur when using the ingress gateway. [GH-13847]
connect: Ingress gateways with a wildcard service entry should no longer pick up non-connect services as upstreams.
connect: Terminating gateways with a wildcard service entry should no longer pick up connect services as upstreams. [GH-13958]
ui: Fixes an issue where client side validation errors were not showing in certain areas [GH-14021]"
30,"1.11.8 (August 11, 2022)
BUG FIXES:

connect: Fixed a goroutine/memory leak that would occur when using the ingress gateway. [GH-13847]
connect: Ingress gateways with a wildcard service entry should no longer pick up non-connect services as upstreams.
connect: Terminating gateways with a wildcard service entry should no longer pick up connect services as upstreams. [GH-13958]
","1.11.8 (August 11, 2022)
BUG FIXES:
connect: Fixed a goroutine/memory leak that would occur when using the ingress gateway. [GH-13847]
connect: Ingress gateways with a wildcard service entry should no longer pick up non-connect services as upstreams.
connect: Terminating gateways with a wildcard service entry should no longer pick up connect services as upstreams. [GH-13958]"
31,"1.13.0 (August 9, 2022)
BREAKING CHANGES:

config-entry: Exporting a specific service name across all namespace is invalid.
connect: Removes support for Envoy 1.19 [GH-13807]
telemetry: config flag telemetry { disable_compat_1.9 = (true|false) } has been removed. Before upgrading you should remove this flag from your config if the flag is being used. [GH-13532]

FEATURES:

Cluster Peering (Beta) This version adds a new model to federate Consul clusters for both service mesh and traditional service discovery. Cluster peering allows for service interconnectivity with looser coupling than the existing WAN federation. For more information refer to the cluster peering documentation.
Transparent proxying through terminating gateways This version adds egress traffic control to destinations outside of Consul's catalog, such as APIs on the public internet. Transparent proxies can dial destinations defined in service-defaults and have the traffic routed through terminating gateways. For more information refer to the terminating gateway documentation.
acl: It is now possible to login and logout using the gRPC API [GH-12935]
agent: Added information about build date alongside other version information for Consul. Extended /agent/self endpoint and consul version commands
to report this. Agent also reports build date in log on startup. [GH-13357]
ca: Leaf certificates can now be obtained via the gRPC API: Sign [GH-12787]
checks: add UDP health checks.. [GH-12722]
cli: A new flag for config delete to delete a config entry in a
valid config file, e.g., config delete -filename intention-allow.hcl [GH-13677]
connect: Adds a new destination field to the service-default config entry that allows routing egress traffic
through a terminating gateway in transparent proxy mode without modifying the catalog. [GH-13613]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [GH-12825]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [GH-1717]
grpc: New gRPC service and endpoint to return the list of supported consul dataplane features [GH-12695]
server: broadcast the public grpc port using lan serf and update the consul service in the catalog with the same data [GH-13687]
streaming: Added topic that can be used to consume updates about the list of services in a datacenter [GH-13722]
streaming: Added topics for ingress-gateway, mesh, service-intentions and service-resolver config entry events. [GH-13658]

IMPROVEMENTS:

api: merge-central-config query parameter support added to /catalog/node-services/:node-name API, to view a fully resolved service definition (especially when not written into the catalog that way). [GH-13450]
api: merge-central-config query parameter support added to /catalog/node-services/:node-name API, to view a fully resolved service definition (especially when not written into the catalog that way). [GH-2046]
api: merge-central-config query parameter support added to some catalog and health endpoints to view a fully resolved service definition (especially when not written into the catalog that way). [GH-13001]
api: add the ability to specify a path prefix for when consul is behind a reverse proxy or API gateway [GH-12914]
catalog: Add per-node indexes to reduce watchset firing for unrelated nodes and services. [GH-12399]
connect: add validation to ensure connect native services have a port or socketpath specified on catalog registration.
This was the only missing piece to ensure all mesh services are validated for a port (or socketpath) specification on catalog registration. [GH-12881]
ui: Add new CopyableCode component and use it in certain pre-existing areas [GH-13686]
acl: Clarify node/service identities must be lowercase [GH-12807]
command: Add support for enabling TLS in the Envoy Prometheus endpoint via the consul connect envoy command.
Adds the -prometheus-ca-file, -prometheus-ca-path, -prometheus-cert-file and -prometheus-key-file flags. [GH-13481]
connect: Add Envoy 1.23.0 to support matrix [GH-13807]
connect: Added a max_inbound_connections setting to service-defaults for limiting the number of concurrent inbound connections to each service instance. [GH-13143]
grpc: Add a new ServerDiscovery.WatchServers gRPC endpoint for being notified when the set of ready servers has changed. [GH-12819]
telemetry: Added consul.raft.thread.main.saturation and consul.raft.thread.fsm.saturation metrics to measure approximate saturation of the Raft goroutines [GH-12865]
ui: removed external dependencies for serving UI assets in favor of Go's native embed capabilities [GH-10996]
ui: upgrade ember-composable-helpers to v5.x [GH-13394]

BUG FIXES:

acl: Fixed a bug where the ACL down policy wasn't being applied on remote errors from the primary datacenter. [GH-12885]
cli: when acl token read is used with the -self and -expanded flags, return an error instead of panicking [GH-13787]
connect: Fixed a goroutine/memory leak that would occur when using the ingress gateway. [GH-13847]
connect: Ingress gateways with a wildcard service entry should no longer pick up non-connect services as upstreams.
connect: Terminating gateways with a wildcard service entry should no longer pick up connect services as upstreams. [GH-13958]
proxycfg: Fixed a minor bug that would cause configuring a terminating gateway to watch too many service resolvers and waste resources doing filtering. [GH-13012]
raft: upgrade to v1.3.8 which fixes a bug where non cluster member can still be able to participate in an election. [GH-12844]
rpc: Adds a deadline to client RPC calls, so that streams will no longer hang
indefinitely in unstable network conditions. [GH-8504] [GH-11500]
serf: upgrade serf to v0.9.8 which fixes a bug that crashes Consul when serf keyrings are listed [GH-13062]
ui: Fixes an issue where client side validation errors were not showing in certain areas [GH-14021]
","1.13.0 (August 9, 2022)
BREAKING CHANGES:
config-entry: Exporting a specific service name across all namespace is invalid.
connect: Removes support for Envoy 1.19 [GH-13807]
telemetry: config flag telemetry { disable_compat_1.9 = (true|false) } has been removed. Before upgrading you should remove this flag from your config if the flag is being used. [GH-13532]
FEATURES:
Cluster Peering (Beta) This version adds a new model to federate Consul clusters for both service mesh and traditional service discovery. Cluster peering allows for service interconnectivity with looser coupling than the existing WAN federation. For more information refer to the cluster peering documentation.
Transparent proxying through terminating gateways This version adds egress traffic control to destinations outside of Consul's catalog, such as APIs on the public internet. Transparent proxies can dial destinations defined in service-defaults and have the traffic routed through terminating gateways. For more information refer to the terminating gateway documentation.
acl: It is now possible to login and logout using the gRPC API [GH-12935]
agent: Added information about build date alongside other version information for Consul. Extended /agent/self endpoint and consul version commands
to report this. Agent also reports build date in log on startup. [GH-13357]
ca: Leaf certificates can now be obtained via the gRPC API: Sign [GH-12787]
checks: add UDP health checks.. [GH-12722]
cli: A new flag for config delete to delete a config entry in a
valid config file, e.g., config delete -filename intention-allow.hcl [GH-13677]
connect: Adds a new destination field to the service-default config entry that allows routing egress traffic
through a terminating gateway in transparent proxy mode without modifying the catalog. [GH-13613]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [GH-12825]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [GH-1717]
grpc: New gRPC service and endpoint to return the list of supported consul dataplane features [GH-12695]
server: broadcast the public grpc port using lan serf and update the consul service in the catalog with the same data [GH-13687]
streaming: Added topic that can be used to consume updates about the list of services in a datacenter [GH-13722]
streaming: Added topics for ingress-gateway, mesh, service-intentions and service-resolver config entry events. [GH-13658]
IMPROVEMENTS:
api: merge-central-config query parameter support added to /catalog/node-services/:node-name API, to view a fully resolved service definition (especially when not written into the catalog that way). [GH-13450]
api: merge-central-config query parameter support added to /catalog/node-services/:node-name API, to view a fully resolved service definition (especially when not written into the catalog that way). [GH-2046]
api: merge-central-config query parameter support added to some catalog and health endpoints to view a fully resolved service definition (especially when not written into the catalog that way). [GH-13001]
api: add the ability to specify a path prefix for when consul is behind a reverse proxy or API gateway [GH-12914]
catalog: Add per-node indexes to reduce watchset firing for unrelated nodes and services. [GH-12399]
connect: add validation to ensure connect native services have a port or socketpath specified on catalog registration.
This was the only missing piece to ensure all mesh services are validated for a port (or socketpath) specification on catalog registration. [GH-12881]
ui: Add new CopyableCode component and use it in certain pre-existing areas [GH-13686]
acl: Clarify node/service identities must be lowercase [GH-12807]
command: Add support for enabling TLS in the Envoy Prometheus endpoint via the consul connect envoy command.
Adds the -prometheus-ca-file, -prometheus-ca-path, -prometheus-cert-file and -prometheus-key-file flags. [GH-13481]
connect: Add Envoy 1.23.0 to support matrix [GH-13807]
connect: Added a max_inbound_connections setting to service-defaults for limiting the number of concurrent inbound connections to each service instance. [GH-13143]
grpc: Add a new ServerDiscovery.WatchServers gRPC endpoint for being notified when the set of ready servers has changed. [GH-12819]
telemetry: Added consul.raft.thread.main.saturation and consul.raft.thread.fsm.saturation metrics to measure approximate saturation of the Raft goroutines [GH-12865]
ui: removed external dependencies for serving UI assets in favor of Go's native embed capabilities [GH-10996]
ui: upgrade ember-composable-helpers to v5.x [GH-13394]
BUG FIXES:
acl: Fixed a bug where the ACL down policy wasn't being applied on remote errors from the primary datacenter. [GH-12885]
cli: when acl token read is used with the -self and -expanded flags, return an error instead of panicking [GH-13787]
connect: Fixed a goroutine/memory leak that would occur when using the ingress gateway. [GH-13847]
connect: Ingress gateways with a wildcard service entry should no longer pick up non-connect services as upstreams.
connect: Terminating gateways with a wildcard service entry should no longer pick up connect services as upstreams. [GH-13958]
proxycfg: Fixed a minor bug that would cause configuring a terminating gateway to watch too many service resolvers and waste resources doing filtering. [GH-13012]
raft: upgrade to v1.3.8 which fixes a bug where non cluster member can still be able to participate in an election. [GH-12844]
rpc: Adds a deadline to client RPC calls, so that streams will no longer hang
indefinitely in unstable network conditions. [GH-8504] [GH-11500]
serf: upgrade serf to v0.9.8 which fixes a bug that crashes Consul when serf keyrings are listed [GH-13062]
ui: Fixes an issue where client side validation errors were not showing in certain areas [GH-14021]"
32,"1.12.3 (July 13 2022)
IMPROVEMENTS:

Support Vault namespaces in Connect CA by adding RootPKINamespace and
IntermediatePKINamespace fields to the config. [GH-12904]
connect: Update Envoy support matrix to latest patch releases (1.22.2, 1.21.3, 1.20.4, 1.19.5) [GH-13431]
dns: Added support for specifying admin partition in node lookups. [GH-13421]
telemetry: Added a consul.server.isLeader metric to track if a server is a leader or not. [GH-13304]

BUG FIXES:

agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [GH-13256]
deps: Update go-grpc/grpc, resolving connection memory leak [GH-13051]
fix a bug that caused an error when creating grpc or http2 ingress gateway listeners with multiple services [GH-13127]
ui: Fix incorrect text on certain page empty states [GH-13409]
xds: Fix a bug that resulted in Lambda services not using the payload-passthrough option as expected. [GH-13607]
xds: Fix a bug where terminating gateway upstream clusters weren't configured properly when the service protocol was http2. [GH-13699]
","1.12.3 (July 13 2022)
IMPROVEMENTS:
Support Vault namespaces in Connect CA by adding RootPKINamespace and
IntermediatePKINamespace fields to the config. [GH-12904]
connect: Update Envoy support matrix to latest patch releases (1.22.2, 1.21.3, 1.20.4, 1.19.5) [GH-13431]
dns: Added support for specifying admin partition in node lookups. [GH-13421]
telemetry: Added a consul.server.isLeader metric to track if a server is a leader or not. [GH-13304]
BUG FIXES:
agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [GH-13256]
deps: Update go-grpc/grpc, resolving connection memory leak [GH-13051]
fix a bug that caused an error when creating grpc or http2 ingress gateway listeners with multiple services [GH-13127]
ui: Fix incorrect text on certain page empty states [GH-13409]
xds: Fix a bug that resulted in Lambda services not using the payload-passthrough option as expected. [GH-13607]
xds: Fix a bug where terminating gateway upstream clusters weren't configured properly when the service protocol was http2. [GH-13699]"
33,"1.11.7 (July 13, 2022)
IMPROVEMENTS:

connect: Update supported Envoy versions to 1.20.4, 1.19.5, 1.18.6, 1.17.4 [GH-13434]

BUG FIXES:

agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [GH-13265]
fix a bug that caused an error when creating grpc or http2 ingress gateway listeners with multiple services [GH-13127]
xds: Fix a bug where terminating gateway upstream clusters weren't configured properly when the service protocol was http2. [GH-13699]
","1.11.7 (July 13, 2022)
IMPROVEMENTS:
connect: Update supported Envoy versions to 1.20.4, 1.19.5, 1.18.6, 1.17.4 [GH-13434]
BUG FIXES:
agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [GH-13265]
fix a bug that caused an error when creating grpc or http2 ingress gateway listeners with multiple services [GH-13127]
xds: Fix a bug where terminating gateway upstream clusters weren't configured properly when the service protocol was http2. [GH-13699]"
34,"1.10.12 (July 13, 2022)
BUG FIXES:

agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [GH-13264]
fix a bug that caused an error when creating grpc or http2 ingress gateway listeners with multiple services [GH-13127]
","1.10.12 (July 13, 2022)
BUG FIXES:
agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [GH-13264]
fix a bug that caused an error when creating grpc or http2 ingress gateway listeners with multiple services [GH-13127]"
35,"1.13.0-alpha2 (June 21, 2022)
IMPROVEMENTS:

api: merge-central-config query parameter support added to /catalog/node-services/:node-name API, to view a fully resolved service definition (especially when not written into the catalog that way). [GH-13450]
connect: Update Envoy support matrix to latest patch releases (1.22.2, 1.21.3, 1.20.4, 1.19.5) [GH-13431]

BUG FIXES:

ui: Fix incorrect text on certain page empty states [GH-13409]
","1.13.0-alpha2 (June 21, 2022)
IMPROVEMENTS:
api: merge-central-config query parameter support added to /catalog/node-services/:node-name API, to view a fully resolved service definition (especially when not written into the catalog that way). [GH-13450]
connect: Update Envoy support matrix to latest patch releases (1.22.2, 1.21.3, 1.20.4, 1.19.5) [GH-13431]
BUG FIXES:
ui: Fix incorrect text on certain page empty states [GH-13409]"
36,"1.13.0-alpha1 (June 15, 2022)
BREAKING CHANGES:

config-entry: Exporting a specific service name across all namespace is invalid.

FEATURES:

acl: It is now possible to login and logout using the gRPC API [GH-12935]
agent: Added information about build date alongside other version information for Consul. Extended /agent/self endpoint and consul version commands
to report this. Agent also reports build date in log on startup. [GH-13357]
ca: Leaf certificates can now be obtained via the gRPC API: Sign [GH-12787]
checks: add UDP health checks.. [GH-12722]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [GH-12825]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [GH-1717]
grpc: New gRPC service and endpoint to return the list of supported consul dataplane features [GH-12695]

IMPROVEMENTS:

api: merge-central-config query parameter support added to some catalog and health endpoints to view a fully resolved service definition (especially when not written into the catalog that way). [GH-13001]
api: add the ability to specify a path prefix for when consul is behind a reverse proxy or API gateway [GH-12914]
connect: add validation to ensure connect native services have a port or socketpath specified on catalog registration.
This was the only missing piece to ensure all mesh services are validated for a port (or socketpath) specification on catalog registration. [GH-12881]
Support Vault namespaces in Connect CA by adding RootPKINamespace and
IntermediatePKINamespace fields to the config. [GH-12904]
acl: Clarify node/service identities must be lowercase [GH-12807]
connect: Added a max_inbound_connections setting to service-defaults for limiting the number of concurrent inbound connections to each service instance. [GH-13143]
dns: Added support for specifying admin partition in node lookups. [GH-13421]
grpc: Add a new ServerDiscovery.WatchServers gRPC endpoint for being notified when the set of ready servers has changed. [GH-12819]
telemetry: Added consul.raft.thread.main.saturation and consul.raft.thread.fsm.saturation metrics to measure approximate saturation of the Raft goroutines [GH-12865]
telemetry: Added a consul.server.isLeader metric to track if a server is a leader or not. [GH-13304]
ui: removed external dependencies for serving UI assets in favor of Go's native embed capabilities [GH-10996]
ui: upgrade ember-composable-helpers to v5.x [GH-13394]

BUG FIXES:

acl: Fixed a bug where the ACL down policy wasn't being applied on remote errors from the primary datacenter. [GH-12885]
agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [GH-13256]
deps: Update go-grpc/grpc, resolving connection memory leak [GH-13051]
fix a bug that caused an error when creating grpc or http2 ingress gateway listeners with multiple services [GH-13127]
proxycfg: Fixed a minor bug that would cause configuring a terminating gateway to watch too many service resolvers and waste resources doing filtering. [GH-13012]
raft: upgrade to v1.3.8 which fixes a bug where non cluster member can still be able to participate in an election. [GH-12844]
serf: upgrade serf to v0.9.8 which fixes a bug that crashes Consul when serf keyrings are listed [GH-13062]
","1.13.0-alpha1 (June 15, 2022)
BREAKING CHANGES:
config-entry: Exporting a specific service name across all namespace is invalid.
FEATURES:
acl: It is now possible to login and logout using the gRPC API [GH-12935]
agent: Added information about build date alongside other version information for Consul. Extended /agent/self endpoint and consul version commands
to report this. Agent also reports build date in log on startup. [GH-13357]
ca: Leaf certificates can now be obtained via the gRPC API: Sign [GH-12787]
checks: add UDP health checks.. [GH-12722]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [GH-12825]
grpc: New gRPC endpoint to return envoy bootstrap parameters. [GH-1717]
grpc: New gRPC service and endpoint to return the list of supported consul dataplane features [GH-12695]
IMPROVEMENTS:
api: merge-central-config query parameter support added to some catalog and health endpoints to view a fully resolved service definition (especially when not written into the catalog that way). [GH-13001]
api: add the ability to specify a path prefix for when consul is behind a reverse proxy or API gateway [GH-12914]
connect: add validation to ensure connect native services have a port or socketpath specified on catalog registration.
This was the only missing piece to ensure all mesh services are validated for a port (or socketpath) specification on catalog registration. [GH-12881]
Support Vault namespaces in Connect CA by adding RootPKINamespace and
IntermediatePKINamespace fields to the config. [GH-12904]
acl: Clarify node/service identities must be lowercase [GH-12807]
connect: Added a max_inbound_connections setting to service-defaults for limiting the number of concurrent inbound connections to each service instance. [GH-13143]
dns: Added support for specifying admin partition in node lookups. [GH-13421]
grpc: Add a new ServerDiscovery.WatchServers gRPC endpoint for being notified when the set of ready servers has changed. [GH-12819]
telemetry: Added consul.raft.thread.main.saturation and consul.raft.thread.fsm.saturation metrics to measure approximate saturation of the Raft goroutines [GH-12865]
telemetry: Added a consul.server.isLeader metric to track if a server is a leader or not. [GH-13304]
ui: removed external dependencies for serving UI assets in favor of Go's native embed capabilities [GH-10996]
ui: upgrade ember-composable-helpers to v5.x [GH-13394]
BUG FIXES:
acl: Fixed a bug where the ACL down policy wasn't being applied on remote errors from the primary datacenter. [GH-12885]
agent: Fixed a bug in HTTP handlers where URLs were being decoded twice [GH-13256]
deps: Update go-grpc/grpc, resolving connection memory leak [GH-13051]
fix a bug that caused an error when creating grpc or http2 ingress gateway listeners with multiple services [GH-13127]
proxycfg: Fixed a minor bug that would cause configuring a terminating gateway to watch too many service resolvers and waste resources doing filtering. [GH-13012]
raft: upgrade to v1.3.8 which fixes a bug where non cluster member can still be able to participate in an election. [GH-12844]
serf: upgrade serf to v0.9.8 which fixes a bug that crashes Consul when serf keyrings are listed [GH-13062]"
37,"1.12.2 (June 3, 2022)
BUG FIXES:

kvs: Fixed a bug where query options were not being applied to KVS.Get RPC operations. [GH-13344]
","1.12.2 (June 3, 2022)
BUG FIXES:
kvs: Fixed a bug where query options were not being applied to KVS.Get RPC operations. [GH-13344]"
38,"1.12.1 (May 25, 2022)
FEATURES:

xds: Add the ability to invoke AWS Lambdas through sidecar proxies. [GH-12956]

IMPROVEMENTS:

config: introduce telemetry.retry_failed_connection in agent configuration to
retry on failed connection to any telemetry backend. This prevents the agent from
exiting if the given DogStatsD DNS name is unresolvable, for example. [GH-13091]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
xds: Envoy now inserts x-forwarded-client-cert for incoming proxy connections [GH-12878]

BUG FIXES:

Fix a bug when configuring an add_headers directive named Host the header is not set for v1/internal/ui/metrics-proxy/ endpoint. [GH-13071]
api: Fix a bug that causes partition to be ignored when creating a namespace [GH-12845]
api: agent/self now returns version with +ent suffix for Enterprise Consul [GH-12961]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
ca: fix a bug that caused a non blocking leaf cert query after a blocking leaf cert query to block [GH-12820]
config: fix backwards compatibility bug where setting the (deprecated) top-level verify_incoming option would enable TLS client authentication on the gRPC port [GH-13118]
health: ensure /v1/health/service/:service endpoint returns the most recent results when a filter is used with streaming #12640 [GH-12640]
rpc: Adds a deadline to client RPC calls, so that streams will no longer hang
indefinitely in unstable network conditions. [GH-8504] [GH-11500]
snapshot-agent: (Enterprise only) Fix a bug where providing the ACL token to the snapshot agent via a CLI or ENV variable without a license configured results in an error during license auto-retrieval.
ui: Re-instate '...' icon for row actions [GH-13183]

NOTES:

ci: change action to pull v1 instead of main [GH-12846]
","1.12.1 (May 25, 2022)
FEATURES:
xds: Add the ability to invoke AWS Lambdas through sidecar proxies. [GH-12956]
IMPROVEMENTS:
config: introduce telemetry.retry_failed_connection in agent configuration to
retry on failed connection to any telemetry backend. This prevents the agent from
exiting if the given DogStatsD DNS name is unresolvable, for example. [GH-13091]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
xds: Envoy now inserts x-forwarded-client-cert for incoming proxy connections [GH-12878]
BUG FIXES:
Fix a bug when configuring an add_headers directive named Host the header is not set for v1/internal/ui/metrics-proxy/ endpoint. [GH-13071]
api: Fix a bug that causes partition to be ignored when creating a namespace [GH-12845]
api: agent/self now returns version with +ent suffix for Enterprise Consul [GH-12961]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
ca: fix a bug that caused a non blocking leaf cert query after a blocking leaf cert query to block [GH-12820]
config: fix backwards compatibility bug where setting the (deprecated) top-level verify_incoming option would enable TLS client authentication on the gRPC port [GH-13118]
health: ensure /v1/health/service/:service endpoint returns the most recent results when a filter is used with streaming #12640 [GH-12640]
rpc: Adds a deadline to client RPC calls, so that streams will no longer hang
indefinitely in unstable network conditions. [GH-8504] [GH-11500]
snapshot-agent: (Enterprise only) Fix a bug where providing the ACL token to the snapshot agent via a CLI or ENV variable without a license configured results in an error during license auto-retrieval.
ui: Re-instate '...' icon for row actions [GH-13183]
NOTES:
ci: change action to pull v1 instead of main [GH-12846]"
39,"1.11.6 (May 25, 2022)
IMPROVEMENTS:

sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids

BUG FIXES:

Fix a bug when configuring an add_headers directive named Host the header is not set for v1/internal/ui/metrics-proxy/ endpoint. [GH-13071]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
ca: fix a bug that caused a non blocking leaf cert query after a blocking leaf cert query to block [GH-12820]
health: ensure /v1/health/service/:service endpoint returns the most recent results when a filter is used with streaming #12640 [GH-12640]
snapshot-agent: (Enterprise only) Fix a bug where providing the ACL token to the snapshot agent via a CLI or ENV variable without a license configured results in an error during license auto-retrieval.

NOTES:

ci: change action to pull v1 instead of main [GH-12846]
","1.11.6 (May 25, 2022)
IMPROVEMENTS:
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
BUG FIXES:
Fix a bug when configuring an add_headers directive named Host the header is not set for v1/internal/ui/metrics-proxy/ endpoint. [GH-13071]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
ca: fix a bug that caused a non blocking leaf cert query after a blocking leaf cert query to block [GH-12820]
health: ensure /v1/health/service/:service endpoint returns the most recent results when a filter is used with streaming #12640 [GH-12640]
snapshot-agent: (Enterprise only) Fix a bug where providing the ACL token to the snapshot agent via a CLI or ENV variable without a license configured results in an error during license auto-retrieval.
NOTES:
ci: change action to pull v1 instead of main [GH-12846]"
40,"1.10.11 (May 25, 2022)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names.

IMPROVEMENTS:

sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids

BUG FIXES:

Fix a bug when configuring an add_headers directive named Host the header is not set for v1/internal/ui/metrics-proxy/ endpoint. [GH-13071]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
ca: fix a bug that caused a non blocking leaf cert query after a locking leaf cert query to block [GH-12820]
health: ensure /v1/health/service/:service endpoint returns the most recent results when a filter is used with streaming #12640 [GH-12640]
snapshot-agent: (Enterprise only) Fix a bug where providing the ACL token to the snapshot agent via a CLI or ENV variable without a license configured results in an error during license auto-retrieval.

NOTES:

ci: change action to pull v1 instead of main [GH-12846]
","1.10.11 (May 25, 2022)
SECURITY:
agent: Use SHA256 instead of MD5 to generate persistence file names.
IMPROVEMENTS:
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
BUG FIXES:
Fix a bug when configuring an add_headers directive named Host the header is not set for v1/internal/ui/metrics-proxy/ endpoint. [GH-13071]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
ca: fix a bug that caused a non blocking leaf cert query after a locking leaf cert query to block [GH-12820]
health: ensure /v1/health/service/:service endpoint returns the most recent results when a filter is used with streaming #12640 [GH-12640]
snapshot-agent: (Enterprise only) Fix a bug where providing the ACL token to the snapshot agent via a CLI or ENV variable without a license configured results in an error during license auto-retrieval.
NOTES:
ci: change action to pull v1 instead of main [GH-12846]"
41,"1.12.0 (April 20, 2022)
BREAKING CHANGES:

connect: Removes support for Envoy 1.17.4 [GH-12777]
connect: Removes support for Envoy 1.18.6 [GH-12805]
sdk: several changes to the testutil configuration structs (removed ACLMasterToken, renamed Master to InitialManagement, and AgentMaster to AgentRecovery) [GH-11827]
telemetry: the disable_compat_1.9 option now defaults to true. 1.9 style consul.http... metrics can still be enabled by setting disable_compat_1.9 = false. However, we will remove these metrics in 1.13. [GH-12675]

FEATURES:

acl: Add token information to PermissionDeniedErrors [GH-12567]
acl: Added an AWS IAM auth method that allows authenticating to Consul using AWS IAM identities [GH-12583]
ca: Root certificates can now be consumed from a gRPC streaming endpoint: WatchRoots [GH-12678]
cli: The token read command now supports the -expanded flag to display detailed role and policy information for the token. [GH-12670]
config: automatically reload config when a file changes using the auto-reload-config CLI flag or auto_reload_config config option. [GH-12329]
server: Ensure that service-defaults Meta is returned with the response to the ConfigEntry.ResolveServiceConfig RPC. [GH-12529]
server: discovery chains now include a response field named ""Default"" to indicate if they were not constructed from any service-resolver, service-splitter, or service-router config entries [GH-12511]
server: ensure that service-defaults meta is incorporated into the discovery chain response [GH-12511]
tls: it is now possible to configure TLS differently for each of Consul's listeners (i.e. HTTPS, gRPC and the internal multiplexed RPC listener) using the tls stanza [GH-12504]
ui: Added support for AWS IAM Auth Methods [GH-12786]
ui: Support connect-native services in the Topology view. [GH-12098]
xds: Add the ability to invoke AWS Lambdas through terminating gateways. [GH-12681]
xds: adding control of the mesh-wide min/max TLS versions and cipher suites from the mesh config entry [GH-12601]

IMPROVEMENTS:

Refactor ACL denied error code and start improving error details [GH-12308]
acl: Provide fuller detail in the error messsage when an ACL denies access. [GH-12470]
agent: Allow client agents to perform keyring operations [GH-12442]
agent: add additional validation to TLS config [GH-12522]
agent: add support for specifying TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 and TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 cipher suites [GH-12522]
agent: bump default min version for connections to TLS 1.2 [GH-12522]
api: add QueryBackend to QueryMeta so an api user can determine if a query was served using which backend (streaming or blocking query). [GH-12791]
ci: include 'enhancement' entry type in IMPROVEMENTS section of changelog. [GH-12376]
ui: Exclude Service Instance Health from Health Check reporting on the Node listing page. The health icons on each individual row now only reflect Node health. [GH-12248]
ui: Improve usability of Topology warning/information panels [GH-12305]
ui: Slightly improve usability of main navigation [GH-12334]
ui: Use @hashicorp/flight icons for all our icons. [GH-12209]
Removed impediments to using a namespace prefixed IntermediatePKIPath
in a CA definition. [GH-12655]
acl: Improve handling of region-specific endpoints in the AWS IAM auth method. As part of this, the STSRegion field was removed from the auth method config. [GH-12774]
api: Improve error message if service or health check not found by stating that the entity must be referred to by ID, not name [GH-10894]
autopilot: Autopilot state is now tracked on Raft followers in addition to the leader.
Stale queries may be used to query for the non-leaders state. [GH-12617]
autopilot: The autopilot.healthy and autopilot.failure_tolerance metrics are now
regularly emitted by all servers. [GH-12617]
ci: Enable security scanning for CRT [GH-11956]
connect: Add Envoy 1.21.1 to support matrix, remove 1.17.4 [GH-12777]
connect: Add Envoy 1.22.0 to support matrix, remove 1.18.6 [GH-12805]
connect: reduce raft apply on CA configuration when no change is performed [GH-12298]
deps: update to latest go-discover to fix vulnerable transitive jwt-go dependency [GH-12739]
grpc, xds: improved reliability of grpc and xds servers by adding recovery-middleware to return and log error in case of panic. [GH-10895]
http: if a GET request has a non-empty body, log a warning that suggests a possible problem (parameters were meant for the query string, but accidentally placed in the body) [GH-11821]
metrics: The consul.raft.boltdb.writeCapacity metric was added and indicates a theoretical number of writes/second that can be performed to Consul. [GH-12646]
sdk: Add support for Partition and RetryJoin to the TestServerConfig struct. [GH-12126]
telemetry: Add new leader label to consul.rpc.server.call and optional target_datacenter, locality,
allow_stale, and blocking optional labels. [GH-12727]
ui: In the datacenter selector order Datacenters by Primary, Local then alpanumerically [GH-12478]
ui: Include details on ACL policy dispositions required for unauthorized views [GH-12354]
ui: Move icons away from depending on a CSS preprocessor [GH-12461]
version: Improved performance of the version.GetHumanVersion function by 50% on memory allocation. [GH-11507]

DEPRECATIONS:

acl: The consul.acl.ResolveTokenToIdentity metric is no longer reported. The values that were previous reported as part of this metric will now be part of the consul.acl.ResolveToken metric. [GH-12166]
agent: deprecate older syntax for specifying TLS min version values [GH-12522]
agent: remove support for specifying insecure TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 and TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher suites [GH-12522]
config: setting cert_file, key_file, ca_file, ca_path, tls_min_version, tls_cipher_suites, verify_incoming, verify_incoming_rpc, verify_incoming_https, verify_outgoing and verify_server_hostname at the top-level is now deprecated, use the tls stanza instead [GH-12504]

BUG FIXES:

acl: Fix parsing of IAM user and role tags in IAM auth method [GH-12797]
dns: allow max of 63 character DNS labels instead of 64 per RFC 1123 [GH-12535]
logging: fix a bug with incorrect severity syslog messages (all messages were sent with NOTICE severity). [GH-12079]
ui: Added Tags tab to gateways(just like exists for non-gateway services) [GH-12400]
ui: Ensure proxy instance health is taken into account in Service Instance Listings [GH-12279]
ui: Fixes an issue with the version footer wandering when scrolling [GH-11850]

NOTES:

Forked net/rpc to add middleware support: https://github.com/hashicorp/consul-net-rpc/ . [GH-12311]
dependency: Upgrade to use Go 1.18.1 [GH-12808]
","1.12.0 (April 20, 2022)
BREAKING CHANGES:
connect: Removes support for Envoy 1.17.4 [GH-12777]
connect: Removes support for Envoy 1.18.6 [GH-12805]
sdk: several changes to the testutil configuration structs (removed ACLMasterToken, renamed Master to InitialManagement, and AgentMaster to AgentRecovery) [GH-11827]
telemetry: the disable_compat_1.9 option now defaults to true. 1.9 style consul.http... metrics can still be enabled by setting disable_compat_1.9 = false. However, we will remove these metrics in 1.13. [GH-12675]
FEATURES:
acl: Add token information to PermissionDeniedErrors [GH-12567]
acl: Added an AWS IAM auth method that allows authenticating to Consul using AWS IAM identities [GH-12583]
ca: Root certificates can now be consumed from a gRPC streaming endpoint: WatchRoots [GH-12678]
cli: The token read command now supports the -expanded flag to display detailed role and policy information for the token. [GH-12670]
config: automatically reload config when a file changes using the auto-reload-config CLI flag or auto_reload_config config option. [GH-12329]
server: Ensure that service-defaults Meta is returned with the response to the ConfigEntry.ResolveServiceConfig RPC. [GH-12529]
server: discovery chains now include a response field named ""Default"" to indicate if they were not constructed from any service-resolver, service-splitter, or service-router config entries [GH-12511]
server: ensure that service-defaults meta is incorporated into the discovery chain response [GH-12511]
tls: it is now possible to configure TLS differently for each of Consul's listeners (i.e. HTTPS, gRPC and the internal multiplexed RPC listener) using the tls stanza [GH-12504]
ui: Added support for AWS IAM Auth Methods [GH-12786]
ui: Support connect-native services in the Topology view. [GH-12098]
xds: Add the ability to invoke AWS Lambdas through terminating gateways. [GH-12681]
xds: adding control of the mesh-wide min/max TLS versions and cipher suites from the mesh config entry [GH-12601]
IMPROVEMENTS:
Refactor ACL denied error code and start improving error details [GH-12308]
acl: Provide fuller detail in the error messsage when an ACL denies access. [GH-12470]
agent: Allow client agents to perform keyring operations [GH-12442]
agent: add additional validation to TLS config [GH-12522]
agent: add support for specifying TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 and TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 cipher suites [GH-12522]
agent: bump default min version for connections to TLS 1.2 [GH-12522]
api: add QueryBackend to QueryMeta so an api user can determine if a query was served using which backend (streaming or blocking query). [GH-12791]
ci: include 'enhancement' entry type in IMPROVEMENTS section of changelog. [GH-12376]
ui: Exclude Service Instance Health from Health Check reporting on the Node listing page. The health icons on each individual row now only reflect Node health. [GH-12248]
ui: Improve usability of Topology warning/information panels [GH-12305]
ui: Slightly improve usability of main navigation [GH-12334]
ui: Use @hashicorp/flight icons for all our icons. [GH-12209]
Removed impediments to using a namespace prefixed IntermediatePKIPath
in a CA definition. [GH-12655]
acl: Improve handling of region-specific endpoints in the AWS IAM auth method. As part of this, the STSRegion field was removed from the auth method config. [GH-12774]
api: Improve error message if service or health check not found by stating that the entity must be referred to by ID, not name [GH-10894]
autopilot: Autopilot state is now tracked on Raft followers in addition to the leader.
Stale queries may be used to query for the non-leaders state. [GH-12617]
autopilot: The autopilot.healthy and autopilot.failure_tolerance metrics are now
regularly emitted by all servers. [GH-12617]
ci: Enable security scanning for CRT [GH-11956]
connect: Add Envoy 1.21.1 to support matrix, remove 1.17.4 [GH-12777]
connect: Add Envoy 1.22.0 to support matrix, remove 1.18.6 [GH-12805]
connect: reduce raft apply on CA configuration when no change is performed [GH-12298]
deps: update to latest go-discover to fix vulnerable transitive jwt-go dependency [GH-12739]
grpc, xds: improved reliability of grpc and xds servers by adding recovery-middleware to return and log error in case of panic. [GH-10895]
http: if a GET request has a non-empty body, log a warning that suggests a possible problem (parameters were meant for the query string, but accidentally placed in the body) [GH-11821]
metrics: The consul.raft.boltdb.writeCapacity metric was added and indicates a theoretical number of writes/second that can be performed to Consul. [GH-12646]
sdk: Add support for Partition and RetryJoin to the TestServerConfig struct. [GH-12126]
telemetry: Add new leader label to consul.rpc.server.call and optional target_datacenter, locality,
allow_stale, and blocking optional labels. [GH-12727]
ui: In the datacenter selector order Datacenters by Primary, Local then alpanumerically [GH-12478]
ui: Include details on ACL policy dispositions required for unauthorized views [GH-12354]
ui: Move icons away from depending on a CSS preprocessor [GH-12461]
version: Improved performance of the version.GetHumanVersion function by 50% on memory allocation. [GH-11507]
DEPRECATIONS:
acl: The consul.acl.ResolveTokenToIdentity metric is no longer reported. The values that were previous reported as part of this metric will now be part of the consul.acl.ResolveToken metric. [GH-12166]
agent: deprecate older syntax for specifying TLS min version values [GH-12522]
agent: remove support for specifying insecure TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 and TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher suites [GH-12522]
config: setting cert_file, key_file, ca_file, ca_path, tls_min_version, tls_cipher_suites, verify_incoming, verify_incoming_rpc, verify_incoming_https, verify_outgoing and verify_server_hostname at the top-level is now deprecated, use the tls stanza instead [GH-12504]
BUG FIXES:
acl: Fix parsing of IAM user and role tags in IAM auth method [GH-12797]
dns: allow max of 63 character DNS labels instead of 64 per RFC 1123 [GH-12535]
logging: fix a bug with incorrect severity syslog messages (all messages were sent with NOTICE severity). [GH-12079]
ui: Added Tags tab to gateways(just like exists for non-gateway services) [GH-12400]
ui: Ensure proxy instance health is taken into account in Service Instance Listings [GH-12279]
ui: Fixes an issue with the version footer wandering when scrolling [GH-11850]
NOTES:
Forked net/rpc to add middleware support: link/ . [GH-12311]
dependency: Upgrade to use Go 1.18.1 [GH-12808]"
42,"1.9.17 (April 13, 2022)
SECURITY:

agent: Added a new check field, disable_redirects, that allows for disabling the following of redirects for HTTP checks. The intention is to default this to true in a future release so that redirects must explicitly be enabled. [GH-12685]
connect: Properly set SNI when configured for services behind a terminating gateway. [GH-12672]

DEPRECATIONS:

tls: With the upgrade to Go 1.17, the ordering of tls_cipher_suites will no longer be honored, and tls_prefer_server_cipher_suites is now ignored. [GH-12767]

BUG FIXES:

connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [GH-12607]
memberlist: fixes a bug which prevented members from joining a cluster with
large amounts of churn [GH-253] [GH-12046]
replication: Fixed a bug which could prevent ACL replication from continuing successfully after a leader election. [GH-12565]
","1.9.17 (April 13, 2022)
SECURITY:
agent: Added a new check field, disable_redirects, that allows for disabling the following of redirects for HTTP checks. The intention is to default this to true in a future release so that redirects must explicitly be enabled. [GH-12685]
connect: Properly set SNI when configured for services behind a terminating gateway. [GH-12672]
DEPRECATIONS:
tls: With the upgrade to Go 1.17, the ordering of tls_cipher_suites will no longer be honored, and tls_prefer_server_cipher_suites is now ignored. [GH-12767]
BUG FIXES:
connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [GH-12607]
memberlist: fixes a bug which prevented members from joining a cluster with
large amounts of churn [GH-253] [GH-12046]
replication: Fixed a bug which could prevent ACL replication from continuing successfully after a leader election. [GH-12565]"
43,"1.11.5 (April 13, 2022)
SECURITY:

agent: Added a new check field, disable_redirects, that allows for disabling the following of redirects for HTTP checks. The intention is to default this to true in a future release so that redirects must explicitly be enabled. [GH-12685]
connect: Properly set SNI when configured for services behind a terminating gateway. [GH-12672]

IMPROVEMENTS:

agent: improve log messages when a service with a critical health check is deregistered due to exceeding the deregister_critical_service_after timeout [GH-12725]
xds: ensure that all connect timeout configs can apply equally to tproxy direct dial connections [GH-12711]

BUG FIXES:

acl: (Enterprise Only) fixes a bug preventing ACL policies configured with datacenter restrictions from being created if the cluster had been upgraded to Consul 1.11+ from an earlier version.
connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [GH-12607]
namespace: (Enterprise Only) Unreserve consul namespace to allow K8s namespace mirroring when deploying in consul K8s namespace .
raft: upgrade to v1.3.6 which fixes a bug where a read replica node could attempt bootstrapping raft and prevent other nodes from bootstrapping at all [GH-12496]
replication: Fixed a bug which could prevent ACL replication from continuing successfully after a leader election. [GH-12565]
server: fix spurious blocking query suppression for discovery chains [GH-12512]
ui: Fixes a visual bug where our loading icon can look cut off [GH-12479]
usagemetrics: (Enterprise only) Fix a bug where Consul usage metrics stopped being reported when upgrading servers from 1.10 to 1.11 or later.
","1.11.5 (April 13, 2022)
SECURITY:
agent: Added a new check field, disable_redirects, that allows for disabling the following of redirects for HTTP checks. The intention is to default this to true in a future release so that redirects must explicitly be enabled. [GH-12685]
connect: Properly set SNI when configured for services behind a terminating gateway. [GH-12672]
IMPROVEMENTS:
agent: improve log messages when a service with a critical health check is deregistered due to exceeding the deregister_critical_service_after timeout [GH-12725]
xds: ensure that all connect timeout configs can apply equally to tproxy direct dial connections [GH-12711]
BUG FIXES:
acl: (Enterprise Only) fixes a bug preventing ACL policies configured with datacenter restrictions from being created if the cluster had been upgraded to Consul 1.11+ from an earlier version.
connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [GH-12607]
namespace: (Enterprise Only) Unreserve consul namespace to allow K8s namespace mirroring when deploying in consul K8s namespace .
raft: upgrade to v1.3.6 which fixes a bug where a read replica node could attempt bootstrapping raft and prevent other nodes from bootstrapping at all [GH-12496]
replication: Fixed a bug which could prevent ACL replication from continuing successfully after a leader election. [GH-12565]
server: fix spurious blocking query suppression for discovery chains [GH-12512]
ui: Fixes a visual bug where our loading icon can look cut off [GH-12479]
usagemetrics: (Enterprise only) Fix a bug where Consul usage metrics stopped being reported when upgrading servers from 1.10 to 1.11 or later."
44,"1.10.10 (April 13, 2022)
SECURITY:

agent: Added a new check field, disable_redirects, that allows for disabling the following of redirects for HTTP checks. The intention is to default this to true in a future release so that redirects must explicitly be enabled. [GH-12685]
connect: Properly set SNI when configured for services behind a terminating gateway. [GH-12672]

IMPROVEMENTS:

xds: ensure that all connect timeout configs can apply equally to tproxy direct dial connections [GH-12711]

DEPRECATIONS:

tls: With the upgrade to Go 1.17, the ordering of tls_cipher_suites will no longer be honored, and tls_prefer_server_cipher_suites is now ignored. [GH-12766]

BUG FIXES:

connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [GH-12607]
raft: upgrade to v1.3.6 which fixes a bug where a read replica node could attempt bootstrapping raft and prevent other nodes from bootstrapping at all [GH-12496]
replication: Fixed a bug which could prevent ACL replication from continuing successfully after a leader election. [GH-12565]
server: fix spurious blocking query suppression for discovery chains [GH-12512]
","1.10.10 (April 13, 2022)
SECURITY:
agent: Added a new check field, disable_redirects, that allows for disabling the following of redirects for HTTP checks. The intention is to default this to true in a future release so that redirects must explicitly be enabled. [GH-12685]
connect: Properly set SNI when configured for services behind a terminating gateway. [GH-12672]
IMPROVEMENTS:
xds: ensure that all connect timeout configs can apply equally to tproxy direct dial connections [GH-12711]
DEPRECATIONS:
tls: With the upgrade to Go 1.17, the ordering of tls_cipher_suites will no longer be honored, and tls_prefer_server_cipher_suites is now ignored. [GH-12766]
BUG FIXES:
connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [GH-12607]
raft: upgrade to v1.3.6 which fixes a bug where a read replica node could attempt bootstrapping raft and prevent other nodes from bootstrapping at all [GH-12496]
replication: Fixed a bug which could prevent ACL replication from continuing successfully after a leader election. [GH-12565]
server: fix spurious blocking query suppression for discovery chains [GH-12512]"
45,"1.12.0-beta1 (April 4, 2022)
BREAKING CHANGES:

sdk: several changes to the testutil configuration structs (removed ACLMasterToken, renamed Master to InitialManagement, and AgentMaster to AgentRecovery) [GH-11827]
telemetry: the disable_compat_1.9 option now defaults to true. 1.9 style consul.http... metrics can still be enabled by setting disable_compat_1.9 = false. However, we will remove these metrics in 1.13. [GH-12675]

FEATURES:

acl: Add token information to PermissionDeniedErrors [GH-12567]
acl: Added an AWS IAM auth method that allows authenticating to Consul using AWS IAM identities [GH-12583]
cli: The token read command now supports the -expanded flag to display detailed role and policy information for the token. [GH-12670]
config: automatically reload config when a file changes using the auto-reload-config CLI flag or auto_reload_config config option. [GH-12329]
server: Ensure that service-defaults Meta is returned with the response to the ConfigEntry.ResolveServiceConfig RPC. [GH-12529]
server: discovery chains now include a response field named ""Default"" to indicate if they were not constructed from any service-resolver, service-splitter, or service-router config entries [GH-12511]
server: ensure that service-defaults meta is incorporated into the discovery chain response [GH-12511]
tls: it is now possible to configure TLS differently for each of Consul's listeners (i.e. HTTPS, gRPC and the internal multiplexed RPC listener) using the tls stanza [GH-12504]
ui: Support connect-native services in the Topology view. [GH-12098]
xds: Add the ability to invoke AWS Lambdas through terminating gateways. [GH-12681]
xds: adding control of the mesh-wide min/max TLS versions and cipher suites from the mesh config entry [GH-12601]

IMPROVEMENTS:

Refactor ACL denied error code and start improving error details [GH-12308]
acl: Provide fuller detail in the error messsage when an ACL denies access. [GH-12470]
agent: Allow client agents to perform keyring operations [GH-12442]
agent: add additional validation to TLS config [GH-12522]
agent: add support for specifying TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 and TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 cipher suites [GH-12522]
agent: bump default min version for connections to TLS 1.2 [GH-12522]
ci: include 'enhancement' entry type in IMPROVEMENTS section of changelog. [GH-12376]
ui: Exclude Service Instance Health from Health Check reporting on the Node listing page. The health icons on each individual row now only reflect Node health. [GH-12248]
ui: Improve usability of Topology warning/information panels [GH-12305]
ui: Slightly improve usability of main navigation [GH-12334]
ui: Use @hashicorp/flight icons for all our icons. [GH-12209]
Removed impediments to using a namespace prefixed IntermediatePKIPath
in a CA definition. [GH-12655]
api: Improve error message if service or health check not found by stating that the entity must be referred to by ID, not name [GH-10894]
ci: Enable security scanning for CRT [GH-11956]
connect: reduce raft apply on CA configuration when no change is performed [GH-12298]
grpc, xds: improved reliability of grpc and xds servers by adding recovery-middleware to return and log error in case of panic. [GH-10895]
http: if a GET request has a non-empty body, log a warning that suggests a possible problem (parameters were meant for the query string, but accidentally placed in the body) [GH-11821]
metrics: The consul.raft.boltdb.writeCapacity metric was added and indicates a theoretical number of writes/second that can be performed to Consul. [GH-12646]
sdk: Add support for Partition and RetryJoin to the TestServerConfig struct. [GH-12126]
ui: In the datacenter selector order Datacenters by Primary, Local then alpanumerically [GH-12478]
ui: Move icons away from depending on a CSS preprocessor [GH-12461]
version: Improved performance of the version.GetHumanVersion function by 50% on memory allocation. [GH-11507]

DEPRECATIONS:

acl: The consul.acl.ResolveTokenToIdentity metric is no longer reported. The values that were previous reported as part of this metric will now be part of the consul.acl.ResolveToken metric. [GH-12166]
agent: deprecate older syntax for specifying TLS min version values [GH-12522]
agent: remove support for specifying insecure TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 and TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher suites [GH-12522]
config: setting cert_file, key_file, ca_file, ca_path, tls_min_version, tls_cipher_suites, verify_incoming, verify_incoming_rpc, verify_incoming_https, verify_outgoing and verify_server_hostname at the top-level is now deprecated, use the tls stanza instead [GH-12504]

BUG FIXES:

acl: (Enterprise Only) fixes a bug preventing ACL policies configured with datacenter restrictions from being created if the cluster had been upgraded to Consul 1.11+ from an earlier version.
connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [GH-12607]
dns: allow max of 63 character DNS labels instead of 64 per RFC 1123 [GH-12535]
raft: upgrade to v1.3.6 which fixes a bug where a read replica node could attempt bootstrapping raft and prevent other nodes from bootstrapping at all [GH-12496]
server: fix spurious blocking query suppression for discovery chains [GH-12512]
ui: Added Tags tab to gateways(just like exists for non-gateway services) [GH-12400]
ui: Fixes a visual bug where our loading icon can look cut off [GH-12479]
","1.12.0-beta1 (April 4, 2022)
BREAKING CHANGES:
sdk: several changes to the testutil configuration structs (removed ACLMasterToken, renamed Master to InitialManagement, and AgentMaster to AgentRecovery) [GH-11827]
telemetry: the disable_compat_1.9 option now defaults to true. 1.9 style consul.http... metrics can still be enabled by setting disable_compat_1.9 = false. However, we will remove these metrics in 1.13. [GH-12675]
FEATURES:
acl: Add token information to PermissionDeniedErrors [GH-12567]
acl: Added an AWS IAM auth method that allows authenticating to Consul using AWS IAM identities [GH-12583]
cli: The token read command now supports the -expanded flag to display detailed role and policy information for the token. [GH-12670]
config: automatically reload config when a file changes using the auto-reload-config CLI flag or auto_reload_config config option. [GH-12329]
server: Ensure that service-defaults Meta is returned with the response to the ConfigEntry.ResolveServiceConfig RPC. [GH-12529]
server: discovery chains now include a response field named ""Default"" to indicate if they were not constructed from any service-resolver, service-splitter, or service-router config entries [GH-12511]
server: ensure that service-defaults meta is incorporated into the discovery chain response [GH-12511]
tls: it is now possible to configure TLS differently for each of Consul's listeners (i.e. HTTPS, gRPC and the internal multiplexed RPC listener) using the tls stanza [GH-12504]
ui: Support connect-native services in the Topology view. [GH-12098]
xds: Add the ability to invoke AWS Lambdas through terminating gateways. [GH-12681]
xds: adding control of the mesh-wide min/max TLS versions and cipher suites from the mesh config entry [GH-12601]
IMPROVEMENTS:
Refactor ACL denied error code and start improving error details [GH-12308]
acl: Provide fuller detail in the error messsage when an ACL denies access. [GH-12470]
agent: Allow client agents to perform keyring operations [GH-12442]
agent: add additional validation to TLS config [GH-12522]
agent: add support for specifying TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256 and TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 cipher suites [GH-12522]
agent: bump default min version for connections to TLS 1.2 [GH-12522]
ci: include 'enhancement' entry type in IMPROVEMENTS section of changelog. [GH-12376]
ui: Exclude Service Instance Health from Health Check reporting on the Node listing page. The health icons on each individual row now only reflect Node health. [GH-12248]
ui: Improve usability of Topology warning/information panels [GH-12305]
ui: Slightly improve usability of main navigation [GH-12334]
ui: Use @hashicorp/flight icons for all our icons. [GH-12209]
Removed impediments to using a namespace prefixed IntermediatePKIPath
in a CA definition. [GH-12655]
api: Improve error message if service or health check not found by stating that the entity must be referred to by ID, not name [GH-10894]
ci: Enable security scanning for CRT [GH-11956]
connect: reduce raft apply on CA configuration when no change is performed [GH-12298]
grpc, xds: improved reliability of grpc and xds servers by adding recovery-middleware to return and log error in case of panic. [GH-10895]
http: if a GET request has a non-empty body, log a warning that suggests a possible problem (parameters were meant for the query string, but accidentally placed in the body) [GH-11821]
metrics: The consul.raft.boltdb.writeCapacity metric was added and indicates a theoretical number of writes/second that can be performed to Consul. [GH-12646]
sdk: Add support for Partition and RetryJoin to the TestServerConfig struct. [GH-12126]
ui: In the datacenter selector order Datacenters by Primary, Local then alpanumerically [GH-12478]
ui: Move icons away from depending on a CSS preprocessor [GH-12461]
version: Improved performance of the version.GetHumanVersion function by 50% on memory allocation. [GH-11507]
DEPRECATIONS:
acl: The consul.acl.ResolveTokenToIdentity metric is no longer reported. The values that were previous reported as part of this metric will now be part of the consul.acl.ResolveToken metric. [GH-12166]
agent: deprecate older syntax for specifying TLS min version values [GH-12522]
agent: remove support for specifying insecure TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 and TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher suites [GH-12522]
config: setting cert_file, key_file, ca_file, ca_path, tls_min_version, tls_cipher_suites, verify_incoming, verify_incoming_rpc, verify_incoming_https, verify_outgoing and verify_server_hostname at the top-level is now deprecated, use the tls stanza instead [GH-12504]
BUG FIXES:
acl: (Enterprise Only) fixes a bug preventing ACL policies configured with datacenter restrictions from being created if the cluster had been upgraded to Consul 1.11+ from an earlier version.
connect/ca: cancel old Vault renewal on CA configuration. Provide a 1 - 6 second backoff on repeated token renewal requests to prevent overwhelming Vault. [GH-12607]
dns: allow max of 63 character DNS labels instead of 64 per RFC 1123 [GH-12535]
raft: upgrade to v1.3.6 which fixes a bug where a read replica node could attempt bootstrapping raft and prevent other nodes from bootstrapping at all [GH-12496]
server: fix spurious blocking query suppression for discovery chains [GH-12512]
ui: Added Tags tab to gateways(just like exists for non-gateway services) [GH-12400]
ui: Fixes a visual bug where our loading icon can look cut off [GH-12479]"
46,"1.11.4 (February 28, 2022)
FEATURES:

ca: support using an external root CA with the vault CA provider [GH-11910]

IMPROVEMENTS:

connect: Update supported Envoy versions to include 1.19.3 and 1.18.6 [GH-12449]
connect: update Envoy supported version of 1.20 to 1.20.2 [GH-12433]
connect: update Envoy supported version of 1.20 to 1.20.2 [GH-12443]
debug: reduce the capture time for trace to only a single interval instead of the full duration to make trace.out easier to open without running into OOM errors. [GH-12359]
raft: add additional logging of snapshot restore progress [GH-12325]
rpc: improve blocking queries for items that do not exist, by continuing to block until they exist (or the timeout). [GH-12110]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: conditionally avoid writing a config entry to raft if it was already the same [GH-12321]
server: suppress spurious blocking query returns where multiple config entries are involved [GH-12362]

BUG FIXES:

agent: Parse datacenter from Create/Delete requests for AuthMethods and BindingRules. [GH-12370]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
catalog: compare node names case insensitively in more places [GH-12444]
checks: populate interval and timeout when registering services [GH-11138]
local: fixes a data race in anti-entropy sync that could cause the wrong tags to be applied to a service when EnableTagOverride is used [GH-12324]
raft: fixed a race condition in leadership transfer that could result in reelection of the current leader [GH-12325]
server: (Enterprise only) Namespace deletion will now attempt to delete as many namespaced config entries as possible instead of halting on the first deletion that failed.
server: partly fix config entry replication issue that prevents replication in some circumstances [GH-12307]
state: fix bug blocking snapshot restore when a node check and node differed in casing of the node string [GH-12444]
ui: Ensure we always display the Policy default preview in the Namespace editing form [GH-12316]
ui: Fix missing helper javascript error [GH-12358]
xds: Fixed Envoy http features such as outlier detection and retry policy not working correctly with transparent proxy. [GH-12385]
","1.11.4 (February 28, 2022)
FEATURES:
ca: support using an external root CA with the vault CA provider [GH-11910]
IMPROVEMENTS:
connect: Update supported Envoy versions to include 1.19.3 and 1.18.6 [GH-12449]
connect: update Envoy supported version of 1.20 to 1.20.2 [GH-12433]
connect: update Envoy supported version of 1.20 to 1.20.2 [GH-12443]
debug: reduce the capture time for trace to only a single interval instead of the full duration to make trace.out easier to open without running into OOM errors. [GH-12359]
raft: add additional logging of snapshot restore progress [GH-12325]
rpc: improve blocking queries for items that do not exist, by continuing to block until they exist (or the timeout). [GH-12110]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: conditionally avoid writing a config entry to raft if it was already the same [GH-12321]
server: suppress spurious blocking query returns where multiple config entries are involved [GH-12362]
BUG FIXES:
agent: Parse datacenter from Create/Delete requests for AuthMethods and BindingRules. [GH-12370]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
catalog: compare node names case insensitively in more places [GH-12444]
checks: populate interval and timeout when registering services [GH-11138]
local: fixes a data race in anti-entropy sync that could cause the wrong tags to be applied to a service when EnableTagOverride is used [GH-12324]
raft: fixed a race condition in leadership transfer that could result in reelection of the current leader [GH-12325]
server: (Enterprise only) Namespace deletion will now attempt to delete as many namespaced config entries as possible instead of halting on the first deletion that failed.
server: partly fix config entry replication issue that prevents replication in some circumstances [GH-12307]
state: fix bug blocking snapshot restore when a node check and node differed in casing of the node string [GH-12444]
ui: Ensure we always display the Policy default preview in the Namespace editing form [GH-12316]
ui: Fix missing helper javascript error [GH-12358]
xds: Fixed Envoy http features such as outlier detection and retry policy not working correctly with transparent proxy. [GH-12385]"
47,"1.10.9 (February 28, 2022)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names.

FEATURES:

ca: support using an external root CA with the vault CA provider [GH-11910]

IMPROVEMENTS:

connect: Update supported Envoy versions to include 1.18.6 [GH-12450]
connect: update Envoy supported version of 1.20 to 1.20.2 [GH-12434]
debug: reduce the capture time for trace to only a single interval instead of the full duration to make trace.out easier to open without running into OOM errors. [GH-12359]
raft: add additional logging of snapshot restore progress [GH-12325]
rpc: improve blocking queries for items that do not exist, by continuing to block until they exist (or the timeout). [GH-12110]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: conditionally avoid writing a config entry to raft if it was already the same [GH-12321]
server: suppress spurious blocking query returns where multiple config entries are involved [GH-12362]

BUG FIXES:

agent: Parse datacenter from Create/Delete requests for AuthMethods and BindingRules. [GH-12370]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
raft: fixed a race condition in leadership transfer that could result in reelection of the current leader [GH-12325]
server: (Enterprise only) Namespace deletion will now attempt to delete as many namespaced config entries as possible instead of halting on the first deletion that failed.
server: partly fix config entry replication issue that prevents replication in some circumstances [GH-12307]
ui: Ensure we always display the Policy default preview in the Namespace editing form [GH-12316]
xds: Fixed Envoy http features such as outlier detection and retry policy not working correctly with transparent proxy. [GH-12385]
","1.10.9 (February 28, 2022)
SECURITY:
agent: Use SHA256 instead of MD5 to generate persistence file names.
FEATURES:
ca: support using an external root CA with the vault CA provider [GH-11910]
IMPROVEMENTS:
connect: Update supported Envoy versions to include 1.18.6 [GH-12450]
connect: update Envoy supported version of 1.20 to 1.20.2 [GH-12434]
debug: reduce the capture time for trace to only a single interval instead of the full duration to make trace.out easier to open without running into OOM errors. [GH-12359]
raft: add additional logging of snapshot restore progress [GH-12325]
rpc: improve blocking queries for items that do not exist, by continuing to block until they exist (or the timeout). [GH-12110]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: conditionally avoid writing a config entry to raft if it was already the same [GH-12321]
server: suppress spurious blocking query returns where multiple config entries are involved [GH-12362]
BUG FIXES:
agent: Parse datacenter from Create/Delete requests for AuthMethods and BindingRules. [GH-12370]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
raft: fixed a race condition in leadership transfer that could result in reelection of the current leader [GH-12325]
server: (Enterprise only) Namespace deletion will now attempt to delete as many namespaced config entries as possible instead of halting on the first deletion that failed.
server: partly fix config entry replication issue that prevents replication in some circumstances [GH-12307]
ui: Ensure we always display the Policy default preview in the Namespace editing form [GH-12316]
xds: Fixed Envoy http features such as outlier detection and retry policy not working correctly with transparent proxy. [GH-12385]"
48,"1.9.16 (February 28, 2022)
FEATURES:

ca: support using an external root CA with the vault CA provider [GH-11910]

IMPROVEMENTS:

sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: conditionally avoid writing a config entry to raft if it was already the same [GH-12321]

BUG FIXES:

agent: Parse datacenter from Create/Delete requests for AuthMethods and BindingRules. [GH-12370]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
server: (Enterprise only) Namespace deletion will now attempt to delete as many namespaced config entries as possible instead of halting on the first deletion that failed.
server: partly fix config entry replication issue that prevents replication in some circumstances [GH-12307]
ui: Ensure we always display the Policy default preview in the Namespace editing form [GH-12316]
","1.9.16 (February 28, 2022)
FEATURES:
ca: support using an external root CA with the vault CA provider [GH-11910]
IMPROVEMENTS:
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: conditionally avoid writing a config entry to raft if it was already the same [GH-12321]
BUG FIXES:
agent: Parse datacenter from Create/Delete requests for AuthMethods and BindingRules. [GH-12370]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
server: (Enterprise only) Namespace deletion will now attempt to delete as many namespaced config entries as possible instead of halting on the first deletion that failed.
server: partly fix config entry replication issue that prevents replication in some circumstances [GH-12307]
ui: Ensure we always display the Policy default preview in the Namespace editing form [GH-12316]"
49,"1.11.3 (February 11, 2022)
IMPROVEMENTS:

connect: update Envoy supported version of 1.20 to 1.20.1 [GH-11895]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
streaming: Improved performance when the server is handling many concurrent subscriptions and has a high number of CPU cores [GH-12080]
systemd: Support starting/stopping the systemd service for linux packages when the optional EnvironmentFile does not exist. [GH-12176]

BUG FIXES:

Fix a data race when a service is added while the agent is shutting down.. [GH-12302]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
ca: adjust validation of PrivateKeyType/Bits with the Vault provider, to remove the error when the cert is created manually in Vault. [GH-12267]
config-entry: fix a panic when creating an ingress gateway config-entry and a proxy service instance, where both provided the same upstream and downstream mapping. [GH-12277]
connect: fixes bug where passthrough addressses for transparent proxies dialed directly weren't being cleaned up. [GH-12223]
partitions: (Enterprise only) Do not leave a serf partition when the partition is deleted
serf: update serf v0.9.7, complete the leave process if broadcasting leave timeout. [GH-12057]
ui: Ensure proxy instance health is taken into account in Service Instance Listings [GH-12279]
ui: Fix up a problem where occasionally an intention can visually disappear from the listing after saving [GH-12315]
ui: Fixed a bug with creating multiple nested KVs in one interaction [GH-12081]
ui: Include partition data when saving an intention from the topology visualization [GH-12317]
xds: allow only one outstanding delta request at a time [GH-12236]
xds: fix for delta xDS reconnect bug in LDS/CDS [GH-12174]
xds: prevents tight loop where the Consul client agent would repeatedly re-send config that Envoy has rejected. [GH-12195]
","1.11.3 (February 11, 2022)
IMPROVEMENTS:
connect: update Envoy supported version of 1.20 to 1.20.1 [GH-11895]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
streaming: Improved performance when the server is handling many concurrent subscriptions and has a high number of CPU cores [GH-12080]
systemd: Support starting/stopping the systemd service for linux packages when the optional EnvironmentFile does not exist. [GH-12176]
BUG FIXES:
Fix a data race when a service is added while the agent is shutting down.. [GH-12302]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
ca: adjust validation of PrivateKeyType/Bits with the Vault provider, to remove the error when the cert is created manually in Vault. [GH-12267]
config-entry: fix a panic when creating an ingress gateway config-entry and a proxy service instance, where both provided the same upstream and downstream mapping. [GH-12277]
connect: fixes bug where passthrough addressses for transparent proxies dialed directly weren't being cleaned up. [GH-12223]
partitions: (Enterprise only) Do not leave a serf partition when the partition is deleted
serf: update serf v0.9.7, complete the leave process if broadcasting leave timeout. [GH-12057]
ui: Ensure proxy instance health is taken into account in Service Instance Listings [GH-12279]
ui: Fix up a problem where occasionally an intention can visually disappear from the listing after saving [GH-12315]
ui: Fixed a bug with creating multiple nested KVs in one interaction [GH-12081]
ui: Include partition data when saving an intention from the topology visualization [GH-12317]
xds: allow only one outstanding delta request at a time [GH-12236]
xds: fix for delta xDS reconnect bug in LDS/CDS [GH-12174]
xds: prevents tight loop where the Consul client agent would repeatedly re-send config that Envoy has rejected. [GH-12195]"
50,"1.10.8 (February 11, 2022)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names.

IMPROVEMENTS:

raft: Consul leaders will attempt to transfer leadership to another server as part of gracefully leaving the cluster. [GH-11376]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids

BUG FIXES:

Fix a data race when a service is added while the agent is shutting down.. [GH-12302]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
config-entry: fix a panic when creating an ingress gateway config-entry and a proxy service instance, where both provided the same upstream and downstrem mapping. [GH-12277]
config: include all config errors in the error message, previously some could be hidden. [GH-11918]
connect: fixes bug where passthrough addressses for transparent proxies dialed directly weren't being cleaned up. [GH-12223]
memberlist: fixes a bug which prevented members from joining a cluster with
large amounts of churn [GH-253] [GH-12047]
snapshot: the snapshot save command now saves the snapshot with read permission for only the current user. [GH-11918]
xds: allow only one outstanding delta request at a time [GH-12236]
xds: fix for delta xDS reconnect bug in LDS/CDS [GH-12174]
xds: prevents tight loop where the Consul client agent would repeatedly re-send config that Envoy has rejected. [GH-12195]
","1.10.8 (February 11, 2022)
SECURITY:
agent: Use SHA256 instead of MD5 to generate persistence file names.
IMPROVEMENTS:
raft: Consul leaders will attempt to transfer leadership to another server as part of gracefully leaving the cluster. [GH-11376]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
BUG FIXES:
Fix a data race when a service is added while the agent is shutting down.. [GH-12302]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
config-entry: fix a panic when creating an ingress gateway config-entry and a proxy service instance, where both provided the same upstream and downstrem mapping. [GH-12277]
config: include all config errors in the error message, previously some could be hidden. [GH-11918]
connect: fixes bug where passthrough addressses for transparent proxies dialed directly weren't being cleaned up. [GH-12223]
memberlist: fixes a bug which prevented members from joining a cluster with
large amounts of churn [GH-253] [GH-12047]
snapshot: the snapshot save command now saves the snapshot with read permission for only the current user. [GH-11918]
xds: allow only one outstanding delta request at a time [GH-12236]
xds: fix for delta xDS reconnect bug in LDS/CDS [GH-12174]
xds: prevents tight loop where the Consul client agent would repeatedly re-send config that Envoy has rejected. [GH-12195]"
51,"1.9.15 (February 11, 2022)
IMPROVEMENTS:

sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids

BUG FIXES:

Fix a data race when a service is added while the agent is shutting down.. [GH-12302]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
config-entry: fix a panic when creating an ingress gateway config-entry and a proxy service instance, where both provided the same upstream and downstream mapping. [GH-12277]
config: include all config errors in the error message, previously some could be hidden. [GH-11918]
snapshot: the snapshot save command now saves the snapshot with read permission for only the current user. [GH-11918]
","1.9.15 (February 11, 2022)
IMPROVEMENTS:
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
BUG FIXES:
Fix a data race when a service is added while the agent is shutting down.. [GH-12302]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
config-entry: fix a panic when creating an ingress gateway config-entry and a proxy service instance, where both provided the same upstream and downstream mapping. [GH-12277]
config: include all config errors in the error message, previously some could be hidden. [GH-11918]
snapshot: the snapshot save command now saves the snapshot with read permission for only the current user. [GH-11918]"
52,"1.11.2 (January 12, 2022)
FEATURES:

ingress: allow setting TLS min version and cipher suites in ingress gateway config entries [GH-11576]

IMPROVEMENTS:

api: URL-encode/decode resource names for v1/agent endpoints in API. [GH-11335]
api: Return 404 when de-registering a non-existent check [GH-11950]
connect: Add support for connecting to services behind a terminating gateway when using a transparent proxy. [GH-12049]
http: when a user attempts to access the UI but can't because it's disabled, explain this and how to fix it [GH-11820]
raft: Consul leaders will attempt to transfer leadership to another server as part of gracefully leaving the cluster. [GH-11376]
ui: Added a notice for non-primary intention creation [GH-11985]

BUG FIXES:

Mutate NodeService struct properly to avoid a data race. [GH-11940]
Upgrade to raft 1.3.3 which fixes a bug where a read replica node can trigger a raft election and become a leader. [GH-11958]
cli: Display assigned node identities in output of consul acl token list. [GH-11926]
cli: when creating a private key, save the file with mode 0600 so that only the user has read permission. [GH-11781]
config: include all config errors in the error message, previously some could be hidden. [GH-11918]
memberlist: fixes a bug which prevented members from joining a cluster with
large amounts of churn [GH-253] [GH-12042]
snapshot: the snapshot save command now saves the snapshot with read permission for only the current user. [GH-11918]
ui: Differentiate between Service Meta and Node Meta when choosing search fields
in Service Instance listings [GH-11774]
ui: Ensure a login buttons appear for some error states, plus text amends [GH-11892]
ui: Ensure partition query parameter is passed through to all OIDC related API
requests [GH-11979]
ui: Fix an issue where attempting to delete a policy from the policy detail page when
attached to a token would result in the delete button disappearing and no
deletion being attempted [GH-11868]
ui: Fixes a bug where proxy service health checks would sometimes not appear
until refresh [GH-11903]
ui: Fixes a bug with URL decoding within KV area [GH-11931]
ui: Fixes a visual issue with some border colors [GH-11959]
ui: Fixes an issue saving intentions when editing per service intentions [GH-11937]
ui: Fixes an issue where once a 403 page is displayed in some circumstances its
diffcult to click back to where you where before receiving a 403 [GH-11891]
ui: Prevent disconnection notice appearing with auth change on certain pages [GH-11905]
ui: Temporarily remove KV pre-flight check for KV list permissions [GH-11968]
windows: Fixes a bug with empty log files when Consul is run as a Windows Service [GH-11960]
xds: fix a deadlock when the snapshot channel already have a snapshot to be consumed. [GH-11924]
","1.11.2 (January 12, 2022)
FEATURES:
ingress: allow setting TLS min version and cipher suites in ingress gateway config entries [GH-11576]
IMPROVEMENTS:
api: URL-encode/decode resource names for v1/agent endpoints in API. [GH-11335]
api: Return 404 when de-registering a non-existent check [GH-11950]
connect: Add support for connecting to services behind a terminating gateway when using a transparent proxy. [GH-12049]
http: when a user attempts to access the UI but can't because it's disabled, explain this and how to fix it [GH-11820]
raft: Consul leaders will attempt to transfer leadership to another server as part of gracefully leaving the cluster. [GH-11376]
ui: Added a notice for non-primary intention creation [GH-11985]
BUG FIXES:
Mutate NodeService struct properly to avoid a data race. [GH-11940]
Upgrade to raft 1.3.3 which fixes a bug where a read replica node can trigger a raft election and become a leader. [GH-11958]
cli: Display assigned node identities in output of consul acl token list. [GH-11926]
cli: when creating a private key, save the file with mode 0600 so that only the user has read permission. [GH-11781]
config: include all config errors in the error message, previously some could be hidden. [GH-11918]
memberlist: fixes a bug which prevented members from joining a cluster with
large amounts of churn [GH-253] [GH-12042]
snapshot: the snapshot save command now saves the snapshot with read permission for only the current user. [GH-11918]
ui: Differentiate between Service Meta and Node Meta when choosing search fields
in Service Instance listings [GH-11774]
ui: Ensure a login buttons appear for some error states, plus text amends [GH-11892]
ui: Ensure partition query parameter is passed through to all OIDC related API
requests [GH-11979]
ui: Fix an issue where attempting to delete a policy from the policy detail page when
attached to a token would result in the delete button disappearing and no
deletion being attempted [GH-11868]
ui: Fixes a bug where proxy service health checks would sometimes not appear
until refresh [GH-11903]
ui: Fixes a bug with URL decoding within KV area [GH-11931]
ui: Fixes a visual issue with some border colors [GH-11959]
ui: Fixes an issue saving intentions when editing per service intentions [GH-11937]
ui: Fixes an issue where once a 403 page is displayed in some circumstances its
diffcult to click back to where you where before receiving a 403 [GH-11891]
ui: Prevent disconnection notice appearing with auth change on certain pages [GH-11905]
ui: Temporarily remove KV pre-flight check for KV list permissions [GH-11968]
windows: Fixes a bug with empty log files when Consul is run as a Windows Service [GH-11960]
xds: fix a deadlock when the snapshot channel already have a snapshot to be consumed. [GH-11924]"
53,"1.10.7 (January 12, 2022)
SECURITY:

namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.

FEATURES:

ui: Adds visible Consul version information [GH-11803]

BUG FIXES:

Mutate NodeService struct properly to avoid a data race. [GH-11940]
Upgrade to raft 1.3.3 which fixes a bug where a read replica node can trigger a raft election and become a leader. [GH-11958]
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [GH-11693]
ca: fixes a bug that caused the SigningKeyID to be wrong in the primary DC, when the Vault provider is used, after a CA config creates a new root. [GH-11672]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [GH-11671]
cli: Display assigned node identities in output of consul acl token list. [GH-11926]
cli: when creating a private key, save the file with mode 0600 so that only the user has read permission. [GH-11781]
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
structs: (Enterprise only) Remove partition field parsing from 1.10 to prevent further 1.11 upgrade compatibility issues.
ui: Differentiate between Service Meta and Node Meta when choosing search fields
in Service Instance listings [GH-11774]
ui: Ensure we show a readonly designed page for readonly intentions [GH-11767]
ui: Fix an issue where attempting to delete a policy from the policy detail page when
attached to a token would result in the delete button disappearing and no
deletion being attempted [GH-11868]
ui: Fix visual issue with slight table header overflow [GH-11670]
ui: Fixes an issue where once a 403 page is displayed in some circumstances its
diffcult to click back to where you where before receiving a 403 [GH-11891]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]
ui: Revert to depending on the backend, 'post-user-action', to report
permissions errors rather than using UI capabilities 'pre-user-action' [GH-11520]
ui: Temporarily remove KV pre-flight check for KV list permissions [GH-11968]
windows: Fixes a bug with empty log files when Consul is run as a Windows Service [GH-11960]
xds: fix a deadlock when the snapshot channel already have a snapshot to be consumed. [GH-11924]
","1.10.7 (January 12, 2022)
SECURITY:
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
FEATURES:
ui: Adds visible Consul version information [GH-11803]
BUG FIXES:
Mutate NodeService struct properly to avoid a data race. [GH-11940]
Upgrade to raft 1.3.3 which fixes a bug where a read replica node can trigger a raft election and become a leader. [GH-11958]
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [GH-11693]
ca: fixes a bug that caused the SigningKeyID to be wrong in the primary DC, when the Vault provider is used, after a CA config creates a new root. [GH-11672]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [GH-11671]
cli: Display assigned node identities in output of consul acl token list. [GH-11926]
cli: when creating a private key, save the file with mode 0600 so that only the user has read permission. [GH-11781]
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
structs: (Enterprise only) Remove partition field parsing from 1.10 to prevent further 1.11 upgrade compatibility issues.
ui: Differentiate between Service Meta and Node Meta when choosing search fields
in Service Instance listings [GH-11774]
ui: Ensure we show a readonly designed page for readonly intentions [GH-11767]
ui: Fix an issue where attempting to delete a policy from the policy detail page when
attached to a token would result in the delete button disappearing and no
deletion being attempted [GH-11868]
ui: Fix visual issue with slight table header overflow [GH-11670]
ui: Fixes an issue where once a 403 page is displayed in some circumstances its
diffcult to click back to where you where before receiving a 403 [GH-11891]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]
ui: Revert to depending on the backend, 'post-user-action', to report
permissions errors rather than using UI capabilities 'pre-user-action' [GH-11520]
ui: Temporarily remove KV pre-flight check for KV list permissions [GH-11968]
windows: Fixes a bug with empty log files when Consul is run as a Windows Service [GH-11960]
xds: fix a deadlock when the snapshot channel already have a snapshot to be consumed. [GH-11924]"
54,"1.9.14 (January 12, 2022)
SECURITY:

namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.

BUG FIXES:

ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [GH-11693]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [GH-11671]
cli: Display assigned node identities in output of consul acl token list. [GH-11926]
cli: when creating a private key, save the file with mode 0600 so that only the user has read permission. [GH-11781]
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
ui: Differentiate between Service Meta and Node Meta when choosing search fields
in Service Instance listings [GH-11774]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Fixes an issue where under some circumstances the namespace selector could
become 'stuck' on the default namespace [GH-11830]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]
ui: Prevent disconnection notice appearing with auth change on certain pages [GH-11905]
xds: fix a deadlock when the snapshot channel already have a snapshot to be consumed. [GH-11924]
","1.9.14 (January 12, 2022)
SECURITY:
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
BUG FIXES:
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [GH-11693]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [GH-11671]
cli: Display assigned node identities in output of consul acl token list. [GH-11926]
cli: when creating a private key, save the file with mode 0600 so that only the user has read permission. [GH-11781]
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
ui: Differentiate between Service Meta and Node Meta when choosing search fields
in Service Instance listings [GH-11774]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Fixes an issue where under some circumstances the namespace selector could
become 'stuck' on the default namespace [GH-11830]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]
ui: Prevent disconnection notice appearing with auth change on certain pages [GH-11905]
xds: fix a deadlock when the snapshot channel already have a snapshot to be consumed. [GH-11924]"
55,"1.11.1 (December 15, 2021)
SECURITY:

ci: Upgrade golang.org/x/net to address CVE-2021-44716 [GH-11854]

FEATURES:

Admin Partitions (Consul Enterprise only) This version adds admin partitions, a new entity defining administrative and networking boundaries within a Consul deployment. For more information refer to the
 Admin Partition documentation. [GH-11855]
networking: (Enterprise Only) Make segment_limit configurable, cap at 256.

BUG FIXES:

ui: Fixes an issue with the version footer wandering when scrolling [GH-11850]
","1.11.1 (December 15, 2021)
SECURITY:
ci: Upgrade golang.org/x/net to address CVE-2021-44716 [GH-11854]
FEATURES:
Admin Partitions (Consul Enterprise only) This version adds admin partitions, a new entity defining administrative and networking boundaries within a Consul deployment. For more information refer to the
 Admin Partition documentation. [GH-11855]
networking: (Enterprise Only) Make segment_limit configurable, cap at 256.
BUG FIXES:
ui: Fixes an issue with the version footer wandering when scrolling [GH-11850]"
56,"1.10.6 (December 15, 2021)
SECURITY:

ci: Upgrade golang.org/x/net to address CVE-2021-44716 [GH-11856]
","1.10.6 (December 15, 2021)
SECURITY:
ci: Upgrade golang.org/x/net to address CVE-2021-44716 [GH-11856]"
57,"1.9.13 (December 15, 2021)
SECURITY:

ci: Upgrade golang.org/x/net to address CVE-2021-44716 [GH-11858]
","1.9.13 (December 15, 2021)
SECURITY:
ci: Upgrade golang.org/x/net to address CVE-2021-44716 [GH-11858]"
58,"1.8.19 (December 15, 2021)
SECURITY:

ci: Upgrade golang.org/x/net to address CVE-2021-44716 [GH-11857]
","1.8.19 (December 15, 2021)
SECURITY:
ci: Upgrade golang.org/x/net to address CVE-2021-44716 [GH-11857]"
59,"1.11.0 (December 14, 2021)
BREAKING CHANGES:

acl: The legacy ACL system that was deprecated in Consul 1.4.0 has been removed. Before upgrading you should verify that nothing is still using the legacy ACL system. See the Migrate Legacy ACL Tokens Learn Guide for more information. [GH-11232]
cli: consul acl set-agent-token master has been replaced with consul acl set-agent-token recovery [GH-11669]

SECURITY:

namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
rpc: authorize raft requests CVE-2021-37219 [GH-10925]

FEATURES:

Admin Partitions (Consul Enterprise only) This version adds admin partitions, a new entity defining administrative and networking boundaries within a Consul deployment. For more information refer to the Admin Partition documentation.
ca: Add a configurable TTL for Connect CA root certificates. The configuration is supported by the Vault and Consul providers. [GH-11428]
ca: Add a configurable TTL to the AWS ACM Private CA provider root certificate. [GH-11449]
health-checks: add support for h2c in http2 ping health checks [GH-10690]
ui: Add UI support to use Vault as an external source for a service [GH-10769]
ui: Adding support of Consul API Gateway as an external source. [GH-11371]
ui: Adds a copy button to each composite row in tokens list page, if Secret ID returns an actual ID [GH-10735]
ui: Adds visible Consul version information [GH-11803]
ui: Topology - New views for scenarios where no dependencies exist or ACLs are disabled [GH-11280]

IMPROVEMENTS:

acls: Show AuthMethodNamespace when reading/listing ACL tokens. [GH-10598]
acl: replication routine to report the last error message. [GH-10612]
agent: add variation of force-leave that exclusively works on the WAN [GH-11722]
api: Enable setting query options on agent health and maintenance endpoints. [GH-10691]
api: responses that contain only a partial subset of results, due to filtering by ACL policies, may now include an X-Consul-Results-Filtered-By-ACLs header [GH-11569]
checks: add failures_before_warning setting for interval checks. [GH-10969]
ci: Upgrade to use Go 1.17.5 [GH-11799]
ci: Allow configuring graceful stop in testutil. [GH-10566]
cli: Add -cas and -modify-index flags to the consul config delete command to support Check-And-Set (CAS) deletion of config entries [GH-11419]
config: (Enterprise Only) Allow specifying permission mode for audit logs. [GH-10732]
config: Support Check-And-Set (CAS) deletion of config entries [GH-11419]
config: add dns_config.recursor_strategy flag to control the order which DNS recursors are queried [GH-10611]
config: warn the user if client_addr is empty because client services won't be listening [GH-11461]
connect/ca: cease including the common name field in generated x509 non-CA certificates [GH-10424]
connect: Add low-level feature to allow an Ingress to retrieve TLS certificates from SDS. [GH-10903]
connect: Consul will now generate a unique virtual IP for each connect-enabled service (this will also differ across namespace/partition in Enterprise). [GH-11724]
connect: Support Vault auth methods for the Connect CA Vault provider. Currently, we support any non-deprecated auth methods the latest version of Vault supports (v1.8.5), which include AppRole, AliCloud, AWS, Azure, Cloud Foundry, GitHub, Google Cloud, JWT/OIDC, Kerberos, Kubernetes, LDAP, Oracle Cloud Infrastructure, Okta, Radius, TLS Certificates, and Username & Password. [GH-11573]
connect: Support manipulating HTTP headers in the mesh. [GH-10613]
connect: add Namespace configuration setting for Vault CA provider [GH-11477]
connect: ingress gateways may now enable built-in TLS for a subset of listeners. [GH-11163]
connect: service-resolver subset filters are validated for valid go-bexpr syntax on write [GH-11293]
connect: update supported envoy versions to 1.19.1, 1.18.4, 1.17.4, 1.16.5 [GH-11115]
connect: update supported envoy versions to 1.20.0, 1.19.1, 1.18.4, 1.17.4 [GH-11277]
debug: Add a new /v1/agent/metrics/stream API endpoint for streaming of metrics [GH-10399]
debug: rename cluster capture target to members, to be more consistent with the terms used by the API. [GH-10804]
dns: Added a virtual endpoint for querying the assigned virtual IP for a service. [GH-11725]
http: when a URL path is not found, include a message with the 404 status code to help the user understand why (e.g., HTTP API endpoint path not prefixed with /v1/) [GH-11818]
raft: Added a configuration to disable boltdb freelist syncing [GH-11720]
raft: Emit boltdb related performance metrics [GH-11720]
raft: Use bbolt instead of the legacy boltdb implementation [GH-11720]
sdk: Add support for iptable rules that allow DNS lookup redirection to Consul DNS. [GH-11480]
segments: (Enterprise only) ensure that the serf_lan_allowed_cidrs applies to network segments [GH-11495]
telemetry: add a new agent.tls.cert.expiry metric for tracking when the Agent TLS certificate expires. [GH-10768]
telemetry: add a new mesh.active-root-ca.expiry metric for tracking when the root certificate expires. [GH-9924]
telemetry: added metrics to track certificates expiry. [GH-10504]
types: add TLSVersion and TLSCipherSuite [GH-11645]
ui: Change partition URL segment prefix from - to _ [GH-11801]
ui: Add upstream icons for upstreams and upstream instances [GH-11556]
ui: Add uri guard to prevent future URL encoding issues [GH-11117]
ui: Move the majority of our SASS variables to use native CSS custom
properties [GH-11200]
ui: Removed informational panel from the namespace selector menu when editing
namespaces [GH-11130]
ui: Update UI browser support to 'roughly ~2 years back' [GH-11505]
ui: Update global notification styling [GH-11577]
ui: added copy to clipboard button in code editor toolbars [GH-11474]

DEPRECATIONS:

api: /v1/agent/token/agent_master is deprecated and will be removed in a future major release - use /v1/agent/token/agent_recovery instead [GH-11669]
config: acl.tokens.master has been renamed to acl.tokens.initial_management, and acl.tokens.agent_master has been renamed to acl.tokens.agent_recovery - the old field names are now deprecated and will be removed in a future major release [GH-11665]
tls: With the upgrade to Go 1.17, the ordering of tls_cipher_suites will no longer be honored, and tls_prefer_server_cipher_suites is now ignored. [GH-11364]

BUG FIXES:

acl: (Enterprise only) fix namespace and namespace_prefix policy evaluation when both govern an authz request
api: Fix default values used for optional fields in autopilot configuration update (POST to /v1/operator/autopilot/configuration) [GH-10558] [GH-10559]
api: ensure new partition fields are omit empty for compatibility with older versions of consul [GH-11585]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time.
areas: (Enterprise only) make the gRPC server tracker network area aware [GH-11748]
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [GH-11693]
ca: fixes a bug that caused the SigningKeyID to be wrong in the primary DC, when the Vault provider is used, after a CA config creates a new root. [GH-11672]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [GH-11671]
check root and intermediate CA expiry before using it to sign a leaf certificate. [GH-10500]
connect/ca: ensure edits to the key type/bits for the connect builtin CA will regenerate the roots [GH-10330]
connect/ca: require new vault mount points when updating the key type/bits for the vault connect CA provider [GH-10331]
connect: fix race causing xDS generation to lock up when discovery chains are tracked for services that are no longer upstreams. [GH-11826]
dns: Fixed an issue where on DNS requests made with .alt_domain response was returned as .domain [GH-11348]
dns: return an empty answer when asked for an addr dns with type other then A and AAAA. [GH-10401]
macos: fixes building with a non-Apple LLVM (such as installed via Homebrew) [GH-11586]
namespaces: (Enterprise only) ensure the namespace replicator doesn't replicate deleted namespaces
proxycfg: ensure all of the watches are canceled if they are cancelable [GH-11824]
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
ui: Change partitions to expect [] from the listing API [GH-11791]
ui: Don't offer to save an intention with a source/destination wildcard partition [GH-11804]
ui: Ensure all types of data get reconciled with the backend data [GH-11237]
ui: Ensure dc selector correctly shows the currently selected dc [GH-11380]
ui: Ensure we check intention permissions for specific services when deciding
whether to show action buttons for per service intention actions [GH-11409]
ui: Ensure we filter tokens by policy when showing which tokens use a certain
policy whilst editing a policy [GH-11311]
ui: Ensure we show a readonly designed page for readonly intentions [GH-11767]
ui: Filter the global intentions list by the currently selected parition rather
than a wildcard [GH-11475]
ui: Fix inline-code brand styling [GH-11578]
ui: Fix visual issue with slight table header overflow [GH-11670]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Gracefully recover from non-existant DC errors [GH-11077]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]
ui: Revert to depending on the backend, 'post-user-action', to report
permissions errors rather than using UI capabilities 'pre-user-action' [GH-11520]
ui: Topology - Fix up Default Allow and Permissive Intentions notices [GH-11216]
ui: code editor styling (layout consistency + wide screen support) [GH-11474]
use the MaxQueryTime instead of RPCHoldTimeout for blocking RPC queries
 [GH-8978]. [GH-10299]
windows: fixes arm and arm64 builds [GH-11586]

NOTES:

Renamed the agent_master field to agent_recovery in the acl-tokens.json file in which tokens are persisted on-disk (when acl.enable_token_persistence is enabled) [GH-11744]
","1.11.0 (December 14, 2021)
BREAKING CHANGES:
acl: The legacy ACL system that was deprecated in Consul 1.4.0 has been removed. Before upgrading you should verify that nothing is still using the legacy ACL system. See the Migrate Legacy ACL Tokens Learn Guide for more information. [GH-11232]
cli: consul acl set-agent-token master has been replaced with consul acl set-agent-token recovery [GH-11669]
SECURITY:
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
rpc: authorize raft requests CVE-2021-37219 [GH-10925]
FEATURES:
Admin Partitions (Consul Enterprise only) This version adds admin partitions, a new entity defining administrative and networking boundaries within a Consul deployment. For more information refer to the Admin Partition documentation.
ca: Add a configurable TTL for Connect CA root certificates. The configuration is supported by the Vault and Consul providers. [GH-11428]
ca: Add a configurable TTL to the AWS ACM Private CA provider root certificate. [GH-11449]
health-checks: add support for h2c in http2 ping health checks [GH-10690]
ui: Add UI support to use Vault as an external source for a service [GH-10769]
ui: Adding support of Consul API Gateway as an external source. [GH-11371]
ui: Adds a copy button to each composite row in tokens list page, if Secret ID returns an actual ID [GH-10735]
ui: Adds visible Consul version information [GH-11803]
ui: Topology - New views for scenarios where no dependencies exist or ACLs are disabled [GH-11280]
IMPROVEMENTS:
acls: Show AuthMethodNamespace when reading/listing ACL tokens. [GH-10598]
acl: replication routine to report the last error message. [GH-10612]
agent: add variation of force-leave that exclusively works on the WAN [GH-11722]
api: Enable setting query options on agent health and maintenance endpoints. [GH-10691]
api: responses that contain only a partial subset of results, due to filtering by ACL policies, may now include an X-Consul-Results-Filtered-By-ACLs header [GH-11569]
checks: add failures_before_warning setting for interval checks. [GH-10969]
ci: Upgrade to use Go 1.17.5 [GH-11799]
ci: Allow configuring graceful stop in testutil. [GH-10566]
cli: Add -cas and -modify-index flags to the consul config delete command to support Check-And-Set (CAS) deletion of config entries [GH-11419]
config: (Enterprise Only) Allow specifying permission mode for audit logs. [GH-10732]
config: Support Check-And-Set (CAS) deletion of config entries [GH-11419]
config: add dns_config.recursor_strategy flag to control the order which DNS recursors are queried [GH-10611]
config: warn the user if client_addr is empty because client services won't be listening [GH-11461]
connect/ca: cease including the common name field in generated x509 non-CA certificates [GH-10424]
connect: Add low-level feature to allow an Ingress to retrieve TLS certificates from SDS. [GH-10903]
connect: Consul will now generate a unique virtual IP for each connect-enabled service (this will also differ across namespace/partition in Enterprise). [GH-11724]
connect: Support Vault auth methods for the Connect CA Vault provider. Currently, we support any non-deprecated auth methods the latest version of Vault supports (v1.8.5), which include AppRole, AliCloud, AWS, Azure, Cloud Foundry, GitHub, Google Cloud, JWT/OIDC, Kerberos, Kubernetes, LDAP, Oracle Cloud Infrastructure, Okta, Radius, TLS Certificates, and Username & Password. [GH-11573]
connect: Support manipulating HTTP headers in the mesh. [GH-10613]
connect: add Namespace configuration setting for Vault CA provider [GH-11477]
connect: ingress gateways may now enable built-in TLS for a subset of listeners. [GH-11163]
connect: service-resolver subset filters are validated for valid go-bexpr syntax on write [GH-11293]
connect: update supported envoy versions to 1.19.1, 1.18.4, 1.17.4, 1.16.5 [GH-11115]
connect: update supported envoy versions to 1.20.0, 1.19.1, 1.18.4, 1.17.4 [GH-11277]
debug: Add a new /v1/agent/metrics/stream API endpoint for streaming of metrics [GH-10399]
debug: rename cluster capture target to members, to be more consistent with the terms used by the API. [GH-10804]
dns: Added a virtual endpoint for querying the assigned virtual IP for a service. [GH-11725]
http: when a URL path is not found, include a message with the 404 status code to help the user understand why (e.g., HTTP API endpoint path not prefixed with /v1/) [GH-11818]
raft: Added a configuration to disable boltdb freelist syncing [GH-11720]
raft: Emit boltdb related performance metrics [GH-11720]
raft: Use bbolt instead of the legacy boltdb implementation [GH-11720]
sdk: Add support for iptable rules that allow DNS lookup redirection to Consul DNS. [GH-11480]
segments: (Enterprise only) ensure that the serf_lan_allowed_cidrs applies to network segments [GH-11495]
telemetry: add a new agent.tls.cert.expiry metric for tracking when the Agent TLS certificate expires. [GH-10768]
telemetry: add a new mesh.active-root-ca.expiry metric for tracking when the root certificate expires. [GH-9924]
telemetry: added metrics to track certificates expiry. [GH-10504]
types: add TLSVersion and TLSCipherSuite [GH-11645]
ui: Change partition URL segment prefix from - to _ [GH-11801]
ui: Add upstream icons for upstreams and upstream instances [GH-11556]
ui: Add uri guard to prevent future URL encoding issues [GH-11117]
ui: Move the majority of our SASS variables to use native CSS custom
properties [GH-11200]
ui: Removed informational panel from the namespace selector menu when editing
namespaces [GH-11130]
ui: Update UI browser support to 'roughly ~2 years back' [GH-11505]
ui: Update global notification styling [GH-11577]
ui: added copy to clipboard button in code editor toolbars [GH-11474]
DEPRECATIONS:
api: /v1/agent/token/agent_master is deprecated and will be removed in a future major release - use /v1/agent/token/agent_recovery instead [GH-11669]
config: acl.tokens.master has been renamed to acl.tokens.initial_management, and acl.tokens.agent_master has been renamed to acl.tokens.agent_recovery - the old field names are now deprecated and will be removed in a future major release [GH-11665]
tls: With the upgrade to Go 1.17, the ordering of tls_cipher_suites will no longer be honored, and tls_prefer_server_cipher_suites is now ignored. [GH-11364]
BUG FIXES:
acl: (Enterprise only) fix namespace and namespace_prefix policy evaluation when both govern an authz request
api: Fix default values used for optional fields in autopilot configuration update (POST to /v1/operator/autopilot/configuration) [GH-10558] [GH-10559]
api: ensure new partition fields are omit empty for compatibility with older versions of consul [GH-11585]
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time.
areas: (Enterprise only) make the gRPC server tracker network area aware [GH-11748]
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [GH-11693]
ca: fixes a bug that caused the SigningKeyID to be wrong in the primary DC, when the Vault provider is used, after a CA config creates a new root. [GH-11672]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [GH-11671]
check root and intermediate CA expiry before using it to sign a leaf certificate. [GH-10500]
connect/ca: ensure edits to the key type/bits for the connect builtin CA will regenerate the roots [GH-10330]
connect/ca: require new vault mount points when updating the key type/bits for the vault connect CA provider [GH-10331]
connect: fix race causing xDS generation to lock up when discovery chains are tracked for services that are no longer upstreams. [GH-11826]
dns: Fixed an issue where on DNS requests made with .alt_domain response was returned as .domain [GH-11348]
dns: return an empty answer when asked for an addr dns with type other then A and AAAA. [GH-10401]
macos: fixes building with a non-Apple LLVM (such as installed via Homebrew) [GH-11586]
namespaces: (Enterprise only) ensure the namespace replicator doesn't replicate deleted namespaces
proxycfg: ensure all of the watches are canceled if they are cancelable [GH-11824]
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
ui: Change partitions to expect [] from the listing API [GH-11791]
ui: Don't offer to save an intention with a source/destination wildcard partition [GH-11804]
ui: Ensure all types of data get reconciled with the backend data [GH-11237]
ui: Ensure dc selector correctly shows the currently selected dc [GH-11380]
ui: Ensure we check intention permissions for specific services when deciding
whether to show action buttons for per service intention actions [GH-11409]
ui: Ensure we filter tokens by policy when showing which tokens use a certain
policy whilst editing a policy [GH-11311]
ui: Ensure we show a readonly designed page for readonly intentions [GH-11767]
ui: Filter the global intentions list by the currently selected parition rather
than a wildcard [GH-11475]
ui: Fix inline-code brand styling [GH-11578]
ui: Fix visual issue with slight table header overflow [GH-11670]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Gracefully recover from non-existant DC errors [GH-11077]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]
ui: Revert to depending on the backend, 'post-user-action', to report
permissions errors rather than using UI capabilities 'pre-user-action' [GH-11520]
ui: Topology - Fix up Default Allow and Permissive Intentions notices [GH-11216]
ui: code editor styling (layout consistency + wide screen support) [GH-11474]
use the MaxQueryTime instead of RPCHoldTimeout for blocking RPC queries
 [GH-8978]. [GH-10299]
windows: fixes arm and arm64 builds [GH-11586]
NOTES:
Renamed the agent_master field to agent_recovery in the acl-tokens.json file in which tokens are persisted on-disk (when acl.enable_token_persistence is enabled) [GH-11744]"
60,"1.10.5 (December 13, 2021)
SECURITY:

ci: Upgrade to Go 1.16.12 to address CVE-2021-44716 [GH-11808]

BUG FIXES:

agent: (Enterprise only) fix bug where 1.10.x agents would deregister serf checks from 1.11.x servers [GH-11700]
","1.10.5 (December 13, 2021)
SECURITY:
ci: Upgrade to Go 1.16.12 to address CVE-2021-44716 [GH-11808]
BUG FIXES:
agent: (Enterprise only) fix bug where 1.10.x agents would deregister serf checks from 1.11.x servers [GH-11700]"
61,"1.9.12 (December 13, 2021)
SECURITY:

ci: Upgrade to Go 1.16.12 to address CVE-2021-44716 [GH-11807]
","1.9.12 (December 13, 2021)
SECURITY:
ci: Upgrade to Go 1.16.12 to address CVE-2021-44716 [GH-11807]"
62,"1.8.18 (December 13, 2021)
SECURITY:

ci: Upgrade to Go 1.16.12 to address CVE-2021-44716 [GH-11806]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.

BUG FIXES:

snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]
","1.8.18 (December 13, 2021)
SECURITY:
ci: Upgrade to Go 1.16.12 to address CVE-2021-44716 [GH-11806]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
BUG FIXES:
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]"
63,"1.11.0-rc (December 08, 2021)
BREAKING CHANGES:

cli: consul acl set-agent-token master has been replaced with consul acl set-agent-token recovery [GH-11669]

FEATURES:

partitions: (Enterprise only) Ensure partitions and serf-based WAN federation are mutually exclusive.
ui: Add documentation link to Partition empty state [GH-11668]
ui: Adds basic support for showing Services exported from another partition. [GH-11702]
ui: Adds support for partitions to Service and Node Identity template visuals. [GH-11696]
ui: Adds support for partitions to the Routing visualization. [GH-11679]
ui: Don't offer a 'Valid Datacenters' option when editing policies for non-default partitions [GH-11656]
ui: Include Service.Partition into available variables for dashboard_url_templates [GH-11654]
ui: Upgrade Lock Sessions to use partitions [GH-11666]

IMPROVEMENTS:

agent: (Enterprise only) purge service/check registration files for incorrect partitions on reload [GH-11607]
agent: add variation of force-leave that exclusively works on the WAN [GH-11722]
api: (Enterprise Only) rename partition-exports config entry to exported-services. [GH-11739]
auto-config: ensure the feature works properly with partitions [GH-11699]
connect: (Enterprise only) add support for cross-partition transparent proxying. [GH-11738]
connect: (Enterprise only) add support for targeting partitions in discovery chain routes, splits, and redirects. [GH-11757]
connect: Consul will now generate a unique virtual IP for each connect-enabled service (this will also differ across namespace/partition in Enterprise). [GH-11724]
connect: Support Vault auth methods for the Connect CA Vault provider. Currently, we support any non-deprecated auth methods
the latest version of Vault supports (v1.8.5), which include AppRole, AliCloud, AWS, Azure, Cloud Foundry, GitHub, Google Cloud,
JWT/OIDC, Kerberos, Kubernetes, LDAP, Oracle Cloud Infrastructure, Okta, Radius, TLS Certificates, and Username & Password. [GH-11573]
dns: Added a virtual endpoint for querying the assigned virtual IP for a service. [GH-11725]
partitions: (Enterprise only) rename APIs, commands, and public types to use ""partition"" rather than ""admin partition"". [GH-11737]
raft: Added a configuration to disable boltdb freelist syncing [GH-11720]
raft: Emit boltdb related performance metrics [GH-11720]
raft: Use bbolt instead of the legacy boltdb implementation [GH-11720]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: block enterprise-specific partition-exports config entry from being used in OSS Consul. [GH-11680]
types: add TLSVersion and TLSCipherSuite [GH-11645]
ui: Add partition support for SSO [GH-11604]
ui: Update global notification styling [GH-11577]

DEPRECATIONS:

api: /v1/agent/token/agent_master is deprecated and will be removed in a future major release - use /v1/agent/token/agent_recovery instead [GH-11669]
config: acl.tokens.master has been renamed to acl.tokens.initial_management, and acl.tokens.agent_master has been renamed to acl.tokens.agent_recovery - the old field names are now deprecated and will be removed in a future major release [GH-11665]

BUG FIXES:

areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
areas: (Enterprise only) make the gRPC server tracker network area aware [GH-11748]
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [GH-11693]
ca: fixes a bug that caused the SigningKeyID to be wrong in the primary DC, when the Vault provider is used, after a CA config creates a new root. [GH-11672]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [GH-11671]
ui: Fix inline-code brand styling [GH-11578]
ui: Fix visual issue with slight table header overflow [GH-11670]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]
","1.11.0-rc (December 08, 2021)
BREAKING CHANGES:
cli: consul acl set-agent-token master has been replaced with consul acl set-agent-token recovery [GH-11669]
FEATURES:
partitions: (Enterprise only) Ensure partitions and serf-based WAN federation are mutually exclusive.
ui: Add documentation link to Partition empty state [GH-11668]
ui: Adds basic support for showing Services exported from another partition. [GH-11702]
ui: Adds support for partitions to Service and Node Identity template visuals. [GH-11696]
ui: Adds support for partitions to the Routing visualization. [GH-11679]
ui: Don't offer a 'Valid Datacenters' option when editing policies for non-default partitions [GH-11656]
ui: Include Service.Partition into available variables for dashboard_url_templates [GH-11654]
ui: Upgrade Lock Sessions to use partitions [GH-11666]
IMPROVEMENTS:
agent: (Enterprise only) purge service/check registration files for incorrect partitions on reload [GH-11607]
agent: add variation of force-leave that exclusively works on the WAN [GH-11722]
api: (Enterprise Only) rename partition-exports config entry to exported-services. [GH-11739]
auto-config: ensure the feature works properly with partitions [GH-11699]
connect: (Enterprise only) add support for cross-partition transparent proxying. [GH-11738]
connect: (Enterprise only) add support for targeting partitions in discovery chain routes, splits, and redirects. [GH-11757]
connect: Consul will now generate a unique virtual IP for each connect-enabled service (this will also differ across namespace/partition in Enterprise). [GH-11724]
connect: Support Vault auth methods for the Connect CA Vault provider. Currently, we support any non-deprecated auth methods
the latest version of Vault supports (v1.8.5), which include AppRole, AliCloud, AWS, Azure, Cloud Foundry, GitHub, Google Cloud,
JWT/OIDC, Kerberos, Kubernetes, LDAP, Oracle Cloud Infrastructure, Okta, Radius, TLS Certificates, and Username & Password. [GH-11573]
dns: Added a virtual endpoint for querying the assigned virtual IP for a service. [GH-11725]
partitions: (Enterprise only) rename APIs, commands, and public types to use ""partition"" rather than ""admin partition"". [GH-11737]
raft: Added a configuration to disable boltdb freelist syncing [GH-11720]
raft: Emit boltdb related performance metrics [GH-11720]
raft: Use bbolt instead of the legacy boltdb implementation [GH-11720]
sentinel: (Enterprise Only) Sentinel now uses SHA256 to generate policy ids
server: block enterprise-specific partition-exports config entry from being used in OSS Consul. [GH-11680]
types: add TLSVersion and TLSCipherSuite [GH-11645]
ui: Add partition support for SSO [GH-11604]
ui: Update global notification styling [GH-11577]
DEPRECATIONS:
api: /v1/agent/token/agent_master is deprecated and will be removed in a future major release - use /v1/agent/token/agent_recovery instead [GH-11669]
config: acl.tokens.master has been renamed to acl.tokens.initial_management, and acl.tokens.agent_master has been renamed to acl.tokens.agent_recovery - the old field names are now deprecated and will be removed in a future major release [GH-11665]
BUG FIXES:
areas: (Enterprise Only) Fixes a bug when using Yamux pool ( for servers version 1.7.3 and later), the entire pool was locked while connecting to a remote location, which could potentially take a long time. [GH-1368]
areas: (Enterprise only) make the gRPC server tracker network area aware [GH-11748]
ca: fixes a bug that caused non blocking leaf cert queries to return the same cached response regardless of ca rotation or leaf cert expiry [GH-11693]
ca: fixes a bug that caused the SigningKeyID to be wrong in the primary DC, when the Vault provider is used, after a CA config creates a new root. [GH-11672]
ca: fixes a bug that caused the intermediate cert used to sign leaf certs to be missing from the /connect/ca/roots API response when the Vault provider was used. [GH-11671]
ui: Fix inline-code brand styling [GH-11578]
ui: Fix visual issue with slight table header overflow [GH-11670]
ui: Fixes an issue where under some circumstances after logging we present the
data loaded previous to you logging in. [GH-11681]
ui: Include Service.Namespace into available variables for dashboard_url_templates [GH-11640]"
64,"1.11.0-beta3 (November 17, 2021)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names. [GH-11491]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.

FEATURES:

ca: Add a configurable TTL for Connect CA root certificates. The configuration is supported by the Vault and Consul providers. [GH-11428]
ca: Add a configurable TTL to the AWS ACM Private CA provider root certificate. [GH-11449]
health-checks: add support for h2c in http2 ping health checks [GH-10690]
partitions: (Enterprise only) segment serf LAN gossip between nodes in different partitions
ui: Adding support of Consul API Gateway as an external source. [GH-11371]
ui: Topology - New views for scenarios where no dependencies exist or ACLs are disabled [GH-11280]

IMPROVEMENTS:

ci: Artifact builds will now only run on merges to the release branches or to main [GH-11417]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [GH-11417]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [GH-11417]
config: warn the user if client_addr is empty because client services won't be listening [GH-11461]
connect/ca: Return an error when querying roots from uninitialized CA. [GH-11514]
connect: (Enterprise only) Allow ingress gateways to target services in another partition [GH-11566]
connect: add Namespace configuration setting for Vault CA provider [GH-11477]
namespaces: (Enterprise only) policy and role defaults can reference policies in any namespace in the same partition by ID
partitions: Prevent writing partition-exports entries to secondary DCs. [GH-11541]
sdk: Add support for iptable rules that allow DNS lookup redirection to Consul DNS. [GH-11480]
segments: (Enterprise only) ensure that the serf_lan_allowed_cidrs applies to network segments [GH-11495]
ui: Add upstream icons for upstreams and upstream instances [GH-11556]
ui: Update UI browser support to 'roughly ~2 years back' [GH-11505]
ui: When switching partitions reset the namespace back to the tokens default namespace or default [GH-11479]
ui: added copy to clipboard button in code editor toolbars [GH-11474]

BUG FIXES:

acl: (Enterprise only) fix namespace and namespace_prefix policy evaluation when both govern an authz request
api: ensure new partition fields are omit empty for compatibility with older versions of consul [GH-11585]
connect/ca: Allow secondary initialization to resume after being deferred due to unreachable or incompatible primary DC servers. [GH-11514]
connect: fix issue with attempting to generate an invalid upstream cluster from UpstreamConfig.Defaults. [GH-11245]
macos: fixes building with a non-Apple LLVM (such as installed via Homebrew) [GH-11586]
namespaces: (Enterprise only) ensure the namespace replicator doesn't replicate deleted namespaces
partitions: (Enterprise only) fix panic when forwarding delete operations to the leader
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
snapshot: (Enterprise only) snapshot agent no longer attempts to refresh its license from the server when a local license is provided (i.e. via config or an environment variable)
state: (Enterprise Only) ensure partition delete triggers namespace deletes
ui: (Enterprise only) When no namespace is selected, make sure to default to the tokens default namespace when requesting permissions [GH-11472]
ui: Ensure the UI stores the default partition for the users token [GH-11591]
ui: Ensure we check intention permissions for specific services when deciding
whether to show action buttons for per service intention actions [GH-11409]
ui: Filter the global intentions list by the currently selected parition rather
than a wildcard [GH-11475]
ui: Revert to depending on the backend, 'post-user-action', to report
permissions errors rather than using UI capabilities 'pre-user-action' [GH-11520]
ui: code editor styling (layout consistency + wide screen support) [GH-11474]
windows: fixes arm and arm64 builds [GH-11586]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [GH-11522]
","1.11.0-beta3 (November 17, 2021)
SECURITY:
agent: Use SHA256 instead of MD5 to generate persistence file names. [GH-11491]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
FEATURES:
ca: Add a configurable TTL for Connect CA root certificates. The configuration is supported by the Vault and Consul providers. [GH-11428]
ca: Add a configurable TTL to the AWS ACM Private CA provider root certificate. [GH-11449]
health-checks: add support for h2c in http2 ping health checks [GH-10690]
partitions: (Enterprise only) segment serf LAN gossip between nodes in different partitions
ui: Adding support of Consul API Gateway as an external source. [GH-11371]
ui: Topology - New views for scenarios where no dependencies exist or ACLs are disabled [GH-11280]
IMPROVEMENTS:
ci: Artifact builds will now only run on merges to the release branches or to main [GH-11417]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [GH-11417]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [GH-11417]
config: warn the user if client_addr is empty because client services won't be listening [GH-11461]
connect/ca: Return an error when querying roots from uninitialized CA. [GH-11514]
connect: (Enterprise only) Allow ingress gateways to target services in another partition [GH-11566]
connect: add Namespace configuration setting for Vault CA provider [GH-11477]
namespaces: (Enterprise only) policy and role defaults can reference policies in any namespace in the same partition by ID
partitions: Prevent writing partition-exports entries to secondary DCs. [GH-11541]
sdk: Add support for iptable rules that allow DNS lookup redirection to Consul DNS. [GH-11480]
segments: (Enterprise only) ensure that the serf_lan_allowed_cidrs applies to network segments [GH-11495]
ui: Add upstream icons for upstreams and upstream instances [GH-11556]
ui: Update UI browser support to 'roughly ~2 years back' [GH-11505]
ui: When switching partitions reset the namespace back to the tokens default namespace or default [GH-11479]
ui: added copy to clipboard button in code editor toolbars [GH-11474]
BUG FIXES:
acl: (Enterprise only) fix namespace and namespace_prefix policy evaluation when both govern an authz request
api: ensure new partition fields are omit empty for compatibility with older versions of consul [GH-11585]
connect/ca: Allow secondary initialization to resume after being deferred due to unreachable or incompatible primary DC servers. [GH-11514]
connect: fix issue with attempting to generate an invalid upstream cluster from UpstreamConfig.Defaults. [GH-11245]
macos: fixes building with a non-Apple LLVM (such as installed via Homebrew) [GH-11586]
namespaces: (Enterprise only) ensure the namespace replicator doesn't replicate deleted namespaces
partitions: (Enterprise only) fix panic when forwarding delete operations to the leader
snapshot: (Enterprise only) fixed a bug where the snapshot agent would ignore the license_path setting in config files
snapshot: (Enterprise only) snapshot agent no longer attempts to refresh its license from the server when a local license is provided (i.e. via config or an environment variable)
state: (Enterprise Only) ensure partition delete triggers namespace deletes
ui: (Enterprise only) When no namespace is selected, make sure to default to the tokens default namespace when requesting permissions [GH-11472]
ui: Ensure the UI stores the default partition for the users token [GH-11591]
ui: Ensure we check intention permissions for specific services when deciding
whether to show action buttons for per service intention actions [GH-11409]
ui: Filter the global intentions list by the currently selected parition rather
than a wildcard [GH-11475]
ui: Revert to depending on the backend, 'post-user-action', to report
permissions errors rather than using UI capabilities 'pre-user-action' [GH-11520]
ui: code editor styling (layout consistency + wide screen support) [GH-11474]
windows: fixes arm and arm64 builds [GH-11586]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [GH-11522]"
65,"1.10.4 (November 11, 2021)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names. [GH-11491]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.

IMPROVEMENTS:

ci: Artifact builds will now only run on merges to the release branches or to main [GH-11417]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [GH-11417]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [GH-11417]
connect/ca: Return an error when querying roots from uninitialized CA. [GH-11514]
telemetry: Add new metrics for the count of connect service instances and configuration entries. [GH-11222]

BUG FIXES:

acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [GH-11136]
api: fixed backwards compatibility issue with AgentService SocketPath field. [GH-11318]
connect/ca: Allow secondary initialization to resume after being deferred due to unreachable or incompatible primary DC servers. [GH-11514]
connect: fix issue with attempting to generate an invalid upstream cluster from UpstreamConfig.Defaults. [GH-11245]
raft: do not trigger an election if not part of the servers list. [GH-11375]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [GH-11255]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
snapshot: (Enterprise only) snapshot agent no longer attempts to refresh its license from the server when a local license is provided (i.e. via config or an environment variable)
telemetry: Consul Clients no longer emit Autopilot metrics. [GH-11241]
telemetry: fixes a bug with Prometheus consul_autopilot_failure_tolerance metric where 0 is reported instead of NaN on follower servers. [GH-11399]
telemetry: fixes a bug with Prometheus consul_autopilot_healthy metric where 0 is reported instead of NaN on servers. [GH-11231]
ui: (Enterprise only) When no namespace is selected, make sure to default to the tokens default namespace when requesting permissions [GH-11472]
ui: Ensure we check intention permissions for specific services when deciding
whether to show action buttons for per service intention actions [GH-11270]
ui: Fixed styling of Role remove dialog on the Token edit page [GH-11298]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [GH-11522]
","1.10.4 (November 11, 2021)
SECURITY:
agent: Use SHA256 instead of MD5 to generate persistence file names. [GH-11491]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
IMPROVEMENTS:
ci: Artifact builds will now only run on merges to the release branches or to main [GH-11417]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [GH-11417]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [GH-11417]
connect/ca: Return an error when querying roots from uninitialized CA. [GH-11514]
telemetry: Add new metrics for the count of connect service instances and configuration entries. [GH-11222]
BUG FIXES:
acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [GH-11136]
api: fixed backwards compatibility issue with AgentService SocketPath field. [GH-11318]
connect/ca: Allow secondary initialization to resume after being deferred due to unreachable or incompatible primary DC servers. [GH-11514]
connect: fix issue with attempting to generate an invalid upstream cluster from UpstreamConfig.Defaults. [GH-11245]
raft: do not trigger an election if not part of the servers list. [GH-11375]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [GH-11255]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
snapshot: (Enterprise only) snapshot agent no longer attempts to refresh its license from the server when a local license is provided (i.e. via config or an environment variable)
telemetry: Consul Clients no longer emit Autopilot metrics. [GH-11241]
telemetry: fixes a bug with Prometheus consul_autopilot_failure_tolerance metric where 0 is reported instead of NaN on follower servers. [GH-11399]
telemetry: fixes a bug with Prometheus consul_autopilot_healthy metric where 0 is reported instead of NaN on servers. [GH-11231]
ui: (Enterprise only) When no namespace is selected, make sure to default to the tokens default namespace when requesting permissions [GH-11472]
ui: Ensure we check intention permissions for specific services when deciding
whether to show action buttons for per service intention actions [GH-11270]
ui: Fixed styling of Role remove dialog on the Token edit page [GH-11298]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [GH-11522]"
66,"1.9.11 (November 11, 2021)
SECURITY:

agent: Use SHA256 instead of MD5 to generate persistence file names. [GH-11491]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.

IMPROVEMENTS:

ci: Artifact builds will now only run on merges to the release branches or to main [GH-11417]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [GH-11417]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [GH-11417]
telemetry: Add new metrics for the count of connect service instances and configuration entries. [GH-11222]

BUG FIXES:

acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [GH-11136]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [GH-11255]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
ui: Fixed styling of Role remove dialog on the Token edit page [GH-11298]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [GH-11522]
","1.9.11 (November 11, 2021)
SECURITY:
agent: Use SHA256 instead of MD5 to generate persistence file names. [GH-11491]
namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
IMPROVEMENTS:
ci: Artifact builds will now only run on merges to the release branches or to main [GH-11417]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [GH-11417]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [GH-11417]
telemetry: Add new metrics for the count of connect service instances and configuration entries. [GH-11222]
BUG FIXES:
acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [GH-11136]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [GH-11255]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
ui: Fixed styling of Role remove dialog on the Token edit page [GH-11298]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [GH-11522]"
67,"1.8.17 (November 11, 2021)
SECURITY:
* namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
IMPROVEMENTS:

ci: Artifact builds will now only run on merges to the release branches or to main [GH-11417]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [GH-11417]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [GH-11417]

BUG FIXES:

acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [GH-11136]
raft: Consul leaders will attempt to transfer leadership to another server as part of gracefully leaving the cluster. [GH-11242]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [GH-11255]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
ui: Fixed styling of Role delete confirmation button with the Token edit page [GH-11297]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [GH-11522]
","1.8.17 (November 11, 2021)
SECURITY:
* namespaces: (Enterprise only) Creating or editing namespaces that include default ACL policies or ACL roles now requires acl:write permission in the default namespace. This change fixes CVE-2021-41805.
IMPROVEMENTS:
ci: Artifact builds will now only run on merges to the release branches or to main [GH-11417]
ci: The Linux packages are now available for all supported Linux architectures including arm, arm64, 386, and amd64 [GH-11417]
ci: The Linux packaging service configs and pre/post install scripts are now available under  [.release/linux] [GH-11417]
BUG FIXES:
acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [GH-11136]
raft: Consul leaders will attempt to transfer leadership to another server as part of gracefully leaving the cluster. [GH-11242]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [GH-11255]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
ui: Fixed styling of Role delete confirmation button with the Token edit page [GH-11297]
xds: fixes a bug where replacing a mesh gateway node used for WAN federation (with another that has a different IP) could leave gateways in the other DC unable to re-establish the connection [GH-11522]"
68,"1.11.0-beta2 (November 02, 2021)
BREAKING CHANGES:

acl: The legacy ACL system that was deprecated in Consul 1.4.0 has been removed. Before upgrading you should verify that nothing is still using the legacy ACL system. See the Migrate Legacy ACL Tokens Learn Guide for more information. [GH-11232]

IMPROVEMENTS:

agent: for various /v1/agent endpoints parse the partition parameter on the request [GH-11444]
agent: refactor the agent delegate interface to be partition friendly [GH-11429]
cli: Add -cas and -modify-index flags to the consul config delete command to support Check-And-Set (CAS) deletion of config entries [GH-11419]
cli: update consul members output to display partitions and sort the results usefully [GH-11446]
config: Allow ${} style interpolation for UI Dashboard template URLs [GH-11328]
config: Support Check-And-Set (CAS) deletion of config entries [GH-11419]
connect: (Enterprise only) add support for dialing upstreams in remote partitions through mesh gateways. [GH-11431]
connect: (Enterprise only) updates ServiceRead and NodeRead to account for the partition-exports config entry. [GH-11433]
connect: ingress gateways may now enable built-in TLS for a subset of listeners. [GH-11163]
connect: service-resolver subset filters are validated for valid go-bexpr syntax on write [GH-11293]
connect: update supported envoy versions to 1.20.0, 1.19.1, 1.18.4, 1.17.4 [GH-11277]

DEPRECATIONS:

tls: With the upgrade to Go 1.17, the ordering of tls_cipher_suites will no longer be honored, and tls_prefer_server_cipher_suites is now ignored. [GH-11364]

BUG FIXES:

api: fixed backwards compatibility issue with AgentService SocketPath field. [GH-11318]
dns: Fixed an issue where on DNS requests made with .alt_domain response was returned as .domain [GH-11348]
raft: do not trigger an election if not part of the servers list. [GH-11375]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [GH-11255]
telemetry: fixes a bug with Prometheus consul_autopilot_failure_tolerance metric where 0 is reported instead of NaN on follower servers. [GH-11399]
ui: Ensure dc selector correctly shows the currently selected dc [GH-11380]
ui: Ensure we filter tokens by policy when showing which tokens use a certain
policy whilst editing a policy [GH-11311]
","1.11.0-beta2 (November 02, 2021)
BREAKING CHANGES:
acl: The legacy ACL system that was deprecated in Consul 1.4.0 has been removed. Before upgrading you should verify that nothing is still using the legacy ACL system. See the Migrate Legacy ACL Tokens Learn Guide for more information. [GH-11232]
IMPROVEMENTS:
agent: for various /v1/agent endpoints parse the partition parameter on the request [GH-11444]
agent: refactor the agent delegate interface to be partition friendly [GH-11429]
cli: Add -cas and -modify-index flags to the consul config delete command to support Check-And-Set (CAS) deletion of config entries [GH-11419]
cli: update consul members output to display partitions and sort the results usefully [GH-11446]
config: Allow ${} style interpolation for UI Dashboard template URLs [GH-11328]
config: Support Check-And-Set (CAS) deletion of config entries [GH-11419]
connect: (Enterprise only) add support for dialing upstreams in remote partitions through mesh gateways. [GH-11431]
connect: (Enterprise only) updates ServiceRead and NodeRead to account for the partition-exports config entry. [GH-11433]
connect: ingress gateways may now enable built-in TLS for a subset of listeners. [GH-11163]
connect: service-resolver subset filters are validated for valid go-bexpr syntax on write [GH-11293]
connect: update supported envoy versions to 1.20.0, 1.19.1, 1.18.4, 1.17.4 [GH-11277]
DEPRECATIONS:
tls: With the upgrade to Go 1.17, the ordering of tls_cipher_suites will no longer be honored, and tls_prefer_server_cipher_suites is now ignored. [GH-11364]
BUG FIXES:
api: fixed backwards compatibility issue with AgentService SocketPath field. [GH-11318]
dns: Fixed an issue where on DNS requests made with .alt_domain response was returned as .domain [GH-11348]
raft: do not trigger an election if not part of the servers list. [GH-11375]
rpc: only attempt to authorize the DNSName in the client cert when verify_incoming_rpc=true [GH-11255]
telemetry: fixes a bug with Prometheus consul_autopilot_failure_tolerance metric where 0 is reported instead of NaN on follower servers. [GH-11399]
ui: Ensure dc selector correctly shows the currently selected dc [GH-11380]
ui: Ensure we filter tokens by policy when showing which tokens use a certain
policy whilst editing a policy [GH-11311]"
69,"1.11.0-beta1 (October 15, 2021)
FEATURES:

partitions: allow for partition queries to be forwarded [GH-11099]
sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [GH-11026]
ui: Added initial support for admin partition CRUD [GH-11188]

IMPROVEMENTS:

api: add partition field to acl structs [GH-11080]
audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: Forwarded, Via, X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Proto. [GH-11107]
connect: Add low-level feature to allow an Ingress to retrieve TLS certificates from SDS. [GH-10903]
connect: update supported envoy versions to 1.19.1, 1.18.4, 1.17.4, 1.16.5 [GH-11115]
state: reads of partitions now accept an optional memdb.WatchSet
telemetry: Add new metrics for the count of KV entries in the Consul store. [GH-11090]
telemetry: Add new metrics for the count of connect service instances and configuration entries. [GH-11222]
ui: Add initial support for partitions to intentions [GH-11129]
ui: Add uri guard to prevent future URL encoding issues [GH-11117]
ui: Move the majority of our SASS variables to use native CSS custom
properties [GH-11200]
ui: Removed informational panel from the namespace selector menu when editing
namespaces [GH-11130]

BUG FIXES:

acl: (Enterprise only) Fix bug in 'consul members' filtering with partitions. [GH-11263]
acl: (Enterprise only) ensure that auth methods with namespace rules work with partitions [GH-11323]
acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [GH-11136]
connect: Fix upstream listener escape hatch for prepared queries [GH-11109]
grpc: strip local ACL tokens from RPCs during forwarding if crossing datacenters [GH-11099]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
telemetry: Consul Clients no longer emit Autopilot metrics. [GH-11241]
telemetry: fixes a bug with Prometheus consul_autopilot_healthy metric where 0 is reported instead of NaN on servers. [GH-11231]
ui: (Enterprise Only) Fix saving intentions with namespaced source/destination [GH-11095]
ui: Don't show a CRD warning for read-only intentions [GH-11149]
ui: Ensure all types of data get reconciled with the backend data [GH-11237]
ui: Fixed styling of Role remove dialog on the Token edit page [GH-11298]
ui: Gracefully recover from non-existant DC errors [GH-11077]
ui: Ignore reported permissions for KV area meaning the KV is always enabled
for both read/write access if the HTTP API allows. [GH-10916]
ui: Topology - Fix up Default Allow and Permissive Intentions notices [GH-11216]
ui: hide create button for policies/roles/namespace if users token has no write permissions to those areas [GH-10914]
xds: ensure the active streams counters are 64 bit aligned on 32 bit systems [GH-11085]
xds: fixed a bug where Envoy sidecars could enter a state where they failed to receive xds updates from Consul [GH-10987]
Fixing SOA record to return proper domain when alt domain in use. [GH-10431]
","1.11.0-beta1 (October 15, 2021)
FEATURES:
partitions: allow for partition queries to be forwarded [GH-11099]
sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [GH-11026]
ui: Added initial support for admin partition CRUD [GH-11188]
IMPROVEMENTS:
api: add partition field to acl structs [GH-11080]
audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: Forwarded, Via, X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Proto. [GH-11107]
connect: Add low-level feature to allow an Ingress to retrieve TLS certificates from SDS. [GH-10903]
connect: update supported envoy versions to 1.19.1, 1.18.4, 1.17.4, 1.16.5 [GH-11115]
state: reads of partitions now accept an optional memdb.WatchSet
telemetry: Add new metrics for the count of KV entries in the Consul store. [GH-11090]
telemetry: Add new metrics for the count of connect service instances and configuration entries. [GH-11222]
ui: Add initial support for partitions to intentions [GH-11129]
ui: Add uri guard to prevent future URL encoding issues [GH-11117]
ui: Move the majority of our SASS variables to use native CSS custom
properties [GH-11200]
ui: Removed informational panel from the namespace selector menu when editing
namespaces [GH-11130]
BUG FIXES:
acl: (Enterprise only) Fix bug in 'consul members' filtering with partitions. [GH-11263]
acl: (Enterprise only) ensure that auth methods with namespace rules work with partitions [GH-11323]
acl: fixes the fallback behaviour of down_policy with setting extend-cache/async-cache when the token is not cached. [GH-11136]
connect: Fix upstream listener escape hatch for prepared queries [GH-11109]
grpc: strip local ACL tokens from RPCs during forwarding if crossing datacenters [GH-11099]
server: (Enterprise only) Ensure that servers leave network segments when leaving other gossip pools
telemetry: Consul Clients no longer emit Autopilot metrics. [GH-11241]
telemetry: fixes a bug with Prometheus consul_autopilot_healthy metric where 0 is reported instead of NaN on servers. [GH-11231]
ui: (Enterprise Only) Fix saving intentions with namespaced source/destination [GH-11095]
ui: Don't show a CRD warning for read-only intentions [GH-11149]
ui: Ensure all types of data get reconciled with the backend data [GH-11237]
ui: Fixed styling of Role remove dialog on the Token edit page [GH-11298]
ui: Gracefully recover from non-existant DC errors [GH-11077]
ui: Ignore reported permissions for KV area meaning the KV is always enabled
for both read/write access if the HTTP API allows. [GH-10916]
ui: Topology - Fix up Default Allow and Permissive Intentions notices [GH-11216]
ui: hide create button for policies/roles/namespace if users token has no write permissions to those areas [GH-10914]
xds: ensure the active streams counters are 64 bit aligned on 32 bit systems [GH-11085]
xds: fixed a bug where Envoy sidecars could enter a state where they failed to receive xds updates from Consul [GH-10987]
Fixing SOA record to return proper domain when alt domain in use. [GH-10431]"
70,"1.10.3 (September 27, 2021)
FEATURES:

sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [GH-11026]

IMPROVEMENTS:

audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: Forwarded, Via, X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Proto. [GH-11107]
connect: update supported envoy versions to 1.18.4, 1.17.4, 1.16.5 [GH-10961]
telemetry: Add new metrics for the count of KV entries in the Consul store. [GH-11090]

BUG FIXES:

api: Revert early out errors from license APIs to allow v1.10+ clients to
manage licenses on older servers [GH-10952]
connect: Fix upstream listener escape hatch for prepared queries [GH-11109]
grpc: strip local ACL tokens from RPCs during forwarding if crossing datacenters [GH-11099]
tls: consider presented intermediates during server connection tls handshake. [GH-10964]
ui: (Enterprise Only) Fix saving intentions with namespaced source/destination [GH-11095]
ui: Don't show a CRD warning for read-only intentions [GH-11149]
ui: Ensure routing-config page blocking queries are cleaned up correctly [GH-10915]
ui: Ignore reported permissions for KV area meaning the KV is always enabled
for both read/write access if the HTTP API allows. [GH-10916]
ui: hide create button for policies/roles/namespace if users token has no write permissions to those areas [GH-10914]
xds: ensure the active streams counters are 64 bit aligned on 32 bit systems [GH-11085]
xds: fixed a bug where Envoy sidecars could enter a state where they failed to receive xds updates from Consul [GH-10987]
","1.10.3 (September 27, 2021)
FEATURES:
sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [GH-11026]
IMPROVEMENTS:
audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: Forwarded, Via, X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Proto. [GH-11107]
connect: update supported envoy versions to 1.18.4, 1.17.4, 1.16.5 [GH-10961]
telemetry: Add new metrics for the count of KV entries in the Consul store. [GH-11090]
BUG FIXES:
api: Revert early out errors from license APIs to allow v1.10+ clients to
manage licenses on older servers [GH-10952]
connect: Fix upstream listener escape hatch for prepared queries [GH-11109]
grpc: strip local ACL tokens from RPCs during forwarding if crossing datacenters [GH-11099]
tls: consider presented intermediates during server connection tls handshake. [GH-10964]
ui: (Enterprise Only) Fix saving intentions with namespaced source/destination [GH-11095]
ui: Don't show a CRD warning for read-only intentions [GH-11149]
ui: Ensure routing-config page blocking queries are cleaned up correctly [GH-10915]
ui: Ignore reported permissions for KV area meaning the KV is always enabled
for both read/write access if the HTTP API allows. [GH-10916]
ui: hide create button for policies/roles/namespace if users token has no write permissions to those areas [GH-10914]
xds: ensure the active streams counters are 64 bit aligned on 32 bit systems [GH-11085]
xds: fixed a bug where Envoy sidecars could enter a state where they failed to receive xds updates from Consul [GH-10987]"
71,"1.9.10 (September 27, 2021)
FEATURES:

sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [GH-11026]

IMPROVEMENTS:

audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: Forwarded, Via, X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Proto. [GH-11107]
connect: update supported envoy versions to 1.16.5 [GH-10961]
telemetry: Add new metrics for the count of KV entries in the Consul store. [GH-11090]

BUG FIXES:

tls: consider presented intermediates during server connection tls handshake. [GH-10964]
ui: (Enterprise Only) Fix saving intentions with namespaced source/destination [GH-11095]
","1.9.10 (September 27, 2021)
FEATURES:
sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [GH-11026]
IMPROVEMENTS:
audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: Forwarded, Via, X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Proto. [GH-11107]
connect: update supported envoy versions to 1.16.5 [GH-10961]
telemetry: Add new metrics for the count of KV entries in the Consul store. [GH-11090]
BUG FIXES:
tls: consider presented intermediates during server connection tls handshake. [GH-10964]
ui: (Enterprise Only) Fix saving intentions with namespaced source/destination [GH-11095]"
72,"1.8.16 (September 27, 2021)
FEATURES:

sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [GH-11026]

IMPROVEMENTS:

audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: Forwarded, Via, X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Proto. [GH-11107]

BUG FIXES:

tls: consider presented intermediates during server connection tls handshake. [GH-10964]
ui: (Enterprise Only) Fixes a visual issue where namespaces would ""double up"" in the Source/Destination select menu when creating/editing intentions [GH-11102]
","1.8.16 (September 27, 2021)
FEATURES:
sso/oidc: (Enterprise only) Add support for providing acr_values in OIDC auth flow [GH-11026]
IMPROVEMENTS:
audit-logging: (Enterprise Only) Audit logs will now include select HTTP headers in each logs payload. Those headers are: Forwarded, Via, X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Proto. [GH-11107]
BUG FIXES:
tls: consider presented intermediates during server connection tls handshake. [GH-10964]
ui: (Enterprise Only) Fixes a visual issue where namespaces would ""double up"" in the Source/Destination select menu when creating/editing intentions [GH-11102]"
73,"1.11.0-alpha (September 16, 2021)
SECURITY:

rpc: authorize raft requests CVE-2021-37219 [GH-10925]

FEATURES:

config: add agent config flag for enterprise clients to indicate they wish to join a particular partition [GH-10572]
connect: include optional partition prefixes in SPIFFE identifiers [GH-10507]
partitions: (Enterprise only) Adds admin partitions, a new feature to enhance Consul's multitenancy capabilites.
ui: Add UI support to use Vault as an external source for a service [GH-10769]
ui: Adds a copy button to each composite row in tokens list page, if Secret ID returns an actual ID [GH-10735]

IMPROVEMENTS:

acl: replication routine to report the last error message. [GH-10612]
api: Enable setting query options on agent health and maintenance endpoints. [GH-10691]
checks: add failures_before_warning setting for interval checks. [GH-10969]
config: (Enterprise Only) Allow specifying permission mode for audit logs. [GH-10732]
config: add dns_config.recursor_strategy flag to control the order which DNS recursors are queried [GH-10611]
connect/ca: cease including the common name field in generated x509 non-CA certificates [GH-10424]
connect: Support manipulating HTTP headers in the mesh. [GH-10613]
connect: update supported envoy versions to 1.18.4, 1.17.4, 1.16.5 [GH-10961]
debug: Add a new /v1/agent/metrics/stream API endpoint for streaming of metrics [GH-10399]
debug: rename cluster capture target to members, to be more consistent with the terms used by the API. [GH-10804]
structs: prohibit config entries from referencing more than one partition at a time [GH-10478]
telemetry: add a new agent.tls.cert.expiry metric for tracking when the Agent TLS certificate expires. [GH-10768]
telemetry: add a new mesh.active-root-ca.expiry metric for tracking when the root certificate expires. [GH-9924]

DEPRECATIONS:

config: the ports.grpc and addresses.grpc configuration settings have been renamed to ports.xds and addresses.xds to better match their function. [GH-10588]

BUG FIXES:

api: Fix default values used for optional fields in autopilot configuration update (POST to /v1/operator/autopilot/configuration) [GH-10558] [GH-10559]
api: Revert early out errors from license APIs to allow v1.10+ clients to
manage licenses on older servers [GH-10952]
check root and intermediate CA expiry before using it to sign a leaf certificate. [GH-10500]
connect/ca: ensure edits to the key type/bits for the connect builtin CA will regenerate the roots [GH-10330]
connect/ca: require new vault mount points when updating the key type/bits for the vault connect CA provider [GH-10331]
dns: return an empty answer when asked for an addr dns with type other then A and AAAA. [GH-10401]
tls: consider presented intermediates during server connection tls handshake. [GH-10964]
use the MaxQueryTime instead of RPCHoldTimeout for blocking RPC queries 
 [GH-8978]. [GH-10299]
","1.11.0-alpha (September 16, 2021)
SECURITY:
rpc: authorize raft requests CVE-2021-37219 [GH-10925]
FEATURES:
config: add agent config flag for enterprise clients to indicate they wish to join a particular partition [GH-10572]
connect: include optional partition prefixes in SPIFFE identifiers [GH-10507]
partitions: (Enterprise only) Adds admin partitions, a new feature to enhance Consul's multitenancy capabilites.
ui: Add UI support to use Vault as an external source for a service [GH-10769]
ui: Adds a copy button to each composite row in tokens list page, if Secret ID returns an actual ID [GH-10735]
IMPROVEMENTS:
acl: replication routine to report the last error message. [GH-10612]
api: Enable setting query options on agent health and maintenance endpoints. [GH-10691]
checks: add failures_before_warning setting for interval checks. [GH-10969]
config: (Enterprise Only) Allow specifying permission mode for audit logs. [GH-10732]
config: add dns_config.recursor_strategy flag to control the order which DNS recursors are queried [GH-10611]
connect/ca: cease including the common name field in generated x509 non-CA certificates [GH-10424]
connect: Support manipulating HTTP headers in the mesh. [GH-10613]
connect: update supported envoy versions to 1.18.4, 1.17.4, 1.16.5 [GH-10961]
debug: Add a new /v1/agent/metrics/stream API endpoint for streaming of metrics [GH-10399]
debug: rename cluster capture target to members, to be more consistent with the terms used by the API. [GH-10804]
structs: prohibit config entries from referencing more than one partition at a time [GH-10478]
telemetry: add a new agent.tls.cert.expiry metric for tracking when the Agent TLS certificate expires. [GH-10768]
telemetry: add a new mesh.active-root-ca.expiry metric for tracking when the root certificate expires. [GH-9924]
DEPRECATIONS:
config: the ports.grpc and addresses.grpc configuration settings have been renamed to ports.xds and addresses.xds to better match their function. [GH-10588]
BUG FIXES:
api: Fix default values used for optional fields in autopilot configuration update (POST to /v1/operator/autopilot/configuration) [GH-10558] [GH-10559]
api: Revert early out errors from license APIs to allow v1.10+ clients to
manage licenses on older servers [GH-10952]
check root and intermediate CA expiry before using it to sign a leaf certificate. [GH-10500]
connect/ca: ensure edits to the key type/bits for the connect builtin CA will regenerate the roots [GH-10330]
connect/ca: require new vault mount points when updating the key type/bits for the vault connect CA provider [GH-10331]
dns: return an empty answer when asked for an addr dns with type other then A and AAAA. [GH-10401]
tls: consider presented intermediates during server connection tls handshake. [GH-10964]
use the MaxQueryTime instead of RPCHoldTimeout for blocking RPC queries 
 [GH-8978]. [GH-10299]"
74,"1.10.2 (August 27, 2021)
SECURITY:

rpc: authorize raft requests CVE-2021-37219 [GH-10931]

FEATURES:

connect: add support for unix domain socket config via API/CLI [GH-10758]
ui: Adding support in Topology view for Routing Configurations [GH-10872]
ui: Create Routing Configurations route and page [GH-10835]
ui: Splitting up the socket mode and socket path in the Upstreams Instance List [GH-10581]

IMPROVEMENTS:

areas: (Enterprise only) Add 15s timeout to opening streams over pooled connections.
areas: (Enterprise only) Apply backpressure to area gossip packet ingestion when more than 512 packets are waiting to be ingested.
areas: (Enterprise only) Make implementation of WriteToAddress non-blocking to avoid slowing down memberlist's packetListen routine.
checks: Add Interval and Timeout to API response. [GH-10717]
ci: make changelog-checker only validate PR number against main base [GH-10844]
ci: upgrade to use Go 1.16.7 [GH-10856]
deps: update to gogo/protobuf v1.3.2 [GH-10813]
proxycfg: log correlation IDs for the proxy configuration snapshot's blocking queries. [GH-10689]

BUG FIXES:

acl: fixes a bug that prevented the default user token from being used to authorize service registration for connect proxies. [GH-10824]
ca: fixed a bug when ca provider fail and provider state is stuck in INITIALIZING state. [GH-10630]
ca: report an error when setting the ca config fail because of an index check. [GH-10657]
cli: Ensure the metrics endpoint is accessible when Envoy is configured to use
a non-default admin bind address. [GH-10757]
cli: Fix a bug which prevented initializing a watch when using a namespaced
token. [GH-10795]
cli: Fix broken KV import command on Windows. [GH-10820]
connect: ensure SAN validation for prepared queries validates against all possible prepared query targets [GH-10873]
connect: fix crash that would result from multiple instances of a service resolving service config on a single agent. [GH-10647]
connect: proxy upstreams inherit namespace from service if none are defined. [GH-10688]
dns: fixes a bug with edns truncation where the response could exceed the size limit in some cases. [GH-10009]
grpc: ensure that streaming gRPC requests work over mesh gateway based wan federation [GH-10838]
http: log cancelled requests as such at the INFO level, instead of logging them as errored requests. [GH-10707]
streaming: set the default wait timeout for health queries [GH-10707]
txn: fixes Txn.Apply to properly authorize service registrations. [GH-10798]
ui: Disabling policy form fields from users with 'read' permissions [GH-10902]
ui: Fix Health Checks in K/V form Lock Sessions Info section [GH-10767]
ui: Fix dropdown option duplication in the new intentions form [GH-10706]
ui: Hide all metrics for ingress gateway services [GH-10858]
ui: Properly encode non-URL safe characters in OIDC responses [GH-10901]
ui: fixes a bug with some service failovers not showing the routing tab visualization [GH-10913]
","1.10.2 (August 27, 2021)
SECURITY:
rpc: authorize raft requests CVE-2021-37219 [GH-10931]
FEATURES:
connect: add support for unix domain socket config via API/CLI [GH-10758]
ui: Adding support in Topology view for Routing Configurations [GH-10872]
ui: Create Routing Configurations route and page [GH-10835]
ui: Splitting up the socket mode and socket path in the Upstreams Instance List [GH-10581]
IMPROVEMENTS:
areas: (Enterprise only) Add 15s timeout to opening streams over pooled connections.
areas: (Enterprise only) Apply backpressure to area gossip packet ingestion when more than 512 packets are waiting to be ingested.
areas: (Enterprise only) Make implementation of WriteToAddress non-blocking to avoid slowing down memberlist's packetListen routine.
checks: Add Interval and Timeout to API response. [GH-10717]
ci: make changelog-checker only validate PR number against main base [GH-10844]
ci: upgrade to use Go 1.16.7 [GH-10856]
deps: update to gogo/protobuf v1.3.2 [GH-10813]
proxycfg: log correlation IDs for the proxy configuration snapshot's blocking queries. [GH-10689]
BUG FIXES:
acl: fixes a bug that prevented the default user token from being used to authorize service registration for connect proxies. [GH-10824]
ca: fixed a bug when ca provider fail and provider state is stuck in INITIALIZING state. [GH-10630]
ca: report an error when setting the ca config fail because of an index check. [GH-10657]
cli: Ensure the metrics endpoint is accessible when Envoy is configured to use
a non-default admin bind address. [GH-10757]
cli: Fix a bug which prevented initializing a watch when using a namespaced
token. [GH-10795]
cli: Fix broken KV import command on Windows. [GH-10820]
connect: ensure SAN validation for prepared queries validates against all possible prepared query targets [GH-10873]
connect: fix crash that would result from multiple instances of a service resolving service config on a single agent. [GH-10647]
connect: proxy upstreams inherit namespace from service if none are defined. [GH-10688]
dns: fixes a bug with edns truncation where the response could exceed the size limit in some cases. [GH-10009]
grpc: ensure that streaming gRPC requests work over mesh gateway based wan federation [GH-10838]
http: log cancelled requests as such at the INFO level, instead of logging them as errored requests. [GH-10707]
streaming: set the default wait timeout for health queries [GH-10707]
txn: fixes Txn.Apply to properly authorize service registrations. [GH-10798]
ui: Disabling policy form fields from users with 'read' permissions [GH-10902]
ui: Fix Health Checks in K/V form Lock Sessions Info section [GH-10767]
ui: Fix dropdown option duplication in the new intentions form [GH-10706]
ui: Hide all metrics for ingress gateway services [GH-10858]
ui: Properly encode non-URL safe characters in OIDC responses [GH-10901]
ui: fixes a bug with some service failovers not showing the routing tab visualization [GH-10913]"
75,"1.9.9 (August 27, 2021)
SECURITY:

rpc: authorize raft requests CVE-2021-37219 [GH-10932]

IMPROVEMENTS:

areas: (Enterprise only) Add 15s timeout to opening streams over pooled connections.
areas: (Enterprise only) Apply backpressure to area gossip packet ingestion when more than 512 packets are waiting to be ingested.
areas: (Enterprise only) Make implementation of WriteToAddress non-blocking to avoid slowing down memberlist's packetListen routine.
deps: update to gogo/protobuf v1.3.2 [GH-10813]

BUG FIXES:

acl: fixes a bug that prevented the default user token from being used to authorize service registration for connect proxies. [GH-10824]
ca: fixed a bug when ca provider fail and provider state is stuck in INITIALIZING state. [GH-10630]
ca: report an error when setting the ca config fail because of an index check. [GH-10657]
cli: Ensure the metrics endpoint is accessible when Envoy is configured to use
a non-default admin bind address. [GH-10757]
cli: Fix a bug which prevented initializing a watch when using a namespaced
token. [GH-10795]
connect: proxy upstreams inherit namespace from service if none are defined. [GH-10688]
dns: fixes a bug with edns truncation where the response could exceed the size limit in some cases. [GH-10009]
txn: fixes Txn.Apply to properly authorize service registrations. [GH-10798]
ui: Fix dropdown option duplication in the new intentions form [GH-10706]
ui: Hide all metrics for ingress gateway services [GH-10858]
ui: Properly encode non-URL safe characters in OIDC responses [GH-10901]
ui: fixes a bug with some service failovers not showing the routing tab visualization [GH-10913]
","1.9.9 (August 27, 2021)
SECURITY:
rpc: authorize raft requests CVE-2021-37219 [GH-10932]
IMPROVEMENTS:
areas: (Enterprise only) Add 15s timeout to opening streams over pooled connections.
areas: (Enterprise only) Apply backpressure to area gossip packet ingestion when more than 512 packets are waiting to be ingested.
areas: (Enterprise only) Make implementation of WriteToAddress non-blocking to avoid slowing down memberlist's packetListen routine.
deps: update to gogo/protobuf v1.3.2 [GH-10813]
BUG FIXES:
acl: fixes a bug that prevented the default user token from being used to authorize service registration for connect proxies. [GH-10824]
ca: fixed a bug when ca provider fail and provider state is stuck in INITIALIZING state. [GH-10630]
ca: report an error when setting the ca config fail because of an index check. [GH-10657]
cli: Ensure the metrics endpoint is accessible when Envoy is configured to use
a non-default admin bind address. [GH-10757]
cli: Fix a bug which prevented initializing a watch when using a namespaced
token. [GH-10795]
connect: proxy upstreams inherit namespace from service if none are defined. [GH-10688]
dns: fixes a bug with edns truncation where the response could exceed the size limit in some cases. [GH-10009]
txn: fixes Txn.Apply to properly authorize service registrations. [GH-10798]
ui: Fix dropdown option duplication in the new intentions form [GH-10706]
ui: Hide all metrics for ingress gateway services [GH-10858]
ui: Properly encode non-URL safe characters in OIDC responses [GH-10901]
ui: fixes a bug with some service failovers not showing the routing tab visualization [GH-10913]"
76,"1.8.15 (August 27, 2021)
SECURITY:

rpc: authorize raft requests CVE-2021-37219 [GH-10933]

IMPROVEMENTS:

areas: (Enterprise only) Add 15s timeout to opening streams over pooled connections.
areas: (Enterprise only) Apply backpressure to area gossip packet ingestion when more than 512 packets are waiting to be ingested.
areas: (Enterprise only) Make implementation of WriteToAddress non-blocking to avoid slowing down memberlist's packetListen routine.
deps: update to gogo/protobuf v1.3.2 [GH-10813]

BUG FIXES:

acl: fixes a bug that prevented the default user token from being used to authorize service registration for connect proxies. [GH-10824]
ca: fixed a bug when ca provider fail and provider state is stuck in INITIALIZING state. [GH-10630]
ca: report an error when setting the ca config fail because of an index check. [GH-10657]
cli: Ensure the metrics endpoint is accessible when Envoy is configured to use
a non-default admin bind address. [GH-10757]
cli: Fix a bug which prevented initializing a watch when using a namespaced
token. [GH-10795]
connect: proxy upstreams inherit namespace from service if none are defined. [GH-10688]
dns: fixes a bug with edns truncation where the response could exceed the size limit in some cases. [GH-10009]
txn: fixes Txn.Apply to properly authorize service registrations. [GH-10798]
","1.8.15 (August 27, 2021)
SECURITY:
rpc: authorize raft requests CVE-2021-37219 [GH-10933]
IMPROVEMENTS:
areas: (Enterprise only) Add 15s timeout to opening streams over pooled connections.
areas: (Enterprise only) Apply backpressure to area gossip packet ingestion when more than 512 packets are waiting to be ingested.
areas: (Enterprise only) Make implementation of WriteToAddress non-blocking to avoid slowing down memberlist's packetListen routine.
deps: update to gogo/protobuf v1.3.2 [GH-10813]
BUG FIXES:
acl: fixes a bug that prevented the default user token from being used to authorize service registration for connect proxies. [GH-10824]
ca: fixed a bug when ca provider fail and provider state is stuck in INITIALIZING state. [GH-10630]
ca: report an error when setting the ca config fail because of an index check. [GH-10657]
cli: Ensure the metrics endpoint is accessible when Envoy is configured to use
a non-default admin bind address. [GH-10757]
cli: Fix a bug which prevented initializing a watch when using a namespaced
token. [GH-10795]
connect: proxy upstreams inherit namespace from service if none are defined. [GH-10688]
dns: fixes a bug with edns truncation where the response could exceed the size limit in some cases. [GH-10009]
txn: fixes Txn.Apply to properly authorize service registrations. [GH-10798]"
77,"1.10.1 (July 15, 2021)
SECURITY:

xds: ensure envoy verifies the subject alternative name for upstreams CVE-2021-32574 [GH-10621]
xds: ensure single L7 deny intention with default deny policy does not result in allow action CVE-2021-36213 [GH-10619]

FEATURES:

cli: allow running redirect-traffic command in a provided Linux namespace. [GH-10564]
sdk: allow applying iptables rules in a provided Linux namespace. [GH-10564]

IMPROVEMENTS:

acl: Return secret ID when listing tokens if accessor has acl:write [GH-10546]
structs: prevent service-defaults upstream configs from using wildcard names or namespaces [GH-10475]
ui: Move all CSS icons to use standard CSS custom properties rather than SASS variables [GH-10298]

DEPRECATIONS:

connect/ca: remove the RotationPeriod field from the Consul CA provider, it was not used for anything. [GH-10552]

BUG FIXES:

agent: fix a panic on 32-bit platforms caused by misaligned struct fields used with sync/atomic. [GH-10515]
ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [GH-10411]
checks: fixes the default ServerName used with TLS health checks. [GH-10490]
connect/proxy: fixes logic bug preventing builtin/native proxy from starting upstream listeners [GH-10486]
streaming: fix a bug that was preventing streaming from being enabled. [GH-10514]
ui: (Enterprise only) Ensure permissions are checked based on the actively selected namespace [GH-10608]
ui: Ensure in-folder KVs are created in the correct folder [GH-10569]
ui: Fix KV editor syntax highlighting [GH-10605]
ui: Send service name down to Stats to properly call endpoint for Upstreams and Downstreams metrics [GH-10535]
ui: Show ACLs disabled page at Tokens page instead of 403 error when ACLs are disabled [GH-10604]
ui: Use the token's namespace instead of the default namespace when not
specifying a namespace in the URL [GH-10503]
","1.10.1 (July 15, 2021)
SECURITY:
xds: ensure envoy verifies the subject alternative name for upstreams CVE-2021-32574 [GH-10621]
xds: ensure single L7 deny intention with default deny policy does not result in allow action CVE-2021-36213 [GH-10619]
FEATURES:
cli: allow running redirect-traffic command in a provided Linux namespace. [GH-10564]
sdk: allow applying iptables rules in a provided Linux namespace. [GH-10564]
IMPROVEMENTS:
acl: Return secret ID when listing tokens if accessor has acl:write [GH-10546]
structs: prevent service-defaults upstream configs from using wildcard names or namespaces [GH-10475]
ui: Move all CSS icons to use standard CSS custom properties rather than SASS variables [GH-10298]
DEPRECATIONS:
connect/ca: remove the RotationPeriod field from the Consul CA provider, it was not used for anything. [GH-10552]
BUG FIXES:
agent: fix a panic on 32-bit platforms caused by misaligned struct fields used with sync/atomic. [GH-10515]
ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [GH-10411]
checks: fixes the default ServerName used with TLS health checks. [GH-10490]
connect/proxy: fixes logic bug preventing builtin/native proxy from starting upstream listeners [GH-10486]
streaming: fix a bug that was preventing streaming from being enabled. [GH-10514]
ui: (Enterprise only) Ensure permissions are checked based on the actively selected namespace [GH-10608]
ui: Ensure in-folder KVs are created in the correct folder [GH-10569]
ui: Fix KV editor syntax highlighting [GH-10605]
ui: Send service name down to Stats to properly call endpoint for Upstreams and Downstreams metrics [GH-10535]
ui: Show ACLs disabled page at Tokens page instead of 403 error when ACLs are disabled [GH-10604]
ui: Use the token's namespace instead of the default namespace when not
specifying a namespace in the URL [GH-10503]"
78,"1.9.8 (July 15, 2021)
SECURITY:

xds: ensure envoy verifies the subject alternative name for upstreams CVE-2021-32574 [GH-10621]
xds: ensure single L7 deny intention with default deny policy does not result in allow action CVE-2021-36213 [GH-10619]

BUG FIXES:

ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [GH-10411]
ui: Send service name down to Stats to properly call endpoint for Upstreams and Downstreams metrics [GH-10535]
","1.9.8 (July 15, 2021)
SECURITY:
xds: ensure envoy verifies the subject alternative name for upstreams CVE-2021-32574 [GH-10621]
xds: ensure single L7 deny intention with default deny policy does not result in allow action CVE-2021-36213 [GH-10619]
BUG FIXES:
ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [GH-10411]
ui: Send service name down to Stats to properly call endpoint for Upstreams and Downstreams metrics [GH-10535]"
79,"1.8.14 (July 15, 2021)
SECURITY:

xds: ensure envoy verifies the subject alternative name for upstreams CVE-2021-32574 [GH-10621]

BUG FIXES:

ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [GH-10411]
","1.8.14 (July 15, 2021)
SECURITY:
xds: ensure envoy verifies the subject alternative name for upstreams CVE-2021-32574 [GH-10621]
BUG FIXES:
ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [GH-10411]"
80,"1.10.1-beta1 (July 01, 2021)
IMPROVEMENTS:

structs: prevent service-defaults upstream configs from using wildcard names or namespaces [GH-10475]
ui: Move all CSS icons to use standard CSS custom properties rather than SASS variables [GH-10298]

BUG FIXES:

ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [GH-10411]
checks: fixes the default ServerName used with TLS health checks. [GH-10490]
connect/proxy: fixes logic bug preventing builtin/native proxy from starting upstream listeners [GH-10486]
streaming: fix a bug that was preventing streaming from being enabled. [GH-10514]
ui: Send service name down to Stats to properly call endpoint for Upstreams and Downstreams metrics [GH-10535]
","1.10.1-beta1 (July 01, 2021)
IMPROVEMENTS:
structs: prevent service-defaults upstream configs from using wildcard names or namespaces [GH-10475]
ui: Move all CSS icons to use standard CSS custom properties rather than SASS variables [GH-10298]
BUG FIXES:
ca: Fixed a bug that returned a malformed certificate chain when the certificate did not having a trailing newline. [GH-10411]
checks: fixes the default ServerName used with TLS health checks. [GH-10490]
connect/proxy: fixes logic bug preventing builtin/native proxy from starting upstream listeners [GH-10486]
streaming: fix a bug that was preventing streaming from being enabled. [GH-10514]
ui: Send service name down to Stats to properly call endpoint for Upstreams and Downstreams metrics [GH-10535]"
81,"1.10.0 (June 22, 2021)
BREAKING CHANGES:

connect: Disallow wildcard as name for service-defaults. [GH-10069]
connect: avoid encoding listener info in ingress and terminating gateway listener stats names. [GH-10404]
licensing: (Enterprise Only) Consul Enterprise 1.10 has removed API driven licensing of servers in favor of license loading via configuration. The PUT and DELETE methods on the /v1/operator/license endpoint will now return 405s, the consul license put and consul license reset CLI commands have been removed and the LicensePut and LicenseReset methods in the API client have been altered to always return an error. [GH-10211]
licensing: (Enterprise Only) Consul Enterprise client agents now require a valid non-anonymous ACL token for retrieving their license from the servers. Additionally client agents rely on the value of the start_join and retry_join configurations for determining the servers to query for the license. Therefore one must be set to use license auto-retrieval. [GH-10248]
licensing: (Enterprise Only) Consul Enterprise has removed support for temporary licensing. All server agents must have a valid license at startup and client agents must have a license at startup or be able to retrieve one from the servers. [GH-10248]

FEATURES:

checks: add H2 ping health checks. [GH-8431]
cli: Add additional flags to the consul connect redirect-traffic command to allow excluding inbound and outbound ports,
outbound CIDRs, and additional user IDs from traffic redirection. [GH-10134]
cli: Add new consul connect redirect-traffic command for applying traffic redirection rules when Transparent Proxy is enabled. [GH-9910]
cli: Add prefix option to kv import command [GH-9792]
cli: Automatically exclude ports from envoy_prometheus_bind_addr, envoy_stats_bind_addr, and ListenerPort from Expose config
from inbound traffic redirection rules if proxy-id flag is provided to the consul connect redirect-traffic command. [GH-10134]
cli: snapshot inspect command provides KV usage breakdown [GH-9098]
cli: snapshot inspect command supports JSON output [GH-9006]
connect: Add local_request_timeout_ms to allow configuring the Envoy request timeout on local_app [GH-9554]
connect: add support for unix domain sockets addresses for service upstreams and downstreams [GH-9981]
connect: add toggle to globally disable wildcard outbound network access when transparent proxy is enabled [GH-9973]
connect: generate upstream service labels for terminating gateway listener stats. [GH-10404]
sdk: Add new iptables package for applying traffic redirection rules with iptables. [GH-9910]
sdk: Allow excluding inbound and outbound ports, outbound CIDRs, and additional user IDs from traffic redirection in the iptables package. [GH-10134]
ui: Add Unix Domain Socket support [GH-10287]
ui: Create a collapsible notices component for the Topology tab [GH-10270]
ui: Read-only ACL Auth Methods view [GH-9617]
ui: Transparent Proxy - Service mesh visualization updates [GH-10002]
xds: emit a labeled gauge of connected xDS streams by version [GH-10243]
xds: exclusively support the Incremental xDS protocol when using xDS v3 [GH-9855]

IMPROVEMENTS:

acl: extend the auth-methods list endpoint to include MaxTokenTTL and TokenLocality fields. [GH-9741]
acl: use the presence of a management policy in the state store as a sign that we already migrated to v2 acls [GH-9505]
agent: Save exposed Envoy ports to the agent's state when Expose.Checks is true in proxy's configuration. [GH-10173]
api: Add ExposedPort to the health check API resource. [GH-10173]
api: Enable setting query options on agent endpoints. [GH-9903]
api: The Content-Type header is now always set when a body is present in a request. [GH-10204]
cli: snapshot inspect command can now inspect raw snapshots from a server's data
dir. [GH-10089]
cli: the consul connect envoy --envoy_statsd_url flag will now resolve the $HOST_IP environment variable, as part of a full url. [GH-8564]
command: Exclude exposed Envoy ports from traffic redirection when providing -proxy-id and Expose.Checks is set. [GH-10173]
connect: Add support for transparently proxying traffic through Envoy. [experimental] [GH-9894]
connect: Allow per-upstream configuration to be set in service-defaults. [experimental] [GH-9872]
connect: Ensures passthrough tproxy cluster is created even when mesh config doesn't exist. [GH-10301]
connect: Support dialing individual service IP addresses through transparent proxies. [GH-10329]
connect: The builtin connect proxy no longer advertises support for h2 via ALPN. [GH-4466]. [GH-9920]
connect: Update the service mesh visualization to account for transparent proxies. [GH-10016]
connect: adds new flags prometheus-backend-port and prometheus-scrape-port to consul connect envoy to support envoy_prometheus_bind_addr pointing to the merged metrics port when using Consul Connect on K8s. [GH-9768]
connect: allow exposing duplicate HTTP paths through a proxy instance. [GH-10394]
connect: rename cluster config entry to mesh. [GH-10127]
connect: restrict transparent proxy mode to only match on the tagged virtual IP address. [GH-10162]
connect: update supported envoy versions to 1.18.2, 1.17.2, 1.16.3, 1.15.4 [GH-10101]
connect: update supported envoy versions to 1.18.3, 1.17.3, 1.16.4, and 1.15.5 [GH-10231]
debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [GH-10279]
grpc: move gRPC INFO logs to be emitted as TRACE logs from Consul [GH-10395]
licensing: (Enterprise Only) Consul Enterprise has gained the consul license inspect CLI command for inspecting a license without applying it..
licensing: (Enterprise Only) Consul Enterprise has gained the ability to autoload a license via configuration. This can be specified with the license_path configuration, the CONSUL_LICENSE environment variable or the CONSUL_LICENSE_PATH environment variable [GH-10210]
licensing: (Enterprise Only) Consul Enterprise has gained the ability update its license via a configuration reload. The same environment variables and configurations will be used to determine the new license. [GH-10267]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [GH-10368]
raft: allow reloading of raft trailing logs and snapshot timing to allow recovery from some replication failure modes.
telemetry: add metrics and documentation for monitoring for replication issues. [GH-10129]
streaming: change use_streaming_backend to default to true so that streaming is used by default when it is supported. [GH-10149]
ui: Add 'optional route segments' and move namespaces to use them [GH-10212]
ui: Adding a notice about how TransparentProxy mode affects the Upstreams list at the top of tab view [GH-10136]
ui: Improve loader centering with new side navigation [GH-10181]
ui: Move to a sidebar based main navigation [GH-9553]
ui: Show a message to explain that health checks may be out of date if the serf health check is in a critical state [GH-10194]
ui: Updating the wording for the banner and the popover for a service with an upstream that is not explicitly defined. [GH-10133]
ui: Use older (~2016) native ES6 features to reduce transpilation and UI JS payload [GH-9729]
ui: add permanently visible indicator when ACLs are disabled [GH-9864]
ui: improve accessibility of modal dialogs [GH-9819]
ui: restrict the viewing/editing of certain UI elements based on the users ACL token [GH-9687]
ui: updates the ui with the new consul brand assets [GH-10081]
xds: add support for envoy 1.17.0 [GH-9658]
xds: default to speaking xDS v3, but allow for v2 to be spoken upon request [GH-9658]
xds: ensure that all envoyproxy/go-control-plane protobuf symbols are linked into the final binary [GH-10131]
xds: remove deprecated usages of xDS and drop support for envoy 1.13.x [GH-9602]

BUG FIXES:

checks: add TLSServerName field to allow setting the TLS server name for HTTPS health checks. [GH-9475]
config: Fixed a bug where rpc_max_conns_per_client could not be changed by reloading the
config. [GH-8696]
connect: Fix bug that prevented transparent proxies from working when mesh config restricted routing to catalog destinations. [GH-10365]
memberlist: fixes a couple bugs which allowed malformed input to cause a crash in a Consul
client or server. [GH-10161]
monitor: fix monitor to produce json format logs when requested [GH-10358]
proxycfg: Ensure that endpoints for explicit upstreams in other datacenters are watched in transparent mode. [GH-10391]
proxycfg: avoid panic when transparent proxy upstream is added and then removed. [GH-10423]
streaming: fixes a bug that would cause context cancellation errors when a cache entry expired while requests were active. [GH-10112]
streaming: lookup in health properly handle case-sensitivity and perform filtering based on tags and node-meta [GH-9703]
telemetry: fixes a bug with Prometheus metrics where Gauges and Summaries were incorrectly
being expired. [GH-10161]
ui: Adding conditional to prevent Service Mesh from breaking when there are no Upstreams [GH-10122]
ui: Fix text searching through upstream instances. [GH-10151]
ui: Update conditional for topology empty state [GH-10124]
ui: ensure proxy instance API requests perform blocking queries correctly [GH-10039]
xds: (beta-only) ensure that dependent xDS resources are reconfigured during primary type warming [GH-10381]

NOTES:

legal: (Enterprise only) Enterprise binary downloads will now include a copy of the EULA and Terms of Evaluation in the zip archive
","1.10.0 (June 22, 2021)
BREAKING CHANGES:
connect: Disallow wildcard as name for service-defaults. [GH-10069]
connect: avoid encoding listener info in ingress and terminating gateway listener stats names. [GH-10404]
licensing: (Enterprise Only) Consul Enterprise 1.10 has removed API driven licensing of servers in favor of license loading via configuration. The PUT and DELETE methods on the /v1/operator/license endpoint will now return 405s, the consul license put and consul license reset CLI commands have been removed and the LicensePut and LicenseReset methods in the API client have been altered to always return an error. [GH-10211]
licensing: (Enterprise Only) Consul Enterprise client agents now require a valid non-anonymous ACL token for retrieving their license from the servers. Additionally client agents rely on the value of the start_join and retry_join configurations for determining the servers to query for the license. Therefore one must be set to use license auto-retrieval. [GH-10248]
licensing: (Enterprise Only) Consul Enterprise has removed support for temporary licensing. All server agents must have a valid license at startup and client agents must have a license at startup or be able to retrieve one from the servers. [GH-10248]
FEATURES:
checks: add H2 ping health checks. [GH-8431]
cli: Add additional flags to the consul connect redirect-traffic command to allow excluding inbound and outbound ports,
outbound CIDRs, and additional user IDs from traffic redirection. [GH-10134]
cli: Add new consul connect redirect-traffic command for applying traffic redirection rules when Transparent Proxy is enabled. [GH-9910]
cli: Add prefix option to kv import command [GH-9792]
cli: Automatically exclude ports from envoy_prometheus_bind_addr, envoy_stats_bind_addr, and ListenerPort from Expose config
from inbound traffic redirection rules if proxy-id flag is provided to the consul connect redirect-traffic command. [GH-10134]
cli: snapshot inspect command provides KV usage breakdown [GH-9098]
cli: snapshot inspect command supports JSON output [GH-9006]
connect: Add local_request_timeout_ms to allow configuring the Envoy request timeout on local_app [GH-9554]
connect: add support for unix domain sockets addresses for service upstreams and downstreams [GH-9981]
connect: add toggle to globally disable wildcard outbound network access when transparent proxy is enabled [GH-9973]
connect: generate upstream service labels for terminating gateway listener stats. [GH-10404]
sdk: Add new iptables package for applying traffic redirection rules with iptables. [GH-9910]
sdk: Allow excluding inbound and outbound ports, outbound CIDRs, and additional user IDs from traffic redirection in the iptables package. [GH-10134]
ui: Add Unix Domain Socket support [GH-10287]
ui: Create a collapsible notices component for the Topology tab [GH-10270]
ui: Read-only ACL Auth Methods view [GH-9617]
ui: Transparent Proxy - Service mesh visualization updates [GH-10002]
xds: emit a labeled gauge of connected xDS streams by version [GH-10243]
xds: exclusively support the Incremental xDS protocol when using xDS v3 [GH-9855]
IMPROVEMENTS:
acl: extend the auth-methods list endpoint to include MaxTokenTTL and TokenLocality fields. [GH-9741]
acl: use the presence of a management policy in the state store as a sign that we already migrated to v2 acls [GH-9505]
agent: Save exposed Envoy ports to the agent's state when Expose.Checks is true in proxy's configuration. [GH-10173]
api: Add ExposedPort to the health check API resource. [GH-10173]
api: Enable setting query options on agent endpoints. [GH-9903]
api: The Content-Type header is now always set when a body is present in a request. [GH-10204]
cli: snapshot inspect command can now inspect raw snapshots from a server's data
dir. [GH-10089]
cli: the consul connect envoy --envoy_statsd_url flag will now resolve the $HOST_IP environment variable, as part of a full url. [GH-8564]
command: Exclude exposed Envoy ports from traffic redirection when providing -proxy-id and Expose.Checks is set. [GH-10173]
connect: Add support for transparently proxying traffic through Envoy. [experimental] [GH-9894]
connect: Allow per-upstream configuration to be set in service-defaults. [experimental] [GH-9872]
connect: Ensures passthrough tproxy cluster is created even when mesh config doesn't exist. [GH-10301]
connect: Support dialing individual service IP addresses through transparent proxies. [GH-10329]
connect: The builtin connect proxy no longer advertises support for h2 via ALPN. [GH-4466]. [GH-9920]
connect: Update the service mesh visualization to account for transparent proxies. [GH-10016]
connect: adds new flags prometheus-backend-port and prometheus-scrape-port to consul connect envoy to support envoy_prometheus_bind_addr pointing to the merged metrics port when using Consul Connect on K8s. [GH-9768]
connect: allow exposing duplicate HTTP paths through a proxy instance. [GH-10394]
connect: rename cluster config entry to mesh. [GH-10127]
connect: restrict transparent proxy mode to only match on the tagged virtual IP address. [GH-10162]
connect: update supported envoy versions to 1.18.2, 1.17.2, 1.16.3, 1.15.4 [GH-10101]
connect: update supported envoy versions to 1.18.3, 1.17.3, 1.16.4, and 1.15.5 [GH-10231]
debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [GH-10279]
grpc: move gRPC INFO logs to be emitted as TRACE logs from Consul [GH-10395]
licensing: (Enterprise Only) Consul Enterprise has gained the consul license inspect CLI command for inspecting a license without applying it..
licensing: (Enterprise Only) Consul Enterprise has gained the ability to autoload a license via configuration. This can be specified with the license_path configuration, the CONSUL_LICENSE environment variable or the CONSUL_LICENSE_PATH environment variable [GH-10210]
licensing: (Enterprise Only) Consul Enterprise has gained the ability update its license via a configuration reload. The same environment variables and configurations will be used to determine the new license. [GH-10267]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [GH-10368]
raft: allow reloading of raft trailing logs and snapshot timing to allow recovery from some replication failure modes.
telemetry: add metrics and documentation for monitoring for replication issues. [GH-10129]
streaming: change use_streaming_backend to default to true so that streaming is used by default when it is supported. [GH-10149]
ui: Add 'optional route segments' and move namespaces to use them [GH-10212]
ui: Adding a notice about how TransparentProxy mode affects the Upstreams list at the top of tab view [GH-10136]
ui: Improve loader centering with new side navigation [GH-10181]
ui: Move to a sidebar based main navigation [GH-9553]
ui: Show a message to explain that health checks may be out of date if the serf health check is in a critical state [GH-10194]
ui: Updating the wording for the banner and the popover for a service with an upstream that is not explicitly defined. [GH-10133]
ui: Use older (~2016) native ES6 features to reduce transpilation and UI JS payload [GH-9729]
ui: add permanently visible indicator when ACLs are disabled [GH-9864]
ui: improve accessibility of modal dialogs [GH-9819]
ui: restrict the viewing/editing of certain UI elements based on the users ACL token [GH-9687]
ui: updates the ui with the new consul brand assets [GH-10081]
xds: add support for envoy 1.17.0 [GH-9658]
xds: default to speaking xDS v3, but allow for v2 to be spoken upon request [GH-9658]
xds: ensure that all envoyproxy/go-control-plane protobuf symbols are linked into the final binary [GH-10131]
xds: remove deprecated usages of xDS and drop support for envoy 1.13.x [GH-9602]
BUG FIXES:
checks: add TLSServerName field to allow setting the TLS server name for HTTPS health checks. [GH-9475]
config: Fixed a bug where rpc_max_conns_per_client could not be changed by reloading the
config. [GH-8696]
connect: Fix bug that prevented transparent proxies from working when mesh config restricted routing to catalog destinations. [GH-10365]
memberlist: fixes a couple bugs which allowed malformed input to cause a crash in a Consul
client or server. [GH-10161]
monitor: fix monitor to produce json format logs when requested [GH-10358]
proxycfg: Ensure that endpoints for explicit upstreams in other datacenters are watched in transparent mode. [GH-10391]
proxycfg: avoid panic when transparent proxy upstream is added and then removed. [GH-10423]
streaming: fixes a bug that would cause context cancellation errors when a cache entry expired while requests were active. [GH-10112]
streaming: lookup in health properly handle case-sensitivity and perform filtering based on tags and node-meta [GH-9703]
telemetry: fixes a bug with Prometheus metrics where Gauges and Summaries were incorrectly
being expired. [GH-10161]
ui: Adding conditional to prevent Service Mesh from breaking when there are no Upstreams [GH-10122]
ui: Fix text searching through upstream instances. [GH-10151]
ui: Update conditional for topology empty state [GH-10124]
ui: ensure proxy instance API requests perform blocking queries correctly [GH-10039]
xds: (beta-only) ensure that dependent xDS resources are reconfigured during primary type warming [GH-10381]
NOTES:
legal: (Enterprise only) Enterprise binary downloads will now include a copy of the EULA and Terms of Evaluation in the zip archive"
82,"1.9.7 (June 21, 2021)
IMPROVEMENTS:

debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [GH-10279]
licensing: (Enterprise Only) In order to have forward compatibility with Consul Enterprise v1.10, the ability to parse licenses from the configuration or environment has been added. This can be specified with the license_path configuration, the CONSUL_LICENSE environment variable or the CONSUL_LICENSE_PATH environment variable. On server agents this configuration will be ignored. Client agents and the snapshot agent will use the configured license instead of automatically retrieving one. [GH-10441]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [GH-10368]

BUG FIXES:

license: (Enterprise only) Fixed an issue that would cause client agents on versions before 1.10 to not be able to retrieve the license from a 1.10+ server. [GH-10432]
monitor: fix monitor to produce json format logs when requested [GH-10358]
","1.9.7 (June 21, 2021)
IMPROVEMENTS:
debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [GH-10279]
licensing: (Enterprise Only) In order to have forward compatibility with Consul Enterprise v1.10, the ability to parse licenses from the configuration or environment has been added. This can be specified with the license_path configuration, the CONSUL_LICENSE environment variable or the CONSUL_LICENSE_PATH environment variable. On server agents this configuration will be ignored. Client agents and the snapshot agent will use the configured license instead of automatically retrieving one. [GH-10441]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [GH-10368]
BUG FIXES:
license: (Enterprise only) Fixed an issue that would cause client agents on versions before 1.10 to not be able to retrieve the license from a 1.10+ server. [GH-10432]
monitor: fix monitor to produce json format logs when requested [GH-10358]"
83,"1.8.13 (June 21, 2021)
IMPROVEMENTS:

debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [GH-10279]
licensing: (Enterprise Only) In order to have forward compatibility with Consul Enterprise v1.10, the ability to parse licenses from the configuration or environment has been added. This can be specified with the license_path configuration, the CONSUL_LICENSE environment variable or the CONSUL_LICENSE_PATH environment variable. On server agents this configuration will be ignored. Client agents and the snapshot agent will use the configured license instead of automatically retrieving one. [GH-10442]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [GH-10368]

BUG FIXES:

license: (Enterprise only) Fixed an issue that would cause client agents on versions before 1.10 to not be able to retrieve the license from a 1.10+ server. [GH-10432]
monitor: fix monitor to produce json format logs when requested [GH-10358]
","1.8.13 (June 21, 2021)
IMPROVEMENTS:
debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [GH-10279]
licensing: (Enterprise Only) In order to have forward compatibility with Consul Enterprise v1.10, the ability to parse licenses from the configuration or environment has been added. This can be specified with the license_path configuration, the CONSUL_LICENSE environment variable or the CONSUL_LICENSE_PATH environment variable. On server agents this configuration will be ignored. Client agents and the snapshot agent will use the configured license instead of automatically retrieving one. [GH-10442]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [GH-10368]
BUG FIXES:
license: (Enterprise only) Fixed an issue that would cause client agents on versions before 1.10 to not be able to retrieve the license from a 1.10+ server. [GH-10432]
monitor: fix monitor to produce json format logs when requested [GH-10358]"
84,"1.10.0-rc2 (June 17, 2021)
BUG FIXES:

proxycfg: avoid panic when transparent proxy upstream is added and then removed. [GH-10423]
","1.10.0-rc2 (June 17, 2021)
BUG FIXES:
proxycfg: avoid panic when transparent proxy upstream is added and then removed. [GH-10423]"
85,"1.10.0-rc (June 16, 2021)
BREAKING CHANGES:

connect: avoid encoding listener info in ingress and terminating gateway listener stats names. [GH-10404]

FEATURES:

connect: generate upstream service labels for terminating gateway listener stats. [GH-10404]

IMPROVEMENTS:

connect: allow exposing duplicate HTTP paths through a proxy instance. [GH-10394]
grpc: move gRPC INFO logs to be emitted as TRACE logs from Consul [GH-10395]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [GH-10368]

BUG FIXES:

proxycfg: Ensure that endpoints for explicit upstreams in other datacenters are watched in transparent mode. [GH-10391]
xds: (beta-only) ensure that dependent xDS resources are reconfigured during primary type warming [GH-10381]

NOTES:

legal: (Enterprise only) Enterprise binary downloads will now include a copy of the EULA and Terms of Evaluation in the zip archive
","1.10.0-rc (June 16, 2021)
BREAKING CHANGES:
connect: avoid encoding listener info in ingress and terminating gateway listener stats names. [GH-10404]
FEATURES:
connect: generate upstream service labels for terminating gateway listener stats. [GH-10404]
IMPROVEMENTS:
connect: allow exposing duplicate HTTP paths through a proxy instance. [GH-10394]
grpc: move gRPC INFO logs to be emitted as TRACE logs from Consul [GH-10395]
monitoring: optimize the monitoring endpoint to avoid losing logs when under high load. [GH-10368]
BUG FIXES:
proxycfg: Ensure that endpoints for explicit upstreams in other datacenters are watched in transparent mode. [GH-10391]
xds: (beta-only) ensure that dependent xDS resources are reconfigured during primary type warming [GH-10381]
NOTES:
legal: (Enterprise only) Enterprise binary downloads will now include a copy of the EULA and Terms of Evaluation in the zip archive"
86,"1.10.0-beta4 (June 10, 2021)
IMPROVEMENTS:

connect: Support dialing individual service IP addresses through transparent proxies. [GH-10329]
debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [GH-10279]
licensing: (Enterprise Only) Consul Enterprise has gained the consul license inspect CLI command for inspecting a license without applying it..
telemetry: The usage data in the metrics API now includes cluster member counts, reporting clients on a per segment basis. [GH-10340]

BUG FIXES:

agent: fix logging output by removing leading whitespace from every log line [GH-10338]
autopilot: (Enterprise only) Fixed an issue where autopilot could cause a new leader to demote the wrong voter when redundancy zones are in use and the previous leader failed. [GH-10306]
cli: removes the need to set debug_enabled=true to collect debug data from the CLI. Now
the CLI behaves the same way as the API and accepts either an ACL token with operator:read, or
debug_enabled=true. [GH-10273]
connect: Fix bug that prevented transparent proxies from working when mesh config restricted routing to catalog destinations. [GH-10365]
envoy: fixes a bug where a large envoy config could cause the consul connect envoy command to deadlock when attempting to start envoy. [GH-10324]
monitor: fix monitor to produce json format logs when requested [GH-10358]
","1.10.0-beta4 (June 10, 2021)
IMPROVEMENTS:
connect: Support dialing individual service IP addresses through transparent proxies. [GH-10329]
debug: capture a single stream of logs, and single pprof profile and trace for the whole duration [GH-10279]
licensing: (Enterprise Only) Consul Enterprise has gained the consul license inspect CLI command for inspecting a license without applying it..
telemetry: The usage data in the metrics API now includes cluster member counts, reporting clients on a per segment basis. [GH-10340]
BUG FIXES:
agent: fix logging output by removing leading whitespace from every log line [GH-10338]
autopilot: (Enterprise only) Fixed an issue where autopilot could cause a new leader to demote the wrong voter when redundancy zones are in use and the previous leader failed. [GH-10306]
cli: removes the need to set debug_enabled=true to collect debug data from the CLI. Now
the CLI behaves the same way as the API and accepts either an ACL token with operator:read, or
debug_enabled=true. [GH-10273]
connect: Fix bug that prevented transparent proxies from working when mesh config restricted routing to catalog destinations. [GH-10365]
envoy: fixes a bug where a large envoy config could cause the consul connect envoy command to deadlock when attempting to start envoy. [GH-10324]
monitor: fix monitor to produce json format logs when requested [GH-10358]"
87,"1.9.6 (June 04, 2021)
IMPROVEMENTS:

acl: Give more descriptive error if auth method not found. [GH-10163]
areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
connect: update supported envoy versions to 1.16.3, 1.15.4, 1.14.7, 1.13.7 [GH-10105]
connect: update supported envoy versions to 1.16.4, 1.15.5, 1.14.6, and 1.13.7 [GH-10232]
telemetry: Add new metrics for status of secondary datacenter replication. [GH-10073]
telemetry: The usage data in the metrics API now includes cluster member counts, reporting clients on a per segment basis. [GH-10340]
ui: Added CRD popover 'informed action' for intentions managed by CRDs [GH-10100]
ui: Added humanized formatting to lock session durations [GH-10062]
ui: Only show a partial list of intention permissions, with the option to show all [GH-10174]
ui: updates the ui with the new consul brand assets [GH-10090]

BUG FIXES:

agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [GH-10240]
agent: fix logging output by removing leading whitespace from every log line [GH-10338]
api: include the default value of raft settings in the output of /v1/agent/self [GH-8812]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
autopilot: (Enterprise only) Fixed an issue where autopilot could cause a new leader to demote the wrong voter when redundancy zones are in use and the previous leader failed. [GH-10306]
cli: removes the need to set debug_enabled=true to collect debug data from the CLI. Now
the CLI behaves the same way as the API and accepts either an ACL token with operator:read, or
debug_enabled=true. [GH-10273]
cli: snapshot inspect command would panic on invalid input. [GH-10091]
envoy: fixes a bug where a large envoy config could cause the consul connect envoy command to deadlock when attempting to start envoy. [GH-10324]
http: fix a bug that caused the X-Consul-Effective-Consistency header to be missing on
request for service health [GH-10189]
local: agents will no longer persist the default user token along with a service or check. [GH-10188]
namespaces: (Enterprise only) fixes a problem where the logs would contain many warnings about namespaces not being licensed.
server: ensure that central service config flattening properly resets the state each time [GH-10239]
ui: Add conditionals to lock sessions tab [GH-10121]
ui: De-duplicate tags in rendered tag listings [GH-10186]
ui: Don't render a DOM element for empty namespace descriptions [GH-10157]
ui: Reflect the change of Session API response shape for Checks in post 1.7 Consul [GH-10225]
ui: Removes the extra rendering of namespace in service upstream list [GH-10152]
","1.9.6 (June 04, 2021)
IMPROVEMENTS:
acl: Give more descriptive error if auth method not found. [GH-10163]
areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
connect: update supported envoy versions to 1.16.3, 1.15.4, 1.14.7, 1.13.7 [GH-10105]
connect: update supported envoy versions to 1.16.4, 1.15.5, 1.14.6, and 1.13.7 [GH-10232]
telemetry: Add new metrics for status of secondary datacenter replication. [GH-10073]
telemetry: The usage data in the metrics API now includes cluster member counts, reporting clients on a per segment basis. [GH-10340]
ui: Added CRD popover 'informed action' for intentions managed by CRDs [GH-10100]
ui: Added humanized formatting to lock session durations [GH-10062]
ui: Only show a partial list of intention permissions, with the option to show all [GH-10174]
ui: updates the ui with the new consul brand assets [GH-10090]
BUG FIXES:
agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [GH-10240]
agent: fix logging output by removing leading whitespace from every log line [GH-10338]
api: include the default value of raft settings in the output of /v1/agent/self [GH-8812]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
autopilot: (Enterprise only) Fixed an issue where autopilot could cause a new leader to demote the wrong voter when redundancy zones are in use and the previous leader failed. [GH-10306]
cli: removes the need to set debug_enabled=true to collect debug data from the CLI. Now
the CLI behaves the same way as the API and accepts either an ACL token with operator:read, or
debug_enabled=true. [GH-10273]
cli: snapshot inspect command would panic on invalid input. [GH-10091]
envoy: fixes a bug where a large envoy config could cause the consul connect envoy command to deadlock when attempting to start envoy. [GH-10324]
http: fix a bug that caused the X-Consul-Effective-Consistency header to be missing on
request for service health [GH-10189]
local: agents will no longer persist the default user token along with a service or check. [GH-10188]
namespaces: (Enterprise only) fixes a problem where the logs would contain many warnings about namespaces not being licensed.
server: ensure that central service config flattening properly resets the state each time [GH-10239]
ui: Add conditionals to lock sessions tab [GH-10121]
ui: De-duplicate tags in rendered tag listings [GH-10186]
ui: Don't render a DOM element for empty namespace descriptions [GH-10157]
ui: Reflect the change of Session API response shape for Checks in post 1.7 Consul [GH-10225]
ui: Removes the extra rendering of namespace in service upstream list [GH-10152]"
88,"1.8.12 (June 04, 2021)
BUG FIXES:

agent: fix logging output by removing leading whitespace from every log line [GH-10338]
cli: removes the need to set debug_enabled=true to collect debug data from the CLI. Now
the CLI behaves the same way as the API and accepts either an ACL token with operator:read, or
debug_enabled=true. [GH-10273]
envoy: fixes a bug where a large envoy config could cause the consul connect envoy command to deadlock when attempting to start envoy. [GH-10324]
namespaces: (Enterprise only) fixes a problem where the logs would contain many warnings about namespaces not being licensed.
","1.8.12 (June 04, 2021)
BUG FIXES:
agent: fix logging output by removing leading whitespace from every log line [GH-10338]
cli: removes the need to set debug_enabled=true to collect debug data from the CLI. Now
the CLI behaves the same way as the API and accepts either an ACL token with operator:read, or
debug_enabled=true. [GH-10273]
envoy: fixes a bug where a large envoy config could cause the consul connect envoy command to deadlock when attempting to start envoy. [GH-10324]
namespaces: (Enterprise only) fixes a problem where the logs would contain many warnings about namespaces not being licensed."
89,"1.8.11 (June 03, 2021)
IMPROVEMENTS:

areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
connect: update supported envoy versions to 1.14.7, 1.13.7, 1.12.7, 1.11.2 [GH-10106]
telemetry: Add new metrics for status of secondary datacenter replication. [GH-10073]

BUG FIXES:

agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [GH-10240]
api: include the default value of raft settings in the output of /v1/agent/self [GH-8812]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
local: agents will no longer persist the default user token along with a service or check. [GH-10188]
server: ensure that central service config flattening properly resets the state each time [GH-10239]
","1.8.11 (June 03, 2021)
IMPROVEMENTS:
areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
connect: update supported envoy versions to 1.14.7, 1.13.7, 1.12.7, 1.11.2 [GH-10106]
telemetry: Add new metrics for status of secondary datacenter replication. [GH-10073]
BUG FIXES:
agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [GH-10240]
api: include the default value of raft settings in the output of /v1/agent/self [GH-8812]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
local: agents will no longer persist the default user token along with a service or check. [GH-10188]
server: ensure that central service config flattening properly resets the state each time [GH-10239]"
90,"1.10.0-beta3 (May 27, 2021)
BREAKING CHANGES:

licensing: (Enterprise Only) Consul Enterprise 1.10 has removed API driven licensing of servers in favor of license loading via configuration. The PUT and DELETE methods on the /v1/operator/license endpoint will now return 405s, the consul license put and consul license reset CLI commands have been removed and the LicensePut and LicenseReset methods in the API client have been altered to always return an error. [GH-10211]
licensing: (Enterprise Only) Consul Enterprise client agents now require a valid non-anonymous ACL token for retrieving their license from the servers. Additionally client agents rely on the value of the start_join and retry_join configurations for determining the servers to query for the license. Therefore one must be set to use license auto-retrieval. [GH-10248]
licensing: (Enterprise Only) Consul Enterprise has removed support for temporary licensing. All server agents must have a valid license at startup and client agents must have a license at startup or be able to retrieve one from the servers. [GH-10248]

FEATURES:

ui: Add Unix Domain Socket support [GH-10287]
xds: emit a labeled gauge of connected xDS streams by version [GH-10243]

IMPROVEMENTS:

agent: Save exposed Envoy ports to the agent's state when Expose.Checks is true in proxy's configuration. [GH-10173]
api: Add ExposedPort to the health check API resource. [GH-10173]
api: The Content-Type header is now always set when a body is present in a request. [GH-10204]
areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
command: Exclude exposed Envoy ports from traffic redirection when providing -proxy-id and Expose.Checks is set. [GH-10173]
connect: Avoid adding original_dst listener filter when it won't be used. [GH-10302]
connect: Ensures passthrough tproxy cluster is created even when mesh config doesn't exist. [GH-10301]
connect: update supported envoy versions to 1.18.3, 1.17.3, 1.16.4, and 1.15.5 [GH-10231]
licensing: (Enterprise Only) Consul Enterprise has gained the ability to autoload a license via configuration. This can be specified with the license_path configuration, the CONSUL_LICENSE environment variable or the CONSUL_LICENSE_PATH environment variable [GH-10210]
licensing: (Enterprise Only) Consul Enterprise has gained the ability update its license via a configuration reload. The same environment variables and configurations will be used to determine the new license. [GH-10267]
ui: Add 'optional route segments' and move namespaces to use them [GH-10212]
ui: Improve loader centering with new side navigation [GH-10181]
ui: Only show a partial list of intention permissions, with the option to show all [GH-10174]
ui: Show a message to explain that health checks may be out of date if the serf health check is in a critical state [GH-10194]

BUG FIXES:

agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [GH-10240]
api: include the default value of raft settings in the output of /v1/agent/self [GH-8812]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
http: fix a bug that caused the X-Consul-Effective-Consistency header to be missing on
request for service health [GH-10189]
local: agents will no longer persist the default user token along with a service or check. [GH-10188]
namespaces: (Enterprise only) fixes a problem where the logs would contain many warnings about namespaces not being licensed.
server: ensure that central service config flattening properly resets the state each time [GH-10239]
ui: Add conditionals to lock sessions tab [GH-10121]
ui: De-duplicate tags in rendered tag listings [GH-10186]
ui: Don't render a DOM element for empty namespace descriptions [GH-10157]
ui: Reflect the change of Session API response shape for Checks in post 1.7 Consul [GH-10225]
","1.10.0-beta3 (May 27, 2021)
BREAKING CHANGES:
licensing: (Enterprise Only) Consul Enterprise 1.10 has removed API driven licensing of servers in favor of license loading via configuration. The PUT and DELETE methods on the /v1/operator/license endpoint will now return 405s, the consul license put and consul license reset CLI commands have been removed and the LicensePut and LicenseReset methods in the API client have been altered to always return an error. [GH-10211]
licensing: (Enterprise Only) Consul Enterprise client agents now require a valid non-anonymous ACL token for retrieving their license from the servers. Additionally client agents rely on the value of the start_join and retry_join configurations for determining the servers to query for the license. Therefore one must be set to use license auto-retrieval. [GH-10248]
licensing: (Enterprise Only) Consul Enterprise has removed support for temporary licensing. All server agents must have a valid license at startup and client agents must have a license at startup or be able to retrieve one from the servers. [GH-10248]
FEATURES:
ui: Add Unix Domain Socket support [GH-10287]
xds: emit a labeled gauge of connected xDS streams by version [GH-10243]
IMPROVEMENTS:
agent: Save exposed Envoy ports to the agent's state when Expose.Checks is true in proxy's configuration. [GH-10173]
api: Add ExposedPort to the health check API resource. [GH-10173]
api: The Content-Type header is now always set when a body is present in a request. [GH-10204]
areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
command: Exclude exposed Envoy ports from traffic redirection when providing -proxy-id and Expose.Checks is set. [GH-10173]
connect: Avoid adding original_dst listener filter when it won't be used. [GH-10302]
connect: Ensures passthrough tproxy cluster is created even when mesh config doesn't exist. [GH-10301]
connect: update supported envoy versions to 1.18.3, 1.17.3, 1.16.4, and 1.15.5 [GH-10231]
licensing: (Enterprise Only) Consul Enterprise has gained the ability to autoload a license via configuration. This can be specified with the license_path configuration, the CONSUL_LICENSE environment variable or the CONSUL_LICENSE_PATH environment variable [GH-10210]
licensing: (Enterprise Only) Consul Enterprise has gained the ability update its license via a configuration reload. The same environment variables and configurations will be used to determine the new license. [GH-10267]
ui: Add 'optional route segments' and move namespaces to use them [GH-10212]
ui: Improve loader centering with new side navigation [GH-10181]
ui: Only show a partial list of intention permissions, with the option to show all [GH-10174]
ui: Show a message to explain that health checks may be out of date if the serf health check is in a critical state [GH-10194]
BUG FIXES:
agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [GH-10240]
api: include the default value of raft settings in the output of /v1/agent/self [GH-8812]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
http: fix a bug that caused the X-Consul-Effective-Consistency header to be missing on
request for service health [GH-10189]
local: agents will no longer persist the default user token along with a service or check. [GH-10188]
namespaces: (Enterprise only) fixes a problem where the logs would contain many warnings about namespaces not being licensed.
server: ensure that central service config flattening properly resets the state each time [GH-10239]
ui: Add conditionals to lock sessions tab [GH-10121]
ui: De-duplicate tags in rendered tag listings [GH-10186]
ui: Don't render a DOM element for empty namespace descriptions [GH-10157]
ui: Reflect the change of Session API response shape for Checks in post 1.7 Consul [GH-10225]"
91,"1.8.11-beta2 (May 26, 2021)
BUG FIXES:

api: include the default value of raft settings in the output of /v1/agent/self [GH-8812]
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary.
","1.8.11-beta2 (May 26, 2021)
BUG FIXES:
api: include the default value of raft settings in the output of /v1/agent/self [GH-8812]
areas: (Enterprise only) Selectively merge gossip_wan config for network areas to avoid attempting to enable gossip encryption where it was not intended or necessary."
92,"1.8.11-beta1 (May 18, 2021)
IMPROVEMENTS:

areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
connect: update supported envoy versions to 1.14.7, 1.13.7, 1.12.7, 1.11.2 [GH-10106]
telemetry: Add new metrics for status of secondary datacenter replication. [GH-10073]

BUG FIXES:

agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [GH-10240]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
local: agents will no longer persist the default user token along with a service or check. [GH-10188]
server: ensure that central service config flattening properly resets the state each time [GH-10239]
","1.8.11-beta1 (May 18, 2021)
IMPROVEMENTS:
areas: (Enterprise only) Use server agent's gossip_wan config when setting memberlist configuration for network areas. Previously they used memberlists WAN defaults.
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
connect: update supported envoy versions to 1.14.7, 1.13.7, 1.12.7, 1.11.2 [GH-10106]
telemetry: Add new metrics for status of secondary datacenter replication. [GH-10073]
BUG FIXES:
agent: ensure we hash the non-deprecated upstream fields on ServiceConfigRequest [GH-10240]
areas: (Enterprise only) Revert to the 10s dial timeout used before connection pooling was introduced in 1.7.3.
local: agents will no longer persist the default user token along with a service or check. [GH-10188]
server: ensure that central service config flattening properly resets the state each time [GH-10239]"
93,"1.10.0-beta2 (May 05, 2021)
BREAKING CHANGES:

connect: Disallow wildcard as name for service-defaults. [GH-10069]

FEATURES:

cli: Add additional flags to the consul connect redirect-traffic command to allow excluding inbound and outbound ports,
outbound CIDRs, and additional user IDs from traffic redirection. [GH-10134]
cli: Automatically exclude ports from envoy_prometheus_bind_addr, envoy_stats_bind_addr, and ListenerPort from Expose config
from inbound traffic redirection rules if proxy-id flag is provided to the consul connect redirect-traffic command. [GH-10134]
connect: add support for unix domain sockets addresses for service upstreams and downstreams [GH-9981]
sdk: Allow excluding inbound and outbound ports, outbound CIDRs, and additional user IDs from traffic redirection in the iptables package. [GH-10134]
xds: exclusively support the Incremental xDS protocol when using xDS v3 [GH-9855]

IMPROVEMENTS:

acl: Give more descriptive error if auth method not found. [GH-10163]
cli: snapshot inspect command can now inspect raw snapshots from a server's data
dir. [GH-10089]
connect: rename cluster config entry to mesh. [GH-10127]
connect: restrict transparent proxy mode to only match on the tagged virtual IP address. [GH-10162]
connect: update supported envoy versions to 1.18.2, 1.17.2, 1.16.3, 1.15.4 [GH-10101]
raft: allow reloading of raft trailing logs and snapshot timing to allow recovery from some replication failure modes.
telemetry: add metrics and documentation for monitoring for replication issues. [GH-10129]
streaming: change use_streaming_backend to default to true so that streaming is used by default when it is supported. [GH-10149]
telemetry: Add new metrics for status of secondary datacenter replication. [GH-10073]
ui: Added CRD popover 'informed action' for intentions managed by CRDs [GH-10100]
ui: Added humanized formatting to lock session durations [GH-10062]
ui: Adding a notice about how TransparentProxy mode affects the Upstreams list at the top of tab view [GH-10136]
ui: Updating the wording for the banner and the popover for a service with an upstream that is not explicitly defined. [GH-10133]
ui: updates the ui with the new consul brand assets [GH-10081]
xds: ensure that all envoyproxy/go-control-plane protobuf symbols are linked into the final binary [GH-10131]

BUG FIXES:

cli: snapshot inspect command would panic on invalid input. [GH-10091]
memberlist: fixes a couple bugs which allowed malformed input to cause a crash in a Consul
client or server. [GH-10161]
streaming: fixes a bug that would cause context cancellation errors when a cache entry expired while requests were active. [GH-10112]
telemetry: fixes a bug with Prometheus metrics where Gauges and Summaries were incorrectly
being expired. [GH-10161]
ui: Adding conditional to prevent Service Mesh from breaking when there are no Upstreams [GH-10122]
ui: Fix text searching through upstream instances. [GH-10151]
ui: Removes the extra rendering of namespace in service upstream list [GH-10152]
ui: Update conditional for topology empty state [GH-10124]
","1.10.0-beta2 (May 05, 2021)
BREAKING CHANGES:
connect: Disallow wildcard as name for service-defaults. [GH-10069]
FEATURES:
cli: Add additional flags to the consul connect redirect-traffic command to allow excluding inbound and outbound ports,
outbound CIDRs, and additional user IDs from traffic redirection. [GH-10134]
cli: Automatically exclude ports from envoy_prometheus_bind_addr, envoy_stats_bind_addr, and ListenerPort from Expose config
from inbound traffic redirection rules if proxy-id flag is provided to the consul connect redirect-traffic command. [GH-10134]
connect: add support for unix domain sockets addresses for service upstreams and downstreams [GH-9981]
sdk: Allow excluding inbound and outbound ports, outbound CIDRs, and additional user IDs from traffic redirection in the iptables package. [GH-10134]
xds: exclusively support the Incremental xDS protocol when using xDS v3 [GH-9855]
IMPROVEMENTS:
acl: Give more descriptive error if auth method not found. [GH-10163]
cli: snapshot inspect command can now inspect raw snapshots from a server's data
dir. [GH-10089]
connect: rename cluster config entry to mesh. [GH-10127]
connect: restrict transparent proxy mode to only match on the tagged virtual IP address. [GH-10162]
connect: update supported envoy versions to 1.18.2, 1.17.2, 1.16.3, 1.15.4 [GH-10101]
raft: allow reloading of raft trailing logs and snapshot timing to allow recovery from some replication failure modes.
telemetry: add metrics and documentation for monitoring for replication issues. [GH-10129]
streaming: change use_streaming_backend to default to true so that streaming is used by default when it is supported. [GH-10149]
telemetry: Add new metrics for status of secondary datacenter replication. [GH-10073]
ui: Added CRD popover 'informed action' for intentions managed by CRDs [GH-10100]
ui: Added humanized formatting to lock session durations [GH-10062]
ui: Adding a notice about how TransparentProxy mode affects the Upstreams list at the top of tab view [GH-10136]
ui: Updating the wording for the banner and the popover for a service with an upstream that is not explicitly defined. [GH-10133]
ui: updates the ui with the new consul brand assets [GH-10081]
xds: ensure that all envoyproxy/go-control-plane protobuf symbols are linked into the final binary [GH-10131]
BUG FIXES:
cli: snapshot inspect command would panic on invalid input. [GH-10091]
memberlist: fixes a couple bugs which allowed malformed input to cause a crash in a Consul
client or server. [GH-10161]
streaming: fixes a bug that would cause context cancellation errors when a cache entry expired while requests were active. [GH-10112]
telemetry: fixes a bug with Prometheus metrics where Gauges and Summaries were incorrectly
being expired. [GH-10161]
ui: Adding conditional to prevent Service Mesh from breaking when there are no Upstreams [GH-10122]
ui: Fix text searching through upstream instances. [GH-10151]
ui: Removes the extra rendering of namespace in service upstream list [GH-10152]
ui: Update conditional for topology empty state [GH-10124]"
94,"1.10.0-beta1 (April 16, 2021)
SECURITY:

Add content-type headers to raw KV responses to prevent XSS attacks CVE-2020-25864 [GH-10023]
audit-logging: Parse endpoint URL to prevent requests from bypassing the audit log CVE-2021-28156

FEATURES:

cli: Add new consul connect redirect-traffic command for applying traffic redirection rules when Transparent Proxy is enabled. [GH-9910]
cli: Add prefix option to kv import command [GH-9792]
cli: snapshot inspect command provides KV usage breakdown [GH-9098]
cli: snapshot inspect command supports JSON output [GH-9006]
connect: Add local_request_timeout_ms to allow configuring the Envoy request timeout on local_app [GH-9554]
connect: add toggle to globally disable wildcard outbound network access when transparent proxy is enabled [GH-9973]
sdk: Add new iptables package for applying traffic redirection rules with iptables. [GH-9910]
ui: Read-only ACL Auth Methods view [GH-9617]

IMPROVEMENTS:

acl: extend the auth-methods list endpoint to include MaxTokenTTL and TokenLocality fields. [GH-9741]
acl: use the presence of a management policy in the state store as a sign that we already migrated to v2 acls [GH-9505]
api: Enable setting query options on agent endpoints. [GH-9903]
api: AutopilotServerHelath now handles the 429 status code returned by the v1/operator/autopilot/health endpoint and still returned the parsed reply which will indicate server healthiness [GH-8599]
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
cli: the consul connect envoy --envoy_statsd_url flag will now resolve the $HOST_IP environment variable, as part of a full url. [GH-8564]
client: when a client agent is attempting to dereigster a service, anddoes not have access to the ACL token used to register a service, attempt to use the agent token instead of the default user token. If no agent token is set, fall back to the default user token. [GH-9683]
connect: Add support for transparently proxying traffic through Envoy. [experimental] [GH-9894]
connect: Allow per-upstream configuration to be set in service-defaults. [experimental] [GH-9872]
connect: Automatically rewrite the Host header for Terminating Gateway HTTP services [GH-9042]
connect: The builtin connect proxy no longer advertises support for h2 via ALPN. [GH-4466]. [GH-9920]
connect: Update the service mesh visualization to account for transparent proxies. [GH-10016]
connect: adds new flags prometheus-backend-port and prometheus-scrape-port to consul connect envoy to support envoy_prometheus_bind_addr pointing to the merged metrics port when using Consul Connect on K8s. [GH-9768]
ui: Move to a sidebar based main navigation [GH-9553]
ui: Use older (~2016) native ES6 features to reduce transpilation and UI JS payload [GH-9729]
ui: add permanently visible indicator when ACLs are disabled [GH-9864]
ui: improve accessibility of modal dialogs [GH-9819]
ui: restrict the viewing/editing of certain UI elements based on the users ACL token [GH-9687]
ui: support stricter content security policies [GH-9847]
xds: add support for envoy 1.17.0 [GH-9658]
xds: default to speaking xDS v3, but allow for v2 to be spoken upon request [GH-9658]
xds: remove deprecated usages of xDS and drop support for envoy 1.13.x [GH-9602]

BUG FIXES:

api: ensure v1/health/ingress/:service endpoint works properly when streaming is enabled [GH-9967]
areas: Fixes a bug which would prevent newer servers in a network areas from connecting to servers running a version of Consul prior to 1.7.3.
audit-logging: (Enterprise only) Fixed an issue that resulted in usage of the agent master token or managed service provider tokens from being resolved properly. [GH-10013]
cache: fix a bug in the client agent cache where streaming could potentially leak resources. [GH-9978]. [GH-9978]
cache: fix a bug in the client agent cache where streaming would disconnect every
20 minutes and cause delivery delays. [GH-9979]. [GH-9979]
checks: add TLSServerName field to allow setting the TLS server name for HTTPS health checks. [GH-9475]
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [GH-9980]
config: Fixed a bug where rpc_max_conns_per_client could not be changed by reloading the
config. [GH-8696]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
http: fix a bug in Consul Enterprise that would cause the UI to believe namespaces were supported, resulting in warning logs and incorrect UI behaviour. [GH-9923]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [GH-10025]
streaming: lookup in health properly handle case-sensitivity and perform filtering based on tags and node-meta [GH-9703]
ui: Fix intention form cancel button [GH-9901]
ui: ensure proxy instance API requests perform blocking queries correctly [GH-10039]
","1.10.0-beta1 (April 16, 2021)
SECURITY:
Add content-type headers to raw KV responses to prevent XSS attacks CVE-2020-25864 [GH-10023]
audit-logging: Parse endpoint URL to prevent requests from bypassing the audit log CVE-2021-28156
FEATURES:
cli: Add new consul connect redirect-traffic command for applying traffic redirection rules when Transparent Proxy is enabled. [GH-9910]
cli: Add prefix option to kv import command [GH-9792]
cli: snapshot inspect command provides KV usage breakdown [GH-9098]
cli: snapshot inspect command supports JSON output [GH-9006]
connect: Add local_request_timeout_ms to allow configuring the Envoy request timeout on local_app [GH-9554]
connect: add toggle to globally disable wildcard outbound network access when transparent proxy is enabled [GH-9973]
sdk: Add new iptables package for applying traffic redirection rules with iptables. [GH-9910]
ui: Read-only ACL Auth Methods view [GH-9617]
IMPROVEMENTS:
acl: extend the auth-methods list endpoint to include MaxTokenTTL and TokenLocality fields. [GH-9741]
acl: use the presence of a management policy in the state store as a sign that we already migrated to v2 acls [GH-9505]
api: Enable setting query options on agent endpoints. [GH-9903]
api: AutopilotServerHelath now handles the 429 status code returned by the v1/operator/autopilot/health endpoint and still returned the parsed reply which will indicate server healthiness [GH-8599]
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
cli: the consul connect envoy --envoy_statsd_url flag will now resolve the $HOST_IP environment variable, as part of a full url. [GH-8564]
client: when a client agent is attempting to dereigster a service, anddoes not have access to the ACL token used to register a service, attempt to use the agent token instead of the default user token. If no agent token is set, fall back to the default user token. [GH-9683]
connect: Add support for transparently proxying traffic through Envoy. [experimental] [GH-9894]
connect: Allow per-upstream configuration to be set in service-defaults. [experimental] [GH-9872]
connect: Automatically rewrite the Host header for Terminating Gateway HTTP services [GH-9042]
connect: The builtin connect proxy no longer advertises support for h2 via ALPN. [GH-4466]. [GH-9920]
connect: Update the service mesh visualization to account for transparent proxies. [GH-10016]
connect: adds new flags prometheus-backend-port and prometheus-scrape-port to consul connect envoy to support envoy_prometheus_bind_addr pointing to the merged metrics port when using Consul Connect on K8s. [GH-9768]
ui: Move to a sidebar based main navigation [GH-9553]
ui: Use older (~2016) native ES6 features to reduce transpilation and UI JS payload [GH-9729]
ui: add permanently visible indicator when ACLs are disabled [GH-9864]
ui: improve accessibility of modal dialogs [GH-9819]
ui: restrict the viewing/editing of certain UI elements based on the users ACL token [GH-9687]
ui: support stricter content security policies [GH-9847]
xds: add support for envoy 1.17.0 [GH-9658]
xds: default to speaking xDS v3, but allow for v2 to be spoken upon request [GH-9658]
xds: remove deprecated usages of xDS and drop support for envoy 1.13.x [GH-9602]
BUG FIXES:
api: ensure v1/health/ingress/:service endpoint works properly when streaming is enabled [GH-9967]
areas: Fixes a bug which would prevent newer servers in a network areas from connecting to servers running a version of Consul prior to 1.7.3.
audit-logging: (Enterprise only) Fixed an issue that resulted in usage of the agent master token or managed service provider tokens from being resolved properly. [GH-10013]
cache: fix a bug in the client agent cache where streaming could potentially leak resources. [GH-9978]. [GH-9978]
cache: fix a bug in the client agent cache where streaming would disconnect every
20 minutes and cause delivery delays. [GH-9979]. [GH-9979]
checks: add TLSServerName field to allow setting the TLS server name for HTTPS health checks. [GH-9475]
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [GH-9980]
config: Fixed a bug where rpc_max_conns_per_client could not be changed by reloading the
config. [GH-8696]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
http: fix a bug in Consul Enterprise that would cause the UI to believe namespaces were supported, resulting in warning logs and incorrect UI behaviour. [GH-9923]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [GH-10025]
streaming: lookup in health properly handle case-sensitivity and perform filtering based on tags and node-meta [GH-9703]
ui: Fix intention form cancel button [GH-9901]
ui: ensure proxy instance API requests perform blocking queries correctly [GH-10039]"
95,"1.9.5 (April 15, 2021)
SECURITY:

Add content-type headers to raw KV responses to prevent XSS attacks CVE-2020-25864 [GH-10023]
audit-logging: Parse endpoint URL to prevent requests from bypassing the audit log CVE-2021-28156

IMPROVEMENTS:

api: AutopilotServerHelath now handles the 429 status code returned by the v1/operator/autopilot/health endpoint and still returned the parsed reply which will indicate server healthiness [GH-8599]
client: when a client agent is attempting to dereigster a service, anddoes not have access to the ACL token used to register a service, attempt to use the agent token instead of the default user token. If no agent token is set, fall back to the default user token. [GH-9683]
connect: Automatically rewrite the Host header for Terminating Gateway HTTP services [GH-9042]
ui: support stricter content security policies [GH-9847]

BUG FIXES:

api: ensure v1/health/ingress/:service endpoint works properly when streaming is enabled [GH-9967]
areas: Fixes a bug which would prevent newer servers in a network areas from connecting to servers running a version of Consul prior to 1.7.3.
audit-logging: (Enterprise only) Fixed an issue that resulted in usage of the agent master token or managed service provider tokens from being resolved properly. [GH-10013]
cache: fix a bug in the client agent cache where streaming could potentially leak resources. [GH-9978]. [GH-9978]
cache: fix a bug in the client agent cache where streaming would disconnect every
20 minutes and cause delivery delays. [GH-9979]. [GH-9979]
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [GH-9980]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
http: fix a bug in Consul Enterprise that would cause the UI to believe namespaces were supported, resulting in warning logs and incorrect UI behaviour. [GH-9923]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [GH-10025]
ui: Fix intention form cancel button [GH-9901]
","1.9.5 (April 15, 2021)
SECURITY:
Add content-type headers to raw KV responses to prevent XSS attacks CVE-2020-25864 [GH-10023]
audit-logging: Parse endpoint URL to prevent requests from bypassing the audit log CVE-2021-28156
IMPROVEMENTS:
api: AutopilotServerHelath now handles the 429 status code returned by the v1/operator/autopilot/health endpoint and still returned the parsed reply which will indicate server healthiness [GH-8599]
client: when a client agent is attempting to dereigster a service, anddoes not have access to the ACL token used to register a service, attempt to use the agent token instead of the default user token. If no agent token is set, fall back to the default user token. [GH-9683]
connect: Automatically rewrite the Host header for Terminating Gateway HTTP services [GH-9042]
ui: support stricter content security policies [GH-9847]
BUG FIXES:
api: ensure v1/health/ingress/:service endpoint works properly when streaming is enabled [GH-9967]
areas: Fixes a bug which would prevent newer servers in a network areas from connecting to servers running a version of Consul prior to 1.7.3.
audit-logging: (Enterprise only) Fixed an issue that resulted in usage of the agent master token or managed service provider tokens from being resolved properly. [GH-10013]
cache: fix a bug in the client agent cache where streaming could potentially leak resources. [GH-9978]. [GH-9978]
cache: fix a bug in the client agent cache where streaming would disconnect every
20 minutes and cause delivery delays. [GH-9979]. [GH-9979]
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [GH-9980]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
http: fix a bug in Consul Enterprise that would cause the UI to believe namespaces were supported, resulting in warning logs and incorrect UI behaviour. [GH-9923]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [GH-10025]
ui: Fix intention form cancel button [GH-9901]"
96,"1.8.10 (April 15, 2021)
SECURITY:

Add content-type headers to raw KV responses to prevent XSS attacks CVE-2020-25864 [GH-10023]
audit-logging: Parse endpoint URL to prevent requests from bypassing the audit log CVE-2021-28156

BUG FIXES:

areas: Fixes a bug which would prevent newer servers in a network areas from connecting to servers running a version of Consul prior to 1.7.3.
audit-logging: (Enterprise only) Fixed an issue that resulted in usage of the agent master token or managed service provider tokens from being resolved properly. [GH-10013]
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [GH-9980]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [GH-10025]
","1.8.10 (April 15, 2021)
SECURITY:
Add content-type headers to raw KV responses to prevent XSS attacks CVE-2020-25864 [GH-10023]
audit-logging: Parse endpoint URL to prevent requests from bypassing the audit log CVE-2021-28156
BUG FIXES:
areas: Fixes a bug which would prevent newer servers in a network areas from connecting to servers running a version of Consul prior to 1.7.3.
audit-logging: (Enterprise only) Fixed an issue that resulted in usage of the agent master token or managed service provider tokens from being resolved properly. [GH-10013]
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [GH-9980]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [GH-10025]"
97,"1.7.14 (April 15, 2021)
SECURITY:

Add content-type headers to raw KV responses to prevent XSS attacks CVE-2020-25864 [GH-10023]

BUG FIXES:

command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [GH-9980]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [GH-10025]
","1.7.14 (April 15, 2021)
SECURITY:
Add content-type headers to raw KV responses to prevent XSS attacks CVE-2020-25864 [GH-10023]
BUG FIXES:
command: when generating envoy bootstrap configs to stdout do not mix informational logs into the json [GH-9980]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
snapshot: fixes a bug that would cause snapshots to be missing all but the first ACL Auth Method. [GH-10025]"
98,"1.10.0-alpha (March 18, 2021)
FEATURES:

cli: Add prefix option to kv import command [GH-9792]
cli: snapshot inspect command provides KV usage breakdown [GH-9098]
cli: snapshot inspect command supports JSON output [GH-9006]
connect: Add local_request_timeout_ms to allow configuring the Envoy request timeout on local_app [GH-9554]

IMPROVEMENTS:

acl: extend the auth-methods list endpoint to include MaxTokenTTL and TokenLocality fields. [GH-9741]
acl: use the presence of a management policy in the state store as a sign that we already migrated to v2 acls [GH-9505]
api: AutopilotServerHelath now handles the 429 status code returned by the v1/operator/autopilot/health endpoint and still returned the parsed reply which will indicate server healthiness [GH-8599]
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
connect: Add support for transparently proxying traffic through Envoy. [experimental] [GH-9894]
connect: Allow per-upstream configuration to be set in service-defaults. [experimental] [GH-9872]
connect: adds new flags prometheus-backend-port and prometheus-scrape-port to consul connect envoy to support envoy_prometheus_bind_addr pointing to the merged metrics port when using Consul Connect on K8s. [GH-9768]
ui: Move to a sidebar based main navigation [GH-9553]
ui: Use older (~2016) native ES6 features to reduce transpilation and UI JS payload [GH-9729]
ui: add permanently visible indicator when ACLs are disabled [GH-9864]
ui: improve accessibility of modal dialogs [GH-9819]
ui: restrict the viewing/editing of certain UI elements based on the users ACL token [GH-9687]
ui: support stricter content security policies [GH-9847]
xds: add support for envoy 1.17.0 [GH-9658]
xds: default to speaking xDS v3, but allow for v2 to be spoken upon request [GH-9658]
xds: remove deprecated usages of xDS and drop support for envoy 1.13.x [GH-9602]

BUG FIXES:

checks: add TLSServerName field to allow setting the TLS server name for HTTPS health checks. [GH-9475]
config: Fixed a bug where rpc_max_conns_per_client could not be changed by reloading the
config. [GH-8696]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
streaming: lookup in health properly handle case-sensitivity and perform filtering based on tags and node-meta [GH-9703]
","1.10.0-alpha (March 18, 2021)
FEATURES:
cli: Add prefix option to kv import command [GH-9792]
cli: snapshot inspect command provides KV usage breakdown [GH-9098]
cli: snapshot inspect command supports JSON output [GH-9006]
connect: Add local_request_timeout_ms to allow configuring the Envoy request timeout on local_app [GH-9554]
IMPROVEMENTS:
acl: extend the auth-methods list endpoint to include MaxTokenTTL and TokenLocality fields. [GH-9741]
acl: use the presence of a management policy in the state store as a sign that we already migrated to v2 acls [GH-9505]
api: AutopilotServerHelath now handles the 429 status code returned by the v1/operator/autopilot/health endpoint and still returned the parsed reply which will indicate server healthiness [GH-8599]
cli: added a -force-without-cross-signing flag to the ca set-config command.
connect/ca: The ForceWithoutCrossSigning field will now work as expected for CA providers that support cross signing. [GH-9672]
connect: Add support for transparently proxying traffic through Envoy. [experimental] [GH-9894]
connect: Allow per-upstream configuration to be set in service-defaults. [experimental] [GH-9872]
connect: adds new flags prometheus-backend-port and prometheus-scrape-port to consul connect envoy to support envoy_prometheus_bind_addr pointing to the merged metrics port when using Consul Connect on K8s. [GH-9768]
ui: Move to a sidebar based main navigation [GH-9553]
ui: Use older (~2016) native ES6 features to reduce transpilation and UI JS payload [GH-9729]
ui: add permanently visible indicator when ACLs are disabled [GH-9864]
ui: improve accessibility of modal dialogs [GH-9819]
ui: restrict the viewing/editing of certain UI elements based on the users ACL token [GH-9687]
ui: support stricter content security policies [GH-9847]
xds: add support for envoy 1.17.0 [GH-9658]
xds: default to speaking xDS v3, but allow for v2 to be spoken upon request [GH-9658]
xds: remove deprecated usages of xDS and drop support for envoy 1.13.x [GH-9602]
BUG FIXES:
checks: add TLSServerName field to allow setting the TLS server name for HTTPS health checks. [GH-9475]
config: Fixed a bug where rpc_max_conns_per_client could not be changed by reloading the
config. [GH-8696]
config: correct config key from advertise_addr_ipv6 to advertise_addr_wan_ipv6 [GH-9851]
streaming: lookup in health properly handle case-sensitivity and perform filtering based on tags and node-meta [GH-9703]"
99,"1.9.4 (March 04, 2021)
IMPROVEMENTS:

connect: if the token given to the vault provider returns no data avoid a panic [GH-9806]
connect: update supported envoy point releases to 1.16.2, 1.15.3, 1.14.6, 1.13.7 [GH-9737]
xds: only try to create an ipv6 expose checks listener if ipv6 is supported by the kernel [GH-9765]

BUG FIXES:

api: Remove trailing periods from the gateway internal HTTP API endpoint [GH-9752]
cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [GH-9738]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [GH-9428]
proxycfg: avoid potential deadlock in delivering proxy snapshot to watchers. [GH-9689]
replication: Correctly log all replication warnings that should not be suppressed [GH-9320]
streaming: fixes a bug caused by caching an incorrect snapshot, that would cause clients
to error until the cache expired. [GH-9772]
ui: Exclude proxies when showing the total number of instances on a node. [GH-9749]
ui: Fixed a bug in older browsers relating to String.replaceAll and fieldset w/flexbox usage [GH-9715]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [GH-9650]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [GH-9651]
","1.9.4 (March 04, 2021)
IMPROVEMENTS:
connect: if the token given to the vault provider returns no data avoid a panic [GH-9806]
connect: update supported envoy point releases to 1.16.2, 1.15.3, 1.14.6, 1.13.7 [GH-9737]
xds: only try to create an ipv6 expose checks listener if ipv6 is supported by the kernel [GH-9765]
BUG FIXES:
api: Remove trailing periods from the gateway internal HTTP API endpoint [GH-9752]
cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [GH-9738]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [GH-9428]
proxycfg: avoid potential deadlock in delivering proxy snapshot to watchers. [GH-9689]
replication: Correctly log all replication warnings that should not be suppressed [GH-9320]
streaming: fixes a bug caused by caching an incorrect snapshot, that would cause clients
to error until the cache expired. [GH-9772]
ui: Exclude proxies when showing the total number of instances on a node. [GH-9749]
ui: Fixed a bug in older browsers relating to String.replaceAll and fieldset w/flexbox usage [GH-9715]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [GH-9650]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [GH-9651]"
100,"1.8.9 (March 04, 2021)
IMPROVEMENTS:

cli: Add new -cluster-id and common-name to consul tls ca create to support creating a CA for Consul Connect. [GH-9585]
connect: if the token given to the vault provider returns no data avoid a panic [GH-9806]
connect: update supported envoy point releases to 1.14.6, 1.13.7, 1.12.7, 1.11.2 [GH-9739]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
server: use the presense of stored federation state data as a sign that we already activated the federation state feature flag [GH-9519]
xds: only try to create an ipv6 expose checks listener if ipv6 is supported by the kernel [GH-9765]

BUG FIXES:

api: Remove trailing periods from the gateway internal HTTP API endpoint [GH-9752]
cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [GH-9738]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [GH-9428]
proxycfg: avoid potential deadlock in delivering proxy snapshot to watchers. [GH-9689]
server: When wan federating via mesh gateways after initial federation default to using the local mesh gateways unless the heuristic indicates a bypass is required. [GH-9528]
server: When wan federating via mesh gateways only do heuristic primary DC bypass on the leader. [GH-9366]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [GH-9650]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [GH-9651]
","1.8.9 (March 04, 2021)
IMPROVEMENTS:
cli: Add new -cluster-id and common-name to consul tls ca create to support creating a CA for Consul Connect. [GH-9585]
connect: if the token given to the vault provider returns no data avoid a panic [GH-9806]
connect: update supported envoy point releases to 1.14.6, 1.13.7, 1.12.7, 1.11.2 [GH-9739]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
server: use the presense of stored federation state data as a sign that we already activated the federation state feature flag [GH-9519]
xds: only try to create an ipv6 expose checks listener if ipv6 is supported by the kernel [GH-9765]
BUG FIXES:
api: Remove trailing periods from the gateway internal HTTP API endpoint [GH-9752]
cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [GH-9738]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [GH-9428]
proxycfg: avoid potential deadlock in delivering proxy snapshot to watchers. [GH-9689]
server: When wan federating via mesh gateways after initial federation default to using the local mesh gateways unless the heuristic indicates a bypass is required. [GH-9528]
server: When wan federating via mesh gateways only do heuristic primary DC bypass on the leader. [GH-9366]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [GH-9650]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [GH-9651]"
101,"1.7.13 (March 04, 2021)
IMPROVEMENTS:

connect: update supported envoy point releases to 1.13.7, 1.12.7, 1.11.2, 1.10.0 [GH-9740]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
xds: only try to create an ipv6 expose checks listener if ipv6 is supported by the kernel [GH-9765]

BUG FIXES:

cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [GH-9738]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [GH-9428]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [GH-9650]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [GH-9651]
","1.7.13 (March 04, 2021)
IMPROVEMENTS:
connect: update supported envoy point releases to 1.13.7, 1.12.7, 1.11.2, 1.10.0 [GH-9740]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
xds: only try to create an ipv6 expose checks listener if ipv6 is supported by the kernel [GH-9765]
BUG FIXES:
cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [GH-9738]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [GH-9428]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [GH-9650]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [GH-9651]"
102,"1.8.9-beta1 (February 11, 2021)
IMPROVEMENTS:

cli: Add new -cluster-id and common-name to consul tls ca create to support creating a CA for Consul Connect. [GH-9585]
connect: update supported envoy point releases to 1.14.6, 1.13.7, 1.12.7, 1.11.2 [GH-9739]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
server: use the presense of stored federation state data as a sign that we already activated the federation state feature flag [GH-9519]

BUG FIXES:

cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [GH-9738]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [GH-9428]
proxycfg: avoid potential deadlock in delivering proxy snapshot to watchers. [GH-9689]
server: When wan federating via mesh gateways after initial federation default to using the local mesh gateways unless the heuristic indicates a bypass is required. [GH-9528]
server: When wan federating via mesh gateways only do heuristic primary DC bypass on the leader. [GH-9366]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [GH-9650]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [GH-9651]
","1.8.9-beta1 (February 11, 2021)
IMPROVEMENTS:
cli: Add new -cluster-id and common-name to consul tls ca create to support creating a CA for Consul Connect. [GH-9585]
connect: update supported envoy point releases to 1.14.6, 1.13.7, 1.12.7, 1.11.2 [GH-9739]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
server: use the presense of stored federation state data as a sign that we already activated the federation state feature flag [GH-9519]
BUG FIXES:
cache: Prevent spamming the logs for days when a cached request encounters an ""ACL not found"" error. [GH-9738]
connect: connect CA Roots in the primary datacenter should use a SigningKeyID derived from their local intermediate [GH-9428]
proxycfg: avoid potential deadlock in delivering proxy snapshot to watchers. [GH-9689]
server: When wan federating via mesh gateways after initial federation default to using the local mesh gateways unless the heuristic indicates a bypass is required. [GH-9528]
server: When wan federating via mesh gateways only do heuristic primary DC bypass on the leader. [GH-9366]
xds: deduplicate mesh gateway listeners by address in a stable way to prevent some LDS churn [GH-9650]
xds: prevent LDS flaps in mesh gateways due to unstable datacenter lists; also prevent some flaps in terminating gateways as well [GH-9651]"
103,"1.9.3 (February 01, 2021)
FEATURES:

ui: Add additional search/filter status pills for viewing and removing current
filters in listing views [GH-9442]

IMPROVEMENTS:

cli: Add new -cluster-id and common-name to consul tls ca create to support creating a CA for Consul Connect. [GH-9585]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
server: (Enterprise Only) Validate source namespaces in service-intentions config entries. [GH-9527]
server: use the presense of stored federation state data as a sign that we already activated the federation state feature flag [GH-9519]

BUG FIXES:

autopilot: Fixed a bug that would cause snapshot restoration to stop autopilot on the leader. [GH-9626]
server: When wan federating via mesh gateways after initial federation default to using the local mesh gateways unless the heuristic indicates a bypass is required. [GH-9528]
server: When wan federating via mesh gateways only do heuristic primary DC bypass on the leader. [GH-9366]
ui: Fixed a bug that would cause missing or duplicate service instance healthcheck listings. [GH-9660]
","1.9.3 (February 01, 2021)
FEATURES:
ui: Add additional search/filter status pills for viewing and removing current
filters in listing views [GH-9442]
IMPROVEMENTS:
cli: Add new -cluster-id and common-name to consul tls ca create to support creating a CA for Consul Connect. [GH-9585]
license: (Enterprise only) Temporary client license duration was increased from 30m to 6h.
server: (Enterprise Only) Validate source namespaces in service-intentions config entries. [GH-9527]
server: use the presense of stored federation state data as a sign that we already activated the federation state feature flag [GH-9519]
BUG FIXES:
autopilot: Fixed a bug that would cause snapshot restoration to stop autopilot on the leader. [GH-9626]
server: When wan federating via mesh gateways after initial federation default to using the local mesh gateways unless the heuristic indicates a bypass is required. [GH-9528]
server: When wan federating via mesh gateways only do heuristic primary DC bypass on the leader. [GH-9366]
ui: Fixed a bug that would cause missing or duplicate service instance healthcheck listings. [GH-9660]"
104,"1.8.8 (January 22, 2021)
BUG FIXES:

connect: Fixed a bug in the AWS PCA Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [GH-9498]
connect: Fixed a bug in the Vault Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [GH-9498]
connect: Fixed an issue that would prevent updating the Connect CA configuration if the CA provider didn't complete initialization previously. [GH-9498]
leader: Fixed a bug that could cause Connect CA initialization failures from allowing leader establishment to complete resulting in potentially infinite leader elections. [GH-9498]
rpc: Prevent misleading RPC error claiming the lack of a leader when Raft is ok but there are issues with client agents gossiping with the leader. [GH-9487]
ui: ensure namespace is used for node API requests [GH-9488]
","1.8.8 (January 22, 2021)
BUG FIXES:
connect: Fixed a bug in the AWS PCA Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [GH-9498]
connect: Fixed a bug in the Vault Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [GH-9498]
connect: Fixed an issue that would prevent updating the Connect CA configuration if the CA provider didn't complete initialization previously. [GH-9498]
leader: Fixed a bug that could cause Connect CA initialization failures from allowing leader establishment to complete resulting in potentially infinite leader elections. [GH-9498]
rpc: Prevent misleading RPC error claiming the lack of a leader when Raft is ok but there are issues with client agents gossiping with the leader. [GH-9487]
ui: ensure namespace is used for node API requests [GH-9488]"
105,"1.7.12 (January 22, 2021)
BUG FIXES:

rpc: Prevent misleading RPC error claiming the lack of a leader when Raft is ok but there are issues with client agents gossiping with the leader. [GH-9487]
ui: ensure namespace is used for node API requests [GH-9488]
","1.7.12 (January 22, 2021)
BUG FIXES:
rpc: Prevent misleading RPC error claiming the lack of a leader when Raft is ok but there are issues with client agents gossiping with the leader. [GH-9487]
ui: ensure namespace is used for node API requests [GH-9488]"
106,"1.9.2 (January 20, 2021)
FEATURES:

agent: add config flag MaxHeaderBytes to control the maximum size of the http header per client request. [GH-9067]
cli: The consul intention command now has a new list subcommand to allow the listing of configured intentions. It also supports the -namespace= option. [GH-9468]

IMPROVEMENTS:

server: deletions of intentions by name using the intention API is now idempotent [GH-9278]
streaming: display a warning on agent(s) when incompatible streaming parameters are used [GH-9530]
ui: Various accessibility scan test improvements [GH-9485]

DEPRECATIONS:

api: the tag, node-meta, and passing query parameters for various health and catalog
endpoints are now deprecated. The filter query parameter should be used as a replacement
for all of the deprecated fields. The deprecated query parameters will be removed in a future
version of Consul. [GH-9262]

BUG FIXES:

client: Help added in Prometheus in relases 1.9.0 does not generate warnings anymore in logs [GH-9510]
client: properly set GRPC over RPC magic numbers when encryption was not set or partially set in the cluster with streaming enabled [GH-9512]
connect: Fixed a bug in the AWS PCA Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [GH-9498]
connect: Fixed a bug in the Vault Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [GH-9498]
connect: Fixed an issue that would prevent updating the Connect CA configuration if the CA provider didn't complete initialization previously. [GH-9498]
leader: Fixed a bug that could cause Connect CA initialization failures from allowing leader establishment to complete resulting in potentially infinite leader elections. [GH-9498]
rpc: Prevent misleading RPC error claiming the lack of a leader when Raft is ok but there are issues with client agents gossiping with the leader. [GH-9487]
server: Fixes a server panic introduced in 1.9.0 where Connect service mesh is
being used. Node de-registration could panic if it hosted services with
multiple upstreams. [GH-9589]
state: fix computation of usage metrics to account for various places that can modify multiple services in a single transaction. [GH-9440]
ui: Display LockDelay in nanoseconds as a temporary fix to the formatting [GH-9594]
ui: Fix an issue where registering an ingress-gateway with no central config
would result in a JS error due to the API reponse returning null [GH-9593]
ui: Fixes an issue where clicking backwards and forwards between a service instance can result in a 404 error [GH-9524]
ui: Fixes an issue where intention description or metadata could be overwritten if saved from the topology view. [GH-9513]
ui: Fixes an issue with setting -ui-content-path flag/config [GH-9569]
ui: ensure namespace is used for node API requests [GH-9410]
ui: request intention listing with ns=* parameter to retrieve all intentions
across namespaces [GH-9432]
","1.9.2 (January 20, 2021)
FEATURES:
agent: add config flag MaxHeaderBytes to control the maximum size of the http header per client request. [GH-9067]
cli: The consul intention command now has a new list subcommand to allow the listing of configured intentions. It also supports the -namespace= option. [GH-9468]
IMPROVEMENTS:
server: deletions of intentions by name using the intention API is now idempotent [GH-9278]
streaming: display a warning on agent(s) when incompatible streaming parameters are used [GH-9530]
ui: Various accessibility scan test improvements [GH-9485]
DEPRECATIONS:
api: the tag, node-meta, and passing query parameters for various health and catalog
endpoints are now deprecated. The filter query parameter should be used as a replacement
for all of the deprecated fields. The deprecated query parameters will be removed in a future
version of Consul. [GH-9262]
BUG FIXES:
client: Help added in Prometheus in relases 1.9.0 does not generate warnings anymore in logs [GH-9510]
client: properly set GRPC over RPC magic numbers when encryption was not set or partially set in the cluster with streaming enabled [GH-9512]
connect: Fixed a bug in the AWS PCA Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [GH-9498]
connect: Fixed a bug in the Vault Connect CA provider that could cause the intermediate PKI path to be deleted after reconfiguring the CA [GH-9498]
connect: Fixed an issue that would prevent updating the Connect CA configuration if the CA provider didn't complete initialization previously. [GH-9498]
leader: Fixed a bug that could cause Connect CA initialization failures from allowing leader establishment to complete resulting in potentially infinite leader elections. [GH-9498]
rpc: Prevent misleading RPC error claiming the lack of a leader when Raft is ok but there are issues with client agents gossiping with the leader. [GH-9487]
server: Fixes a server panic introduced in 1.9.0 where Connect service mesh is
being used. Node de-registration could panic if it hosted services with
multiple upstreams. [GH-9589]
state: fix computation of usage metrics to account for various places that can modify multiple services in a single transaction. [GH-9440]
ui: Display LockDelay in nanoseconds as a temporary fix to the formatting [GH-9594]
ui: Fix an issue where registering an ingress-gateway with no central config
would result in a JS error due to the API reponse returning null [GH-9593]
ui: Fixes an issue where clicking backwards and forwards between a service instance can result in a 404 error [GH-9524]
ui: Fixes an issue where intention description or metadata could be overwritten if saved from the topology view. [GH-9513]
ui: Fixes an issue with setting -ui-content-path flag/config [GH-9569]
ui: ensure namespace is used for node API requests [GH-9410]
ui: request intention listing with ns=* parameter to retrieve all intentions
across namespaces [GH-9432]"
107,"1.9.1 (December 11, 2020)
FEATURES:

ui: add copyable IDs to the Role and Policy views [GH-9296]

IMPROVEMENTS:

cli: (Enterprise only) A new -read-replica flag can now be used to enable running a server as a read only replica. Previously this was enabled with the now deprecated -non-voting-server flag. [GH-9191]
config: (Enterprise only) A new read_replica configuration setting can now be used to enable running a server as a read only replica. Previously this was enabled with the now deprecated non_voting_server setting. [GH-9191]

DEPRECATIONS:

cli: (Enterprise only) The -non-voting-server flag is deprecated in favor of the new -read-replica flag. The -non-voting-server flag is still present along side the new flag but it will be removed in a future release. [GH-9191]
config: (Enterprise only) The non_voting_server configuration setting is deprecated in favor of the new read_replica setting. The non_voting_server configuration setting is still present but will be removed in a future release. [GH-9191]
gossip: (Enterprise only) Read replicas now advertise themselves by setting the read_replica tag. The old nonvoter tag is still present but is deprecated and will be removed in a future release. [GH-9191]
server: (Enterprise only) Addition of the nonvoter tag to the service registration made for read replicas is deprecated in favor of the new tag name of read_replica. Both are present in the registration but the nonvoter tag will be completely removed in a future release. [GH-9191]

BUG FIXES:

agent: prevent duplicate services and check registrations from being synced to servers. [GH-9284]
connect: fixes a case when updating the CA config in a secondary datacenter to correctly trigger the creation of a new intermediate certificate [GH-9009]
connect: only unset the active root in a secondary datacenter when a new one is replacing it [GH-9318]
namespaces: (Enterprise only) Prevent stalling of replication in secondary datacenters due to conflicts between the namespace replicator and other replicators. [GH-9271]
streaming: ensure the order of results provided by /health/service/:serviceName is consistent with and without streaming enabled [GH-9247]
","1.9.1 (December 11, 2020)
FEATURES:
ui: add copyable IDs to the Role and Policy views [GH-9296]
IMPROVEMENTS:
cli: (Enterprise only) A new -read-replica flag can now be used to enable running a server as a read only replica. Previously this was enabled with the now deprecated -non-voting-server flag. [GH-9191]
config: (Enterprise only) A new read_replica configuration setting can now be used to enable running a server as a read only replica. Previously this was enabled with the now deprecated non_voting_server setting. [GH-9191]
DEPRECATIONS:
cli: (Enterprise only) The -non-voting-server flag is deprecated in favor of the new -read-replica flag. The -non-voting-server flag is still present along side the new flag but it will be removed in a future release. [GH-9191]
config: (Enterprise only) The non_voting_server configuration setting is deprecated in favor of the new read_replica setting. The non_voting_server configuration setting is still present but will be removed in a future release. [GH-9191]
gossip: (Enterprise only) Read replicas now advertise themselves by setting the read_replica tag. The old nonvoter tag is still present but is deprecated and will be removed in a future release. [GH-9191]
server: (Enterprise only) Addition of the nonvoter tag to the service registration made for read replicas is deprecated in favor of the new tag name of read_replica. Both are present in the registration but the nonvoter tag will be completely removed in a future release. [GH-9191]
BUG FIXES:
agent: prevent duplicate services and check registrations from being synced to servers. [GH-9284]
connect: fixes a case when updating the CA config in a secondary datacenter to correctly trigger the creation of a new intermediate certificate [GH-9009]
connect: only unset the active root in a secondary datacenter when a new one is replacing it [GH-9318]
namespaces: (Enterprise only) Prevent stalling of replication in secondary datacenters due to conflicts between the namespace replicator and other replicators. [GH-9271]
streaming: ensure the order of results provided by /health/service/:serviceName is consistent with and without streaming enabled [GH-9247]"
108,"1.8.7 (December 10, 2020)
BUG FIXES:

acl: global tokens created by auth methods now correctly replicate to secondary datacenters [GH-9351]
connect: fixes a case when updating the CA config in a secondary datacenter to correctly trigger the creation of a new intermediate certificate [GH-9009]
connect: only unset the active root in a secondary datacenter when a new one is replacing it [GH-9318]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
namespaces: (Enterprise only) Prevent stalling of replication in secondary datacenters due to conflicts between the namespace replicator and other replicators. [GH-9271]
","1.8.7 (December 10, 2020)
BUG FIXES:
acl: global tokens created by auth methods now correctly replicate to secondary datacenters [GH-9351]
connect: fixes a case when updating the CA config in a secondary datacenter to correctly trigger the creation of a new intermediate certificate [GH-9009]
connect: only unset the active root in a secondary datacenter when a new one is replacing it [GH-9318]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
namespaces: (Enterprise only) Prevent stalling of replication in secondary datacenters due to conflicts between the namespace replicator and other replicators. [GH-9271]"
109,"1.7.11 (December 10, 2020)
BUG FIXES:

license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
namespaces: (Enterprise only) Prevent stalling of replication in secondary datacenters due to conflicts between the namespace replicator and other replicators. [GH-9271]
","1.7.11 (December 10, 2020)
BUG FIXES:
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
namespaces: (Enterprise only) Prevent stalling of replication in secondary datacenters due to conflicts between the namespace replicator and other replicators. [GH-9271]"
110,"1.8.7-beta1 (December 03, 2020)
BUG FIXES:

connect: fixes a case when updating the CA config in a secondary datacenter to correctly trigger the creation of a new intermediate certificate [GH-9009]
connect: only unset the active root in a secondary datacenter when a new one is replacing it [GH-9318]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
","1.8.7-beta1 (December 03, 2020)
BUG FIXES:
connect: fixes a case when updating the CA config in a secondary datacenter to correctly trigger the creation of a new intermediate certificate [GH-9009]
connect: only unset the active root in a secondary datacenter when a new one is replacing it [GH-9318]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted."
111,"1.9.0 (November 24, 2020)
BREAKING CHANGES:

agent: The enable_central_service_config option now defaults to true. [GH-8746]
connect: Switch the default gateway port from 443 to 8443 to avoid assumption of Envoy running as root. [GH-9113]
connect: Update Envoy metrics names and labels for proxy listeners so that attributes like datacenter and namespace can be extracted. [GH-9207]
connect: intention destinations can no longer be reassigned [GH-8834]
raft: Raft protocol v2 is no longer supported. If currently using protocol v2 then an intermediate upgrade to a version supporting both v2 and v3 protocols will be necessary (1.0.0 - 1.8.x). Note that the Raft protocol configured with the raft_protocol setting and the Consul RPC protocol configured with the protocol setting and output by the consul version command are distinct and supported Consul RPC protocol versions are not altered. [GH-9103]
sentinel: (Consul Enterprise only) update to v0.16.0, which replaces whitelist and blacklist with allowlist and denylist
server: (Enterprise only) Pre-existing intentions defined with
non-existent destination namespaces were non-functional and are erased during
the upgrade process. This should not matter as these intentions had nothing to
enforce. [GH-9186]
server: (OSS only) Pre-existing intentions defined with either a source or
destination namespace value that is not ""default"" are rewritten or deleted
during the upgrade process. Wildcards first attempt to downgrade to ""default""
unless an intention already exists, otherwise these non-functional intentions
are deleted. [GH-9186]
xds: Drop support for Envoy versions 1.12.0, 1.12.1, 1.12.2, and 1.13.0, due to a lack of support for url_path in RBAC. [GH-8839]

SECURITY:

Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [CVE-2020-25201] [GH-9024]
Increase the permissions to read from the /connect/ca/configuration endpoint to operator:write. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with operator:read privileges. CVE-2020-28053 [GH-9240]

FEATURES:

agent: Add a new RPC endpoint for streaming cluster state change events to clients.
agent: Allow client agents to be configured with an advertised reconnect timeout to control how long until the nodes are reaped by others in the cluster. [GH-8781]
agent: moved ui config options to a new ui_config stanza in agent configuration and added new options to display service metrics in the UI. [GH-8694]
agent: return the default ACL policy to callers as a header [GH-9101]
autopilot: A new /v1/operator/autopilot/state HTTP API was created to give greater visibility into what autopilot is doing and how it has classified all the servers it is tracking. [GH-9103]
autopilot: Added a new consul operator autopilot state command to retrieve and view the Autopilot state from consul. [GH-9142]
cli: update snapshot inspect command to provide more detailed snapshot data [GH-8787]
connect: support defining intentions using layer 7 criteria [GH-8839]
telemetry: add initialization and definition for non-expiring key metrics in Prometheus [GH-9088]
telemetry: track node and service counts and emit them as metrics [GH-8603]
ui: If Prometheus is being used for monitoring the sidecars, the topology view can be configured to display overview metrics for the services. [GH-8858]
ui: Services using Connect with Envoy sidecars have a topology tab in the UI showing their upstream and downstream services. [GH-8788]
xds: use envoy's rbac filter to handle intentions entirely within envoy [GH-8569]

IMPROVEMENTS:

agent: Return HTTP 429 when connections per clients limit (limits.http_max_conns_per_client) has been reached. [GH-8221]
agent: add path_allowlist config option to restrict metrics proxy queries [GH-9059]
agent: allow the /v1/connect/intentions/match endpoint to use the agent cache [GH-8875]
agent: protect the metrics proxy behind ACLs [GH-9099]
api: The v1/connect/ca/roots endpoint now accepts a pem=true query parameter and will return a PEM encoded certificate chain of all the certificates that would normally be in the JSON version of the response. [GH-8774]
api: support GetMeta() and GetNamespace() on all config entry kinds [GH-8764]
autopilot: (Enterprise Only) Autopilot now supports using both Redundancy Zones and Automated Upgrades together. [GH-9103]
checks: add health status to the failure message when gRPC healthchecks fail. [GH-8726]
chore: Update to Go 1.15 with mitigation for golang/go#42138 [GH-9036]
command: remove conditional envoy bootstrap generation for versions <=1.10.0 since those are not supported [GH-8855]
connect: The Vault provider will now automatically renew the lease of the token used, if supported. [GH-8560]
connect: add support for specifying load balancing policy in service-resolver [GH-8585]
connect: intentions are now managed as a new config entry kind ""service-intentions"" [GH-8834]
raft: Update raft to v1.2.0 to prevent non-voters from becoming eligible for leader elections and adding peer id as metric label to reduce cardinality in metric names [GH-8822]
server: (Consul Enterprise only) ensure that we also shutdown network segment serf instances on server shutdown [GH-8786]
server: break up Intention.Apply monolithic method [GH-9007]
server: create new memdb table for storing system metadata [GH-8703]
server: make sure that the various replication loggers use consistent logging [GH-8745]
server: remove config entry CAS in legacy intention API bridge code [GH-9151]
snapshot agent: Deregister critical snapshotting TTL check if leadership is transferred.
telemetry: All metrics should be present and available to prometheus scrapers when Consul starts. If any non-deprecated metrics are missing please submit an issue with its name. [GH-9198]
telemetry: add config flag telemetry { disable_compat_1.9 = (true|false) } to disable deprecated metrics in 1.9 [GH-8877]
telemetry: add counter consul.api.http with labels for each HTTP path and method. This is intended to replace consul.http... [GH-8877]
ui: Add the Upstreams and Exposed Paths tabs for services in mesh [GH-9141]
ui: Moves the Proxy health checks to be displayed with the Service health check under the Health Checks tab [GH-9141]
ui: Upstream and downstream services in the topology tab will show a visual indication if a deny intention or intention with L7 policies is configured. [GH-8846]
ui: add dashboard_url_template config option for external dashboard links [GH-9002]

DEPRECATIONS:

Go 1.15 has dropped support for 32-bit binaries for Darwin, so darwin_386 builds will not be available for any 1.9.x+ releases. [GH-9036]
agent: ui, ui_dir and ui_content_path are now deprecated for use in agent configuration files. Use ui_config.{enable, dir, content_path} instead. The command arguments -ui, -ui-dir, and -ui-content-path remain supported. [GH-8694]
telemetry: The measurements in all of the consul.http... prefixed metrics have been migrated to consul.api.http. consul.http... prefixed metrics will be removed in a future version of Consul. [GH-8877]
telemetry: the disable_compat_1.9 config will cover more metrics deprecations in future 1.9 point releases. These metrics will be emitted twice for backwards compatibility - if the flag is true, only the new metric name will be written. [GH-9181]

BUG FIXES:

agent: make the json/hcl decoding of ConnectProxyConfig fully work with CamelCase and snake_case [GH-8741]
agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [GH-8747]
api: Fixed a bug where the Check.GRPCUseTLS field could not be set using snake case. [GH-8771]
autopilot: (Enterprise Only) Previously servers in other zones would not be promoted when all servers in a second zone had failed. Now the actual behavior matches the docs and autopilot will promote a healthy non-voter from any zone to replace failure of an entire zone. [GH-9103]
autopilot: Prevent panic when requesting the autopilot health immediately after a leader is elected. [GH-9204]
command: when generating envoy bootstrap configs use the datacenter returned from the agent services endpoint [GH-9229]
connect: Fixed an issue where the Vault intermediate was not renewed in the primary datacenter. [GH-8784]
connect: fix Vault provider not respecting IntermediateCertTTL [GH-8646]
connect: fix connect sidecars registered via the API not being automatically deregistered with their parent service after an agent restart by persisting the LocallyRegisteredAsSidecar property. [GH-8924]
connect: use stronger validation that ingress gateways have compatible protocols defined for their upstreams [GH-8470]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
raft: (Enterprise only) properly update consul server meta non_voter for non-voting Enterprise Consul servers [GH-8731]
server: skip deleted and deleting namespaces when migrating intentions to config entries [GH-9186]
telemetry: fixed a bug that caused logs to be flooded with [WARN] agent.router: Non-server in server-only area [GH-8685]
ui: show correct datacenter for gateways [GH-8704]
","1.9.0 (November 24, 2020)
BREAKING CHANGES:
agent: The enable_central_service_config option now defaults to true. [GH-8746]
connect: Switch the default gateway port from 443 to 8443 to avoid assumption of Envoy running as root. [GH-9113]
connect: Update Envoy metrics names and labels for proxy listeners so that attributes like datacenter and namespace can be extracted. [GH-9207]
connect: intention destinations can no longer be reassigned [GH-8834]
raft: Raft protocol v2 is no longer supported. If currently using protocol v2 then an intermediate upgrade to a version supporting both v2 and v3 protocols will be necessary (1.0.0 - 1.8.x). Note that the Raft protocol configured with the raft_protocol setting and the Consul RPC protocol configured with the protocol setting and output by the consul version command are distinct and supported Consul RPC protocol versions are not altered. [GH-9103]
sentinel: (Consul Enterprise only) update to v0.16.0, which replaces whitelist and blacklist with allowlist and denylist
server: (Enterprise only) Pre-existing intentions defined with
non-existent destination namespaces were non-functional and are erased during
the upgrade process. This should not matter as these intentions had nothing to
enforce. [GH-9186]
server: (OSS only) Pre-existing intentions defined with either a source or
destination namespace value that is not ""default"" are rewritten or deleted
during the upgrade process. Wildcards first attempt to downgrade to ""default""
unless an intention already exists, otherwise these non-functional intentions
are deleted. [GH-9186]
xds: Drop support for Envoy versions 1.12.0, 1.12.1, 1.12.2, and 1.13.0, due to a lack of support for url_path in RBAC. [GH-8839]
SECURITY:
Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [CVE-2020-25201] [GH-9024]
Increase the permissions to read from the /connect/ca/configuration endpoint to operator:write. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with operator:read privileges. CVE-2020-28053 [GH-9240]
FEATURES:
agent: Add a new RPC endpoint for streaming cluster state change events to clients.
agent: Allow client agents to be configured with an advertised reconnect timeout to control how long until the nodes are reaped by others in the cluster. [GH-8781]
agent: moved ui config options to a new ui_config stanza in agent configuration and added new options to display service metrics in the UI. [GH-8694]
agent: return the default ACL policy to callers as a header [GH-9101]
autopilot: A new /v1/operator/autopilot/state HTTP API was created to give greater visibility into what autopilot is doing and how it has classified all the servers it is tracking. [GH-9103]
autopilot: Added a new consul operator autopilot state command to retrieve and view the Autopilot state from consul. [GH-9142]
cli: update snapshot inspect command to provide more detailed snapshot data [GH-8787]
connect: support defining intentions using layer 7 criteria [GH-8839]
telemetry: add initialization and definition for non-expiring key metrics in Prometheus [GH-9088]
telemetry: track node and service counts and emit them as metrics [GH-8603]
ui: If Prometheus is being used for monitoring the sidecars, the topology view can be configured to display overview metrics for the services. [GH-8858]
ui: Services using Connect with Envoy sidecars have a topology tab in the UI showing their upstream and downstream services. [GH-8788]
xds: use envoy's rbac filter to handle intentions entirely within envoy [GH-8569]
IMPROVEMENTS:
agent: Return HTTP 429 when connections per clients limit (limits.http_max_conns_per_client) has been reached. [GH-8221]
agent: add path_allowlist config option to restrict metrics proxy queries [GH-9059]
agent: allow the /v1/connect/intentions/match endpoint to use the agent cache [GH-8875]
agent: protect the metrics proxy behind ACLs [GH-9099]
api: The v1/connect/ca/roots endpoint now accepts a pem=true query parameter and will return a PEM encoded certificate chain of all the certificates that would normally be in the JSON version of the response. [GH-8774]
api: support GetMeta() and GetNamespace() on all config entry kinds [GH-8764]
autopilot: (Enterprise Only) Autopilot now supports using both Redundancy Zones and Automated Upgrades together. [GH-9103]
checks: add health status to the failure message when gRPC healthchecks fail. [GH-8726]
chore: Update to Go 1.15 with mitigation for golang/go#42138 [GH-9036]
command: remove conditional envoy bootstrap generation for versions <=1.10.0 since those are not supported [GH-8855]
connect: The Vault provider will now automatically renew the lease of the token used, if supported. [GH-8560]
connect: add support for specifying load balancing policy in service-resolver [GH-8585]
connect: intentions are now managed as a new config entry kind ""service-intentions"" [GH-8834]
raft: Update raft to v1.2.0 to prevent non-voters from becoming eligible for leader elections and adding peer id as metric label to reduce cardinality in metric names [GH-8822]
server: (Consul Enterprise only) ensure that we also shutdown network segment serf instances on server shutdown [GH-8786]
server: break up Intention.Apply monolithic method [GH-9007]
server: create new memdb table for storing system metadata [GH-8703]
server: make sure that the various replication loggers use consistent logging [GH-8745]
server: remove config entry CAS in legacy intention API bridge code [GH-9151]
snapshot agent: Deregister critical snapshotting TTL check if leadership is transferred.
telemetry: All metrics should be present and available to prometheus scrapers when Consul starts. If any non-deprecated metrics are missing please submit an issue with its name. [GH-9198]
telemetry: add config flag telemetry { disable_compat_1.9 = (true|false) } to disable deprecated metrics in 1.9 [GH-8877]
telemetry: add counter consul.api.http with labels for each HTTP path and method. This is intended to replace consul.http... [GH-8877]
ui: Add the Upstreams and Exposed Paths tabs for services in mesh [GH-9141]
ui: Moves the Proxy health checks to be displayed with the Service health check under the Health Checks tab [GH-9141]
ui: Upstream and downstream services in the topology tab will show a visual indication if a deny intention or intention with L7 policies is configured. [GH-8846]
ui: add dashboard_url_template config option for external dashboard links [GH-9002]
DEPRECATIONS:
Go 1.15 has dropped support for 32-bit binaries for Darwin, so darwin_386 builds will not be available for any 1.9.x+ releases. [GH-9036]
agent: ui, ui_dir and ui_content_path are now deprecated for use in agent configuration files. Use ui_config.{enable, dir, content_path} instead. The command arguments -ui, -ui-dir, and -ui-content-path remain supported. [GH-8694]
telemetry: The measurements in all of the consul.http... prefixed metrics have been migrated to consul.api.http. consul.http... prefixed metrics will be removed in a future version of Consul. [GH-8877]
telemetry: the disable_compat_1.9 config will cover more metrics deprecations in future 1.9 point releases. These metrics will be emitted twice for backwards compatibility - if the flag is true, only the new metric name will be written. [GH-9181]
BUG FIXES:
agent: make the json/hcl decoding of ConnectProxyConfig fully work with CamelCase and snake_case [GH-8741]
agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [GH-8747]
api: Fixed a bug where the Check.GRPCUseTLS field could not be set using snake case. [GH-8771]
autopilot: (Enterprise Only) Previously servers in other zones would not be promoted when all servers in a second zone had failed. Now the actual behavior matches the docs and autopilot will promote a healthy non-voter from any zone to replace failure of an entire zone. [GH-9103]
autopilot: Prevent panic when requesting the autopilot health immediately after a leader is elected. [GH-9204]
command: when generating envoy bootstrap configs use the datacenter returned from the agent services endpoint [GH-9229]
connect: Fixed an issue where the Vault intermediate was not renewed in the primary datacenter. [GH-8784]
connect: fix Vault provider not respecting IntermediateCertTTL [GH-8646]
connect: fix connect sidecars registered via the API not being automatically deregistered with their parent service after an agent restart by persisting the LocallyRegisteredAsSidecar property. [GH-8924]
connect: use stronger validation that ingress gateways have compatible protocols defined for their upstreams [GH-8470]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
raft: (Enterprise only) properly update consul server meta non_voter for non-voting Enterprise Consul servers [GH-8731]
server: skip deleted and deleting namespaces when migrating intentions to config entries [GH-9186]
telemetry: fixed a bug that caused logs to be flooded with [WARN] agent.router: Non-server in server-only area [GH-8685]
ui: show correct datacenter for gateways [GH-8704]"
112,"1.8.6 (November 19, 2020)
SECURITY:

Increase the permissions to read from the /connect/ca/configuration endpoint to operator:write. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with operator:read privileges. CVE-2020-28053 [GH-9240]
","1.8.6 (November 19, 2020)
SECURITY:
Increase the permissions to read from the /connect/ca/configuration endpoint to operator:write. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with operator:read privileges. CVE-2020-28053 [GH-9240]"
113,"1.7.10 (November 19, 2020)
SECURITY:

Increase the permissions to read from the /connect/ca/configuration endpoint to operator:write. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with operator:read privileges. CVE-2020-28053 [GH-9240]
","1.7.10 (November 19, 2020)
SECURITY:
Increase the permissions to read from the /connect/ca/configuration endpoint to operator:write. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with operator:read privileges. CVE-2020-28053 [GH-9240]"
114,"1.6.10 (November 19, 2020)
SECURITY:

Increase the permissions to read from the /connect/ca/configuration endpoint to operator:write. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with operator:read privileges. CVE-2020-28053 [GH-9240]
","1.6.10 (November 19, 2020)
SECURITY:
Increase the permissions to read from the /connect/ca/configuration endpoint to operator:write. Previously Connect CA configuration, including the private key, set via this endpoint could be read back by an operator with operator:read privileges. CVE-2020-28053 [GH-9240]"
115,"1.9.0-rc1 (November 17, 2020)
BREAKING CHANGES:

connect: Update Envoy metrics names and labels for proxy listeners so that attributes like datacenter and namespace can be extracted. [GH-9207]
server: (Enterprise only) Pre-existing intentions defined with
non-existent destination namespaces were non-functional and are erased during
the upgrade process. This should not matter as these intentions had nothing to
enforce. [GH-9186]
server: (OSS only) Pre-existing intentions defined with either a source or
destination namespace value that is not ""default"" are rewritten or deleted
during the upgrade process. Wildcards first attempt to downgrade to ""default""
unless an intention already exists, otherwise these non-functional intentions
are deleted. [GH-9186]

FEATURES:

agent: return the default ACL policy to callers as a header [GH-9101]
autopilot: Added a new consul operator autopilot state command to retrieve and view the Autopilot state from consul. [GH-9142]

IMPROVEMENTS:

agent: All metrics should be present and available to prometheus scrapers when Consul starts. If any non-deprecated metrics are missing please submit an issue with its name. [GH-9198]
server: break up Intention.Apply monolithic method [GH-9007]
server: remove config entry CAS in legacy intention API bridge code [GH-9151]
ui: Add the Upstreams and Exposed Paths tabs for services in mesh [GH-9141]
ui: Moves the Proxy health checks to be displayed with the Service health check under the Health Checks tab [GH-9141]

DEPRECATIONS:

telemetry: the disable_compat_1.9 config will cover more metrics deprecations in future 1.9 point releases. These metrics will be emitted twice for backwards compatibility - if the flag is true, only the new metric name will be written. [GH-9181]

BUG FIXES:

autopilot: Prevent panic when requesting the autopilot health immediately after a leader is elected. [GH-9204]
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
server: skip deleted and deleting namespaces when migrating intentions to config entries [GH-9186]
","1.9.0-rc1 (November 17, 2020)
BREAKING CHANGES:
connect: Update Envoy metrics names and labels for proxy listeners so that attributes like datacenter and namespace can be extracted. [GH-9207]
server: (Enterprise only) Pre-existing intentions defined with
non-existent destination namespaces were non-functional and are erased during
the upgrade process. This should not matter as these intentions had nothing to
enforce. [GH-9186]
server: (OSS only) Pre-existing intentions defined with either a source or
destination namespace value that is not ""default"" are rewritten or deleted
during the upgrade process. Wildcards first attempt to downgrade to ""default""
unless an intention already exists, otherwise these non-functional intentions
are deleted. [GH-9186]
FEATURES:
agent: return the default ACL policy to callers as a header [GH-9101]
autopilot: Added a new consul operator autopilot state command to retrieve and view the Autopilot state from consul. [GH-9142]
IMPROVEMENTS:
agent: All metrics should be present and available to prometheus scrapers when Consul starts. If any non-deprecated metrics are missing please submit an issue with its name. [GH-9198]
server: break up Intention.Apply monolithic method [GH-9007]
server: remove config entry CAS in legacy intention API bridge code [GH-9151]
ui: Add the Upstreams and Exposed Paths tabs for services in mesh [GH-9141]
ui: Moves the Proxy health checks to be displayed with the Service health check under the Health Checks tab [GH-9141]
DEPRECATIONS:
telemetry: the disable_compat_1.9 config will cover more metrics deprecations in future 1.9 point releases. These metrics will be emitted twice for backwards compatibility - if the flag is true, only the new metric name will be written. [GH-9181]
BUG FIXES:
autopilot: Prevent panic when requesting the autopilot health immediately after a leader is elected. [GH-9204]
license: (Enterprise only) Fixed an issue where warnings about Namespaces being unlicensed would be emitted erroneously.
namespace: (Enterprise Only) Fixed a bug that could case snapshot restoration to fail when it contained a namespace marked for deletion while still containing other resources in that namespace. [GH-9156]
namespace: (Enterprise Only) Fixed an issue where namespaced services and checks were not being deleted when the containing namespace was deleted.
server: skip deleted and deleting namespaces when migrating intentions to config entries [GH-9186]"
116,"1.9.0-beta3 (November 10, 2020)
BREAKING CHANGES:

connect: Switch the default gateway port from 443 to 8443 to avoid assumption of Envoy running as root. [GH-9113]
raft: Raft protocol v2 is no longer supported. If currently using protocol v2 then an intermediate upgrade to a version supporting both v2 and v3 protocols will be necessary (1.0.0 - 1.8.x). Note that the Raft protocol configured with the raft_protocol setting and the Consul RPC protocol configured with the protocol setting and output by the consul version command are distinct and supported Consul RPC protocol versions are not altered. [GH-9103]

FEATURES:

autopilot: A new /v1/operator/autopilot/state HTTP API was created to give greater visibility into what autopilot is doing and how it has classified all the servers it is tracking. [GH-9103]

IMPROVEMENTS:

autopilot: (Enterprise Only) Autopilot now supports using both Redundancy Zones and Automated Upgrades together. [GH-9103]
chore: update to Go 1.14.11 with mitigation for golang/go#42138 [GH-9119]

BUG FIXES:

autopilot: (Enterprise Only) Previously servers in other zones would not be promoted when all servers in a second zone had failed. Now the actual behavior matches the docs and autopilot will promote a healthy non-voter from any zone to replace failure of an entire zone. [GH-9103]
","1.9.0-beta3 (November 10, 2020)
BREAKING CHANGES:
connect: Switch the default gateway port from 443 to 8443 to avoid assumption of Envoy running as root. [GH-9113]
raft: Raft protocol v2 is no longer supported. If currently using protocol v2 then an intermediate upgrade to a version supporting both v2 and v3 protocols will be necessary (1.0.0 - 1.8.x). Note that the Raft protocol configured with the raft_protocol setting and the Consul RPC protocol configured with the protocol setting and output by the consul version command are distinct and supported Consul RPC protocol versions are not altered. [GH-9103]
FEATURES:
autopilot: A new /v1/operator/autopilot/state HTTP API was created to give greater visibility into what autopilot is doing and how it has classified all the servers it is tracking. [GH-9103]
IMPROVEMENTS:
autopilot: (Enterprise Only) Autopilot now supports using both Redundancy Zones and Automated Upgrades together. [GH-9103]
chore: update to Go 1.14.11 with mitigation for golang/go#42138 [GH-9119]
BUG FIXES:
autopilot: (Enterprise Only) Previously servers in other zones would not be promoted when all servers in a second zone had failed. Now the actual behavior matches the docs and autopilot will promote a healthy non-voter from any zone to replace failure of an entire zone. [GH-9103]"
117,"1.9.0-beta2 (November 07, 2020)
BREAKING CHANGES:

sentinel: (Consul Enterprise only) update to v0.16.0, which replaces whitelist and blacklist with allowlist and denylist

SECURITY:

Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [CVE-2020-25201] [GH-9024]

FEATURES:

agent: Add a new RPC endpoint for streaming cluster state change events to clients.
telemetry: add initialization and definition for non-expiring key metrics in Prometheus [GH-9088]

IMPROVEMENTS:

agent: add path_allowlist config option to restrict metrics proxy queries [GH-9059]
agent: protect the metrics proxy behind ACLs [GH-9099]
ui: add dashboard_url_template config option for external dashboard links [GH-9002]

BUG FIXES:

api: Fixed a bug where the Check.GRPCUseTLS field could not be set using snake case. [GH-8771]
connect: fix connect sidecars registered via the API not being automatically deregistered with their parent service after an agent restart by persisting the LocallyRegisteredAsSidecar property. [GH-8924]
ui: hide metrics for ingress gateways until full support can be implemented [GH-9081]
ui: only show topology tab for services that exist [GH-9008]
","1.9.0-beta2 (November 07, 2020)
BREAKING CHANGES:
sentinel: (Consul Enterprise only) update to v0.16.0, which replaces whitelist and blacklist with allowlist and denylist
SECURITY:
Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [CVE-2020-25201] [GH-9024]
FEATURES:
agent: Add a new RPC endpoint for streaming cluster state change events to clients.
telemetry: add initialization and definition for non-expiring key metrics in Prometheus [GH-9088]
IMPROVEMENTS:
agent: add path_allowlist config option to restrict metrics proxy queries [GH-9059]
agent: protect the metrics proxy behind ACLs [GH-9099]
ui: add dashboard_url_template config option for external dashboard links [GH-9002]
BUG FIXES:
api: Fixed a bug where the Check.GRPCUseTLS field could not be set using snake case. [GH-8771]
connect: fix connect sidecars registered via the API not being automatically deregistered with their parent service after an agent restart by persisting the LocallyRegisteredAsSidecar property. [GH-8924]
ui: hide metrics for ingress gateways until full support can be implemented [GH-9081]
ui: only show topology tab for services that exist [GH-9008]"
118,"1.7.9 (October 26, 2020)
SECURITY:

Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [CVE-2020-25201] [GH-9024]

IMPROVEMENTS:

connect: update supported envoy releases to 1.13.6, 1.12.7, 1.11.2, 1.10.0 for 1.7.x [GH-9000]

BUG FIXES:

agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [GH-8747]
","1.7.9 (October 26, 2020)
SECURITY:
Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [CVE-2020-25201] [GH-9024]
IMPROVEMENTS:
connect: update supported envoy releases to 1.13.6, 1.12.7, 1.11.2, 1.10.0 for 1.7.x [GH-9000]
BUG FIXES:
agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [GH-8747]"
119,"1.8.5 (October 23, 2020)
SECURITY:

Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [CVE-2020-25201] [GH-9024]

IMPROVEMENTS:

api: The v1/connect/ca/roots endpoint now accepts a pem=true query parameter and will return a PEM encoded certificate chain of
     all the certificates that would normally be in the JSON version of the response. [GH-8774]
connect: The Vault provider will now automatically renew the lease of the token used, if supported. [GH-8560]
connect: update supported envoy releases to 1.14.5, 1.13.6, 1.12.7, 1.11.2 for 1.8.x [GH-8999]

BUG FIXES:

agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [GH-8747]
connect: Fixed an issue where the Vault intermediate was not renewed in the primary datacenter. [GH-8784]
connect: fix Vault provider not respecting IntermediateCertTTL [GH-8646]
connect: fix connect sidecars registered via the API not being automatically deregistered with their parent service after an agent restart by persisting the LocallyRegisteredAsSidecar property. [GH-8924]
fixed a bug that caused logs to be flooded with [WARN] agent.router: Non-server in server-only area [GH-8685]
ui: show correct datacenter for gateways [GH-8704]
","1.8.5 (October 23, 2020)
SECURITY:
Fix Consul Enterprise Namespace Config Entry Replication DoS. Previously an operator with service:write ACL permissions in a Consul Enterprise cluster could write a malicious config entry that caused infinite raft writes due to issues with the namespace replication logic. [CVE-2020-25201] [GH-9024]
IMPROVEMENTS:
api: The v1/connect/ca/roots endpoint now accepts a pem=true query parameter and will return a PEM encoded certificate chain of
     all the certificates that would normally be in the JSON version of the response. [GH-8774]
connect: The Vault provider will now automatically renew the lease of the token used, if supported. [GH-8560]
connect: update supported envoy releases to 1.14.5, 1.13.6, 1.12.7, 1.11.2 for 1.8.x [GH-8999]
BUG FIXES:
agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [GH-8747]
connect: Fixed an issue where the Vault intermediate was not renewed in the primary datacenter. [GH-8784]
connect: fix Vault provider not respecting IntermediateCertTTL [GH-8646]
connect: fix connect sidecars registered via the API not being automatically deregistered with their parent service after an agent restart by persisting the LocallyRegisteredAsSidecar property. [GH-8924]
fixed a bug that caused logs to be flooded with [WARN] agent.router: Non-server in server-only area [GH-8685]
ui: show correct datacenter for gateways [GH-8704]"
120,"1.9.0-beta1 (October 12, 2020)
BREAKING CHANGES:

agent: The enable_central_service_config option now defaults to true. [GH-8746]
connect: intention destinations can no longer be renamed [GH-8834]
xds: Drop support for Envoy versions 1.12.0, 1.12.1, 1.12.2, and 1.13.0, due to a lack of support for url_path in RBAC. [GH-8839]

FEATURES:

agent: Allow client agents to be configured with an advertised reconnect timeout to control how long until the nodes are reaped by others in the cluster. [GH-8781]
agent: moved ui config options to a new ui_config stanza in agent configuration and added new options to display service metrics in the UI. [GH-8694]
cli: update snapshot inspect command to provide more detailed snapshot data [GH-8787]
connect: intentions are now managed as a new config entry kind ""service-intentions"" [GH-8834]
connect: support defining intentions using layer 7 criteria [GH-8839]
server: create new memdb table for storing system metadata [GH-8703]
telemetry: track node and service counts and emit them as metrics [GH-8603]
ui: If Prometheus is being used for monitoring the sidecars, the topology view can be configured to display overview metrics for the services. [GH-8858]
ui: Services using Connect with Envoy sidecars have a topology tab in the UI showing their upstream and downstream services. [GH-8788]
xds: use envoy's rbac filter to handle intentions entirely within envoy [GH-8569]

IMPROVEMENTS:

agent: Return HTTP 429 when connections per clients limit (limits.http_max_conns_per_client) has been reached GH-7527. [GH-8221]
agent: add config flag telemetry { disable_compat_1.9 = (true|false) } to disable deprecated metrics in 1.9 [GH-8877]
agent: add counter consul.api.http with labels for each HTTP path and method. This is intended to replace consul.http... [GH-8877]
agent: allow the /v1/connect/intentions/match endpoint to use the agent cache [GH-8875]
api: The v1/connect/ca/roots endpoint now accepts a pem=true query parameter and will return a PEM encoded certificate chain of
     all the certificates that would normally be in the JSON version of the response. [GH-8774]
api: support GetMeta() and GetNamespace() on all config entry kinds [GH-8764]
checks: add health status to the failure message when gRPC healthchecks fail. [GH-8726]
command: remove conditional envoy bootstrap generation for versions <=1.10.0 since those are not supported [GH-8855]
connect: The Vault provider will now automatically renew the lease of the token used, if supported. [GH-8560]
connect: add support for specifying load balancing policy in service-resolver [GH-8585]
deps: Update raft to v1.2.0 to prevent non-voters from becoming eligible for leader elections and adding peer id as metric label to reduce cardinality in metric names [GH-8822]
server: (Consul Enterprise only) ensure that we also shutdown network segment serf instances on server shutdown [GH-8786]
server: make sure that the various replication loggers use consistent logging [GH-8745]
snapshot agent: Deregister critical snapshotting TTL check if leadership is transferred.
ui: Upstream and downstream services in the topology tab will show a visual indication if a deny intention or intention with L7 policies is configured. [GH-8846]

DEPRECATIONS:

agent: The measurements in all of the consul.http... prefixed metrics have been migrated to consul.api.http. consul.http... prefixed metrics will be removed in a future version of Consul. [GH-8877]
agent: ui, ui_dir and ui_content_path are now deprecated for use in agent configuration files. Use ui_config.{enable, dir, content_path} instead. The command arguments -ui, -ui-dir, and -ui-content-path remain supported. [GH-8694]

BUG FIXES:

agent: make the json/hcl decoding of ConnectProxyConfig fully work with CamelCase and snake_case [GH-8741]
agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [GH-8747]
connect: Fixed an issue where the Vault intermediate was not renewed in the primary datacenter. [GH-8784]
connect: fix Vault provider not respecting IntermediateCertTTL [GH-8646]
connect: use stronger validation that ingress gateways have compatible protocols defined for their upstreams [GH-8470]
fixed a bug that caused logs to be flooded with [WARN] agent.router: Non-server in server-only area [GH-8685]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
raft: (Enterprise only) properly update consul server meta non_voter for non-voting Enterprise Consul servers [GH-8731]
ui: show correct datacenter for gateways [GH-8704]
","1.9.0-beta1 (October 12, 2020)
BREAKING CHANGES:
agent: The enable_central_service_config option now defaults to true. [GH-8746]
connect: intention destinations can no longer be renamed [GH-8834]
xds: Drop support for Envoy versions 1.12.0, 1.12.1, 1.12.2, and 1.13.0, due to a lack of support for url_path in RBAC. [GH-8839]
FEATURES:
agent: Allow client agents to be configured with an advertised reconnect timeout to control how long until the nodes are reaped by others in the cluster. [GH-8781]
agent: moved ui config options to a new ui_config stanza in agent configuration and added new options to display service metrics in the UI. [GH-8694]
cli: update snapshot inspect command to provide more detailed snapshot data [GH-8787]
connect: intentions are now managed as a new config entry kind ""service-intentions"" [GH-8834]
connect: support defining intentions using layer 7 criteria [GH-8839]
server: create new memdb table for storing system metadata [GH-8703]
telemetry: track node and service counts and emit them as metrics [GH-8603]
ui: If Prometheus is being used for monitoring the sidecars, the topology view can be configured to display overview metrics for the services. [GH-8858]
ui: Services using Connect with Envoy sidecars have a topology tab in the UI showing their upstream and downstream services. [GH-8788]
xds: use envoy's rbac filter to handle intentions entirely within envoy [GH-8569]
IMPROVEMENTS:
agent: Return HTTP 429 when connections per clients limit (limits.http_max_conns_per_client) has been reached GH-7527. [GH-8221]
agent: add config flag telemetry { disable_compat_1.9 = (true|false) } to disable deprecated metrics in 1.9 [GH-8877]
agent: add counter consul.api.http with labels for each HTTP path and method. This is intended to replace consul.http... [GH-8877]
agent: allow the /v1/connect/intentions/match endpoint to use the agent cache [GH-8875]
api: The v1/connect/ca/roots endpoint now accepts a pem=true query parameter and will return a PEM encoded certificate chain of
     all the certificates that would normally be in the JSON version of the response. [GH-8774]
api: support GetMeta() and GetNamespace() on all config entry kinds [GH-8764]
checks: add health status to the failure message when gRPC healthchecks fail. [GH-8726]
command: remove conditional envoy bootstrap generation for versions <=1.10.0 since those are not supported [GH-8855]
connect: The Vault provider will now automatically renew the lease of the token used, if supported. [GH-8560]
connect: add support for specifying load balancing policy in service-resolver [GH-8585]
deps: Update raft to v1.2.0 to prevent non-voters from becoming eligible for leader elections and adding peer id as metric label to reduce cardinality in metric names [GH-8822]
server: (Consul Enterprise only) ensure that we also shutdown network segment serf instances on server shutdown [GH-8786]
server: make sure that the various replication loggers use consistent logging [GH-8745]
snapshot agent: Deregister critical snapshotting TTL check if leadership is transferred.
ui: Upstream and downstream services in the topology tab will show a visual indication if a deny intention or intention with L7 policies is configured. [GH-8846]
DEPRECATIONS:
agent: The measurements in all of the consul.http... prefixed metrics have been migrated to consul.api.http. consul.http... prefixed metrics will be removed in a future version of Consul. [GH-8877]
agent: ui, ui_dir and ui_content_path are now deprecated for use in agent configuration files. Use ui_config.{enable, dir, content_path} instead. The command arguments -ui, -ui-dir, and -ui-content-path remain supported. [GH-8694]
BUG FIXES:
agent: make the json/hcl decoding of ConnectProxyConfig fully work with CamelCase and snake_case [GH-8741]
agent: when enable_central_service_config is enabled ensure agent reload doesn't revert check state to critical [GH-8747]
connect: Fixed an issue where the Vault intermediate was not renewed in the primary datacenter. [GH-8784]
connect: fix Vault provider not respecting IntermediateCertTTL [GH-8646]
connect: use stronger validation that ingress gateways have compatible protocols defined for their upstreams [GH-8470]
fixed a bug that caused logs to be flooded with [WARN] agent.router: Non-server in server-only area [GH-8685]
license: (Enterprise only) Fixed an issue where the UI would see Namespaces and SSO as licensed when they were not.
raft: (Enterprise only) properly update consul server meta non_voter for non-voting Enterprise Consul servers [GH-8731]
ui: show correct datacenter for gateways [GH-8704]"
121,"1.8.4 (September 11, 2020)
FEATURES:

agent: expose the list of supported envoy versions on /v1/agent/self [GH-8545]
cache: Config parameters for cache throttling are now reloaded automatically on agent reload. Restarting the agent is not needed anymore. [GH-8552]
connect: all config entries pick up a meta field [GH-8596]

IMPROVEMENTS:

api: Added ACLMode method to the AgentMember type to determine what ACL mode the agent is operating in. [GH-8575]
api: Added IsConsulServer method to the AgentMember type to easily determine whether the agent is a server. [GH-8575]
api: Added constants for common tag keys and values in the Tags field of the AgentMember struct. [GH-8575]
api: Allow for the client to use TLS over a Unix domain socket. [GH-8602]
api: GET v1/operator/keyring also lists primary keys. [GH-8522]
connect: Add support for http2 and grpc to ingress gateways [GH-8458]
serf: update to v0.9.4 which supports primary keys in the ListKeys operation. [GH-8522]

BUGFIXES:

[backport/1.8.x] connect: use stronger validation that ingress gateways have compatible protocols defined for their upstreams [GH-8494]
agent: ensure that we normalize bootstrapped config entries [GH-8547]
api: Fixed a panic caused by an api request with Connect=null [GH-8537]
connect: connect envoy command now respects the -ca-path flag [GH-8606]
connect: fix bug in preventing some namespaced config entry modifications [GH-8601]
connect: fix renewing secondary intermediate certificates [GH-8588]
ui: fixed a bug related to in-folder KV creation GH-8613
","1.8.4 (September 11, 2020)
FEATURES:
agent: expose the list of supported envoy versions on /v1/agent/self [GH-8545]
cache: Config parameters for cache throttling are now reloaded automatically on agent reload. Restarting the agent is not needed anymore. [GH-8552]
connect: all config entries pick up a meta field [GH-8596]
IMPROVEMENTS:
api: Added ACLMode method to the AgentMember type to determine what ACL mode the agent is operating in. [GH-8575]
api: Added IsConsulServer method to the AgentMember type to easily determine whether the agent is a server. [GH-8575]
api: Added constants for common tag keys and values in the Tags field of the AgentMember struct. [GH-8575]
api: Allow for the client to use TLS over a Unix domain socket. [GH-8602]
api: GET v1/operator/keyring also lists primary keys. [GH-8522]
connect: Add support for http2 and grpc to ingress gateways [GH-8458]
serf: update to v0.9.4 which supports primary keys in the ListKeys operation. [GH-8522]
BUGFIXES:
[backport/1.8.x] connect: use stronger validation that ingress gateways have compatible protocols defined for their upstreams [GH-8494]
agent: ensure that we normalize bootstrapped config entries [GH-8547]
api: Fixed a panic caused by an api request with Connect=null [GH-8537]
connect: connect envoy command now respects the -ca-path flag [GH-8606]
connect: fix bug in preventing some namespaced config entry modifications [GH-8601]
connect: fix renewing secondary intermediate certificates [GH-8588]
ui: fixed a bug related to in-folder KV creation GH-8613"
122,"1.7.8 (September 11, 2020)
FEATURES:

agent: expose the list of supported envoy versions on /v1/agent/self [GH-8545]

BUG FIXES:

connect: fix bug in preventing some namespaced config entry modifications [GH-8601]
api: fixed a panic caused by an api request with Connect=null [GH-8537]
","1.7.8 (September 11, 2020)
FEATURES:
agent: expose the list of supported envoy versions on /v1/agent/self [GH-8545]
BUG FIXES:
connect: fix bug in preventing some namespaced config entry modifications [GH-8601]
api: fixed a panic caused by an api request with Connect=null [GH-8537]"
123,"1.6.9 (September 11, 2020)
BUG FIXES:

api: fixed a panic caused by an api request with Connect=null [GH-8537]
","1.6.9 (September 11, 2020)
BUG FIXES:
api: fixed a panic caused by an api request with Connect=null [GH-8537]"
124,"1.8.3 (August 12, 2020)
BUGFIXES:

[backport/1.8.x] catalog: fixed a bug where nodes, services, and checks would not be restored with the correct Create/ModifyIndex when restoring from a snapshot GH-8485
[backport/1.8.x] vendor: update github.com/armon/go-metrics to v0.3.4 GH-8478
connect: (Consul Enterprise only) Fixed a regression that prevented mesh gateways from routing to services in their local datacenter that reside outside of the default namespace.
","1.8.3 (August 12, 2020)
BUGFIXES:
[backport/1.8.x] catalog: fixed a bug where nodes, services, and checks would not be restored with the correct Create/ModifyIndex when restoring from a snapshot GH-8485
[backport/1.8.x] vendor: update github.com/armon/go-metrics to v0.3.4 GH-8478
connect: (Consul Enterprise only) Fixed a regression that prevented mesh gateways from routing to services in their local datacenter that reside outside of the default namespace."
125,"1.7.7 (August 12, 2020)
BUG FIXES:
* [backport/1.7.x] catalog: fixed a bug where nodes, services, and checks would not be restored with the correct Create/ModifyIndex when restoring from a snapshot [GH-8485]
* [backport/1.7.x] vendor: update github.com/armon/go-metrics to v0.3.4 [GH-8478]
* [backport/1.7.x] xds: revert setting set_node_on_first_message_only to true when generating envoy bootstrap config [GH-8441]","1.7.7 (August 12, 2020)
BUG FIXES:
* [backport/1.7.x] catalog: fixed a bug where nodes, services, and checks would not be restored with the correct Create/ModifyIndex when restoring from a snapshot [GH-8485]
* [backport/1.7.x] vendor: update github.com/armon/go-metrics to v0.3.4 [GH-8478]
* [backport/1.7.x] xds: revert setting set_node_on_first_message_only to true when generating envoy bootstrap config [GH-8441]"
126,"1.6.8 (August 12, 2020)
BUG FIXES:

vendor: update github.com/armon/go-metrics to v0.3.4 [GH-8478]
","1.6.8 (August 12, 2020)
BUG FIXES:
vendor: update github.com/armon/go-metrics to v0.3.4 [GH-8478]"
127,"1.8.2 (August 07, 2020)
BUGFIXES:

auto_config: Fixed an issue where auto-config could be enabled in secondary DCs without enabling token replication when ACLs were enabled. [GH-8451]
xds: revert setting set_node_on_first_message_only to true when generating envoy bootstrap config [GH-8440]
","1.8.2 (August 07, 2020)
BUGFIXES:
auto_config: Fixed an issue where auto-config could be enabled in secondary DCs without enabling token replication when ACLs were enabled. [GH-8451]
xds: revert setting set_node_on_first_message_only to true when generating envoy bootstrap config [GH-8440]"
128,"1.7.6 (August 07, 2020)
BUG FIXES:

[backport/1.7.x] xds: revert setting set_node_on_first_message_only to true when generating envoy bootstrap config [GH-8441]
","1.7.6 (August 07, 2020)
BUG FIXES:
[backport/1.7.x] xds: revert setting set_node_on_first_message_only to true when generating envoy bootstrap config [GH-8441]"
129,"1.8.1 (July 30, 2020)
FEATURES: 

acl: Added ACL Node Identities for easier creation of Consul Agent tokens. [GH-7970]
agent: Added Consul client agent automatic configuration utilizing JWTs for authorizing the request to generate ACL tokens, TLS certificates and retrieval of the gossip encryption key. [GH-8003], [GH-8035], [GH-8086], [GH-8148], [GH-8157], [GH-8159], [GH-8193], [GH-8253], [GH-8301], [GH-8360], [GH-8362], [GH-8363], [GH-8364], [GH-8409]

IMPROVEMENTS:

acl: allow auth methods created in the primary datacenter to optionally create global tokens [GH-7899]
agent: Allow to restrict servers that can join a given Serf Consul cluster. [GH-7628]
agent: new configuration options allow ratelimiting of the agent-cache: cache.entry_fetch_rate and cache.entry_fetch_max_burst. [GH-8226]
cli: Output message on success when writing/deleting config entries. [GH-7806]
connect: Append port number to expected ingress hosts [GH-8190]
dns: Improve RCODE of response when query targets a non-existent datacenter. [GH-8102],[GH-8218]
version: The version CLI subcommand was altered to always show the git revision the binary was built from on the second line of output. Additionally the command gained a -format flag with the option now of outputting the version information in JSON form. NOTE This change has the potential to break any parsing done by users of the version commands output. In many cases nothing will need to be done but it is possible depending on how the output is parsed. [GH-8268]

BUGFIXES:

agent: Fixed a bug where Consul could crash when verify_outgoing was set to true but no client certificate was used. [GH-8211]
agent: Fixed an issue with lock contention during RPCs when under load while using the Prometheus metrics sink. [GH-8372]
auto_encrypt: Fixed an issue where auto encrypt certificate signing wasn't using the connect signing rate limiter. [GH-8211]
auto_encrypt: Fixed several issues around retrieving the first TLS certificate where it would have the wrong CN and SANs. This was being masked by a second bug (also fixed) causing that certificate to immediately be discarded with a second certificate request being made afterwards. [GH-8211]
auto_encrypt: Fixed an issue that caused auto encrypt certificates to not be updated properly if the agents token was changed and the old token was deleted. [GH-8311]
connect: fix crash that would result if a mesh or terminating gateway's upstream has a hostname as an address and no healthy service instances available [GH-8158]
connect: Fixed issue where specifying a prometheus bind address would cause ingress gateways to fail to start up [GH-8371]
gossip: Avoid issue where two unique leave events for the same node could lead to infinite rebroadcast storms [GH-8343]
snapshot: (Consul Enterprise only) Fixed a regression when using Azure blob storage.
xds: version sniff envoy and switch regular expressions from 'regex' to 'safe_regex' on newer envoy versions [GH-8265]
","1.8.1 (July 30, 2020)
FEATURES: 
acl: Added ACL Node Identities for easier creation of Consul Agent tokens. [GH-7970]
agent: Added Consul client agent automatic configuration utilizing JWTs for authorizing the request to generate ACL tokens, TLS certificates and retrieval of the gossip encryption key. [GH-8003], [GH-8035], [GH-8086], [GH-8148], [GH-8157], [GH-8159], [GH-8193], [GH-8253], [GH-8301], [GH-8360], [GH-8362], [GH-8363], [GH-8364], [GH-8409]
IMPROVEMENTS:
acl: allow auth methods created in the primary datacenter to optionally create global tokens [GH-7899]
agent: Allow to restrict servers that can join a given Serf Consul cluster. [GH-7628]
agent: new configuration options allow ratelimiting of the agent-cache: cache.entry_fetch_rate and cache.entry_fetch_max_burst. [GH-8226]
cli: Output message on success when writing/deleting config entries. [GH-7806]
connect: Append port number to expected ingress hosts [GH-8190]
dns: Improve RCODE of response when query targets a non-existent datacenter. [GH-8102],[GH-8218]
version: The version CLI subcommand was altered to always show the git revision the binary was built from on the second line of output. Additionally the command gained a -format flag with the option now of outputting the version information in JSON form. NOTE This change has the potential to break any parsing done by users of the version commands output. In many cases nothing will need to be done but it is possible depending on how the output is parsed. [GH-8268]
BUGFIXES:
agent: Fixed a bug where Consul could crash when verify_outgoing was set to true but no client certificate was used. [GH-8211]
agent: Fixed an issue with lock contention during RPCs when under load while using the Prometheus metrics sink. [GH-8372]
auto_encrypt: Fixed an issue where auto encrypt certificate signing wasn't using the connect signing rate limiter. [GH-8211]
auto_encrypt: Fixed several issues around retrieving the first TLS certificate where it would have the wrong CN and SANs. This was being masked by a second bug (also fixed) causing that certificate to immediately be discarded with a second certificate request being made afterwards. [GH-8211]
auto_encrypt: Fixed an issue that caused auto encrypt certificates to not be updated properly if the agents token was changed and the old token was deleted. [GH-8311]
connect: fix crash that would result if a mesh or terminating gateway's upstream has a hostname as an address and no healthy service instances available [GH-8158]
connect: Fixed issue where specifying a prometheus bind address would cause ingress gateways to fail to start up [GH-8371]
gossip: Avoid issue where two unique leave events for the same node could lead to infinite rebroadcast storms [GH-8343]
snapshot: (Consul Enterprise only) Fixed a regression when using Azure blob storage.
xds: version sniff envoy and switch regular expressions from 'regex' to 'safe_regex' on newer envoy versions [GH-8265]"
130,"1.7.5 (July 30, 2020)
BUG FIXES:

agent: Fixed an issue with lock contention during RPCs when under load while using the Prometheus metrics sink. [GH-8372]
gossip: Avoid issue where two unique leave events for the same node could lead to infinite rebroadcast storms [GH-8353]
snapshot: (Consul Enterprise only) Fixed a regression when using Azure blob storage.
Return a service splitter's weight or a zero [GH-8355]
","1.7.5 (July 30, 2020)
BUG FIXES:
agent: Fixed an issue with lock contention during RPCs when under load while using the Prometheus metrics sink. [GH-8372]
gossip: Avoid issue where two unique leave events for the same node could lead to infinite rebroadcast storms [GH-8353]
snapshot: (Consul Enterprise only) Fixed a regression when using Azure blob storage.
Return a service splitter's weight or a zero [GH-8355]"
131,"1.6.7 (July 30, 2020)
BUG FIXES:

agent: Fixed an issue with lock contention during RPCs when under load while using the Prometheus metrics sink. [GH-8372]
gossip: Avoid issue where two unique leave events for the same node could lead to infinite rebroadcast storms [GH-8345]
","1.6.7 (July 30, 2020)
BUG FIXES:
agent: Fixed an issue with lock contention during RPCs when under load while using the Prometheus metrics sink. [GH-8372]
gossip: Avoid issue where two unique leave events for the same node could lead to infinite rebroadcast storms [GH-8345]"
132,"1.8.0 (June 18, 2020)
BREAKING CHANGES:
* acl: Remove deprecated acl_enforce_version_8 option [GH-7991]
FEATURES:

Terminating Gateway: Envoy can now be run as a gateway to enable services in a Consul service mesh to connect to external services through their local proxy. Terminating gateways unlock several of the benefits of a service mesh in the cases where a sidecar proxy cannot be deployed alongside services such as legacy applications or managed cloud databases.
Ingress Gateway: Envoy can now be run as a gateway to ingress traffic into the Consul service mesh, enabling a more incremental transition for applications.
WAN Federation over Mesh Gateways: Allows Consul datacenters to federate by forwarding WAN gossip and RPC traffic through Mesh Gateways rather than requiring the servers to be exposed to the WAN directly.
JSON Web Token (JWT) Auth Method: Allows exchanging a signed JWT from a trusted external identity provider for a Consul ACL token.
Single Sign-On (SSO) [Enterprise]: Lets an operator configure Consul to use an external OpenID Connect (OIDC) provider to automatically handle the lifecycle of creating, distributing and managing ACL tokens for performing CLI operations or accessing the UI. 

Audit Logging [Enterprise]: Adds instrumentation to record a trail of events (both attempted and authorized) by users of Consul’s HTTP API for purposes of regulatory compliance.


acl: add DisplayName field to auth methods [GH-7769]

acl: add MaxTokenTTL field to auth methods [GH-7779]
agent/xds: add support for configuring passive health checks [GH-7713]
cli: Add -config flag to ""acl authmethod update/create"" [GH-7776]
ui: Help menu to provide further documentation/learn links [GH-7310]
ui: (Consul Enterprise only) SSO support [GH-7742] [GH-7771] [GH-7790]
ui: Support for termininating and ingress gateways [GH-7858] [GH-7865]

IMPROVEMENTS:

acl: change authmethod.Validator to take a logger [GH-7758]
agent: show warning when enable_script_checks is enabled without safety net [GH-7437]
api: Added filtering support to the v1/connect/intentions endpoint. [GH-7478]
auto_encrypt: add validations for auto_encrypt.{tls,allow_tls} [GH-7704]
build: switched to compile with Go 1.14.1 [GH-7481]
config: validate system limits against limits.http_max_conns_per_client [GH-7434]
connect: support envoy 1.12.3, 1.13.1, and 1.14.1. Envoy 1.10 is no longer officially supported. [GH-7380],[GH-7624]
connect: add DNSSAN and IPSAN to cache key for ConnectCALeafRequest [GH-7597]
connect: Added a new expose CLI command for ingress gateways [GH-8099]
license: (Consul Enterprise only) Update licensing to align with the current modules licensing structure.
logging: catch problems with the log destination earlier by creating the file immediately [GH-7469]
proxycfg: support path exposed with non-HTTP2 protocol [GH-7510]
tls: remove old ciphers [GH-7282]
ui: Show the last 8 characters of AccessorIDs in listing views [GH-7327]
ui: Make all tabs within the UI linkable/bookmarkable and include in history [GH-7592]
ui: Redesign of all service pages [GH-7605] [GH-7632] [GH-7655] [GH-7683]
ui: Show intentions per individual service [GH-7615]
ui: Improved login/logout flow [GH-7790]
ui: Revert search to search as you type, add sort control for the service listing page [GH-7489]
ui: Omit proxy services from the service listing view and mark services as being proxied [GH-7820]
ui: Display proxies in a proxy info tab with the service instance detail page [GH-7745]
ui: Add live updates/blocking queries to gateway listings [GH-7967]
ui: Improved 'empty states'  [GH-7940]
ui: Add ability to sort services based on health  [GH-7989]
ui: Add explanatory tooltip panels for gateway services [GH-8048]
ui: Reduce discovery-chain log errors [GH-8065]

BUGFIXES:

agent: (Consul Enterprise only) Fixed several bugs related to Network Area and Network Segment compatibility with other features caused by incorrectly doing version or serf tag checking. [GH-7491]
agent: rewrite checks with proxy address, not local service address [GH-7518]
agent: Preserve ModifyIndex for unchanged entry in KV transaciton [GH-7832]
agent: use default resolver scheme for gRPC dialing [GH-7617]
cache: Fix go routine leak in the agent cache. [GH-8092]
cli: enable TLS when CONSUL_HTTP_ADDR has an https scheme [GH-7608]
connect: Internal refactoring to allow Connect proxy config to contain lists of structured configuration [GH-7963][GH-7964]
license: (Consul Enterprise only) Fixed a bug that would cause a license reset request to only be applied on the leader server.
sdk: Fix race condition in freeport [GH-7567]
server: strip local ACL tokens from RPCs during forwarding if crossing datacenters [GH-7419]
ui: Quote service names when filtering intentions to prevent 500 errors when accessing a service [GH-7896] [GH-7888]
ui: Miscellaneous amends for Safari and Firefox [GH-7904] [GH-7907]
ui: Ensure a value is always passed to CONSUL_SSO_ENABLED [GH-7913]
","1.8.0 (June 18, 2020)
BREAKING CHANGES:
* acl: Remove deprecated acl_enforce_version_8 option [GH-7991]
FEATURES:
Terminating Gateway: Envoy can now be run as a gateway to enable services in a Consul service mesh to connect to external services through their local proxy. Terminating gateways unlock several of the benefits of a service mesh in the cases where a sidecar proxy cannot be deployed alongside services such as legacy applications or managed cloud databases.
Ingress Gateway: Envoy can now be run as a gateway to ingress traffic into the Consul service mesh, enabling a more incremental transition for applications.
WAN Federation over Mesh Gateways: Allows Consul datacenters to federate by forwarding WAN gossip and RPC traffic through Mesh Gateways rather than requiring the servers to be exposed to the WAN directly.
JSON Web Token (JWT) Auth Method: Allows exchanging a signed JWT from a trusted external identity provider for a Consul ACL token.
Single Sign-On (SSO) [Enterprise]: Lets an operator configure Consul to use an external OpenID Connect (OIDC) provider to automatically handle the lifecycle of creating, distributing and managing ACL tokens for performing CLI operations or accessing the UI. 
Audit Logging [Enterprise]: Adds instrumentation to record a trail of events (both attempted and authorized) by users of Consul’s HTTP API for purposes of regulatory compliance.
acl: add DisplayName field to auth methods [GH-7769]
acl: add MaxTokenTTL field to auth methods [GH-7779]
agent/xds: add support for configuring passive health checks [GH-7713]
cli: Add -config flag to ""acl authmethod update/create"" [GH-7776]
ui: Help menu to provide further documentation/learn links [GH-7310]
ui: (Consul Enterprise only) SSO support [GH-7742] [GH-7771] [GH-7790]
ui: Support for termininating and ingress gateways [GH-7858] [GH-7865]
IMPROVEMENTS:
acl: change authmethod.Validator to take a logger [GH-7758]
agent: show warning when enable_script_checks is enabled without safety net [GH-7437]
api: Added filtering support to the v1/connect/intentions endpoint. [GH-7478]
auto_encrypt: add validations for auto_encrypt.{tls,allow_tls} [GH-7704]
build: switched to compile with Go 1.14.1 [GH-7481]
config: validate system limits against limits.http_max_conns_per_client [GH-7434]
connect: support envoy 1.12.3, 1.13.1, and 1.14.1. Envoy 1.10 is no longer officially supported. [GH-7380],[GH-7624]
connect: add DNSSAN and IPSAN to cache key for ConnectCALeafRequest [GH-7597]
connect: Added a new expose CLI command for ingress gateways [GH-8099]
license: (Consul Enterprise only) Update licensing to align with the current modules licensing structure.
logging: catch problems with the log destination earlier by creating the file immediately [GH-7469]
proxycfg: support path exposed with non-HTTP2 protocol [GH-7510]
tls: remove old ciphers [GH-7282]
ui: Show the last 8 characters of AccessorIDs in listing views [GH-7327]
ui: Make all tabs within the UI linkable/bookmarkable and include in history [GH-7592]
ui: Redesign of all service pages [GH-7605] [GH-7632] [GH-7655] [GH-7683]
ui: Show intentions per individual service [GH-7615]
ui: Improved login/logout flow [GH-7790]
ui: Revert search to search as you type, add sort control for the service listing page [GH-7489]
ui: Omit proxy services from the service listing view and mark services as being proxied [GH-7820]
ui: Display proxies in a proxy info tab with the service instance detail page [GH-7745]
ui: Add live updates/blocking queries to gateway listings [GH-7967]
ui: Improved 'empty states'  [GH-7940]
ui: Add ability to sort services based on health  [GH-7989]
ui: Add explanatory tooltip panels for gateway services [GH-8048]
ui: Reduce discovery-chain log errors [GH-8065]
BUGFIXES:
agent: (Consul Enterprise only) Fixed several bugs related to Network Area and Network Segment compatibility with other features caused by incorrectly doing version or serf tag checking. [GH-7491]
agent: rewrite checks with proxy address, not local service address [GH-7518]
agent: Preserve ModifyIndex for unchanged entry in KV transaciton [GH-7832]
agent: use default resolver scheme for gRPC dialing [GH-7617]
cache: Fix go routine leak in the agent cache. [GH-8092]
cli: enable TLS when CONSUL_HTTP_ADDR has an https scheme [GH-7608]
connect: Internal refactoring to allow Connect proxy config to contain lists of structured configuration [GH-7963][GH-7964]
license: (Consul Enterprise only) Fixed a bug that would cause a license reset request to only be applied on the leader server.
sdk: Fix race condition in freeport [GH-7567]
server: strip local ACL tokens from RPCs during forwarding if crossing datacenters [GH-7419]
ui: Quote service names when filtering intentions to prevent 500 errors when accessing a service [GH-7896] [GH-7888]
ui: Miscellaneous amends for Safari and Firefox [GH-7904] [GH-7907]
ui: Ensure a value is always passed to CONSUL_SSO_ENABLED [GH-7913]"
133,"1.8.0-rc1 (June 15, 2020)
BREAKING CHANGES:

acl: Remove deprecated acl_enforce_version_8 option [GH-7991]

IMPROVEMENTS:

ui: Add live updates/blocking queries to gateway listings [GH-7967]
ui: Improved 'empty states'  [GH-7940]
ui: Add ability to sort services based on health  [GH-7989]
ui: Add explanatory tooltip panels for gateway services [GH-8048]
ui: Reduce discovery-chain log errors [GH-8065]
connect: Enable mesh and terminating gateways to resolve hostnames to IPv4 addresses using system resolver [GH-7999]
connect: Always require Host headers when serving L7 traffic through ingress gateways [GH-7990]
connect: Allow users to specify wildcard host for ingress when TLS is disabled [GH-8083]
connect: New end point to return healthy ingress gateway instances [GH-8081]
connect: Added a new expose CLI command for ingress gateways [GH-8099]

BUG FIXES:

cache: Fix go routine leak in the agent cache. [GH-8092]
connect: Internal refactoring to allow Connect proxy config to contain lists of structured configuration [GH-7963][GH-7964]
connect: Handle re-bootstrapping scenario for WAN federation over mesh gateways. [GH-7931]
server: don't activate federation state replication or anti-entropy until all servers are running 1.8.0 [GH-8014]
","1.8.0-rc1 (June 15, 2020)
BREAKING CHANGES:
acl: Remove deprecated acl_enforce_version_8 option [GH-7991]
IMPROVEMENTS:
ui: Add live updates/blocking queries to gateway listings [GH-7967]
ui: Improved 'empty states'  [GH-7940]
ui: Add ability to sort services based on health  [GH-7989]
ui: Add explanatory tooltip panels for gateway services [GH-8048]
ui: Reduce discovery-chain log errors [GH-8065]
connect: Enable mesh and terminating gateways to resolve hostnames to IPv4 addresses using system resolver [GH-7999]
connect: Always require Host headers when serving L7 traffic through ingress gateways [GH-7990]
connect: Allow users to specify wildcard host for ingress when TLS is disabled [GH-8083]
connect: New end point to return healthy ingress gateway instances [GH-8081]
connect: Added a new expose CLI command for ingress gateways [GH-8099]
BUG FIXES:
cache: Fix go routine leak in the agent cache. [GH-8092]
connect: Internal refactoring to allow Connect proxy config to contain lists of structured configuration [GH-7963][GH-7964]
connect: Handle re-bootstrapping scenario for WAN federation over mesh gateways. [GH-7931]
server: don't activate federation state replication or anti-entropy until all servers are running 1.8.0 [GH-8014]"
134,"1.7.4 (June 10, 2020)
SECURITY:

Adding an option http_config.use_cache to disable agent caching for http endpoints, because Consul’s DNS and HTTP API expose a caching feature susceptible to DoS. CVE-2020-13250 [GH-8023]
Propagate and enforce changes to legacy ACL tokens rules in secondary data centers. CVE-2020-12797 [GH-8047]
Only resolve local acl token in the datacenter it belongs to. CVE-2020-13170 [GH-8068]
Requiring service:write permissions, a service-router entry without a destination no longer crashes Consul servers. CVE-2020-12758 [GH-7783]

BUG FIXES:

acl: Fixed an issue where legacy management tokens could not be used in secondary datacenters. [GH-7908]
agent: Fixed a race condition that could cause an agent to crash when first starting. [GH-7955]
connect: setup intermediate_pki_path on secondary when using vault [GH-8001]
","1.7.4 (June 10, 2020)
SECURITY:
Adding an option http_config.use_cache to disable agent caching for http endpoints, because Consul’s DNS and HTTP API expose a caching feature susceptible to DoS. CVE-2020-13250 [GH-8023]
Propagate and enforce changes to legacy ACL tokens rules in secondary data centers. CVE-2020-12797 [GH-8047]
Only resolve local acl token in the datacenter it belongs to. CVE-2020-13170 [GH-8068]
Requiring service:write permissions, a service-router entry without a destination no longer crashes Consul servers. CVE-2020-12758 [GH-7783]
BUG FIXES:
acl: Fixed an issue where legacy management tokens could not be used in secondary datacenters. [GH-7908]
agent: Fixed a race condition that could cause an agent to crash when first starting. [GH-7955]
connect: setup intermediate_pki_path on secondary when using vault [GH-8001]"
135,"1.6.6 (June 10, 2020)
SECURITY:

Adding an option http_config.use_cache to disable agent caching for http endpoints, because Consul’s DNS and HTTP API expose a caching feature susceptible to DoS. CVE-2020-13250 [GH-8023]
Propagate and enforce changes to legacy ACL tokens rules in secondary data centers. CVE-2020-12797 [GH-8047]
Only resolve local acl token in the datacenter it belongs to. CVE-2020-13170 [GH-8068]

BUG FIXES:

acl: Fixed an issue where legacy management tokens could not be used in secondary datacenters. [GH-7908]
agent: Fixed a race condition that could cause an agent to crash when first starting. [GH-7955]
","1.6.6 (June 10, 2020)
SECURITY:
Adding an option http_config.use_cache to disable agent caching for http endpoints, because Consul’s DNS and HTTP API expose a caching feature susceptible to DoS. CVE-2020-13250 [GH-8023]
Propagate and enforce changes to legacy ACL tokens rules in secondary data centers. CVE-2020-12797 [GH-8047]
Only resolve local acl token in the datacenter it belongs to. CVE-2020-13170 [GH-8068]
BUG FIXES:
acl: Fixed an issue where legacy management tokens could not be used in secondary datacenters. [GH-7908]
agent: Fixed a race condition that could cause an agent to crash when first starting. [GH-7955]"
136,"1.8.0-beta2 (May 21, 2020)
IMPROVEMENTS:

xds: Ingress gateways now respect the same binding options as mesh and terminating gateways [GH-7924]

BUGFIXES:

xds: Fixed bug where deleting a gateway config entry did not correctly remove xDS configuration from the envoy proxy [GH-7898]
ui: Quote service names when filtering intentions to prevent 500 errors when accessing a service [GH-7896] [GH-7888]
ui: Miscellaneous amends for Safari and Firefox [GH-7904] [GH-7907]
ui: Ensure a value is always passed to CONSUL_SSO_ENABLED [GH-7913]
agent: Preserve ModifyIndex for unchanged entry in KV transaciton [GH-7832]
agent: use default resolver scheme for gRPC dialing [GH-7617]
","1.8.0-beta2 (May 21, 2020)
IMPROVEMENTS:
xds: Ingress gateways now respect the same binding options as mesh and terminating gateways [GH-7924]
BUGFIXES:
xds: Fixed bug where deleting a gateway config entry did not correctly remove xDS configuration from the envoy proxy [GH-7898]
ui: Quote service names when filtering intentions to prevent 500 errors when accessing a service [GH-7896] [GH-7888]
ui: Miscellaneous amends for Safari and Firefox [GH-7904] [GH-7907]
ui: Ensure a value is always passed to CONSUL_SSO_ENABLED [GH-7913]
agent: Preserve ModifyIndex for unchanged entry in KV transaciton [GH-7832]
agent: use default resolver scheme for gRPC dialing [GH-7617]"
137,"1.8.0-beta1 (May 14, 2020)
FEATURES:

Terminating Gateway: Envoy can now be run as a gateway to enable services in a Consul service mesh to connect to external services through their local proxy. Terminating gateways unlock several of the benefits of a service mesh in the cases where a sidecar proxy cannot be deployed alongside services such as legacy applications or managed cloud databases.
Ingress Gateway: Envoy can now be run as a gateway to ingress traffic into the Consul service mesh, enabling a more incremental transition for applications.
WAN Federation over Mesh Gateways: Allows Consul datacenters to federate by forwarding WAN gossip and RPC traffic through Mesh Gateways rather than requiring the servers to be exposed to the WAN directly.
JSON Web Token (JWT) Auth Method: Allows exchanging a signed JWT from a trusted external identity provider for a Consul ACL token.
Single Sign-On (SSO) [Enterprise]: Lets an operator configure Consul to use an external OpenID Connect (OIDC) provider to automatically handle the lifecycle of creating, distributing and managing ACL tokens for performing CLI operations or accessing the UI. 

Audit Logging [Enterprise]: Adds instrumentation to record a trail of events (both attempted and authorized) by users of Consul’s HTTP API for purposes of regulatory compliance.


acl: add DisplayName field to auth methods [GH-7769]

acl: add MaxTokenTTL field to auth methods [GH-7779]
agent/xds: add support for configuring passive health checks [GH-7713]
cli: Add -config flag to ""acl authmethod update/create"" [GH-7776]
ui: Help menu to provide further documentation/learn links [GH-7310]
ui: (Consul Enterprise only) SSO support [GH-7742] [GH-7771] [GH-7790]
ui: Support for termininating and ingress gateways [GH-7858] [GH-7865]

IMPROVEMENTS:

acl: change authmethod.Validator to take a logger [GH-7758]
agent: show warning when enable_script_checks is enabled without safety net [GH-7437]
api: Added filtering support to the v1/connect/intentions endpoint. [GH-7478]
auto_encrypt: add validations for auto_encrypt.{tls,allow_tls} [GH-7704]
build: switched to compile with Go 1.14.1 [GH-7481]
config: validate system limits against limits.http_max_conns_per_client [GH-7434]
connect: support envoy 1.12.3, 1.13.1, and 1.14.1. Envoy 1.10 is no longer officially supported. [GH-7380],[GH-7624]
connect: add DNSSAN and IPSAN to cache key for ConnectCALeafRequest [GH-7597]
license: (Consul Enterprise only) Update licensing to align with the current modules licensing structure.
logging: catch problems with the log destination earlier by creating the file immediately [GH-7469]
proxycfg: support path exposed with non-HTTP2 protocol [GH-7510]
tls: remove old ciphers [GH-7282]
ui: Show the last 8 characters of AccessorIDs in listing views [GH-7327]
ui: Make all tabs within the UI linkable/bookmarkable and include in history [GH-7592]
ui: Redesign of all service pages [GH-7605] [GH-7632] [GH-7655] [GH-7683]
ui: Show intentions per individual service [GH-7615]
ui: Improved login/logout flow [GH-7790]
ui: Revert search to search as you type, add sort control for the service listing page [GH-7489]
ui: Omit proxy services from the service listing view and mark services as being proxied [GH-7820]
ui: Display proxies in a proxy info tab with the service instance detail page [GH-7745]

BUGFIXES:

agent: (Consul Enterprise only) Fixed several bugs related to Network Area and Network Segment compatibility with other features caused by incorrectly doing version or serf tag checking. [GH-7491]
agent: rewrite checks with proxy address, not local service address [GH-7518]
cli: enable TLS when CONSUL_HTTP_ADDR has an https scheme [GH-7608]
license: (Consul Enterprise only) Fixed a bug that would cause a license reset request to only be applied on the leader server.
sdk: Fix race condition in freeport [GH-7567]
server: strip local ACL tokens from RPCs during forwarding if crossing datacenters [GH-7419]
","1.8.0-beta1 (May 14, 2020)
FEATURES:
Terminating Gateway: Envoy can now be run as a gateway to enable services in a Consul service mesh to connect to external services through their local proxy. Terminating gateways unlock several of the benefits of a service mesh in the cases where a sidecar proxy cannot be deployed alongside services such as legacy applications or managed cloud databases.
Ingress Gateway: Envoy can now be run as a gateway to ingress traffic into the Consul service mesh, enabling a more incremental transition for applications.
WAN Federation over Mesh Gateways: Allows Consul datacenters to federate by forwarding WAN gossip and RPC traffic through Mesh Gateways rather than requiring the servers to be exposed to the WAN directly.
JSON Web Token (JWT) Auth Method: Allows exchanging a signed JWT from a trusted external identity provider for a Consul ACL token.
Single Sign-On (SSO) [Enterprise]: Lets an operator configure Consul to use an external OpenID Connect (OIDC) provider to automatically handle the lifecycle of creating, distributing and managing ACL tokens for performing CLI operations or accessing the UI. 
Audit Logging [Enterprise]: Adds instrumentation to record a trail of events (both attempted and authorized) by users of Consul’s HTTP API for purposes of regulatory compliance.
acl: add DisplayName field to auth methods [GH-7769]
acl: add MaxTokenTTL field to auth methods [GH-7779]
agent/xds: add support for configuring passive health checks [GH-7713]
cli: Add -config flag to ""acl authmethod update/create"" [GH-7776]
ui: Help menu to provide further documentation/learn links [GH-7310]
ui: (Consul Enterprise only) SSO support [GH-7742] [GH-7771] [GH-7790]
ui: Support for termininating and ingress gateways [GH-7858] [GH-7865]
IMPROVEMENTS:
acl: change authmethod.Validator to take a logger [GH-7758]
agent: show warning when enable_script_checks is enabled without safety net [GH-7437]
api: Added filtering support to the v1/connect/intentions endpoint. [GH-7478]
auto_encrypt: add validations for auto_encrypt.{tls,allow_tls} [GH-7704]
build: switched to compile with Go 1.14.1 [GH-7481]
config: validate system limits against limits.http_max_conns_per_client [GH-7434]
connect: support envoy 1.12.3, 1.13.1, and 1.14.1. Envoy 1.10 is no longer officially supported. [GH-7380],[GH-7624]
connect: add DNSSAN and IPSAN to cache key for ConnectCALeafRequest [GH-7597]
license: (Consul Enterprise only) Update licensing to align with the current modules licensing structure.
logging: catch problems with the log destination earlier by creating the file immediately [GH-7469]
proxycfg: support path exposed with non-HTTP2 protocol [GH-7510]
tls: remove old ciphers [GH-7282]
ui: Show the last 8 characters of AccessorIDs in listing views [GH-7327]
ui: Make all tabs within the UI linkable/bookmarkable and include in history [GH-7592]
ui: Redesign of all service pages [GH-7605] [GH-7632] [GH-7655] [GH-7683]
ui: Show intentions per individual service [GH-7615]
ui: Improved login/logout flow [GH-7790]
ui: Revert search to search as you type, add sort control for the service listing page [GH-7489]
ui: Omit proxy services from the service listing view and mark services as being proxied [GH-7820]
ui: Display proxies in a proxy info tab with the service instance detail page [GH-7745]
BUGFIXES:
agent: (Consul Enterprise only) Fixed several bugs related to Network Area and Network Segment compatibility with other features caused by incorrectly doing version or serf tag checking. [GH-7491]
agent: rewrite checks with proxy address, not local service address [GH-7518]
cli: enable TLS when CONSUL_HTTP_ADDR has an https scheme [GH-7608]
license: (Consul Enterprise only) Fixed a bug that would cause a license reset request to only be applied on the leader server.
sdk: Fix race condition in freeport [GH-7567]
server: strip local ACL tokens from RPCs during forwarding if crossing datacenters [GH-7419]"
